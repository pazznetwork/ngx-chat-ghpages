var z$=Object.defineProperty,du=Object.getOwnPropertySymbols,AE=Object.prototype.hasOwnProperty,RE=Object.prototype.propertyIsEnumerable,IE=(w,T,g)=>T in w?z$(w,T,{enumerable:!0,configurable:!0,writable:!0,value:g}):w[T]=g,PE=(w,T)=>{for(var g in T||(T={}))AE.call(T,g)&&IE(w,g,T[g]);if(du)for(var g of du(T))RE.call(T,g)&&IE(w,g,T[g]);return w},OE=(w,T)=>{var g={};for(var v in w)AE.call(w,v)&&T.indexOf(v)<0&&(g[v]=w[v]);if(null!=w&&du)for(var v of du(w))T.indexOf(v)<0&&RE.call(w,v)&&(g[v]=w[v]);return g};(self.webpackChunkngx_chat_xmpp_shell=self.webpackChunkngx_chat_xmpp_shell||[]).push([[179],{1803:(w,T,g)=>{"use strict";function v(n){return"function"==typeof n}let D=!1;const C={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else D&&console.log("RxJS: Back to a better error behavior. Thank you. <3");D=n},get useDeprecatedSynchronousErrorHandling(){return D}};function p(n){setTimeout(()=>{throw n},0)}const m={closed:!0,next(n){},error(n){if(C.useDeprecatedSynchronousErrorHandling)throw n;p(n)},complete(){}},E=Array.isArray||(n=>n&&"number"==typeof n.length);function L(n){return null!==n&&"object"==typeof n}const P=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,r)=>`${r+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class M{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof M)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(v(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(o){e=o instanceof P?S(o.errors):[o]}}if(E(s)){let o=-1,a=s.length;for(;++o<a;){const c=s[o];if(L(c))try{c.unsubscribe()}catch(l){e=e||[],l instanceof P?e=e.concat(S(l.errors)):e.push(l)}}}if(e)throw new P(e)}add(e){let t=e;if(!e)return M.EMPTY;switch(typeof e){case"function":t=new M(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof M)){const s=t;t=new M,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=t;if(null===r)t._parentOrParents=this;else if(r instanceof M){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t}remove(e){const t=this._subscriptions;if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}}var n;function S(n){return n.reduce((e,t)=>e.concat(t instanceof P?t.errors:t),[])}M.EMPTY=((n=new M).closed=!0,n);const _="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class F extends M{constructor(e,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=m;break;case 1:if(!e){this.destination=m;break}if("object"==typeof e){e instanceof F?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new Q(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new Q(this,e,t,r)}}[_](){return this}static create(e,t,r){const i=new F(e,t,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class Q extends F{constructor(e,t,r,i){super(),this._parentSubscriber=e;let s,o=this;v(t)?s=t:t&&(s=t.next,r=t.error,i=t.complete,t!==m&&(o=Object.create(t),v(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;C.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=C;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):p(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;p(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);C.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),C.useDeprecatedSynchronousErrorHandling)throw r;p(r)}}__tryOrSetError(e,t,r){if(!C.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(i){return C.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(p(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const Qe="function"==typeof Symbol&&Symbol.observable||"@@observable";function z(n){return n}let W=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const{operator:s}=this,o=function le(n,e,t){if(n){if(n instanceof F)return n;if(n[_])return n[_]()}return n||e||t?new F(n,e,t):new F(m)}(t,r,i);if(o.add(s?s.call(o,this.source):this.source||C.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),C.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){C.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),function ge(n){for(;n;){const{closed:e,destination:t,isStopped:r}=n;if(e||r)return!1;n=t&&t instanceof F?t:null}return!0}(t)?t.error(r):console.warn(r)}}forEach(t,r){return new(r=ue(r))((i,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})}_subscribe(t){const{source:r}=this;return r&&r.subscribe(t)}[Qe](){return this}pipe(...t){return 0===t.length?this:function G(n){return 0===n.length?z:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=ue(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function ue(n){if(n||(n=C.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const oe=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class Xe extends M{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}class $e extends F{constructor(e){super(e),this.destination=e}}let ie=(()=>{class n extends W{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[_](){return new $e(this)}lift(t){const r=new Ft(this,this);return r.operator=t,r}next(t){if(this.closed)throw new oe;if(!this.isStopped){const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].next(t)}}error(t){if(this.closed)throw new oe;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new oe;this.isStopped=!0;const{observers:t}=this,r=t.length,i=t.slice();for(let s=0;s<r;s++)i[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new oe;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new oe;return this.hasError?(t.error(this.thrownError),M.EMPTY):this.isStopped?(t.complete(),M.EMPTY):(this.observers.push(t),new Xe(this,t))}asObservable(){const t=new W;return t.source=this,t}}return n.create=(e,t)=>new Ft(e,t),n})();class Ft extends ie{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):M.EMPTY}}function Jt(n){return n&&"function"==typeof n.schedule}function pe(n,e){return function(r){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Bi(n,e))}}class Bi{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new $i(e,this.project,this.thisArg))}}class $i extends F{constructor(e,t,r){super(e),this.project=t,this.count=0,this.thisArg=r||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Je=n=>e=>{for(let t=0,r=n.length;t<r&&!e.closed;t++)e.next(n[t]);e.complete()},vr=function Hi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),qa=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ug(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const hu=n=>{if(n&&"function"==typeof n[Qe])return(n=>e=>{const t=n[Qe]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(qa(n))return Je(n);if(ug(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,p),e))(n);if(n&&"function"==typeof n[vr])return(n=>e=>{const t=n[vr]();for(;;){let r;try{r=t.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${L(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function fu(n,e){return new W(t=>{const r=new M;let i=0;return r.add(e.schedule(function(){i!==n.length?(t.next(n[i++]),t.closed||r.add(this.schedule())):t.complete()})),r})}function jt(n,e){return e?function jE(n,e){if(null!=n){if(function LE(n){return n&&"function"==typeof n[Qe]}(n))return function NE(n,e){return new W(t=>{const r=new M;return r.add(e.schedule(()=>{const i=n[Qe]();r.add(i.subscribe({next(s){r.add(e.schedule(()=>t.next(s)))},error(s){r.add(e.schedule(()=>t.error(s)))},complete(){r.add(e.schedule(()=>t.complete()))}}))})),r})}(n,e);if(ug(n))return function kE(n,e){return new W(t=>{const r=new M;return r.add(e.schedule(()=>n.then(i=>{r.add(e.schedule(()=>{t.next(i),r.add(e.schedule(()=>t.complete()))}))},i=>{r.add(e.schedule(()=>t.error(i)))}))),r})}(n,e);if(qa(n))return fu(n,e);if(function VE(n){return n&&"function"==typeof n[vr]}(n)||"string"==typeof n)return function FE(n,e){if(!n)throw new Error("Iterable cannot be null");return new W(t=>{const r=new M;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=n[vr](),r.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=i.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),r})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof W?n:new W(hu(n))}class zi extends F{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Gi extends F{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Wi(n,e){if(e.closed)return;if(n instanceof W)return n.subscribe(e);let t;try{t=hu(n)(e)}catch(r){e.error(r)}return t}function Pt(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(Pt((i,s)=>jt(n(i,s)).pipe(pe((o,a)=>e(i,o,s,a))),t)):("number"==typeof e&&(t=e),r=>r.lift(new BE(n,t)))}class BE{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new $E(e,this.project,this.concurrent))}}class $E extends Gi{constructor(e,t,r=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t)}_innerSub(e){const t=new zi(this),r=this.destination;r.add(t);const i=Wi(e,t);i!==t&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function mo(n=Number.POSITIVE_INFINITY){return Pt(z,n)}function pu(n,e){return e?fu(n,e):new W(Je(n))}function gu(...n){let e=Number.POSITIVE_INFINITY,t=null,r=n[n.length-1];return Jt(r)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof r&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof W?n[0]:mo(e)(pu(n,t))}function mu(){return function(e){return e.lift(new UE(e))}}class UE{constructor(e){this.connectable=e}call(e,t){const{connectable:r}=this;r._refCount++;const i=new HE(e,r),s=t.subscribe(i);return i.closed||(i.connection=r.connect()),s}}class HE extends F{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class dg extends W{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new M,e.add(this.source.subscribe(new zE(this.getSubject(),this))),e.closed&&(this._connection=null,e=M.EMPTY)),e}refCount(){return mu()(this)}}const qE=(()=>{const n=dg.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class zE extends $e{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class QE{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:r}=this,i=this.subjectFactory(),s=r(i).subscribe(e);return s.add(t.subscribe(i)),s}}function JE(){return new ie}function hg(){return n=>mu()(function WE(n,e){return function(r){let i;if(i="function"==typeof n?n:function(){return n},"function"==typeof e)return r.lift(new QE(i,e));const s=Object.create(r,qE);return s.source=r,s.subjectFactory=i,s}}(JE)(n))}function Ke(n){for(let e in n)if(n[e]===Ke)return e;throw Error("Could not find renamed property on target object.")}function yu(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function He(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(He).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function vu(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const KE=Ke({__forward_ref__:Ke});function et(n){return n.__forward_ref__=et,n.toString=function(){return He(this())},n}function Te(n){return fg(n)?n():n}function fg(n){return"function"==typeof n&&n.hasOwnProperty(KE)&&n.__forward_ref__===et}class ne extends Error{constructor(e,t){super(function _u(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function be(n){return"string"==typeof n?n:null==n?"":String(n)}function Lt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():be(n)}function za(n,e){const t=e?` in ${e}`:"";throw new ne(-201,`No provider for ${Lt(n)} found${t}`)}function gn(n,e){null==n&&function Ye(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function ce(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Bt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Cu(n){return pg(n,Ga)||pg(n,mg)}function pg(n,e){return n.hasOwnProperty(e)?n[e]:null}function gg(n){return n&&(n.hasOwnProperty(bu)||n.hasOwnProperty(r0))?n[bu]:null}const Ga=Ke({\u0275prov:Ke}),bu=Ke({\u0275inj:Ke}),mg=Ke({ngInjectableDef:Ke}),r0=Ke({ngInjectorDef:Ke});var Ce=(()=>((Ce=Ce||{})[Ce.Default=0]="Default",Ce[Ce.Host=1]="Host",Ce[Ce.Self=2]="Self",Ce[Ce.SkipSelf=4]="SkipSelf",Ce[Ce.Optional=8]="Optional",Ce))();let wu;function Br(n){const e=wu;return wu=n,e}function yg(n,e,t){const r=Cu(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ce.Optional?null:void 0!==e?e:void za(He(n),"Injector")}function $r(n){return{toString:n}.toString()}var $n=(()=>(($n=$n||{})[$n.OnPush=0]="OnPush",$n[$n.Default=1]="Default",$n))(),Un=(()=>(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(Un||(Un={})),Un))();const o0="undefined"!=typeof globalThis&&globalThis,a0="undefined"!=typeof window&&window,c0="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,We=o0||"undefined"!=typeof global&&global||a0||c0,Qi={},Ze=[],Wa=Ke({\u0275cmp:Ke}),Du=Ke({\u0275dir:Ke}),Su=Ke({\u0275pipe:Ke}),vg=Ke({\u0275mod:Ke}),Cr=Ke({\u0275fac:Ke}),yo=Ke({__NG_ELEMENT_ID__:Ke});let l0=0;function rt(n){return $r(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===$n.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Ze,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Un.Emulated,id:"c",styles:n.styles||Ze,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=l0++,r.inputs=wg(n.inputs,t),r.outputs=wg(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(_g):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(Cg):null,r})}function _g(n){return $t(n)||function Ur(n){return n[Du]||null}(n)}function Cg(n){return function gi(n){return n[Su]||null}(n)}const bg={};function Kt(n){return $r(()=>{const e={type:n.type,bootstrap:n.bootstrap||Ze,declarations:n.declarations||Ze,imports:n.imports||Ze,exports:n.exports||Ze,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(bg[n.id]=n.type),e})}function wg(n,e){if(null==n)return Qi;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const he=rt;function cn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function $t(n){return n[Wa]||null}function xn(n,e){const t=n[vg]||null;if(!t&&!0===e)throw new Error(`Type ${He(n)} does not have '\u0275mod' property.`);return t}function nr(n){return Array.isArray(n)&&"object"==typeof n[1]}function qn(n){return Array.isArray(n)&&!0===n[1]}function Tu(n){return 0!=(8&n.flags)}function Ya(n){return 2==(2&n.flags)}function Za(n){return 1==(1&n.flags)}function zn(n){return null!==n.template}function g0(n){return 0!=(512&n[2])}function _i(n,e){return n.hasOwnProperty(Cr)?n[Cr]:null}class v0{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Yt(){return Sg}function Sg(n){return n.type.prototype.ngOnChanges&&(n.setInput=C0),_0}function _0(){const n=Mg(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Qi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function C0(n,e,t,r){const i=Mg(n)||function b0(n,e){return n[Eg]=e}(n,{previous:Qi,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],c=o[a];s[a]=new v0(c&&c.currentValue,e,o===Qi),n[r]=e}Yt.ngInherit=!0;const Eg="__ngSimpleChanges__";function Mg(n){return n[Eg]||null}let Pu;function Ou(){return void 0!==Pu?Pu:"undefined"!=typeof document?document:void 0}function dt(n){return!!n.listen}const Tg={createRenderer:(n,e)=>Ou()};function _t(n){for(;Array.isArray(n);)n=n[0];return n}function Xa(n,e){return _t(e[n])}function Rn(n,e){return _t(e[n.index])}function Nu(n,e){return n.data[e]}function Xi(n,e){return n[e]}function yn(n,e){const t=e[n];return nr(t)?t:t[0]}function xg(n){return 4==(4&n[2])}function ku(n){return 128==(128&n[2])}function Hr(n,e){return null==e?null:n[e]}function Ig(n){n[18]=0}function Fu(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const we={lFrame:Vg(null),bindingsEnabled:!0};function Rg(){return we.bindingsEnabled}function q(){return we.lFrame.lView}function Ve(){return we.lFrame.tView}function Re(n){return we.lFrame.contextLView=n,n[8]}function Mt(){let n=Pg();for(;null!==n&&64===n.type;)n=n.parent;return n}function Pg(){return we.lFrame.currentTNode}function rr(n,e){const t=we.lFrame;t.currentTNode=n,t.isParent=e}function Lu(){return we.lFrame.isParent}function Vu(){we.lFrame.isParent=!1}function Zt(){const n=we.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function es(){return we.lFrame.bindingIndex++}function wr(n){const e=we.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function V0(n,e){const t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,ju(e)}function ju(n){we.lFrame.currentDirectiveIndex=n}function kg(){return we.lFrame.currentQueryIndex}function $u(n){we.lFrame.currentQueryIndex=n}function B0(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Fg(n,e,t){if(t&Ce.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Ce.Host||(i=B0(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=we.lFrame=Lg();return r.currentTNode=e,r.lView=n,!0}function tc(n){const e=Lg(),t=n[1];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Lg(){const n=we.lFrame,e=null===n?null:n.child;return null===e?Vg(n):e}function Vg(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function jg(){const n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Bg=jg;function nc(){const n=jg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Xt(){return we.lFrame.selectedIndex}function qr(n){we.lFrame.selectedIndex=n}function ht(){const n=we.lFrame;return Nu(n.tView,n.selectedIndex)}function rc(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function ic(n,e,t){$g(n,e,3,t)}function sc(n,e,t,r){(3&n[2])===t&&$g(n,e,t,r)}function Uu(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function $g(n,e,t,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(J0(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function J0(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class wo{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function oc(n,e,t){const r=dt(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],c=t[i++];r?n.setAttribute(e,a,c,o):e.setAttributeNS(o,a,c)}else{const o=s,a=t[++i];qu(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Ug(n){return 3===n||4===n||6===n}function qu(n){return 64===n.charCodeAt(0)}function ac(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Hg(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Hg(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function qg(n){return-1!==n}function ts(n){return 32767&n}function ns(n,e){let t=function eM(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let zu=!0;function cc(n){const e=zu;return zu=n,e}let tM=0;function So(n,e){const t=Wu(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Gu(r.data,n),Gu(e,null),Gu(r.blueprint,null));const i=lc(n,e),s=n.injectorIndex;if(qg(i)){const o=ts(i),a=ns(i,e),c=a[1].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Gu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Wu(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function lc(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function uc(n,e,t){!function nM(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(yo)&&(r=t[yo]),null==r&&(r=t[yo]=tM++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function Wg(n,e,t){if(t&Ce.Optional)return n;za(e,"NodeInjector")}function Qg(n,e,t,r){if(t&Ce.Optional&&void 0===r&&(r=null),0==(t&(Ce.Self|Ce.Host))){const i=n[9],s=Br(void 0);try{return i?i.get(e,r,t&Ce.Optional):yg(e,r,t&Ce.Optional)}finally{Br(s)}}return Wg(r,e,t)}function Jg(n,e,t,r=Ce.Default,i){if(null!==n){const s=function oM(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(yo)?n[yo]:void 0;return"number"==typeof e?e>=0?255&e:iM:e}(t);if("function"==typeof s){if(!Fg(e,n,r))return r&Ce.Host?Wg(i,t,r):Qg(e,t,r,i);try{const o=s(r);if(null!=o||r&Ce.Optional)return o;za(t)}finally{Bg()}}else if("number"==typeof s){let o=null,a=Wu(n,e),c=-1,l=r&Ce.Host?e[16][6]:null;for((-1===a||r&Ce.SkipSelf)&&(c=-1===a?lc(n,e):e[a+8],-1!==c&&Zg(r,!1)?(o=e[1],a=ts(c),e=ns(c,e)):a=-1);-1!==a;){const u=e[1];if(Yg(s,a,u.data)){const d=sM(a,e,t,o,r,l);if(d!==Kg)return d}c=e[a+8],-1!==c&&Zg(r,e[1].data[a+8]===l)&&Yg(s,a,e)?(o=u,a=ts(c),e=ns(c,e)):a=-1}}}return Qg(e,t,r,i)}const Kg={};function iM(){return new rs(Mt(),q())}function sM(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],u=dc(a,o,t,null==r?Ya(a)&&zu:r!=o&&0!=(3&a.type),i&Ce.Host&&s===a);return null!==u?Eo(e,o,u,a):Kg}function dc(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,h=i?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const y=o[f];if(f<c&&t===y||f>=c&&y.type===t)return f}if(i){const f=o[c];if(f&&zn(f)&&f.type===t)return c}return null}function Eo(n,e,t,r){let i=n[t];const s=e.data;if(function K0(n){return n instanceof wo}(i)){const o=i;o.resolving&&function YE(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ne(-200,`Circular dependency in DI detected for ${n}${t}`)}(Lt(s[t]));const a=cc(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Br(o.injectImpl):null;Fg(n,r,Ce.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function Q0(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Sg(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&Br(c),cc(a),o.resolving=!1,Bg()}}return i}function Yg(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Zg(n,e){return!(n&Ce.Self||n&Ce.Host&&e)}class rs{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Jg(this._tNode,this._lView,e,r,t)}}function Ht(n){return $r(()=>{const e=n.prototype.constructor,t=e[Cr]||Qu(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Cr]||Qu(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Qu(n){return fg(n)?()=>{const e=Qu(Te(n));return e&&e()}:_i(n)}const ss="__parameters__";function as(n,e,t){return $r(()=>{const r=function Ju(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,l,u){const d=c.hasOwnProperty(ss)?c[ss]:Object.defineProperty(c,ss,{value:[]})[ss];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class _e{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ce({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const cM=new _e("AnalyzeForEntryComponents");function Pn(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),Pn(r,e)):e!==n&&e.push(r)}return e}function ir(n,e){n.forEach(t=>Array.isArray(t)?ir(t,e):e(t))}function em(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function hc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Io(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function vn(n,e,t){let r=cs(n,e);return r>=0?n[1|r]=t:(r=~r,function dM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Yu(n,e){const t=cs(n,e);if(t>=0)return n[1|t]}function cs(n,e){return function rm(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Ao={},Xu="__NG_DI_FLAG__",pc="ngTempTokenPath",vM=/\n/gm,sm="__source",CM=Ke({provide:String,useValue:Ke});let Ro;function om(n){const e=Ro;return Ro=n,e}function bM(n,e=Ce.Default){if(void 0===Ro)throw new ne(203,"");return null===Ro?yg(n,void 0,e):Ro.get(n,e&Ce.Optional?null:void 0,e)}function X(n,e=Ce.Default){return(function s0(){return wu}()||bM)(Te(n),e)}const wM=X;function ed(n){const e=[];for(let t=0;t<n.length;t++){const r=Te(n[t]);if(Array.isArray(r)){if(0===r.length)throw new ne(900,"");let i,s=Ce.Default;for(let o=0;o<r.length;o++){const a=r[o],c=DM(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(X(i,s))}else e.push(X(r))}return e}function Po(n,e){return n[Xu]=e,n.prototype[Xu]=e,n}function DM(n){return n[Xu]}const gc=Po(as("Inject",n=>({token:n})),-1),Gr=Po(as("Optional"),8),Oo=Po(as("SkipSelf"),4);let yc,vc;function us(n){var e;return(null===(e=function nd(){if(void 0===yc&&(yc=null,We.trustedTypes))try{yc=We.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return yc}())||void 0===e?void 0:e.createHTML(n))||n}function hm(n){var e;return(null===(e=function rd(){if(void 0===vc&&(vc=null,We.trustedTypes))try{vc=We.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return vc}())||void 0===e?void 0:e.createHTML(n))||n}class gm{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Wr(n){return n instanceof gm?n.changingThisBreaksApplicationSecurity:n}function ko(n,e){const t=function $M(n){return n instanceof gm&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class UM{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(us(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class HM{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=us(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=us(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const o=t.item(i).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const zM=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,GM=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function _c(n){return(n=String(n)).match(zM)||n.match(GM)?n:"unsafe:"+n}function ym(n){return(n=String(n)).split(",").map(e=>_c(e.trim())).join(", ")}function sr(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Fo(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const vm=sr("area,br,col,hr,img,wbr"),_m=sr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Cm=sr("rp,rt"),id=Fo(vm,Fo(_m,sr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fo(Cm,sr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Fo(Cm,_m)),sd=sr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),od=sr("srcset"),bm=Fo(sd,od,sr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),WM=sr("script,style,template");class QM{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!id.hasOwnProperty(t))return this.sanitizedSomething=!0,!WM.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!bm.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;sd[a]&&(c=_c(c)),od[a]&&(c=ym(c)),this.buf.push(" ",o,'="',wm(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();id.hasOwnProperty(t)&&!vm.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(wm(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const JM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,KM=/([^\#-~ |!])/g;function wm(n){return n.replace(/&/g,"&amp;").replace(JM,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(KM,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cc;function ad(n){return"content"in n&&function ZM(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ct=(()=>((Ct=Ct||{})[Ct.NONE=0]="NONE",Ct[Ct.HTML=1]="HTML",Ct[Ct.STYLE=2]="STYLE",Ct[Ct.SCRIPT=3]="SCRIPT",Ct[Ct.URL=4]="URL",Ct[Ct.RESOURCE_URL=5]="RESOURCE_URL",Ct))();function Dm(n){const e=Vo();return e?hm(e.sanitize(Ct.HTML,n)||""):ko(n,"HTML")?hm(Wr(n)):function YM(n,e){let t=null;try{Cc=Cc||function mm(n){const e=new HM(n);return function qM(){try{return!!(new window.DOMParser).parseFromString(us(""),"text/html")}catch(n){return!1}}()?new UM(e):e}(n);let r=e?String(e):"";t=Cc.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Cc.getInertBodyElement(r)}while(r!==s);return us((new QM).sanitizeChildren(ad(t)||t))}finally{if(t){const r=ad(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}(Ou(),be(n))}function Lo(n){const e=Vo();return e?e.sanitize(Ct.URL,n)||"":ko(n,"URL")?Wr(n):_c(be(n))}function Vo(){const n=q();return n&&n[12]}const Mm="__ngContext__";function qt(n,e){n[Mm]=e}function ld(n){const e=function jo(n){return n[Mm]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function dd(n){return n.ngOriginalError}function pT(n,...e){n.error(...e)}class Bo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=function fT(n){return n&&n.ngErrorLogger||pT}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&dd(e);for(;t&&dd(t);)t=dd(t);return t||null}}const ST=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(We))();function or(n){return n instanceof Function?n():n}var _n=(()=>((_n=_n||{})[_n.Important=1]="Important",_n[_n.DashCase=2]="DashCase",_n))();function fd(n,e){return undefined(n,e)}function $o(n){const e=n[3];return qn(e)?e[3]:e}function pd(n){return km(n[13])}function gd(n){return km(n[4])}function km(n){for(;null!==n&&!qn(n);)n=n[4];return n}function hs(n,e,t,r,i){if(null!=r){let s,o=!1;qn(r)?s=r:nr(r)&&(o=!0,r=r[0]);const a=_t(r);0===n&&null!==t?null==i?$m(e,t,a):Ci(e,t,a,i||null,!0):1===n&&null!==t?Ci(e,t,a,i||null,!0):2===n?function Qm(n,e,t){const r=bc(n,e);r&&function VT(n,e,t,r){dt(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function $T(n,e,t,r,i){const s=t[7];s!==_t(t)&&hs(e,n,r,s,i);for(let a=10;a<t.length;a++){const c=t[a];Uo(c[1],c,n,e,r,s)}}(e,n,s,t,i)}}function yd(n,e,t){if(dt(n))return n.createElement(e,t);{const r=null!==t?function E0(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?n.createElement(e):n.createElementNS(r,e)}}function Lm(n,e){const t=n[9],r=t.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Fu(i,-1)),t.splice(r,1)}function vd(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&Lm(i,r),e>0&&(n[t-1][4]=r[4]);const s=hc(n,10+e);!function AT(n,e){Uo(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Vm(n,e){if(!(256&e[2])){const t=e[11];dt(t)&&t.destroyNode&&Uo(n,e,t,3,null,null),function OT(n){let e=n[13];if(!e)return _d(n[1],n);for(;e;){let t=null;if(nr(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)nr(e)&&_d(e[1],e),e=e[3];null===e&&(e=n),nr(e)&&_d(e[1],e),t=e&&e[4]}e=t}}(e)}}function _d(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function LT(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof wo)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function FT(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):_t(e[o]),c=r[i=t[s+2]],l=t[s+3];"boolean"==typeof l?a.removeEventListener(t[s],c,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&dt(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&qn(e[3])){t!==e[3]&&Lm(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function jm(n,e,t){return function Bm(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Un.None||i===Un.Emulated)return null}return Rn(r,t)}(n,e.parent,t)}function Ci(n,e,t,r,i){dt(n)?n.insertBefore(e,t,r,i):e.insertBefore(t,r,i)}function $m(n,e,t){dt(n)?n.appendChild(e,t):e.appendChild(t)}function Um(n,e,t,r,i){null!==r?Ci(n,e,t,r,i):$m(n,e,t)}function bc(n,e){return dt(n)?n.parentNode(e):e.parentNode}function Hm(n,e,t){return zm(n,e,t)}let zm=function qm(n,e,t){return 40&n.type?Rn(n,t):null};function wc(n,e,t,r){const i=jm(n,r,e),s=e[11],a=Hm(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)Um(s,i,t[c],a,!1);else Um(s,i,t,a,!1)}function Dc(n,e){if(null!==e){const t=e.type;if(3&t)return Rn(e,n);if(4&t)return bd(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Dc(n,r);{const i=n[e.index];return qn(i)?bd(-1,i):_t(i)}}if(32&t)return fd(e,n)()||_t(n[e.index]);{const r=Wm(n,e);return null!==r?Array.isArray(r)?r[0]:Dc($o(n[16]),r):Dc(n,e.next)}}return null}function Wm(n,e){return null!==e?n[16][6].projection[e.projection]:null}function bd(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Dc(r,i)}return e[7]}function wd(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&qt(_t(a),r),t.flags|=4),64!=(64&t.flags))if(8&c)wd(n,e,t.child,r,i,s,!1),hs(e,n,i,a,s);else if(32&c){const l=fd(t,r);let u;for(;u=l();)hs(e,n,i,u,s);hs(e,n,i,a,s)}else 16&c?Jm(n,e,r,t,i,s):hs(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Uo(n,e,t,r,i,s){wd(t,r,n.firstChild,e,i,s,!1)}function Jm(n,e,t,r,i,s){const o=t[16],c=o[6].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)hs(e,n,i,c[l],s);else wd(n,e,c,o[3],i,s,!0)}function Km(n,e,t){dt(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Dd(n,e,t){dt(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Ym(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const Zm="ng-template";function HT(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==Ym(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Xm(n){return 4===n.type&&n.value!==Zm}function qT(n,e,t){return e===(4!==n.type||t?n.value:Zm)}function zT(n,e,t){let r=4;const i=n.attrs||[],s=function QT(n){for(let e=0;e<n.length;e++)if(Ug(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!qT(n,c,t)||""===c&&1===e.length){if(Gn(r))return!1;o=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!HT(n.attrs,l,t)){if(Gn(r))return!1;o=!0}continue}const d=GT(8&r?"class":c,i,Xm(n),t);if(-1===d){if(Gn(r))return!1;o=!0;continue}if(""!==l){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==Ym(f,l,0)||2&r&&l!==h){if(Gn(r))return!1;o=!0}}}}else{if(!o&&!Gn(r)&&!Gn(c))return!1;if(o&&Gn(c))continue;o=!1,r=c|1&r}}return Gn(r)||o}function Gn(n){return 0==(1&n)}function GT(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function JT(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function ey(n,e,t=!1){for(let r=0;r<e.length;r++)if(zT(n,e[r],t))return!0;return!1}function KT(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function ty(n,e){return n?":not("+e.trim()+")":e}function YT(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Gn(o)&&(e+=ty(s,i),i=""),r=o,s=s||!Gn(r);t++}return""!==i&&(e+=ty(s,i)),e}const De={};function N(n){ny(Ve(),q(),Xt()+n,!1)}function ny(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&ic(e,s,t)}else{const s=n.preOrderHooks;null!==s&&sc(e,s,0,t)}qr(t)}function Sc(n,e){return n<<17|e<<2}function Wn(n){return n>>17&32767}function Sd(n){return 2|n}function Dr(n){return(131068&n)>>2}function Ed(n,e){return-131069&n|e<<2}function Md(n){return 1|n}function fy(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];$u(i),o.contentQueries(2,e[s],s)}}}function Ho(n,e,t,r,i,s,o,a,c,l){const u=e.blueprint.slice();return u[0]=i,u[2]=140|r,Ig(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=c||n&&n[12]||null,u[9]=l||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function fs(n,e,t,r,i){let s=n.data[e];if(null===s)s=function kd(n,e,t,r,i){const s=Pg(),o=Lu(),c=n.data[e]=function gx(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,r,i),function L0(){return we.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function bo(){const n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return rr(s,!0),s}function ps(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function qo(n,e,t){tc(e);try{const r=n.viewQuery;null!==r&&qd(1,r,t);const i=n.template;null!==i&&py(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&fy(n,e),n.staticViewQueries&&qd(2,n.viewQuery,t);const s=n.components;null!==s&&function hx(n,e){for(let t=0;t<e.length;t++)Ox(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,nc()}}function gs(n,e,t,r){const i=e[2];if(256!=(256&i)){tc(e);try{Ig(e),function Og(n){return we.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&py(n,e,t,2,r);const o=3==(3&i);if(o){const l=n.preOrderCheckHooks;null!==l&&ic(e,l,null)}else{const l=n.preOrderHooks;null!==l&&sc(e,l,0,null),Uu(e,0)}if(function Rx(n){for(let e=pd(n);null!==e;e=gd(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(1024&i[2])&&Fu(s,1),i[2]|=1024}}}(e),function Ax(n){for(let e=pd(n);null!==e;e=gd(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];ku(r)&&gs(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&fy(n,e),o){const l=n.contentCheckHooks;null!==l&&ic(e,l)}else{const l=n.contentHooks;null!==l&&sc(e,l,1),Uu(e,1)}!function ux(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)qr(~i);else{const s=i,o=t[++r],a=t[++r];V0(o,s),a(2,e[s])}}}finally{qr(-1)}}(n,e);const a=n.components;null!==a&&function dx(n,e){for(let t=0;t<e.length;t++)Px(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&qd(2,c,r),o){const l=n.viewCheckHooks;null!==l&&ic(e,l)}else{const l=n.viewHooks;null!==l&&sc(e,l,2),Uu(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-73,1024&e[2]&&(e[2]&=-1025,Fu(e[3],-1))}finally{nc()}}}function fx(n,e,t,r){const i=e[10],o=xg(e);try{!o&&i.begin&&i.begin(),o&&qo(n,e,r),gs(n,e,t,r)}finally{!o&&i.end&&i.end()}}function py(n,e,t,r,i){const s=Xt(),o=2&r;try{qr(-1),o&&e.length>20&&ny(n,e,20,!1),t(r,i)}finally{qr(s)}}function gy(n,e,t){if(Tu(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function Fd(n,e,t){!Rg()||(function wx(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||So(t,e),qt(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],l=zn(c);l&&Tx(e,t,c);const u=Eo(e,n,a,t);qt(u,e),null!==o&&xx(0,a-i,u,c,0,o),l&&(yn(t.index,e)[8]=u)}}(n,e,t,Rn(t,e)),128==(128&t.flags)&&function Dx(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function j0(){return we.lFrame.currentDirectiveIndex}();try{qr(o);for(let c=r;c<i;c++){const l=n.data[c],u=e[c];ju(c),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Dy(l,u)}}finally{qr(-1),ju(a)}}(n,e,t))}function Ld(n,e,t=Rn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function my(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Tc(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Tc(n,e,t,r,i,s,o,a,c,l){const u=20+r,d=u+i,h=function px(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:De);return t}(u,d),f="function"==typeof l?l():l;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function _y(n,e,t,r){const i=Iy(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&Ay(n).push(r,i.length-1))}function Cy(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function Cn(n,e,t,r,i,s,o,a){const c=Rn(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(Oy(n,t,u,r,i),Ya(e)&&function vx(n,e){const t=yn(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function yx(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,dt(s)?s.setProperty(c,r,i):qu(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Vd(n,e,t,r){let i=!1;if(Rg()){const s=function Sx(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ey(t,o.selectors,!1)&&(i||(i=[]),uc(So(t,e),n,o.type),zn(o)?(Sy(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,Ey(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,c=!1,l=ps(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=ac(t.mergedAttrs,d.hostAttrs),My(n,t,e,l,d),Mx(l,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),l++}!function mx(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,c=null;for(let l=e.directiveStart;l<r;l++){const u=i[l],d=u.inputs,h=null===s||Xm(e)?null:Ix(d,s);o.push(h),a=Cy(d,l,a),c=Cy(u.outputs,l,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}(n,t)}o&&function Ex(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new ne(-301,!1);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=ac(t.mergedAttrs,t.attrs),i}function wy(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function bx(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(r,i,o)}}function Dy(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Sy(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function Mx(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;zn(e)&&(t[""]=n)}}function Ey(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function My(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=_i(i.type)),o=new wo(s,zn(i),null);n.blueprint[r]=o,t[r]=o,wy(n,e,0,r,ps(n,t,i.hostVars,De),i)}function Tx(n,e,t){const r=Rn(e,n),i=my(t),s=n[10],o=xc(n,Ho(n,i,null,t.onPush?64:16,r,e,s,s.createRenderer(r,t),null,null));n[e.index]=o}function ar(n,e,t,r,i,s){const o=Rn(n,e);!function jd(n,e,t,r,i,s,o){if(null==s)dt(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?be(s):o(s,r||"",i);dt(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function xx(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let c=0;c<o.length;){const l=o[c++],u=o[c++],d=o[c++];null!==a?r.setInput(t,d,l,u):t[u]=d}}}function Ix(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function Ty(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function Px(n,e){const t=yn(e,n);if(ku(t)){const r=t[1];80&t[2]?gs(r,t,r.template,t[8]):t[5]>0&&Bd(t)}}function Bd(n){for(let r=pd(n);null!==r;r=gd(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];gs(o,s,o.template,s[8])}else s[5]>0&&Bd(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=yn(t[r],n);ku(i)&&i[5]>0&&Bd(i)}}function Ox(n,e){const t=yn(e,n),r=t[1];(function Nx(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),qo(r,t,t[8])}function xc(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function $d(n){for(;n;){n[2]|=64;const e=$o(n);if(g0(n)&&!e)return n;n=e}return null}function xy(n){!function Ud(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=ld(t),i=r[1];fx(i,r,i.template,t)}}(n[8])}function qd(n,e,t){$u(0),e(n,t)}const Fx=(()=>Promise.resolve(null))();function Iy(n){return n[7]||(n[7]=[])}function Ay(n){return n.cleanup||(n.cleanup=[])}function Py(n,e){const t=n[9],r=t?t.get(Bo,null):null;r&&r.handleError(e)}function Oy(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],l=n.data[o];null!==l.setInput?l.setInput(c,i,r,a):c[a]=i}}function Sr(n,e,t){const r=Xa(e,n);!function Fm(n,e,t){dt(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function Ic(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=vu(i,a):2==s&&(r=vu(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}const zd=new _e("INJECTOR",-1);class Ny{get(e,t=Ao){if(t===Ao){const r=new Error(`NullInjectorError: No provider for ${He(e)}!`);throw r.name="NullInjectorError",r}return t}}const Gd=new _e("Set Injector scope."),zo={},jx={};let Wd;function ky(){return void 0===Wd&&(Wd=new Ny),Wd}function Fy(n,e=null,t=null,r){const i=Ly(n,e,t,r);return i._resolveInjectorDefTypes(),i}function Ly(n,e=null,t=null,r){return new Bx(n,t,e||ky(),r)}class Bx{constructor(e,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&ir(t,a=>this.processProvider(a,e,t)),ir([e],a=>this.processInjectorType(a,[],s)),this.records.set(zd,ms(void 0,this));const o=this.records.get(Gd);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:He(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Ao,r=Ce.Default){this.assertNotDestroyed();const i=om(this),s=Br(void 0);try{if(!(r&Ce.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function Qx(n){return"function"==typeof n||"object"==typeof n&&n instanceof _e}(e)&&Cu(e);a=c&&this.injectableDefInScope(c)?ms(Qd(e),zo):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Ce.Self?ky():this.parent).get(e,t=r&Ce.Optional&&t===Ao?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[pc]=o[pc]||[]).unshift(He(e)),i)throw o;return function SM(n,e,t,r){const i=n[pc];throw e[sm]&&i.unshift(e[sm]),n.message=function EM(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=He(e);if(Array.isArray(e))i=e.map(He).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):He(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(vM,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[pc]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Br(s),om(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(He(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processInjectorType(e,t,r){if(!(e=Te(e)))return!1;let i=gg(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=gg(s)),null==i)return!1;if(null!=i.imports&&!a){let u;r.push(o);try{ir(i.imports,d=>{this.processInjectorType(d,t,r)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];ir(f,y=>this.processProvider(y,h,f||Ze))}}this.injectorDefTypes.add(o);const c=_i(o)||(()=>new o);this.records.set(o,ms(c,zo));const l=i.providers;if(null!=l&&!a){const u=e;ir(l,d=>this.processProvider(d,u,l))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,r){let i=ys(e=Te(e))?e:Te(e&&e.provide);const s=function Ux(n,e,t){return jy(n)?ms(void 0,n.useValue):ms(Vy(n),zo)}(e);if(ys(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=ms(void 0,zo,!0),o.factory=()=>ed(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,t){return t.value===zo&&(t.value=jx,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Wx(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Te(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Qd(n){const e=Cu(n),t=null!==e?e.factory:_i(n);if(null!==t)return t;if(n instanceof _e)throw new ne(204,!1);if(n instanceof Function)return function $x(n){const e=n.length;if(e>0)throw Io(e,"?"),new ne(204,!1);const t=function t0(n){const e=n&&(n[Ga]||n[mg]);if(e){const t=function n0(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ne(204,!1)}function Vy(n,e,t){let r;if(ys(n)){const i=Te(n);return _i(i)||Qd(i)}if(jy(n))r=()=>Te(n.useValue);else if(function qx(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...ed(n.deps||[]));else if(function Hx(n){return!(!n||!n.useExisting)}(n))r=()=>X(Te(n.useExisting));else{const i=Te(n&&(n.useClass||n.provide));if(!function Gx(n){return!!n.deps}(n))return _i(i)||Qd(i);r=()=>new i(...ed(n.deps))}return r}function ms(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function jy(n){return null!==n&&"object"==typeof n&&CM in n}function ys(n){return"function"==typeof n}let tn=(()=>{class n{static create(t,r){var i;if(Array.isArray(t))return Fy({name:""},r,t,"");{const s=null!==(i=t.name)&&void 0!==i?i:"";return Fy({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=Ao,n.NULL=new Ny,n.\u0275prov=ce({token:n,providedIn:"any",factory:()=>X(zd)}),n.__NG_ELEMENT_ID__=-1,n})();function nI(n,e){rc(ld(n)[1],Mt())}function qe(n){let e=function Yy(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(zn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,"");i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Yd(n.inputs),o.declaredInputs=Yd(n.declaredInputs),o.outputs=Yd(n.outputs);const a=i.hostBindings;a&&oI(n,a);const c=i.viewQuery,l=i.contentQueries;if(c&&iI(n,c),l&&sI(n,l),yu(n.inputs,i.inputs),yu(n.declaredInputs,i.declaredInputs),yu(n.outputs,i.outputs),zn(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===qe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function rI(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ac(i.hostAttrs,t=ac(t,i.hostAttrs))}}(r)}function Yd(n){return n===Qi?{}:n===Ze?[]:n}function iI(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function sI(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function oI(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let Ac=null;function vs(){if(!Ac){const n=We.Symbol;if(n&&n.iterator)Ac=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ac=r)}}}return Ac}function Go(n){return!!Zd(n)&&(Array.isArray(n)||!(n instanceof Map)&&vs()in n)}function Zd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function cr(n,e,t){return n[e]=t}function zt(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function bi(n,e,t,r){const i=zt(n,e,t);return zt(n,e+1,r)||i}function Jn(n,e,t,r){const i=q();return zt(i,es(),e)&&(Ve(),ar(ht(),i,n,e,t,r)),Jn}function Cs(n,e,t,r){return zt(n,es(),t)?e+be(t)+r:De}function bs(n,e,t,r,i,s){const a=bi(n,function br(){return we.lFrame.bindingIndex}(),t,i);return wr(2),a?e+be(t)+r+be(i)+s:De}function se(n,e,t,r,i,s,o,a){const c=q(),l=Ve(),u=n+20,d=l.firstCreatePass?function fI(n,e,t,r,i,s,o,a,c){const l=e.consts,u=fs(e,n,4,o||null,Hr(l,a));Vd(e,t,u,Hr(l,c)),rc(e,u);const d=u.tViews=Tc(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,r,i,s,o):l.data[u];rr(d,!1);const h=c[11].createComment("");wc(l,c,h,d),qt(h,c),xc(c,c[u]=Ty(h,c,h,d)),Za(d)&&Fd(l,c,d),null!=o&&Ld(c,d,a)}function Pc(n){return Xi(function F0(){return we.lFrame.contextLView}(),20+n)}function V(n,e=Ce.Default){const t=q();return null===t?X(n,e):Jg(Mt(),t,Te(n),e)}function rh(){throw new Error("invalid")}function B(n,e,t){const r=q();return zt(r,es(),e)&&Cn(Ve(),ht(),r,n,e,r[11],t,!1),B}function ih(n,e,t,r,i){const o=i?"class":"style";Oy(n,t,e.inputs[o],o,r)}function I(n,e,t,r){const i=q(),s=Ve(),o=20+n,a=i[11],c=i[o]=yd(a,e,function W0(){return we.lFrame.currentNamespace}()),l=s.firstCreatePass?function NI(n,e,t,r,i,s,o){const a=e.consts,l=fs(e,n,2,i,Hr(a,s));return Vd(e,t,l,Hr(a,o)),null!==l.attrs&&Ic(l,l.attrs,!1),null!==l.mergedAttrs&&Ic(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,0,e,t,r):s.data[o];rr(l,!0);const u=l.mergedAttrs;null!==u&&oc(a,c,u);const d=l.classes;null!==d&&Dd(a,c,d);const h=l.styles;return null!==h&&Km(a,c,h),64!=(64&l.flags)&&wc(s,i,c,l),0===function R0(){return we.lFrame.elementDepthCount}()&&qt(c,i),function P0(){we.lFrame.elementDepthCount++}(),Za(l)&&(Fd(s,i,l),gy(s,l,i)),null!==r&&Ld(i,l),I}function x(){let n=Mt();Lu()?Vu():(n=n.parent,rr(n,!1));const e=n;!function O0(){we.lFrame.elementDepthCount--}();const t=Ve();return t.firstCreatePass&&(rc(t,n),Tu(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Z0(n){return 0!=(16&n.flags)}(e)&&ih(t,e,q(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function X0(n){return 0!=(32&n.flags)}(e)&&ih(t,e,q(),e.stylesWithoutHost,!1),x}function Ee(n,e,t,r){return I(n,e,t,r),x(),Ee}function bt(n,e,t){const r=q(),i=Ve(),s=n+20,o=i.firstCreatePass?function kI(n,e,t,r,i){const s=e.consts,o=Hr(s,r),a=fs(e,n,8,"ng-container",o);return null!==o&&Ic(a,o,!0),Vd(e,t,a,Hr(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];rr(o,!0);const a=r[s]=r[11].createComment("");return wc(i,r,a,o),qt(a,r),Za(o)&&(Fd(i,r,o),gy(i,o,r)),null!=t&&Ld(r,o),bt}function wt(){let n=Mt();const e=Ve();return Lu()?Vu():(n=n.parent,rr(n,!1)),e.firstCreatePass&&(rc(e,n),Tu(n)&&e.queries.elementEnd(n)),wt}function yt(){return q()}function Qo(n){return!!n&&"function"==typeof n.then}function vv(n){return!!n&&"function"==typeof n.subscribe}const sh=vv;function K(n,e,t,r){const i=q(),s=Ve(),o=Mt();return function Cv(n,e,t,r,i,s,o,a){const c=Za(r),u=n.firstCreatePass&&Ay(n),d=e[8],h=Iy(e);let f=!0;if(3&r.type||a){const j=Rn(r,e),U=a?a(j):j,O=h.length,Y=a?ae=>a(_t(ae[r.index])):r.index;if(dt(t)){let ae=null;if(!a&&c&&(ae=function FI(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==ae)(ae.__ngLastListenerFn__||ae).__ngNextListenerFn__=s,ae.__ngLastListenerFn__=s,f=!1;else{s=oh(r,e,d,s,!1);const Ae=t.listen(U,i,s);h.push(s,Ae),u&&u.push(i,Y,O,O+1)}}else s=oh(r,e,d,s,!0),U.addEventListener(i,s,o),h.push(s),u&&u.push(i,Y,O,o)}else s=oh(r,e,d,s,!1);const y=r.outputs;let A;if(f&&null!==y&&(A=y[i])){const j=A.length;if(j)for(let U=0;U<j;U+=2){const at=e[A[U]][A[U+1]].subscribe(s),lt=h.length;h.push(s,at),u&&u.push(i,r.index,lt,-(lt+1))}}}(s,i,i[11],o,n,e,!!t,r),K}function bv(n,e,t,r){try{return!1!==t(r)}catch(i){return Py(n,i),!1}}function oh(n,e,t,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?yn(n.index,e):e;0==(32&e[2])&&$d(a);let c=bv(e,0,r,o),l=s.__ngNextListenerFn__;for(;l;)c=bv(e,0,l,o)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Z(n=1){return function $0(n){return(we.lFrame.contextLView=function U0(n,e){for(;n>0;)e=e[15],n--;return e}(n,we.lFrame.contextLView))[8]}(n)}function LI(n,e){let t=null;const r=function WT(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?ey(n,s,!0):KT(r,s))return i}else t=i}return t}function Nc(n){const e=q()[16][6];if(!e.projection){const r=e.projection=Io(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?LI(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function Jo(n,e=0,t){const r=q(),i=Ve(),s=fs(i,20+n,16,null,t||null);null===s.projection&&(s.projection=e),Vu(),64!=(64&s.flags)&&function BT(n,e,t){Jm(e[11],0,e,t,jm(n,t,e),Hm(t.parent||e[6],t,e))}(i,r,s)}function Ko(n,e,t){return ah(n,"",e,"",t),Ko}function ah(n,e,t,r,i){const s=q(),o=Cs(s,e,t,r);return o!==De&&Cn(Ve(),ht(),s,n,o,s[11],i,!1),ah}function Av(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Wn(s):Dr(s),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];BI(n[a],e)&&(c=!0,n[a+1]=r?Md(u):Sd(u)),a=r?Wn(u):Dr(u)}c&&(n[t+1]=r?Sd(s):Md(s))}function BI(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&cs(n,e)>=0}function Er(n,e){return function Kn(n,e,t,r){const i=q(),s=Ve(),o=wr(2);s.firstUpdatePass&&function jv(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Xt()],o=function Vv(n,e){return e>=n.expandoStartIndex}(n,t);(function Hv(n,e){return 0!=(n.flags&(e?16:32))})(s,r)&&null===e&&!o&&(e=!1),e=function JI(n,e,t,r){const i=function Bu(n){const e=we.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Yo(t=ch(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=ch(i,n,e,t,r),null===s){let c=function KI(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Dr(r))return n[Wn(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=ch(null,n,e,c[1],r),c=Yo(c,e.attrs,r),function YI(n,e,t,r){n[Wn(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function ZI(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Yo(r,n[s].hostAttrs,t);return Yo(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function VI(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Wn(o),c=Dr(o);n[r]=t;let u,l=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||cs(d,u)>0)&&(l=!0)}else u=t;if(i)if(0!==c){const h=Wn(n[a+1]);n[r+1]=Sc(h,a),0!==h&&(n[h+1]=Ed(n[h+1],r)),n[a+1]=function ex(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Sc(a,0),0!==a&&(n[a+1]=Ed(n[a+1],r)),a=r;else n[r+1]=Sc(c,0),0===a?a=r:n[c+1]=Ed(n[c+1],r),c=r;l&&(n[r+1]=Sd(n[r+1])),Av(n,u,r,!0),Av(n,u,r,!1),function jI(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&cs(s,e)>=0&&(t[r+1]=Md(t[r+1]))}(e,u,n,r,s),o=Sc(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==De&&zt(i,o,e)&&function $v(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1];kc(function sy(n){return 1==(1&n)}(l)?Uv(c,e,t,i,Dr(l),o):void 0)||(kc(s)||function iy(n){return 2==(2&n)}(l)&&(s=Uv(c,null,t,i,a,o)),function UT(n,e,t,r,i){const s=dt(n);if(e)i?s?n.addClass(t,r):t.classList.add(r):s?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:_n.DashCase;if(null==i)s?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=_n.Important),s?n.setStyle(t,r,i,o):t.style.setProperty(r,i,a?"important":"")}}}(r,o,Xa(Xt(),t),i,s))}(s,s.data[Xt()],i,i[11],n,i[o+1]=function tA(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=He(Wr(n)))),n}(e,t),r,o)}(n,e,null,!0),Er}function ch(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Yo(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Yo(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),vn(n,o,!!t||e[++s]))}return void 0===n?null:n}function Uv(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let h=t[i+1];h===De&&(h=d?Ze:void 0);let f=d?Yu(h,r):u===r?h:void 0;if(l&&!kc(f)&&(f=Yu(c,r)),kc(f)&&(a=f,o))return a;const y=n[i+1];i=o?Wn(y):Dr(y)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Yu(c,r))}return a}function kc(n){return void 0!==n}function $(n,e=""){const t=q(),r=Ve(),i=n+20,s=r.firstCreatePass?fs(r,i,1,e,null):r.data[i],o=t[i]=function md(n,e){return dt(n)?n.createText(e):n.createTextNode(e)}(t[11],e);wc(r,t,o,s),rr(s,!1)}function ft(n){return ze("",n,""),ft}function ze(n,e,t){const r=q(),i=Cs(r,n,e,t);return i!==De&&Sr(r,Xt(),i),ze}function lh(n,e,t,r,i){const s=q(),o=bs(s,n,e,t,r,i);return o!==De&&Sr(s,Xt(),o),lh}const wi=void 0;var bA=["en",[["a","p"],["AM","PM"],wi],[["AM","PM"],wi,wi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wi,"{1} 'at' {0}",wi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function CA(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let As={};function nn(n){const e=function wA(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=l_(e);if(t)return t;const r=e.split("-")[0];if(t=l_(r),t)return t;if("en"===r)return bA;throw new Error(`Missing locale data for the locale "${n}".`)}function l_(n){return n in As||(As[n]=We.ng&&We.ng.common&&We.ng.common.locales&&We.ng.common.locales[n]),As[n]}var te=(()=>((te=te||{})[te.LocaleId=0]="LocaleId",te[te.DayPeriodsFormat=1]="DayPeriodsFormat",te[te.DayPeriodsStandalone=2]="DayPeriodsStandalone",te[te.DaysFormat=3]="DaysFormat",te[te.DaysStandalone=4]="DaysStandalone",te[te.MonthsFormat=5]="MonthsFormat",te[te.MonthsStandalone=6]="MonthsStandalone",te[te.Eras=7]="Eras",te[te.FirstDayOfWeek=8]="FirstDayOfWeek",te[te.WeekendRange=9]="WeekendRange",te[te.DateFormat=10]="DateFormat",te[te.TimeFormat=11]="TimeFormat",te[te.DateTimeFormat=12]="DateTimeFormat",te[te.NumberSymbols=13]="NumberSymbols",te[te.NumberFormats=14]="NumberFormats",te[te.CurrencyCode=15]="CurrencyCode",te[te.CurrencySymbol=16]="CurrencySymbol",te[te.CurrencyName=17]="CurrencyName",te[te.Currencies=18]="Currencies",te[te.Directionality=19]="Directionality",te[te.PluralCase=20]="PluralCase",te[te.ExtraData=21]="ExtraData",te))();const Fc="en-US";let u_=Fc;function hh(n,e,t,r,i){if(n=Te(n),Array.isArray(n))for(let s=0;s<n.length;s++)hh(n[s],e,t,r,i);else{const s=Ve(),o=q();let a=ys(n)?n:Te(n.provide),c=Vy(n);const l=Mt(),u=1048575&l.providerIndexes,d=l.directiveStart,h=l.providerIndexes>>20;if(ys(n)||!n.multi){const f=new wo(c,i,V),y=ph(a,e,i?u:u+h,d);-1===y?(uc(So(l,o),s,a),fh(s,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(f),o.push(f)):(t[y]=f,o[y]=f)}else{const f=ph(a,e,u+h,d),y=ph(a,e,u,u+h),A=f>=0&&t[f],j=y>=0&&t[y];if(i&&!j||!i&&!A){uc(So(l,o),s,a);const U=function b1(n,e,t,r,i){const s=new wo(n,t,V);return s.multi=[],s.index=e,s.componentProviders=0,N_(s,i,r&&!t),s}(i?C1:_1,t.length,i,r,c);!i&&j&&(t[y].providerFactory=U),fh(s,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(U),o.push(U)}else fh(s,n,f>-1?f:y,N_(t[i?y:f],c,!i&&r));!i&&r&&j&&t[y].componentProviders++}}}function fh(n,e,t,r){const i=ys(e),s=function zx(n){return!!n.useClass}(e);if(i||s){const c=(s?Te(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function N_(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ph(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function _1(n,e,t,r){return gh(this.multi,[])}function C1(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Eo(t,t[1],this.providerFactory.index,r);s=a.slice(0,o),gh(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],gh(i,s);return s}function gh(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function st(n,e=[]){return t=>{t.providersResolver=(r,i)=>function v1(n,e,t){const r=Ve();if(r.firstCreatePass){const i=zn(n);hh(t,r.data,r.blueprint,i,!0),hh(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class k_{}class S1{resolveComponentFactory(e){throw function D1(n){const e=Error(`No component factory found for ${He(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ps=(()=>{class n{}return n.NULL=new S1,n})();function E1(){return Os(Mt(),q())}function Os(n,e){return new rn(Rn(n,e))}let rn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=E1,n})();function M1(n){return n instanceof rn?n.nativeElement:n}class na{}let Mr=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function x1(){const n=q(),t=yn(Mt().index,n);return function T1(n){return n[11]}(nr(t)?t:n)}(),n})(),I1=(()=>{class n{}return n.\u0275prov=ce({token:n,providedIn:"root",factory:()=>null}),n})();class ra{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const A1=new ra("13.3.11"),mh={};function $c(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(_t(s)),qn(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1].firstChild;null!==l&&$c(c[1],c,l,r)}const o=t.type;if(8&o)$c(n,e,t.child,r);else if(32&o){const a=fd(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=Wm(e,t);if(Array.isArray(a))r.push(...a);else{const c=$o(e[16]);$c(c[1],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class ia{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return $c(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(qn(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(vd(e,r),hc(t,r))}this._attachedToViewContainer=!1}Vm(this._lView[1],this._lView)}onDestroy(e){_y(this._lView[1],this._lView,null,e)}markForCheck(){$d(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Hd(n,e,t){const r=e[10];r.begin&&r.begin();try{gs(n,e,n.template,t)}catch(i){throw Py(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function PT(n,e){Uo(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,"");this._appRef=e}}class R1 extends ia{constructor(e){super(e),this._view=e}detectChanges(){xy(this._view)}checkNoChanges(){}get context(){return null}}class L_ extends Ps{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=$t(e);return new yh(t,this.ngModule)}}function V_(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class yh extends k_{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function ZT(n){return n.map(YT).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return V_(this.componentDef.inputs)}get outputs(){return V_(this.componentDef.outputs)}create(e,t,r,i){const s=(i=i||this.ngModule)?function O1(n,e){return{get:(t,r,i)=>{const s=n.get(t,mh,i);return s!==mh||r===mh?s:e.get(t,r,i)}}}(e,i.injector):e,o=s.get(na,Tg),a=s.get(I1,null),c=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=r?function vy(n,e,t){if(dt(n))return n.selectRootElement(e,t===Un.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(c,r,this.componentDef.encapsulation):yd(o.createRenderer(null,this.componentDef),l,function P1(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(l)),d=this.componentDef.onPush?576:528,h=function Ky(n,e){return{components:[],scheduler:n||ST,clean:Fx,playerHandler:e||null,flags:0}}(),f=Tc(0,null,null,1,0,null,null,null,null,null),y=Ho(null,f,h,d,null,null,o,c,a,s);let A,j;tc(y);try{const U=function Qy(n,e,t,r,i,s){const o=t[1];t[20]=n;const c=fs(o,20,2,"#host",null),l=c.mergedAttrs=e.hostAttrs;null!==l&&(Ic(c,l,!0),null!==n&&(oc(i,n,l),null!==c.classes&&Dd(i,n,c.classes),null!==c.styles&&Km(i,n,c.styles)));const u=r.createRenderer(n,e),d=Ho(t,my(e),null,e.onPush?64:16,t[20],c,r,u,s||null,null);return o.firstCreatePass&&(uc(So(c,t),o,e.type),Sy(o,c),Ey(c,t.length,1)),xc(t,d),t[20]=d}(u,this.componentDef,y,o,c);if(u)if(r)oc(c,u,["ng-version",A1.full]);else{const{attrs:O,classes:Y}=function XT(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Gn(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);O&&oc(c,u,O),Y&&Y.length>0&&Dd(c,u,Y.join(" "))}if(j=Nu(f,20),void 0!==t){const O=j.projection=[];for(let Y=0;Y<this.ngContentSelectors.length;Y++){const ae=t[Y];O.push(null!=ae?Array.from(ae):null)}}A=function Jy(n,e,t,r,i){const s=t[1],o=function Cx(n,e,t){const r=Mt();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),My(n,r,e,ps(n,e,1,null),t));const i=Eo(e,n,r.directiveStart,r);qt(i,e);const s=Rn(r,e);return s&&qt(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,i&&i.forEach(c=>c(o,e)),e.contentQueries){const c=Mt();e.contentQueries(1,o,c.directiveStart)}const a=Mt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(qr(a.index),wy(t[1],a,0,a.directiveStart,a.directiveEnd,e),Dy(e,o)),o}(U,this.componentDef,y,h,[nI]),qo(f,y,null)}finally{nc()}return new k1(this.componentType,A,Os(j,y),y,j)}}class k1 extends class w1{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new R1(i),this.componentType=e}get injector(){return new rs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Tr{}class j_{}const Ns=new Map;class U_ extends Tr{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new L_(this);const r=xn(e);this._bootstrapComponents=or(r.bootstrap),this._r3Injector=Ly(e,t,[{provide:Tr,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],He(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=tn.THROW_IF_NOT_FOUND,r=Ce.Default){return e===tn||e===Tr||e===zd?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class vh extends j_{constructor(e){super(),this.moduleType=e,null!==xn(e)&&function L1(n){const e=new Set;!function t(r){const i=xn(r,!0),s=i.id;null!==s&&(function B_(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${He(e)} vs ${He(e.name)}`)}(s,Ns.get(s),r),Ns.set(s,r));const o=or(i.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new U_(this.moduleType,e)}}function _h(n,e,t,r){return H_(q(),Zt(),n,e,t,r)}function sa(n,e){const t=n[e];return t===De?void 0:t}function H_(n,e,t,r,i,s){const o=e+t;return zt(n,o,i)?cr(n,o+1,s?r.call(s,i):r(i)):sa(n,o+1)}function G_(n,e,t,r,i,s,o,a,c){const l=e+t;return function On(n,e,t,r,i,s){const o=bi(n,e,t,r);return bi(n,e+2,i,s)||o}(n,l,i,s,o,a)?cr(n,l+4,c?r.call(c,i,s,o,a):r(i,s,o,a)):sa(n,l+4)}function Se(n,e){const t=Ve();let r;const i=n+20;t.firstCreatePass?(r=function W1(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=_i(r.type)),o=Br(V);try{const a=cc(!1),c=s();return cc(a),function pI(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,q(),i,c),c}finally{Br(o)}}function Me(n,e,t){const r=n+20,i=q(),s=Xi(i,r);return oa(i,r)?H_(i,Zt(),e,s.transform,t,s):s.transform(t)}function Q_(n,e,t,r){const i=n+20,s=q(),o=Xi(s,i);return oa(s,i)?function q_(n,e,t,r,i,s,o){const a=e+t;return bi(n,a,i,s)?cr(n,a+2,o?r.call(o,i,s):r(i,s)):sa(n,a+2)}(s,Zt(),e,o.transform,t,r,o):o.transform(t,r)}function oa(n,e){return n[1].data[e].pure}function Ch(n){return e=>{setTimeout(n,void 0,e)}}const Ge=class K1 extends ie{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,s,o;let a=e,c=t||(()=>null),l=r;if(e&&"object"==typeof e){const d=e;a=null===(i=d.next)||void 0===i?void 0:i.bind(d),c=null===(s=d.error)||void 0===s?void 0:s.bind(d),l=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(c=Ch(c),a&&(a=Ch(a)),l&&(l=Ch(l)));const u=super.subscribe({next:a,error:c,complete:l});return e instanceof M&&e.add(u),u}};function Y1(){return this._results[vs()]()}class bh{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=vs(),r=bh.prototype;r[t]||(r[t]=Y1)}get changes(){return this._changes||(this._changes=new Ge)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=Pn(e);(this._changesDetected=!function lM(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let xr=(()=>{class n{}return n.__NG_ELEMENT_ID__=eR,n})();const Z1=xr,X1=class extends Z1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=Ho(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(t)),qo(t,r,e),new ia(r)}};function eR(){return Uc(Mt(),q())}function Uc(n,e){return 4&n.type?new X1(e,n,Os(n,e)):null}let Nn=(()=>{class n{}return n.__NG_ELEMENT_ID__=tR,n})();function tR(){return Z_(Mt(),q())}const nR=Nn,K_=class extends nR{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Os(this._hostTNode,this._hostLView)}get injector(){return new rs(this._hostTNode,this._hostLView)}get parentInjector(){const e=lc(this._hostTNode,this._hostLView);if(qg(e)){const t=ns(e,this._hostLView),r=ts(e);return new rs(t[1].data[r+8],t)}return new rs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Y_(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const i=e.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(e,t,r,i,s){const o=e&&!function xo(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.ngModuleRef}const c=o?e:new yh($t(e)),l=r||this.parentInjector;if(!s&&null==c.ngModule){const h=(o?l:this.parentInjector).get(Tr,null);h&&(s=h)}const u=c.create(l,i,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,i=r[1];if(function A0(n){return qn(n[3])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[3],h=new K_(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function NT(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],em(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function kT(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(i,r,o,s);const a=bd(s,o),c=r[11],l=bc(c,o[7]);return null!==l&&function RT(n,e,t,r,i,s){r[0]=i,r[6]=e,Uo(n,r,t,1,i,s)}(i,o[6],c,r,l,a),e.attachToViewContainerRef(),em(wh(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Y_(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=vd(this._lContainer,t);r&&(hc(wh(this._lContainer),t),Vm(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=vd(this._lContainer,t);return r&&null!=hc(wh(this._lContainer),t)?new ia(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function Y_(n){return n[8]}function wh(n){return n[8]||(n[8]=[])}function Z_(n,e){let t;const r=e[n.index];if(qn(r))t=r;else{let i;if(8&n.type)i=_t(r);else{const s=e[11];i=s.createComment("");const o=Rn(n,e);Ci(s,bc(s,o),i,function jT(n,e){return dt(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=Ty(r,e,i,n),xc(e,t)}return new K_(t,n,e)}class Dh{constructor(e){this.queryList=e,this.matches=null}clone(){return new Dh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sh{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new Sh(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==rC(e,t).matches&&this.queries[t].setDirty()}}class X_{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class Eh{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new Eh(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Mh{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Mh(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,sR(t,s)),this.matchTNodeWithReadOption(e,t,dc(t,e,s,!1,!1))}else r===xr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,dc(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===rn||i===Nn||i===xr&&4&t.type)this.addMatch(t.index,-2);else{const s=dc(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function sR(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function aR(n,e,t,r){return-1===t?function oR(n,e){return 11&n.type?Os(n,e):4&n.type?Uc(n,e):null}(e,n):-2===t?function cR(n,e,t){return t===rn?Os(e,n):t===xr?Uc(e,n):t===Nn?Z_(e,n):void 0}(n,e,r):Eo(n,n[1],t,e)}function eC(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:aR(e,s[l],o[c+1],t.metadata.read))}i.matches=a}return i.matches}function Th(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=eC(n,e,i,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)r.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&Th(h[1],h,l,r)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];Th(f[1],f,l,r)}}}}}return r}function Ir(n){const e=q(),t=Ve(),r=kg();$u(r+1);const i=rC(t,r);if(n.dirty&&xg(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?Th(t,e,r,[]):eC(t,e,i,r);n.reset(s,M1),n.notifyOnChanges()}return!0}return!1}function Di(n,e,t){const r=Ve();r.firstCreatePass&&(function nC(n,e,t){null===n.queries&&(n.queries=new Eh),n.queries.track(new Mh(e,t))}(r,new X_(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function tC(n,e,t){const r=new bh(4==(4&t));_y(n,e,r,r.destroy),null===e[19]&&(e[19]=new Sh),e[19].queries.push(new Dh(r))}(r,q(),e)}function Ar(){return function lR(n,e){return n[19].queries[e].queryList}(q(),kg())}function rC(n,e){return n.queries.getByIndex(e)}function Ih(n,e){return Uc(n,e)}function zc(...n){}const kh=new _e("Application Initializer");let Fh=(()=>{class n{constructor(t){this.appInits=t,this.resolve=zc,this.reject=zc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Qo(s))t.push(s);else if(sh(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(X(kh,8))},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ca=new _e("AppId",{providedIn:"root",factory:function CC(){return`${Lh()}${Lh()}${Lh()}`}});function Lh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bC=new _e("Platform Initializer"),Gc=new _e("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wC=new _e("appBootstrapListener");let TR=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Kr=new _e("LocaleId",{providedIn:"root",factory:()=>wM(Kr,Ce.Optional|Ce.SkipSelf)||function xR(){return"undefined"!=typeof $localize&&$localize.locale||Fc}()});class AR{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let DC=(()=>{class n{compileModuleSync(t){return new vh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=or(xn(t).declarations).reduce((o,a)=>{const c=$t(a);return c&&o.push(new yh(c)),o},[]);return new AR(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const PR=(()=>Promise.resolve(0))();function Vh(n){"undefined"==typeof Zone?PR.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class gt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ge(!1),this.onMicrotaskEmpty=new Ge(!1),this.onStable=new Ge(!1),this.onError=new Ge(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function OR(){let n=We.requestAnimationFrame,e=We.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function FR(n){const e=()=>{!function kR(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(We,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Bh(n),n.isCheckStableRunning=!0,jh(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Bh(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return SC(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),EC(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return SC(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),EC(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Bh(n),jh(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,NR,zc,zc);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const NR={};function jh(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Bh(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function SC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function EC(n){n._nesting--,jh(n)}class LR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ge,this.onMicrotaskEmpty=new Ge,this.onStable=new Ge,this.onError=new Ge}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}let $h=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gt.assertNotInAngularZone(),Vh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vh(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(X(gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),VR=(()=>{class n{constructor(){this._applications=new Map,Uh.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Uh.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class jR{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let Uh=new jR,Si=null;const MC=new _e("AllowMultipleToken"),TC=new _e("PlatformOnDestroy");class xC{constructor(e,t){this.name=e,this.token=t}}function IC(n,e,t=[]){const r=`Platform: ${e}`,i=new _e(r);return(s=[])=>{let o=Hh();if(!o||o.injector.get(MC,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function HR(n){if(Si&&!Si.get(MC,!1))throw new ne(400,"");Si=n;const e=n.get(AC),t=n.get(bC,null);t&&t.forEach(r=>r())}(function zR(n=[],e){return tn.create({name:e,providers:[{provide:Gd,useValue:"platform"},{provide:TC,useValue:()=>Si=null},...n]})}(a,r))}return function qR(n){const e=Hh();if(!e)throw new ne(401,"");return e}()}}function Hh(){var n;return null!==(n=null==Si?void 0:Si.get(AC))&&void 0!==n?n:null}let AC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function GR(n,e){let t;return t="noop"===n?new LR:("zone.js"===n?void 0:n)||new gt({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),c=[{provide:gt,useValue:a}];return a.run(()=>{const l=tn.create({providers:c,parent:this.injector,name:t.moduleType.name}),u=t.create(l),d=u.injector.get(Bo,null);if(!d)throw new ne(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{zh(this._modules,u),h.unsubscribe()})}),function WR(n,e,t){try{const r=t();return Qo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(d,a,()=>{const h=u.injector.get(Fh);return h.runInitializers(),h.donePromise.then(()=>(function MA(n){gn(n,"Expected localeId to be defined"),"string"==typeof n&&(u_=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Kr,Fc)||Fc),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,r=[]){const i=RC({},r);return function $R(n,e,t){const r=new vh(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(qh);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new ne(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(TC,null);null==t||t(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(X(tn))},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function RC(n,e){return Array.isArray(e)?e.reduce(RC,n):Object.assign(Object.assign({},n),e)}let qh=(()=>{class n{constructor(t,r,i,s){this._zone=t,this._injector=r,this._exceptionHandler=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new W(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),a=new W(c=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{gt.assertNotInAngularZone(),Vh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{gt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{l.unsubscribe(),u.unsubscribe()}});this.isStable=gu(o,a.pipe(hg()))}bootstrap(t,r){if(!this._initStatus.done)throw new ne(405,"");let i;i=t instanceof k_?t:this._injector.get(Ps).resolveComponentFactory(t),this.componentTypes.push(i.componentType);const s=function UR(n){return n.isBoundToModule}(i)?void 0:this._injector.get(Tr),a=i.create(tn.NULL,[],r||i.selector,s),c=a.location.nativeElement,l=a.injector.get($h,null),u=l&&a.injector.get(VR);return l&&u&&u.registerApplication(c,l),a.onDestroy(()=>{this.detachView(a.hostView),zh(this.components,a),u&&u.unregisterApplication(c)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new ne(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;zh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(wC,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(X(gt),X(tn),X(Bo),X(Fh))},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let OC=!0,la=(()=>{class n{}return n.__NG_ELEMENT_ID__=KR,n})();function KR(n){return function YR(n,e,t){if(Ya(n)&&!t){const r=yn(n.index,e);return new ia(r,r)}return 47&n.type?new ia(e[16],e):null}(Mt(),q(),16==(16&n))}class VC{constructor(){}supports(e){return Go(e)}create(e){return new rP(e)}}const nP=(n,e)=>e;class rP{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||nP}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<BC(r,i,s)?t:r,a=BC(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){const f=h<s.length?s[h]:s[h]=0,y=f+h;u<=y&&y<l&&(s[h]=f+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Go(e))throw new ne(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function hI(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[vs()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new iP(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new jC),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jC),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class iP{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sP{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class jC{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new sP,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function BC(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class $C{constructor(){}supports(e){return e instanceof Map||Zd(e)}create(){return new oP}}class oP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Zd(e)))throw new ne(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new aP(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class aP{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UC(){return new Jc([new VC])}let Jc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||UC()),deps:[[n,new Oo,new Gr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new ne(901,"")}}return n.\u0275prov=ce({token:n,providedIn:"root",factory:UC}),n})();function HC(){return new ua([new $C])}let ua=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||HC()),deps:[[n,new Oo,new Gr]]}}find(t){const r=this.factories.find(s=>s.supports(t));if(r)return r;throw new ne(901,"")}}return n.\u0275prov=ce({token:n,providedIn:"root",factory:HC}),n})();const uP=IC(null,"core",[]);let dP=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(X(qh))},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({}),n})(),Kc=null;function dr(){return Kc}const Gt=new _e("DocumentToken");let Yr=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:function(){return function gP(){return X(qC)}()},providedIn:"platform"}),n})();const mP=new _e("Location Initialized");let qC=(()=>{class n extends Yr{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return dr().getBaseHref(this._doc)}onPopState(t){const r=dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){zC()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){zC()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(X(Gt))},n.\u0275prov=ce({token:n,factory:function(){return function yP(){return new qC(X(Gt))}()},providedIn:"platform"}),n})();function zC(){return!!window.history.pushState}function Kh(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function GC(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Rr(n){return n&&"?"!==n[0]?"?"+n:n}let Fs=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:function(){return function vP(n){const e=X(Gt).location;return new WC(X(Yr),e&&e.origin||"")}()},providedIn:"root"}),n})();const Yh=new _e("appBaseHref");let WC=(()=>{class n extends Fs{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Kh(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Rr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Rr(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Rr(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(X(Yr),X(Yh,8))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),_P=(()=>{class n extends Fs{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Kh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Rr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Rr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(X(Yr),X(Yh,8))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),Zh=(()=>{class n{constructor(t,r){this._subject=new Ge,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=GC(QC(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Rr(r))}normalize(t){return n.stripTrailingSlash(function bP(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,QC(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Rr(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Rr(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Rr,n.joinWithSlash=Kh,n.stripTrailingSlash=GC,n.\u0275fac=function(t){return new(t||n)(X(Fs),X(Yr))},n.\u0275prov=ce({token:n,factory:function(){return function CP(){return new Zh(X(Fs),X(Yr))}()},providedIn:"root"}),n})();function QC(n){return n.replace(/\/index.html$/,"")}var vt=(()=>((vt=vt||{})[vt.Format=0]="Format",vt[vt.Standalone=1]="Standalone",vt))(),Ne=(()=>((Ne=Ne||{})[Ne.Narrow=0]="Narrow",Ne[Ne.Abbreviated=1]="Abbreviated",Ne[Ne.Wide=2]="Wide",Ne[Ne.Short=3]="Short",Ne))(),ct=(()=>((ct=ct||{})[ct.Short=0]="Short",ct[ct.Medium=1]="Medium",ct[ct.Long=2]="Long",ct[ct.Full=3]="Full",ct))(),fe=(()=>((fe=fe||{})[fe.Decimal=0]="Decimal",fe[fe.Group=1]="Group",fe[fe.List=2]="List",fe[fe.PercentSign=3]="PercentSign",fe[fe.PlusSign=4]="PlusSign",fe[fe.MinusSign=5]="MinusSign",fe[fe.Exponential=6]="Exponential",fe[fe.SuperscriptingExponent=7]="SuperscriptingExponent",fe[fe.PerMille=8]="PerMille",fe[fe.Infinity=9]="Infinity",fe[fe.NaN=10]="NaN",fe[fe.TimeSeparator=11]="TimeSeparator",fe[fe.CurrencyDecimal=12]="CurrencyDecimal",fe[fe.CurrencyGroup=13]="CurrencyGroup",fe))();function Yc(n,e){return Fn(nn(n)[te.DateFormat],e)}function Zc(n,e){return Fn(nn(n)[te.TimeFormat],e)}function Xc(n,e){return Fn(nn(n)[te.DateTimeFormat],e)}function kn(n,e){const t=nn(n),r=t[te.NumberSymbols][e];if(void 0===r){if(e===fe.CurrencyDecimal)return t[te.NumberSymbols][fe.Decimal];if(e===fe.CurrencyGroup)return t[te.NumberSymbols][fe.Group]}return r}function KC(n){if(!n[te.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[te.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Fn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function ef(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const NP=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,da={},kP=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var It=(()=>((It=It||{})[It.Short=0]="Short",It[It.ShortGMT=1]="ShortGMT",It[It.Long=2]="Long",It[It.Extended=3]="Extended",It))(),me=(()=>((me=me||{})[me.FullYear=0]="FullYear",me[me.Month=1]="Month",me[me.Date=2]="Date",me[me.Hours=3]="Hours",me[me.Minutes=4]="Minutes",me[me.Seconds=5]="Seconds",me[me.FractionalSeconds=6]="FractionalSeconds",me[me.Day=7]="Day",me))(),Ie=(()=>((Ie=Ie||{})[Ie.DayPeriods=0]="DayPeriods",Ie[Ie.Days=1]="Days",Ie[Ie.Months=2]="Months",Ie[Ie.Eras=3]="Eras",Ie))();function FP(n,e,t,r){let i=function zP(n){if(XC(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return el(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(NP))return function GP(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,c,l),e}(r)}const e=new Date(n);if(!XC(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Pr(t,e)||e;let a,o=[];for(;e;){if(a=kP.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let c=i.getTimezoneOffset();r&&(c=ZC(r,c),i=function qP(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function HP(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(ZC(e,i)-i))}(i,r,!0));let l="";return o.forEach(u=>{const d=function UP(n){if(nf[n])return nf[n];let e;switch(n){case"G":case"GG":case"GGG":e=nt(Ie.Eras,Ne.Abbreviated);break;case"GGGG":e=nt(Ie.Eras,Ne.Wide);break;case"GGGGG":e=nt(Ie.Eras,Ne.Narrow);break;case"y":e=St(me.FullYear,1,0,!1,!0);break;case"yy":e=St(me.FullYear,2,0,!0,!0);break;case"yyy":e=St(me.FullYear,3,0,!1,!0);break;case"yyyy":e=St(me.FullYear,4,0,!1,!0);break;case"Y":e=il(1);break;case"YY":e=il(2,!0);break;case"YYY":e=il(3);break;case"YYYY":e=il(4);break;case"M":case"L":e=St(me.Month,1,1);break;case"MM":case"LL":e=St(me.Month,2,1);break;case"MMM":e=nt(Ie.Months,Ne.Abbreviated);break;case"MMMM":e=nt(Ie.Months,Ne.Wide);break;case"MMMMM":e=nt(Ie.Months,Ne.Narrow);break;case"LLL":e=nt(Ie.Months,Ne.Abbreviated,vt.Standalone);break;case"LLLL":e=nt(Ie.Months,Ne.Wide,vt.Standalone);break;case"LLLLL":e=nt(Ie.Months,Ne.Narrow,vt.Standalone);break;case"w":e=tf(1);break;case"ww":e=tf(2);break;case"W":e=tf(1,!0);break;case"d":e=St(me.Date,1);break;case"dd":e=St(me.Date,2);break;case"c":case"cc":e=St(me.Day,1);break;case"ccc":e=nt(Ie.Days,Ne.Abbreviated,vt.Standalone);break;case"cccc":e=nt(Ie.Days,Ne.Wide,vt.Standalone);break;case"ccccc":e=nt(Ie.Days,Ne.Narrow,vt.Standalone);break;case"cccccc":e=nt(Ie.Days,Ne.Short,vt.Standalone);break;case"E":case"EE":case"EEE":e=nt(Ie.Days,Ne.Abbreviated);break;case"EEEE":e=nt(Ie.Days,Ne.Wide);break;case"EEEEE":e=nt(Ie.Days,Ne.Narrow);break;case"EEEEEE":e=nt(Ie.Days,Ne.Short);break;case"a":case"aa":case"aaa":e=nt(Ie.DayPeriods,Ne.Abbreviated);break;case"aaaa":e=nt(Ie.DayPeriods,Ne.Wide);break;case"aaaaa":e=nt(Ie.DayPeriods,Ne.Narrow);break;case"b":case"bb":case"bbb":e=nt(Ie.DayPeriods,Ne.Abbreviated,vt.Standalone,!0);break;case"bbbb":e=nt(Ie.DayPeriods,Ne.Wide,vt.Standalone,!0);break;case"bbbbb":e=nt(Ie.DayPeriods,Ne.Narrow,vt.Standalone,!0);break;case"B":case"BB":case"BBB":e=nt(Ie.DayPeriods,Ne.Abbreviated,vt.Format,!0);break;case"BBBB":e=nt(Ie.DayPeriods,Ne.Wide,vt.Format,!0);break;case"BBBBB":e=nt(Ie.DayPeriods,Ne.Narrow,vt.Format,!0);break;case"h":e=St(me.Hours,1,-12);break;case"hh":e=St(me.Hours,2,-12);break;case"H":e=St(me.Hours,1);break;case"HH":e=St(me.Hours,2);break;case"m":e=St(me.Minutes,1);break;case"mm":e=St(me.Minutes,2);break;case"s":e=St(me.Seconds,1);break;case"ss":e=St(me.Seconds,2);break;case"S":e=St(me.FractionalSeconds,1);break;case"SS":e=St(me.FractionalSeconds,2);break;case"SSS":e=St(me.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=nl(It.Short);break;case"ZZZZZ":e=nl(It.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=nl(It.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=nl(It.Long);break;default:return null}return nf[n]=e,e}(u);l+=d?d(i,t,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function el(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Pr(n,e){const t=function wP(n){return nn(n)[te.LocaleId]}(n);if(da[t]=da[t]||{},da[t][e])return da[t][e];let r="";switch(e){case"shortDate":r=Yc(n,ct.Short);break;case"mediumDate":r=Yc(n,ct.Medium);break;case"longDate":r=Yc(n,ct.Long);break;case"fullDate":r=Yc(n,ct.Full);break;case"shortTime":r=Zc(n,ct.Short);break;case"mediumTime":r=Zc(n,ct.Medium);break;case"longTime":r=Zc(n,ct.Long);break;case"fullTime":r=Zc(n,ct.Full);break;case"short":const i=Pr(n,"shortTime"),s=Pr(n,"shortDate");r=tl(Xc(n,ct.Short),[i,s]);break;case"medium":const o=Pr(n,"mediumTime"),a=Pr(n,"mediumDate");r=tl(Xc(n,ct.Medium),[o,a]);break;case"long":const c=Pr(n,"longTime"),l=Pr(n,"longDate");r=tl(Xc(n,ct.Long),[c,l]);break;case"full":const u=Pr(n,"fullTime"),d=Pr(n,"fullDate");r=tl(Xc(n,ct.Full),[u,d])}return r&&(da[t][e]=r),r}function tl(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Zn(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),s+o}function St(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function VP(n,e){switch(n){case me.FullYear:return e.getFullYear();case me.Month:return e.getMonth();case me.Date:return e.getDate();case me.Hours:return e.getHours();case me.Minutes:return e.getMinutes();case me.Seconds:return e.getSeconds();case me.FractionalSeconds:return e.getMilliseconds();case me.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===me.Hours)0===a&&-12===t&&(a=12);else if(n===me.FractionalSeconds)return function LP(n,e){return Zn(n,3).substr(0,e)}(a,e);const c=kn(o,fe.MinusSign);return Zn(a,e,c,r,i)}}function nt(n,e,t=vt.Format,r=!1){return function(i,s){return function jP(n,e,t,r,i,s){switch(t){case Ie.Months:return function EP(n,e,t){const r=nn(n),s=Fn([r[te.MonthsFormat],r[te.MonthsStandalone]],e);return Fn(s,t)}(e,i,r)[n.getMonth()];case Ie.Days:return function SP(n,e,t){const r=nn(n),s=Fn([r[te.DaysFormat],r[te.DaysStandalone]],e);return Fn(s,t)}(e,i,r)[n.getDay()];case Ie.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const l=function IP(n){const e=nn(n);return KC(e),(e[te.ExtraData][2]||[]).map(r=>"string"==typeof r?ef(r):[ef(r[0]),ef(r[1])])}(e),u=function AP(n,e,t){const r=nn(n);KC(r);const s=Fn([r[te.ExtraData][0],r[te.ExtraData][1]],e)||[];return Fn(s,t)||[]}(e,i,r),d=l.findIndex(h=>{if(Array.isArray(h)){const[f,y]=h,A=o>=f.hours&&a>=f.minutes,j=o<y.hours||o===y.hours&&a<y.minutes;if(f.hours<y.hours){if(A&&j)return!0}else if(A||j)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function DP(n,e,t){const r=nn(n),s=Fn([r[te.DayPeriodsFormat],r[te.DayPeriodsStandalone]],e);return Fn(s,t)}(e,i,r)[o<12?0:1];case Ie.Eras:return function MP(n,e){return Fn(nn(n)[te.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function nl(n){return function(e,t,r){const i=-1*r,s=kn(t,fe.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case It.Short:return(i>=0?"+":"")+Zn(o,2,s)+Zn(Math.abs(i%60),2,s);case It.ShortGMT:return"GMT"+(i>=0?"+":"")+Zn(o,1,s);case It.Long:return"GMT"+(i>=0?"+":"")+Zn(o,2,s)+":"+Zn(Math.abs(i%60),2,s);case It.Extended:return 0===r?"Z":(i>=0?"+":"")+Zn(o,2,s)+":"+Zn(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function YC(n){return el(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function tf(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=YC(t),o=function $P(n){const e=el(n,0,1).getDay();return el(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Zn(i,n,kn(r,fe.MinusSign))}}function il(n,e=!1){return function(t,r){return Zn(YC(t).getFullYear(),n,kn(r,fe.MinusSign),e)}}const nf={};function ZC(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function XC(n){return n instanceof Date&&!isNaN(n.valueOf())}function rb(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let lf=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Go(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${He(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(V(Jc),V(ua),V(rn),V(Mr))},n.\u0275dir=he({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class sO{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ls=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new sO(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),ib(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ib(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(V(Nn),V(xr),V(Jc))},n.\u0275dir=he({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ib(n,e){n.context.$implicit=e.item}let hr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new oO,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(V(Nn),V(xr))},n.\u0275dir=he({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class oO{constructor(){this.$implicit=null,this.ngIf=null}}function sb(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${He(e)}'.`)}class uf{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ol=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=he({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),ob=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new uf(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(V(Nn),V(xr),V(ol,9))},n.\u0275dir=he({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),cb=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split(".");null!=(r=null!=r&&s?`${r}${s}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(V(rn),V(ua),V(Mr))},n.\u0275dir=he({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();function Xn(n,e){return new ne(2100,"")}class uO{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class dO{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const hO=new dO,fO=new uO;let Zr=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Qo(t))return hO;if(vv(t))return fO;throw Xn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(V(la,16))},n.\u0275pipe=cn({name:"async",type:n,pure:!1}),n})();const vO=new _e("DATE_PIPE_DEFAULT_TIMEZONE");let df=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,s){var o;if(null==t||""===t||t!=t)return null;try{return FP(t,r,s||this.locale,null!==(o=null!=i?i:this.defaultTimezone)&&void 0!==o?o:void 0)}catch(a){throw Xn()}}}return n.\u0275fac=function(t){return new(t||n)(V(Kr,16),V(vO,24))},n.\u0275pipe=cn({name:"date",type:n,pure:!0}),n})(),lb=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=cn({name:"json",type:n,pure:!1}),n})(),hf=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=ub}transform(t,r=ub){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const i=this.differ.diff(t),s=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(o=>{this.keyValues.push(function wO(n,e){return{key:n,value:e}}(o.key,o.currentValue))})),(i||s)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}}return n.\u0275fac=function(t){return new(t||n)(V(ua,16))},n.\u0275pipe=cn({name:"keyvalue",type:n,pure:!1}),n})();function ub(n,e){const t=n.key,r=e.key;if(t===r)return 0;if(void 0===t)return 1;if(void 0===r)return-1;if(null===t)return 1;if(null===r)return-1;if("string"==typeof t&&"string"==typeof r)return t<r?-1:1;if("number"==typeof t&&"number"==typeof r)return t-r;if("boolean"==typeof t&&"boolean"==typeof r)return t<r?-1:1;const i=String(t),s=String(r);return i==s?0:i<s?-1:1}let db=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({}),n})();const hb="browser";let RO=(()=>{class n{}return n.\u0275prov=ce({token:n,providedIn:"root",factory:()=>new PO(X(Gt),window)}),n})();class PO{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function OO(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fb(this.window.history)||fb(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function fb(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class pb{}class gf extends class NO extends class pP{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fP(n){Kc||(Kc=n)}(new gf)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function kO(){return fa=fa||document.querySelector("base"),fa?fa.getAttribute("href"):null}();return null==t?null:function FO(n){al=al||document.createElement("a"),al.setAttribute("href",n);const e=al.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rb(document.cookie,e)}}let al,fa=null;const gb=new _e("TRANSITION_ID"),VO=[{provide:kh,useFactory:function LO(n,e,t){return()=>{t.get(Fh).donePromise.then(()=>{const r=dr(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[gb,Gt,tn],multi:!0}];class mf{static init(){!function BR(n){Uh=n}(new mf)}addToWindow(e){We.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},We.getAllAngularTestabilities=()=>e.getAllTestabilities(),We.getAllAngularRootElements=()=>e.getAllRootElements(),We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(r=>{const i=We.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?dr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let jO=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const cl=new _e("EventManagerPlugins");let ll=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(X(cl),X(gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class mb{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=dr().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let yb=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),pa=(()=>{class n extends yb{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(vb),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(vb))}}return n.\u0275fac=function(t){return new(t||n)(X(Gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();function vb(n){dr().remove(n)}const yf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vf=/%COMP%/g;function ul(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ul(n,i,t):(i=i.replace(vf,n),t.push(i))}return t}function bb(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let dl=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new _f(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Un.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new zO(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Un.ShadowDom:return new GO(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ul(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(X(ll),X(pa),X(ca))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class _f{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(yf[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=yf[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=yf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_n.DashCase|_n.Important)?e.style.setProperty(t,r,i&_n.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_n.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bb(r)):this.eventManager.addEventListener(e,t,bb(r))}}class zO extends _f{constructor(e,t,r,i){super(e),this.component=r;const s=ul(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function UO(n){return"_ngcontent-%COMP%".replace(vf,n)}(i+"-"+r.id),this.hostAttr=function HO(n){return"_nghost-%COMP%".replace(vf,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class GO extends _f{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ul(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let WO=(()=>{class n extends mb{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(X(Gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const Db=["alt","control","meta","shift"],JO={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sb={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},KO={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let YO=(()=>{class n extends mb{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>dr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(Db.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function ZO(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Sb.hasOwnProperty(e)&&(e=Sb[e]))}return JO[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Db.forEach(s=>{s!=i&&KO[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(X(Gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const nN=IC(uP,"browser",[{provide:Gc,useValue:hb},{provide:bC,useValue:function XO(){gf.makeCurrent(),mf.init()},multi:!0},{provide:Gt,useFactory:function tN(){return function M0(n){Pu=n}(document),document},deps:[]}]),rN=[{provide:Gd,useValue:"root"},{provide:Bo,useFactory:function eN(){return new Bo},deps:[]},{provide:cl,useClass:WO,multi:!0,deps:[Gt,gt,Gc]},{provide:cl,useClass:YO,multi:!0,deps:[Gt]},{provide:dl,useClass:dl,deps:[ll,pa,ca]},{provide:na,useExisting:dl},{provide:yb,useExisting:pa},{provide:pa,useClass:pa,deps:[Gt]},{provide:$h,useClass:$h,deps:[gt]},{provide:ll,useClass:ll,deps:[cl,gt]},{provide:pb,useClass:jO,deps:[]}];let Eb=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:ca,useValue:t.appId},{provide:gb,useExisting:ca},VO]}}}return n.\u0275fac=function(t){return new(t||n)(X(n,12))},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({providers:rN,imports:[db,dP]}),n})();function hl(n,e){return new W(t=>{const r=n.length;if(0===r)return void t.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const c=jt(n[a]);let l=!1;t.add(c.subscribe({next:u=>{l||(l=!0,o++),i[a]=u},error:u=>t.error(u),complete:()=>{s++,(s===r||!l)&&(o===r&&t.next(e?e.reduce((u,d,h)=>(u[d]=i[h],u),{}):i),t.complete())}}))}})}"undefined"!=typeof window&&window;let xb=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(V(Mr),V(rn))},n.\u0275dir=he({type:n}),n})(),Mi=(()=>{class n extends xb{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ht(n)))(r||n)}}(),n.\u0275dir=he({type:n,features:[qe]}),n})();const fr=new _e("NgValueAccessor"),gN={provide:fr,useExisting:et(()=>bf),multi:!0};let bf=(()=>{class n extends Mi{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ht(n)))(r||n)}}(),n.\u0275dir=he({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&K("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[st([gN]),qe]}),n})();const mN={provide:fr,useExisting:et(()=>ei),multi:!0},vN=new _e("CompositionEventMode");let ei=(()=>{class n extends xb{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yN(){const n=dr()?dr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(V(Mr),V(rn),V(vN,8))},n.\u0275dir=he({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&K("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[st([mN]),qe]}),n})();const Wt=new _e("NgValidators"),ni=new _e("NgAsyncValidators");function Pb(n){return function ti(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function fl(n){return null}function Vb(n){return null!=n}function jb(n){const e=Qo(n)?jt(n):n;return sh(e),e}function Bb(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function $b(n,e){return e.map(t=>t(n))}function Ub(n){return n.map(e=>function CN(n){return!n.validate}(e)?e:t=>e.validate(t))}function wf(n){return null!=n?function Hb(n){if(!n)return null;const e=n.filter(Vb);return 0==e.length?null:function(t){return Bb($b(t,e))}}(Ub(n)):null}function Df(n){return null!=n?function qb(n){if(!n)return null;const e=n.filter(Vb);return 0==e.length?null:function(t){return function pN(...n){if(1===n.length){const e=n[0];if(E(e))return hl(e,null);if(L(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return hl(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return hl(n=1===n.length&&E(n[0])?n[0]:n,null).pipe(pe(t=>e(...t)))}return hl(n,null)}($b(t,e).map(jb)).pipe(pe(Bb))}}(Ub(n)):null}function zb(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Sf(n){return n?Array.isArray(n)?n:[n]:[]}function pl(n,e){return Array.isArray(n)?n.includes(e):n===e}function Qb(n,e){const t=Sf(e);return Sf(n).forEach(i=>{pl(t,i)||t.push(i)}),t}function Jb(n,e){return Sf(e).filter(t=>!pl(n,t))}class Kb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Df(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ri extends Kb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class on extends Kb{get formDirective(){return null}get path(){return null}}class Yb{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Vs=(()=>{class n extends Yb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(V(ri,2))},n.\u0275dir=he({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Er("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[qe]}),n})(),Zb=(()=>{class n extends Yb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(V(on,10))},n.\u0275dir=he({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&Er("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[qe]}),n})();function ga(n,e){Tf(n,e),e.valueAccessor.writeValue(n.value),function xN(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ew(n,e)})}(n,e),function AN(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function IN(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ew(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function TN(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function vl(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Tf(n,e){const t=function Gb(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(zb(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Wb(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(zb(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();vl(e._rawValidators,i),vl(e._rawAsyncValidators,i)}function ew(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Af(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ma="VALID",Cl="INVALID",js="PENDING",ya="DISABLED";function Pf(n){return(bl(n)?n.validators:n)||null}function iw(n){return Array.isArray(n)?wf(n):n||null}function Of(n,e){return(bl(e)?e.asyncValidators:n)||null}function sw(n){return Array.isArray(n)?Df(n):n||null}function bl(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Nf=n=>n instanceof Ff;function aw(n){return(n=>n instanceof uw)(n)?n.value:n.getRawValue()}function cw(n,e){const t=Nf(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new ne(1e3,"");if(!r[e])throw new ne(1001,"")}function lw(n,e){Nf(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new ne(1002,"")})}class kf{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=iw(this._rawValidators),this._composedAsyncValidatorFn=sw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ma}get invalid(){return this.status===Cl}get pending(){return this.status==js}get disabled(){return this.status===ya}get enabled(){return this.status!==ya}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=iw(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=sw(e)}addValidators(e){this.setValidators(Qb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Qb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Jb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Jb(e,this._rawAsyncValidators))}hasValidator(e){return pl(this._rawValidators,e)}hasAsyncValidator(e){return pl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=js,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ya,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ma,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ma||this.status===js)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ya:ma}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=js,this._hasOwnPendingAsyncValidator=!0;const t=jb(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function NN(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Nf(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof FN)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ge,this.statusChanges=new Ge}_calculateStatus(){return this._allControlsDisabled()?ya:this.errors?Cl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(js)?js:this._anyControlsHaveStatus(Cl)?Cl:ma}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bl(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class uw extends kf{constructor(e=null,t,r){super(Pf(t),Of(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bl(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Af(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Af(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ff extends kf{constructor(e,t,r){super(Pf(t),Of(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){lw(this,e),Object.keys(e).forEach(r=>{cw(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=aw(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class FN extends kf{constructor(e,t,r){super(Pf(t),Of(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){lw(this,e),e.forEach((r,i)=>{cw(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>aw(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const LN={provide:on,useExisting:et(()=>wl)},va=(()=>Promise.resolve(null))();let wl=(()=>{class n extends on{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ge,this.form=new Ff({},wf(t),Df(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){va.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ga(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){va.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){va.then(()=>{const r=this._findContainer(t.path),i=new Ff({});(function tw(n,e){Tf(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){va.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){va.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function rw(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(V(Wt,10),V(ni,10))},n.\u0275dir=he({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&K("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[st([LN]),qe]}),n})();const jN={provide:ri,useExisting:et(()=>Ti)},fw=(()=>Promise.resolve(null))();let Ti=(()=>{class n extends ri{constructor(t,r,i,s,o){super(),this._changeDetectorRef=o,this.control=new uw,this._registered=!1,this.update=new Ge,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function If(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===ei?t=s:function ON(n){return Object.getPrototypeOf(n.constructor)===Mi}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function xf(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ga(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){fw.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;fw.then(()=>{var s;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?function ml(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(V(on,9),V(Wt,10),V(ni,10),V(fr,10),V(la,8))},n.\u0275dir=he({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[st([jN]),qe,Yt]}),n})(),pw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=he({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),mw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({}),n})(),xi=(()=>{class n{constructor(){this._validator=fl}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):fl,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=he({type:n,features:[Yt]}),n})();const ik={provide:Wt,useExisting:et(()=>Dl),multi:!0};let Dl=(()=>{class n extends xi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function tk(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>Pb}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ht(n)))(r||n)}}(),n.\u0275dir=he({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&Jn("required",r._enabled?"":null)},inputs:{required:"required"},features:[st([ik]),qe]}),n})(),uk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({imports:[[mw]]}),n})(),Nw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({imports:[uk]}),n})();class kw{}const Or="*";function Uf(n,e){return{type:7,name:n,definitions:e,options:{}}}function Bs(n,e=null){return{type:4,styles:e,timings:n}}function Fw(n,e=null){return{type:2,steps:n,options:e}}function ii(n){return{type:6,styles:n,offset:null}}function $s(n,e,t){return{type:0,name:n,styles:e,options:t}}function Us(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Lw(n){Promise.resolve(null).then(n)}class _a{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Lw(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Vw{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?Lw(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Fe=!1;function jw(n){return new ne(3e3,Fe)}function zk(){return"undefined"!=typeof window&&void 0!==window.document}function qf(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function si(n){switch(n.length){case 0:return new _a;case 1:return n[0];default:return new Vw(n)}}function Bw(n,e,t,r,i={},s={}){const o=[],a=[];let c=-1,l=null;if(r.forEach(u=>{const d=u.offset,h=d==c,f=h&&l||{};Object.keys(u).forEach(y=>{let A=y,j=u[y];if("offset"!==y)switch(A=e.normalizePropertyName(A,o),j){case"!":j=i[y];break;case Or:j=s[y];break;default:j=e.normalizeStyleValue(y,A,j,o)}f[A]=j}),h||a.push(f),l=f,c=d}),o.length)throw function Nk(n){return new ne(3502,Fe)}();return a}function zf(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Gf(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Gf(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Gf(t,"destroy",n)))}}function Gf(n,e,t){const r=t.totalTime,s=Wf(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function Wf(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function bn(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function $w(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Qf=(n,e)=>!1,Uw=(n,e,t)=>[],Hw=null;function Jf(n){const e=n.parentNode||n.host;return e===Hw?null:e}(qf()||"undefined"!=typeof Element)&&(zk()?(Hw=(()=>document.documentElement)(),Qf=(n,e)=>{for(;e;){if(e===n)return!0;e=Jf(e)}return!1}):Qf=(n,e)=>n.contains(e),Uw=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ii=null,qw=!1;function zw(n){Ii||(Ii=function Wk(){return"undefined"!=typeof document?document.body:null}()||{},qw=!!Ii.style&&"WebkitAppearance"in Ii.style);let e=!0;return Ii.style&&!function Gk(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ii.style,!e&&qw&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Ii.style)),e}const Gw=Qf,Ww=Uw;let Qw=(()=>{class n{validateStyleProperty(t){return zw(t)}matchesElement(t,r){return!1}containsElement(t,r){return Gw(t,r)}getParentElement(t){return Jf(t)}query(t,r,i){return Ww(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new _a(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),Kf=(()=>{class n{}return n.NOOP=new Qw,n})();const Yf="ng-enter",El="ng-leave",Ml="ng-trigger",Tl=".ng-trigger",Kw="ng-animating",Zf=".ng-animating";function Ai(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Xf(parseFloat(e[1]),e[2])}function Xf(n,e){return"s"===e?1e3*n:n}function xl(n,e,t){return n.hasOwnProperty("duration")?n:function Kk(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(jw()),{duration:0,delay:0,easing:""};i=Xf(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=Xf(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function hk(){return new ne(3100,Fe)}()),a=!0),s<0&&(e.push(function fk(){return new ne(3101,Fe)}()),a=!0),a&&e.splice(c,0,jw())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Hs(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function oi(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Hs(n,t);return t}function Zw(n,e,t){return t?e+":"+t+";":""}function Xw(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Zw(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Zw(0,Xk(t),n.style[t]));n.setAttribute("style",e)}function pr(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=tp(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),qf()&&Xw(n))}function Ri(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=tp(t);n.style[r]=""}),qf()&&Xw(n))}function Ca(n){return Array.isArray(n)?1==n.length?n[0]:Fw(n):n}const ep=new RegExp("{{\\s*(.+?)\\s*}}","g");function eD(n){let e=[];if("string"==typeof n){let t;for(;t=ep.exec(n);)e.push(t[1]);ep.lastIndex=0}return e}function Il(n,e,t){const r=n.toString(),i=r.replace(ep,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function gk(n){return new ne(3003,Fe)}()),a=""),a.toString()});return i==r?n:i}function Al(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Zk=/-+([a-z0-9])/g;function tp(n){return n.replace(Zk,(...e)=>e[1].toUpperCase())}function Xk(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function wn(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function mk(n){return new ne(3004,Fe)}()}}function tD(n,e){return window.getComputedStyle(n)[e]}function sF(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function oF(n,e,t){if(":"==n[0]){const c=function aF(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Ak(n){return new ne(3016,Fe)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Ik(n){return new ne(3015,Fe)}()),e;const i=r[1],s=r[2],o=r[3];e.push(nD(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&e.push(nD(o,i))}(r,t,e)):t.push(n),t}const Nl=new Set(["true","1"]),kl=new Set(["false","0"]);function nD(n,e){const t=Nl.has(n)||kl.has(n),r=Nl.has(e)||kl.has(e);return(i,s)=>{let o="*"==n||n==i,a="*"==e||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?Nl.has(n):kl.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?Nl.has(e):kl.has(e)),o&&a}}const cF=new RegExp("s*:selfs*,?","g");function np(n,e,t,r){return new lF(n).build(e,t,r)}class lF{constructor(e){this._driver=e}build(e,t,r){const i=new hF(t);this._resetContextStyleTimingState(i);const s=wn(this,Ca(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function vk(){return new ne(3006,Fe)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(function _k(){return new ne(3007,Fe)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{if(Fl(a)){const c=a;Object.keys(c).forEach(l=>{eD(c[l]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size&&(Al(s.values()),t.errors.push(function Ck(n,e){return new ne(3008,Fe)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=wn(this,Ca(e.animation),t);return{type:1,matchers:sF(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Pi(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>wn(this,r,t)),options:Pi(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=wn(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Pi(e.options)}}visitAnimate(e,t){const r=function pF(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return rp(xl(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=rp(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=xl(t,e);return rp(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:ii({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};r.easing&&(l.easing=r.easing),o=ii(l)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==Or?r.push(o):t.errors.push(function bk(n){return new ne(3002,Fe)}()):r.push(o)}):r.push(e.styles);let i=!1,s=null;return r.forEach(o=>{if(Fl(o)){const a=o,c=a.easing;if(c&&(s=c,delete a.easing),!i)for(let l in a)if(a[l].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void t.unsupportedCSSPropertiesFound.add(a);const c=t.collectedStyles[t.currentQuerySelector],l=c[a];let u=!0;l&&(s!=i&&s>=l.startTime&&i<=l.endTime&&(t.errors.push(function wk(n,e,t,r,i){return new ne(3010,Fe)}()),u=!1),s=l.startTime),u&&(c[a]={startTime:s,endTime:i}),t.options&&function Yk(n,e,t){const r=e.params||{},i=eD(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function pk(n){return new ne(3001,Fe)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Dk(){return new ne(3011,Fe)}()),r;let s=0;const o=[];let a=!1,c=!1,l=0;const u=e.steps.map(U=>{const O=this._makeStyleAst(U,t);let Y=null!=O.offset?O.offset:function fF(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Fl(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(Fl(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(O.styles),ae=0;return null!=Y&&(s++,ae=O.offset=Y),c=c||ae<0||ae>1,a=a||ae<l,l=ae,o.push(ae),O});c&&t.errors.push(function Sk(){return new ne(3012,Fe)}()),a&&t.errors.push(function Ek(){return new ne(3200,Fe)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function Mk(){return new ne(3202,Fe)}()):0==s&&(h=1/(d-1));const f=d-1,y=t.currentTime,A=t.currentAnimateTimings,j=A.duration;return u.forEach((U,O)=>{const Y=h>0?O==f?1:h*O:o[O],ae=Y*j;t.currentTime=y+A.delay+ae,A.duration=ae,this._validateStyleAst(U,t),U.offset=Y,r.styles.push(U)}),r}visitReference(e,t){return{type:8,animation:wn(this,Ca(e.animation),t),options:Pi(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Pi(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Pi(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function uF(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(cF,"")),n=n.replace(/@\*/g,Tl).replace(/@\w+/g,t=>Tl+"-"+t.substr(1)).replace(/:animating/g,Zf),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,bn(t.collectedStyles,t.currentQuerySelector,{});const a=wn(this,Ca(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Pi(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Tk(){return new ne(3013,Fe)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:xl(e.timings,t.errors,!0);return{type:12,animation:wn(this,Ca(e.animation),t),timings:r,options:null}}}class hF{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Fl(n){return!Array.isArray(n)&&"object"==typeof n}function Pi(n){return n?(n=Hs(n)).params&&(n.params=function dF(n){return n?Hs(n):null}(n.params)):n={},n}function rp(n,e,t){return{duration:n,delay:e,easing:t}}function ip(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Ll{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const yF=new RegExp(":enter","g"),_F=new RegExp(":leave","g");function sp(n,e,t,r,i,s={},o={},a,c,l=[]){return(new CF).buildKeyframes(n,e,t,r,i,s,o,a,c,l)}class CF{buildKeyframes(e,t,r,i,s,o,a,c,l,u=[]){l=l||new Ll;const d=new op(e,t,l,i,s,u,[]);d.options=c,d.currentTimeline.setStyles([o],null,d.errors,c),wn(this,r,d);const h=d.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let y=h.length-1;y>=0;y--){const A=h[y];if(A.element===t){f=A;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,c)}return h.length?h.map(f=>f.buildKeyframes()):[ip(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Ai(r.duration):null,a=null!=r.delay?Ai(r.delay):null;return 0!==o&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),wn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Vl);const o=Ai(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>wn(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ai(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),wn(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return xl(t.params?Il(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Ai(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Vl);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,l);s&&d.delayNextStep(s),l===t.element&&(c=d.currentTimeline),wn(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const u=t.currentTimeline;c&&u.delayNextStep(c);const d=u.currentTime;wn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const Vl={};class op{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Vl,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new jl(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ai(r.duration)),null!=r.delay&&(i.delay=Ai(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Il(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new op(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Vl,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new bF(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(yF,"."+this._enterClassName)).replace(_F,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&0==a.length&&o.push(function xk(n){return new ne(3014,Fe)}()),a}}class jl{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new jl(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Or,this._currentKeyframe[t]=Or}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},o=function wF(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=Or})):oi(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const c=Il(o[a],s,r);this._pendingStyles[a]=c,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Or),this._updateStyle(a,c)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const l=oi(a,!0);Object.keys(l).forEach(u=>{const d=l[u];"!"==d?e.add(u):d==Or&&t.add(u)}),r||(l.offset=c/this.duration),i.push(l)});const s=e.size?Al(e.values()):[],o=t.size?Al(t.values()):[];if(r){const a=i[0],c=Hs(a);a.offset=0,c.offset=1,i=[a,c]}return ip(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class bF extends jl{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,c=oi(e[0],!1);c.offset=0,s.push(c);const l=oi(e[0],!1);l.offset=sD(a),s.push(l);const u=e.length-1;for(let d=1;d<=u;d++){let h=oi(e[d],!1);h.offset=sD((t+h.offset*r)/o),s.push(h)}r=o,t=0,i="",e=s}return ip(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function sD(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ap{}class DF extends ap{normalizePropertyName(e,t){return tp(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(SF[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function yk(n,e){return new ne(3005,Fe)}())}return o+s}}const SF=(()=>function EF(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function oD(n,e,t,r,i,s,o,a,c,l,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}const cp={};class aD{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function MF(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],o=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):o}build(e,t,r,i,s,o,a,c,l,u){const d=[],h=this.ast.options&&this.ast.options.params||cp,y=this.buildStyles(r,a&&a.params||cp,d),A=c&&c.params||cp,j=this.buildStyles(i,A,d),U=new Set,O=new Map,Y=new Map,ae="void"===i,Ae={params:Object.assign(Object.assign({},h),A)},at=u?[]:sp(e,t,this.ast.animation,s,o,y,j,Ae,l,d);let lt=0;if(at.forEach(En=>{lt=Math.max(En.duration+En.delay,lt)}),d.length)return oD(t,this._triggerName,r,i,ae,y,j,[],[],O,Y,lt,d);at.forEach(En=>{const Mn=En.element,uo=bn(O,Mn,{});En.preStyleProps.forEach(tr=>uo[tr]=!0);const jr=bn(Y,Mn,{});En.postStyleProps.forEach(tr=>jr[tr]=!0),Mn!==t&&U.add(Mn)});const Sn=Al(U.values());return oD(t,this._triggerName,r,i,ae,y,j,at,Sn,O,Y,lt)}}class TF{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Hs(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(i[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let c=o[a];c.length>1&&(c=Il(c,i,t));const l=this.normalizer.normalizePropertyName(a,t);c=this.normalizer.normalizeStyleValue(a,l,c,t),r[l]=c})}}),r}}class IF{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new TF(i.style,i.options&&i.options.params||{},r)}),cD(this.states,"true","1"),cD(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new aD(e,i,this.states))}),this.fallbackTransition=function AF(n,e,t){return new aD(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function cD(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const RF=new Ll;class PF{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],s=np(this._driver,t,r,[]);if(r.length)throw function kk(n){return new ne(3503,Fe)}();this._animations[e]=s}_buildPlayer(e,t,r){const i=e.element,s=Bw(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let o;const a=new Map;if(s?(o=sp(this._driver,t,s,Yf,El,{},{},r,RF,i),o.forEach(u=>{const d=bn(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(i.push(function Fk(){return new ne(3300,Fe)}()),o=[]),i.length)throw function Lk(n){return new ne(3504,Fe)}();a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,Or)})});const l=si(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=l,l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function Vk(n){return new ne(3301,Fe)}();return t}listen(e,t,r,i){const s=Wf(t,"","","");return zf(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const lD="ng-animate-queued",lp="ng-animate-disabled",LF=[],uD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},VF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ln="__ng_removed";class up{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function UF(n){return null!=n?n:null}(r?e.value:e),r){const s=Hs(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const ba="void",dp=new up(ba);class jF{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Vn(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function jk(n,e){return new ne(3302,Fe)}();if(null==r||0==r.length)throw function Bk(n){return new ne(3303,Fe)}();if(!function HF(n){return"start"==n||"done"==n}(r))throw function $k(n,e){return new ne(3400,Fe)}();const s=bn(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=bn(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Vn(e,Ml),Vn(e,Ml+"-"+t),a[t]=dp),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function Uk(n){return new ne(3401,Fe)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new hp(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Vn(e,Ml),Vn(e,Ml+"-"+t),this._engine.statesByElement.set(e,a={}));let c=a[t];const l=new up(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a[t]=l,c||(c=dp),l.value!==ba&&c.value===l.value){if(!function GF(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,l.params)){const A=[],j=s.matchStyles(c.value,c.params,A),U=s.matchStyles(l.value,l.params,A);A.length?this._engine.reportError(A):this._engine.afterFlush(()=>{Ri(e,j),pr(e,U)})}return}const h=bn(this._engine.playersByElement,e,[]);h.forEach(A=>{A.namespaceId==this.id&&A.triggerName==t&&A.queued&&A.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),y=!1;if(!f){if(!i)return;f=s.fallbackTransition,y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:y}),y||(Vn(e,lD),o.onStart(()=>{qs(e,lD)})),o.onDone(()=>{let A=this.players.indexOf(o);A>=0&&this.players.splice(A,1);const j=this._engine.playersByElement.get(e);if(j){let U=j.indexOf(o);U>=0&&j.splice(U,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Tl,!0);r.forEach(i=>{if(i[Ln])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(c=>{if(o.set(c,s[c].value),this._triggers[c]){const l=this.trigger(e,c,ba,i);l&&a.push(l)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&si(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers[o].fallbackTransition,l=r[o]||dp,u=new up(ba),d=new hp(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ln];(!s||s===uD)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Vn(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=Wf(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,zf(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class BF{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new jF(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,s=r.length-1;if(s>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=s;a>=0;a--)if(this.driver.containsElement(r[a].hostElement,t)){r.splice(a+1,0,e),o=!0;break}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,r,i){if(Bl(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Bl(t))return;const s=t[Ln];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Vn(e,lp)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),qs(e,lp))}removeNode(e,t,r,i){if(Bl(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Ln]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Bl(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Tl,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Zf,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return si(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Ln];if(r&&r.setForRemoval){if(e[Ln]=uD,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(lp))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Vn(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?si(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Hk(n){return new ne(3402,Fe)}()}_flushAnimations(e,t){const r=new Ll,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(re=>{u.add(re);const de=this.driver.query(re,".ng-animate-queued",!0);for(let ye=0;ye<de.length;ye++)u.add(de[ye])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=fD(h,this.collectedEnterElements),y=new Map;let A=0;f.forEach((re,de)=>{const ye=Yf+A++;y.set(de,ye),re.forEach(je=>Vn(je,ye))});const j=[],U=new Set,O=new Set;for(let re=0;re<this.collectedLeaveElements.length;re++){const de=this.collectedLeaveElements[re],ye=de[Ln];ye&&ye.setForRemoval&&(j.push(de),U.add(de),ye.hasAnimation?this.driver.query(de,".ng-star-inserted",!0).forEach(je=>U.add(je)):O.add(de))}const Y=new Map,ae=fD(h,Array.from(U));ae.forEach((re,de)=>{const ye=El+A++;Y.set(de,ye),re.forEach(je=>Vn(je,ye))}),e.push(()=>{f.forEach((re,de)=>{const ye=y.get(de);re.forEach(je=>qs(je,ye))}),ae.forEach((re,de)=>{const ye=Y.get(de);re.forEach(je=>qs(je,ye))}),j.forEach(re=>{this.processLeaveNode(re)})});const Ae=[],at=[];for(let re=this._namespaceList.length-1;re>=0;re--)this._namespaceList[re].drainQueuedTransitions(t).forEach(ye=>{const je=ye.player,kt=ye.element;if(Ae.push(je),this.collectedEnterElements.length){const an=kt[Ln];if(an&&an.setForMove){if(an.previousTriggersValues&&an.previousTriggersValues.has(ye.triggerName)){const Vi=an.previousTriggersValues.get(ye.triggerName),pi=this.statesByElement.get(ye.element);pi&&pi[ye.triggerName]&&(pi[ye.triggerName].value=Vi)}return void je.destroy()}}const yr=!d||!this.driver.containsElement(d,kt),Tn=Y.get(kt),fi=y.get(kt),ut=this._buildInstruction(ye,r,fi,Tn,yr);if(ut.errors&&ut.errors.length)return void at.push(ut);if(yr)return je.onStart(()=>Ri(kt,ut.fromStyles)),je.onDestroy(()=>pr(kt,ut.toStyles)),void i.push(je);if(ye.isFallbackTransition)return je.onStart(()=>Ri(kt,ut.fromStyles)),je.onDestroy(()=>pr(kt,ut.toStyles)),void i.push(je);const xE=[];ut.timelines.forEach(an=>{an.stretchStartingKeyframe=!0,this.disabledNodes.has(an.element)||xE.push(an)}),ut.timelines=xE,r.append(kt,ut.timelines),o.push({instruction:ut,player:je,element:kt}),ut.queriedElements.forEach(an=>bn(a,an,[]).push(je)),ut.preStyleProps.forEach((an,Vi)=>{const pi=Object.keys(an);if(pi.length){let ji=c.get(Vi);ji||c.set(Vi,ji=new Set),pi.forEach(lg=>ji.add(lg))}}),ut.postStyleProps.forEach((an,Vi)=>{const pi=Object.keys(an);let ji=l.get(Vi);ji||l.set(Vi,ji=new Set),pi.forEach(lg=>ji.add(lg))})});if(at.length){const re=[];at.forEach(de=>{re.push(function qk(n,e){return new ne(3505,Fe)}())}),Ae.forEach(de=>de.destroy()),this.reportError(re)}const lt=new Map,Sn=new Map;o.forEach(re=>{const de=re.element;r.has(de)&&(Sn.set(de,de),this._beforeAnimationBuild(re.player.namespaceId,re.instruction,lt))}),i.forEach(re=>{const de=re.element;this._getPreviousPlayers(de,!1,re.namespaceId,re.triggerName,null).forEach(je=>{bn(lt,de,[]).push(je),je.destroy()})});const En=j.filter(re=>gD(re,c,l)),Mn=new Map;hD(Mn,this.driver,O,l,Or).forEach(re=>{gD(re,c,l)&&En.push(re)});const jr=new Map;f.forEach((re,de)=>{hD(jr,this.driver,new Set(re),c,"!")}),En.forEach(re=>{const de=Mn.get(re),ye=jr.get(re);Mn.set(re,Object.assign(Object.assign({},de),ye))});const tr=[],ho=[],fo={};o.forEach(re=>{const{element:de,player:ye,instruction:je}=re;if(r.has(de)){if(u.has(de))return ye.onDestroy(()=>pr(de,je.toStyles)),ye.disabled=!0,ye.overrideTotalTime(je.totalTime),void i.push(ye);let kt=fo;if(Sn.size>1){let Tn=de;const fi=[];for(;Tn=Tn.parentNode;){const ut=Sn.get(Tn);if(ut){kt=ut;break}fi.push(Tn)}fi.forEach(ut=>Sn.set(ut,kt))}const yr=this._buildAnimation(ye.namespaceId,je,lt,s,jr,Mn);if(ye.setRealPlayer(yr),kt===fo)tr.push(ye);else{const Tn=this.playersByElement.get(kt);Tn&&Tn.length&&(ye.parentPlayer=si(Tn)),i.push(ye)}}else Ri(de,je.fromStyles),ye.onDestroy(()=>pr(de,je.toStyles)),ho.push(ye),u.has(de)&&i.push(ye)}),ho.forEach(re=>{const de=s.get(re.element);if(de&&de.length){const ye=si(de);re.setRealPlayer(ye)}}),i.forEach(re=>{re.parentPlayer?re.syncPlayerEvents(re.parentPlayer):re.destroy()});for(let re=0;re<j.length;re++){const de=j[re],ye=de[Ln];if(qs(de,El),ye&&ye.hasAnimation)continue;let je=[];if(a.size){let yr=a.get(de);yr&&yr.length&&je.push(...yr);let Tn=this.driver.query(de,Zf,!0);for(let fi=0;fi<Tn.length;fi++){let ut=a.get(Tn[fi]);ut&&ut.length&&je.push(...ut)}}const kt=je.filter(yr=>!yr.destroyed);kt.length?qF(this,de,kt):this.processLeaveNode(de)}return j.length=0,tr.forEach(re=>{this.players.push(re),re.onDone(()=>{re.destroy();const de=this.players.indexOf(re);this.players.splice(de,1)}),re.play()}),tr}elementContainsData(e,t){let r=!1;const i=t[Ln];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==ba;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,u=l!==s,d=bn(r,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(f=>{const y=f.getRealPlayer();y.beforeDestroy&&y.beforeDestroy(),f.destroy(),d.push(f)})}Ri(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,c=t.element,l=[],u=new Set,d=new Set,h=t.timelines.map(y=>{const A=y.element;u.add(A);const j=A[Ln];if(j&&j.removedBeforeQueried)return new _a(y.duration,y.delay);const U=A!==c,O=function zF(n){const e=[];return pD(n,e),e}((r.get(A)||LF).map(lt=>lt.getRealPlayer())).filter(lt=>!!lt.element&&lt.element===A),Y=s.get(A),ae=o.get(A),Ae=Bw(0,this._normalizer,0,y.keyframes,Y,ae),at=this._buildPlayer(y,Ae,O);if(y.subTimeline&&i&&d.add(A),U){const lt=new hp(e,a,A);lt.setRealPlayer(at),l.push(lt)}return at});l.forEach(y=>{bn(this.playersByQueriedElement,y.element,[]).push(y),y.onDone(()=>function $F(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,y.element,y))}),u.forEach(y=>Vn(y,Kw));const f=si(h);return f.onDestroy(()=>{u.forEach(y=>qs(y,Kw)),pr(c,t.toStyles)}),d.forEach(y=>{bn(i,y,[]).push(f)}),f}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new _a(e.duration,e.delay)}}class hp{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new _a,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>zf(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){bn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Bl(n){return n&&1===n.nodeType}function dD(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function hD(n,e,t,r,i){const s=[];t.forEach(c=>s.push(dD(c)));const o=[];r.forEach((c,l)=>{const u={};c.forEach(d=>{const h=u[d]=e.computeStyle(l,d,i);(!h||0==h.length)&&(l[Ln]=VF,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>dD(c,s[a++])),o}function fD(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:i.has(l)?1:o(l),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function Vn(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function qs(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function qF(n,e,t){si(t).onDone(()=>n.processLeaveNode(e))}function pD(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Vw?pD(r.players,e):e.push(r)}}function gD(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class $l{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new BF(e,t,r),this._timelineEngine=new PF(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],u=np(this._driver,s,c,[]);if(c.length)throw function Ok(n,e){return new ne(3404,Fe)}();a=function xF(n,e,t){return new IF(n,e,t)}(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=$w(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=$w(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let QF=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&pr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pr(this._element,this._initialStyles),this._endStyles&&(pr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ri(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ri(this._element,this._endStyles),this._endStyles=null),pr(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function fp(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];JF(i)&&(e=e||{},e[i]=n[i])}return e}function JF(n){return"display"===n||"position"===n}class mD{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:tD(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class KF{validateStyleProperty(e){return zw(e)}matchesElement(e,t){return!1}containsElement(e,t){return Gw(e,t)}getParentElement(e){return Jf(e)}query(e,t,r){return Ww(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const l={},u=o.filter(h=>h instanceof mD);(function eF(n,e){return 0===n||0===e})(r,i)&&u.forEach(h=>{let f=h.currentSnapshot;Object.keys(f).forEach(y=>l[y]=f[y])}),t=function tF(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var i=1;i<e.length;i++){let a=e[i];o.forEach(function(c){a[c]=tD(n,c)})}}return e}(e,t=t.map(h=>oi(h,!1)),l);const d=function WF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=fp(e[0]),e.length>1&&(r=fp(e[e.length-1]))):e&&(t=fp(e)),t||r?new QF(n,t,r):null}(e,t);return new mD(e,t,c,d)}}let YF=(()=>{class n extends kw{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Un.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Fw(t):t;return yD(this._renderer,null,r,"register",[i]),new ZF(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(X(na),X(Gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class ZF extends class dk{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new XF(this._id,e,t||{},this._renderer)}}class XF{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return yD(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function yD(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const vD="@.disabled";let eL=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let u=this._rendererCache.get(s);return u||(u=new _D("",s,this.engine),this._rendererCache.set(s,u)),u}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=u=>{Array.isArray(u)?u.forEach(c):this.engine.registerTrigger(o,a,t,u.name,u)};return r.data.animation.forEach(c),new tL(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(X(na),X($l),X(gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class _D{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==vD?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class tL extends _D{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==vD?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function nL(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function rL(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let iL=(()=>{class n extends $l{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(X(Gt),X(Kf),X(ap))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const CD=new _e("AnimationModuleType"),bD=[{provide:kw,useClass:YF},{provide:ap,useFactory:function sL(){return new DF}},{provide:$l,useClass:iL},{provide:na,useFactory:function oL(n,e,t){return new eL(n,e,t)},deps:[dl,$l,gt]}],wD=[{provide:Kf,useFactory:()=>new KF},{provide:CD,useValue:"BrowserAnimations"},...bD],aL=[{provide:Kf,useClass:Qw},{provide:CD,useValue:"NoopAnimations"},...bD];let gp,cL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?aL:wD}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({providers:wD,imports:[Eb]}),n})();function J(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}try{gp="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){gp=!1}let dL=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function AO(n){return n===hb}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!gp)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(X(Gc))},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function TD(n,e=0){return function mL(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function xD(n,e,t,r){return v(t)&&(r=t,t=void 0),r?xD(n,e,t).pipe(pe(i=>E(i)?r(...i):r(i))):new W(i=>{ID(n,e,function s(o){i.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},i,t)})}function ID(n,e,t,r,i){let s;if(function _L(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,i),s=()=>o.removeEventListener(e,t,i)}else if(function vL(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function yL(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)ID(n[o],e,t,r,i)}r.add(s)}class CL extends M{constructor(e,t){super()}schedule(e,t=0){return this}}let AD=(()=>{class n{constructor(t,r=n.now){this.SchedulerAction=t,this.now=r}schedule(t,r=0,i){return new this.SchedulerAction(this,t).schedule(i,r)}}return n.now=()=>Date.now(),n})();class ai extends AD{constructor(e,t=AD.now){super(e,()=>ai.delegate&&ai.delegate!==this?ai.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,r){return ai.delegate&&ai.delegate!==this?ai.delegate.schedule(e,t,r):super.schedule(e,t,r)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Gs=new ai(class bL extends CL{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=!!s&&s||new Error(s)}if(r)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,t=this.scheduler,r=t.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}});class DL{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new SL(e,this.durationSelector))}}class SL extends Gi{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:i}=this;t=i(e)}catch(i){return this.destination.error(i)}const r=Wi(t,new zi(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:e,hasValue:t,throttled:r}=this;r&&(this.remove(r),this.throttled=void 0,r.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function RD(n){return!E(n)&&n-parseFloat(n)+1>=0}function ML(n){const{index:e,period:t,subscriber:r}=n;if(r.next(e),!r.closed){if(-1===t)return r.complete();n.index=e+1,this.schedule(n,t)}}function Ws(n){return e=>e.lift(new xL(n))}class xL{constructor(e){this.notifier=e}call(e,t){const r=new IL(e),i=Wi(this.notifier,new zi(r));return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r}}class IL extends Gi{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let AL=(()=>{class n{constructor(t,r,i,s){this._elementRef=t,this._platform=r,this._ngZone=i,this._destroyed=new ie,this._enabled=!0,this._previousMinRows=-1,this._isViewInited=!1,this._handleFocusEvent=o=>{this._hasFocus="focus"===o.type},this._document=s,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(t){this._minRows=TD(t),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(t){this._maxRows=TD(t),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(t){t=function gL(n){return null!=n&&"false"!=`${n}`}(t),this._enabled!==t&&((this._enabled=t)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(t){this._cachedPlaceholderHeight=void 0,t?this._textareaElement.setAttribute("placeholder",t):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_setMinHeight(){const t=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.minHeight=t)}_setMaxHeight(){const t=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.maxHeight=t)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{xD(this._getWindow(),"resize").pipe(function TL(n,e=Gs){return function wL(n){return function(t){return t.lift(new DL(n))}}(()=>function EL(n=0,e,t){let r=-1;return RD(e)?r=Number(e)<1?1:Number(e):Jt(e)&&(t=e),Jt(t)||(t=Gs),new W(i=>{const s=RD(n)?n:+n-t.now();return t.schedule(ML,s,{index:0,period:r,subscriber:i})})}(n,e))}(16),Ws(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0)),this._textareaElement.addEventListener("focus",this._handleFocusEvent),this._textareaElement.addEventListener("blur",this._handleFocusEvent)}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._textareaElement.removeEventListener("focus",this._handleFocusEvent),this._textareaElement.removeEventListener("blur",this._handleFocusEvent),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let t=this._textareaElement.cloneNode(!1);t.rows=1,t.style.position="absolute",t.style.visibility="hidden",t.style.border="none",t.style.padding="0",t.style.height="",t.style.minHeight="",t.style.maxHeight="",t.style.overflow="hidden",this._textareaElement.parentNode.appendChild(t),this._cachedLineHeight=t.clientHeight,t.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){const t=this._textareaElement,r=t.style.marginBottom||"",i=this._platform.FIREFOX,s=i&&this._hasFocus,o=i?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";s&&(t.style.marginBottom=`${t.clientHeight}px`),t.classList.add(o);const a=t.scrollHeight-4;return t.classList.remove(o),s&&(t.style.marginBottom=r),a}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||null!=this._cachedPlaceholderHeight)return;if(!this.placeholder)return void(this._cachedPlaceholderHeight=0);const t=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=t}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(t=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;const r=this._elementRef.nativeElement,i=r.value;if(!t&&this._minRows===this._previousMinRows&&i===this._previousValue)return;const s=this._measureScrollHeight(),o=Math.max(s,this._cachedPlaceholderHeight||0);r.style.height=`${o}px`,this._ngZone.runOutsideAngular(()=>{"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(()=>this._scrollToCaretPosition(r)):setTimeout(()=>this._scrollToCaretPosition(r))}),this._previousValue=i,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(t){const{selectionStart:r,selectionEnd:i}=t;!this._destroyed.isStopped&&this._hasFocus&&t.setSelectionRange(r,i)}}return n.\u0275fac=function(t){return new(t||n)(V(rn),V(dL),V(gt),V(Gt,8))},n.\u0275dir=he({type:n,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(t,r){1&t&&K("input",function(){return r._noopInputHandler()})},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]}),n})(),RL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({}),n})();class Ue extends ie{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new oe;return this._value}next(e){super.next(this._value=e)}}class PL extends F{notifyNext(e,t,r,i,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class OL extends F{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function NL(n,e,t,r,i=new OL(n,t,r)){if(!i.closed)return e instanceof W?e.subscribe(i):hu(e)(i)}const PD={};function Da(...n){let e,t;return Jt(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&E(n[0])&&(n=n[0]),pu(n,t).lift(new kL(e))}class kL{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new FL(e,this.resultSelector))}}class FL extends PL{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(PD),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(NL(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const i=this.values,o=this.toRespond?i[r]===PD?--this.toRespond:this.toRespond:0;i[r]=t,0===o&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function ve(...n){let e=n[n.length-1];return Jt(e)?(n.pop(),fu(n,e)):pu(n)}function At(n,e){return function(r){return r.lift(new LL(n,e))}}class LL{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new VL(e,this.predicate,this.thisArg))}}class VL extends F{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Qs(n,e=Gs){return t=>t.lift(new jL(n,e))}class jL{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new BL(e,this.dueTime,this.scheduler))}}class BL extends F{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule($L,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function $L(n){n.debouncedNext()}const zl=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})(),OD=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})(),Js=new W(n=>n.complete());function Gl(n){return n?function UL(n){return new W(e=>n.schedule(()=>e.complete()))}(n):Js}function yp(n){return e=>0===n?Gl():e.lift(new HL(n))}class HL{constructor(e){if(this.total=e,this.total<0)throw new OD}call(e,t){return t.subscribe(new qL(e,this.total))}}class qL extends F{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function ND(n=null){return e=>e.lift(new zL(n))}class zL{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new GL(e,this.defaultValue))}}class GL extends F{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function kD(n=JL){return e=>e.lift(new WL(n))}class WL{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new QL(e,this.errorFactory))}}class QL extends F{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function JL(){return new zl}function jn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?At((i,s)=>n(i,s,r)):z,yp(1),t?ND(e):kD(()=>new zl))}function FD(n){return n instanceof Date&&!isNaN(+n)}function Ks(n,e){return new W(e?t=>e.schedule(KL,0,{error:n,subscriber:t}):t=>t.error(n))}function KL({error:n,subscriber:e}){e.error(n)}class er{constructor(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}}accept(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)}toObservable(){switch(this.kind){case"N":return ve(this.value);case"E":return Ks(this.error);case"C":return Gl()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new er("N",e):er.undefinedValueNotification}static createError(e){return new er("E",void 0,e)}static createComplete(){return er.completeNotification}}er.completeNotification=new er("C"),er.undefinedValueNotification=new er("N",void 0);class ZL{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new vp(e,this.delay,this.scheduler))}}class vp extends F{constructor(e,t,r){super(e),this.delay=t,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,r=t.queue,i=e.scheduler,s=e.destination;for(;r.length>0&&r[0].time-i.now()<=0;)r.shift().notification.observe(s);if(r.length>0){const o=Math.max(0,r[0].time-i.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(vp.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,r=new XL(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(er.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(er.createComplete()),this.unsubscribe()}}class XL{constructor(e,t){this.time=e,this.notification=t}}function LD(n,e){return t=>t.lift(new e2(n,e))}class e2{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new t2(e,this.compare,this.keySelector))}}class t2 extends F{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}const n2=(()=>{function n(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return n.prototype=Object.create(Error.prototype),n})();class i2{constructor(e,t,r,i){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=i}call(e,t){return t.subscribe(new _p(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class _p extends Gi{constructor(e,t,r,i,s){super(e),this.absoluteTimeout=t,this.waitFor=r,this.withObservable=i,this.scheduler=s,this.scheduleTimeout()}static dispatchTimeout(e){const{withObservable:t}=e;e._unsubscribeAndRecycle(),e.add(Wi(t,new zi(e)))}scheduleTimeout(){const{action:e}=this;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(_p.dispatchTimeout,this.waitFor,this))}_next(e){this.absoluteTimeout||this.scheduleTimeout(),super._next(e)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}function ci(n){return function(t){const r=new o2(n),i=t.lift(r);return r.caught=i}}class o2{constructor(e){this.selector=e}call(e,t){return t.subscribe(new a2(e,this.selector,this.caught))}}class a2 extends Gi{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const r=new zi(this);this.add(r);const i=Wi(t,r);i!==r&&this.add(i)}}}var R=g(9225);function Ys(n,e){return Pt(n,e,1)}class VD{}class jD{}class Nr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Nr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Nr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Nr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class c2{encodeKey(e){return BD(e)}encodeValue(e){return BD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const u2=/%(\d[a-f0-9])/gi,d2={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function BD(n){return encodeURIComponent(n).replace(u2,(e,t)=>{var r;return null!==(r=d2[t])&&void 0!==r?r:e})}function $D(n){return`${n}`}class li{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new c2,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function l2(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new li({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push($D(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf($D(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class h2{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function UD(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function HD(n){return"undefined"!=typeof Blob&&n instanceof Blob}function qD(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Sa{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function f2(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Nr),this.context||(this.context=new h2),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new li,this.urlWithParams=t}serializeBody(){return null===this.body?null:UD(this.body)||HD(this.body)||qD(this.body)||function p2(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof li?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||qD(this.body)?null:HD(this.body)?this.body.type||null:UD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof li?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,c=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,u=e.params||this.params;const d=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new Sa(r,i,o,{params:u,headers:l,context:d,reportProgress:c,responseType:s,withCredentials:a})}}var Et=(()=>((Et=Et||{})[Et.Sent=0]="Sent",Et[Et.UploadProgress=1]="UploadProgress",Et[Et.ResponseHeader=2]="ResponseHeader",Et[Et.DownloadProgress=3]="DownloadProgress",Et[Et.Response=4]="Response",Et[Et.User=5]="User",Et))();class Cp{constructor(e,t=200,r="OK"){this.headers=e.headers||new Nr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class bp extends Cp{constructor(e={}){super(e),this.type=Et.ResponseHeader}clone(e={}){return new bp({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Wl extends Cp{constructor(e={}){super(e),this.type=Et.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Wl({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class zD extends Cp{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function wp(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Dp=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Sa)s=t;else{let c,l;c=i.headers instanceof Nr?i.headers:new Nr(i.headers),i.params&&(l=i.params instanceof li?i.params:new li({fromObject:i.params})),s=new Sa(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=ve(s).pipe(Ys(c=>this.handler.handle(c)));if(t instanceof Sa||"events"===i.observe)return o;const a=o.pipe(At(c=>c instanceof Wl));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(pe(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(pe(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(pe(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(pe(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new li).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,wp(i,r))}post(t,r,i={}){return this.request("POST",t,wp(i,r))}put(t,r,i={}){return this.request("PUT",t,wp(i,r))}}return n.\u0275fac=function(t){return new(t||n)(X(VD))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class GD{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const WD=new _e("HTTP_INTERCEPTORS");let g2=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const m2=/^\)\]\}',?\n/;let QD=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new W(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((f,y)=>i.setRequestHeader(f,y.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&i.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();i.responseType="json"!==f?f:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=i.statusText||"OK",y=new Nr(i.getAllResponseHeaders()),A=function y2(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return o=new bp({headers:y,status:i.status,statusText:f,url:A}),o},c=()=>{let{headers:f,status:y,statusText:A,url:j}=a(),U=null;204!==y&&(U=void 0===i.response?i.responseText:i.response),0===y&&(y=U?200:0);let O=y>=200&&y<300;if("json"===t.responseType&&"string"==typeof U){const Y=U;U=U.replace(m2,"");try{U=""!==U?JSON.parse(U):null}catch(ae){U=Y,O&&(O=!1,U={error:ae,text:U})}}O?(r.next(new Wl({body:U,headers:f,status:y,statusText:A,url:j||void 0})),r.complete()):r.error(new zD({error:U,headers:f,status:y,statusText:A,url:j||void 0}))},l=f=>{const{url:y}=a(),A=new zD({error:f,status:i.status||0,statusText:i.statusText||"Unknown Error",url:y||void 0});r.error(A)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let y={type:Et.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(y.total=f.total),"text"===t.responseType&&!!i.responseText&&(y.partialText=i.responseText),r.next(y)},h=f=>{let y={type:Et.UploadProgress,loaded:f.loaded};f.lengthComputable&&(y.total=f.total),r.next(y)};return i.addEventListener("load",c),i.addEventListener("error",l),i.addEventListener("timeout",l),i.addEventListener("abort",l),t.reportProgress&&(i.addEventListener("progress",d),null!==s&&i.upload&&i.upload.addEventListener("progress",h)),i.send(s),r.next({type:Et.Sent}),()=>{i.removeEventListener("error",l),i.removeEventListener("abort",l),i.removeEventListener("load",c),i.removeEventListener("timeout",l),t.reportProgress&&(i.removeEventListener("progress",d),null!==s&&i.upload&&i.upload.removeEventListener("progress",h)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(X(pb))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const Sp=new _e("XSRF_COOKIE_NAME"),Ep=new _e("XSRF_HEADER_NAME");class JD{}let v2=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=rb(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(X(Gt),X(Gc),X(Sp))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),Mp=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(X(JD),X(Ep))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),_2=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(WD,[]);this.chain=r.reduceRight((i,s)=>new GD(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(X(jD),X(tn))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),C2=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Mp,useClass:g2}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Sp,useValue:t.cookieName}:[],t.headerName?{provide:Ep,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({providers:[Mp,{provide:WD,useExisting:Mp,multi:!0},{provide:JD,useClass:v2},{provide:Sp,useValue:"XSRF-TOKEN"},{provide:Ep,useValue:"X-XSRF-TOKEN"}]}),n})(),b2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({providers:[Dp,{provide:VD,useClass:_2},QD,{provide:jD,useExisting:QD}],imports:[[C2.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();function Tp(...n){return function w2(){return mo(1)}()(ve(...n))}function KD(n){return new W(e=>{let t;try{t=n()}catch(i){return void e.error(i)}return(t?jt(t):Gl()).subscribe(e)})}function ui(n,e){return"function"==typeof e?t=>t.pipe(ui((r,i)=>jt(n(r,i)).pipe(pe((s,o)=>e(r,s,i,o))))):t=>t.lift(new D2(n))}class D2{constructor(e){this.project=e}call(e,t){return t.subscribe(new S2(e,this.project))}}class S2 extends Gi{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new zi(this),i=this.destination;i.add(r),this.innerSubscription=Wi(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function YD(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new M2(n,e,t))}}class M2{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new T2(e,this.accumulator,this.seed,this.hasSeed))}}class T2 extends F{constructor(e,t,r,i){super(e),this.accumulator=t,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function xp(n){return function(t){return 0===n?Gl():t.lift(new x2(n))}}class x2{constructor(e){if(this.total=e,this.total<0)throw new OD}call(e,t){return t.subscribe(new I2(e,this.total))}}class I2 extends F{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,i=this.count++;t.length<r?t.push(e):t[i%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let s=0;s<r;s++){const o=t++%r;e.next(i[o])}}e.complete()}}function di(){}function Dn(n,e,t){return function(i){return i.lift(new R2(n,e,t))}}class R2{constructor(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}call(e,t){return t.subscribe(new P2(e,this.nextOrObserver,this.error,this.complete))}}class P2 extends F{constructor(e,t,r,i){super(e),this._tapNext=di,this._tapError=di,this._tapComplete=di,this._tapError=r||di,this._tapComplete=i||di,v(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||di,this._tapError=t.error||di,this._tapComplete=t.complete||di)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class N2{constructor(e){this.callback=e}call(e,t){return t.subscribe(new k2(e,this.callback))}}class k2 extends F{constructor(e,t){super(e),this.add(new M(t))}}class kr{constructor(e,t){this.id=e,this.url=t}}class Ip extends kr{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ea extends kr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ZD extends kr{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class F2 extends kr{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class L2 extends kr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V2 extends kr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j2 extends kr{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class B2 extends kr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $2 extends kr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XD{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eS{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class U2{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class H2{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q2{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z2{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Oe="primary";class G2{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Zs(n){return new G2(n)}const nS="ngNavigationCancelingError";function Ap(n){const e=Error("NavigationCancelingError: "+n);return e[nS]=!0,e}function Q2(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function gr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!rS(n[i],e[i]))return!1;return!0}function rS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function iS(n){return Array.prototype.concat.apply([],n)}function sS(n){return n.length>0?n[n.length-1]:null}function Vt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function mr(n){return sh(n)?n:Qo(n)?jt(Promise.resolve(n)):ve(n)}const Y2={exact:function cS(n,e,t){if(!ki(n.segments,e.segments)||!Ql(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!cS(n.children[r],e.children[r],t))return!1;return!0},subset:lS},oS={exact:function Z2(n,e){return gr(n,e)},subset:function X2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rS(n[t],e[t]))},ignored:()=>!0};function aS(n,e,t){return Y2[t.paths](n.root,e.root,t.matrixParams)&&oS[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function lS(n,e,t){return uS(n,e,e.segments,t)}function uS(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ki(i,t)||e.hasChildren()||!Ql(i,t,r))}if(n.segments.length===t.length){if(!ki(n.segments,t)||!Ql(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!lS(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ki(n.segments,i)&&Ql(n.segments,i,r)&&n.children[Oe])&&uS(n.children[Oe],e,s,r)}}function Ql(n,e,t){return e.every((r,i)=>oS[t](n[i].parameters,r.parameters))}class Ni{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zs(this.queryParams)),this._queryParamMap}toString(){return nV.serialize(this)}}class Le{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Vt(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jl(this)}}class Ma{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Zs(this.parameters)),this._parameterMap}toString(){return gS(this)}}function ki(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class dS{}class hS{parse(e){const t=new dV(e);return new Ni(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ta(e.root,!0)}`,r=function sV(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Kl(t)}=${Kl(i)}`).join("&"):`${Kl(t)}=${Kl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function rV(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const nV=new hS;function Jl(n){return n.segments.map(e=>gS(e)).join("/")}function Ta(n,e){if(!n.hasChildren())return Jl(n);if(e){const t=n.children[Oe]?Ta(n.children[Oe],!1):"",r=[];return Vt(n.children,(i,s)=>{s!==Oe&&r.push(`${s}:${Ta(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function tV(n,e){let t=[];return Vt(n.children,(r,i)=>{i===Oe&&(t=t.concat(e(r,i)))}),Vt(n.children,(r,i)=>{i!==Oe&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Oe?[Ta(n.children[Oe],!1)]:[`${i}:${Ta(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Oe]?`${Jl(n)}/${t[0]}`:`${Jl(n)}/(${t.join("//")})`}}function fS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kl(n){return fS(n).replace(/%3B/gi,";")}function Rp(n){return fS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yl(n){return decodeURIComponent(n)}function pS(n){return Yl(n.replace(/\+/g,"%20"))}function gS(n){return`${Rp(n.path)}${function iV(n){return Object.keys(n).map(e=>`;${Rp(e)}=${Rp(n[e])}`).join("")}(n.parameters)}`}const oV=/^[^\/()?;=#]+/;function Zl(n){const e=n.match(oV);return e?e[0]:""}const aV=/^[^=?&#]+/,lV=/^[^&#]+/;class dV{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Oe]=new Le(e,t)),r}parseSegment(){const e=Zl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ma(Yl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Zl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Zl(this.remaining);i&&(r=i,this.capture(r))}e[Yl(t)]=Yl(r)}parseQueryParam(e){const t=function cV(n){const e=n.match(aV);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function uV(n){const e=n.match(lV);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=pS(t),s=pS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Zl(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Oe);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Oe]:new Le([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class mS{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Pp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Pp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Op(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Op(e,this._root).map(t=>t.value)}}function Pp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Pp(n,t);if(r)return r}return null}function Op(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Op(n,t);if(r.length)return r.unshift(e),r}return[]}class Fr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Xs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class yS extends mS{constructor(e,t){super(e),this.snapshot=t,Np(this,e)}toString(){return this.snapshot.toString()}}function vS(n,e){const t=function hV(n,e){const o=new Xl([],{},{},"",{},Oe,e,null,n.root,-1,{});return new CS("",new Fr(o,[]))}(n,e),r=new Ue([new Ma("",{})]),i=new Ue({}),s=new Ue({}),o=new Ue({}),a=new Ue(""),c=new eo(r,i,o,a,s,Oe,e,t.root);return c.snapshot=t.root,new yS(new Fr(c,[]),t)}class eo{constructor(e,t,r,i,s,o,a,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(pe(e=>Zs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(pe(e=>Zs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _S(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function fV(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Xl{constructor(e,t,r,i,s,o,a,c,l,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class CS extends mS{constructor(e,t){super(t),this.url=e,Np(this,t)}toString(){return bS(this._root)}}function Np(n,e){e.value._routerState=n,e.children.forEach(t=>Np(n,t))}function bS(n){const e=n.children.length>0?` { ${n.children.map(bS).join(", ")} } `:"";return`${n.value}${e}`}function kp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),gr(e.params,t.params)||n.params.next(t.params),function J2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),gr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Fp(n,e){const t=gr(n.params,e.params)&&function eV(n,e){return ki(n,e)&&n.every((t,r)=>gr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Fp(n.parent,e.parent))}function xa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function gV(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xa(n,r,i);return xa(n,r)})}(n,e,t);return new Fr(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>xa(n,a)),o}}const r=function mV(n){return new eo(new Ue(n.url),new Ue(n.params),new Ue(n.queryParams),new Ue(n.fragment),new Ue(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>xa(n,s));return new Fr(r,i)}}function eu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ia(n){return"object"==typeof n&&null!=n&&n.outlets}function Lp(n,e,t,r,i){let s={};if(r&&Vt(r,(a,c)=>{s[c]=Array.isArray(a)?a.map(l=>`${l}`):`${a}`}),n===e)return new Ni(t,s,i);const o=wS(n,e,t);return new Ni(o,s,i)}function wS(n,e,t){const r={};return Vt(n.children,(i,s)=>{r[s]=i===e?t:wS(i,e,t)}),new Le(n.segments,r)}class DS{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&eu(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Ia);if(i&&i!==sS(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function SS(n,e,t){if(n||(n=new Le([],{})),0===n.segments.length&&n.hasChildren())return tu(n,e,t);const r=function wV(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Ia(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!MS(c,l,o))return s;r+=2}else{if(!MS(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Le(n.segments.slice(0,r.pathIndex),{});return s.children[Oe]=new Le(n.segments.slice(r.pathIndex),n.children),tu(s,0,i)}return r.match&&0===i.length?new Le(n.segments,{}):r.match&&!n.hasChildren()?jp(n,e,t):r.match?tu(n,0,i):jp(n,e,t)}function tu(n,e,t){if(0===t.length)return new Le(n.segments,{});{const r=function bV(n){return Ia(n[0])?n[0].outlets:{[Oe]:n}}(t),i={};return Vt(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=SS(n.children[o],e,s))}),Vt(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new Le(n.segments,i)}}function jp(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Ia(s)){const c=DV(s.outlets);return new Le(r,c)}if(0===i&&eu(t[0])){r.push(new Ma(n.segments[e].path,ES(t[0]))),i++;continue}const o=Ia(s)?s.outlets[Oe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&eu(a)?(r.push(new Ma(o,ES(a))),i+=2):(r.push(new Ma(o,{})),i++)}return new Le(r,{})}function DV(n){const e={};return Vt(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=jp(new Le([],{}),0,t))}),e}function ES(n){const e={};return Vt(n,(t,r)=>e[r]=`${t}`),e}function MS(n,e,t){return n==t.path&&gr(e,t.parameters)}class EV{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),kp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Xs(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Vt(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Xs(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Xs(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Xs(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new z2(s.value.snapshot))}),e.children.length&&this.forwardEvent(new H2(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(kp(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),kp(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function MV(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),c=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=c,o.outlet&&o.outlet.activateWith(i,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Bp{constructor(e,t){this.routes=e,this.module=t}}function hi(n){return"function"==typeof n}function Fi(n){return n instanceof Ni}const Aa=Symbol("INITIAL_VALUE");function Ra(){return ui(n=>Da(n.map(e=>e.pipe(yp(1),function E2(...n){const e=n[n.length-1];return Jt(e)?(n.pop(),t=>Tp(n,t,e)):t=>Tp(n,t)}(Aa)))).pipe(YD((e,t)=>{let r=!1;return t.reduce((i,s,o)=>i!==Aa?i:(s===Aa&&(r=!0),r||!1!==s&&o!==t.length-1&&!Fi(s)?i:s),e)},Aa),At(e=>e!==Aa),pe(e=>Fi(e)?e:!0===e),yp(1)))}class PV{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Pa,this.attachRef=null}}class Pa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new PV,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let $p=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ge,this.deactivateEvents=new Ge,this.attachEvents=new Ge,this.detachEvents=new Ge,this.name=s||Oe,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,c=new OV(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,c),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(V(Pa),V(Nn),V(Ps),function Mo(n){return function rM(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Ug(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Mt(),n)}("name"),V(la))},n.\u0275dir=he({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class OV{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===eo?this.route:e===Pa?this.childContexts:this.parent.get(e,t)}}let TS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&Ee(0,"router-outlet")},directives:[$p],encapsulation:2}),n})();function xS(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];NV(r,kV(e,r))}}function NV(n,e){n.children&&xS(n.children,e)}function kV(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Up(n){const e=n.children&&n.children.map(Up),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Oe&&(t.component=TS),t}function Bn(n){return n.outlet||Oe}function IS(n,e){const t=n.filter(r=>Bn(r)===e);return t.push(...n.filter(r=>Bn(r)!==e)),t}const AS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},AS):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Q2)(t,n,e);if(!s)return Object.assign({},AS);const o={};Vt(s.posParams,(c,l)=>{o[l]=c.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function ru(n,e,t,r,i="corrected"){if(t.length>0&&function VV(n,e,t){return t.some(r=>iu(n,e,r)&&Bn(r)!==Oe)}(n,t,r)){const o=new Le(e,function LV(n,e,t,r){const i={};i[Oe]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Bn(s)!==Oe){const o=new Le([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[Bn(s)]=o}return i}(n,e,r,new Le(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function jV(n,e,t){return t.some(r=>iu(n,e,r))}(n,t,r)){const o=new Le(n.segments,function FV(n,e,t,r,i,s){const o={};for(const a of r)if(iu(n,t,a)&&!i[Bn(a)]){const c=new Le([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Bn(a)]=c}return Object.assign(Object.assign({},i),o)}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Le(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function iu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function RS(n,e,t,r){return!!(Bn(n)===r||r!==Oe&&iu(e,t,n))&&("**"===n.path||nu(e,n,t).matched)}function PS(n,e,t){return 0===e.length&&!n.children[t]}class su{constructor(e){this.segmentGroup=e||null}}class OS{constructor(e){this.urlTree=e}}function Oa(n){return Ks(new su(n))}function NS(n){return Ks(new OS(n))}function BV(n){return Ks(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class HV{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Tr)}apply(){const e=ru(this.urlTree.root,[],[],this.config).segmentGroup,t=new Le(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Oe).pipe(pe(s=>this.createUrlTree(Hp(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ci(s=>{if(s instanceof OS)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof su?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Oe).pipe(pe(i=>this.createUrlTree(Hp(i),e.queryParams,e.fragment))).pipe(ci(i=>{throw i instanceof su?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Le([],{[Oe]:e}):e;return new Ni(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(pe(s=>new Le([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return jt(i).pipe(Ys(s=>{const o=r.children[s],a=IS(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(pe(c=>({segment:c,outlet:s})))}),YD((s,o)=>(s[o.outlet]=o.segment,s),{}),function A2(n,e){const t=arguments.length>=2;return r=>r.pipe(n?At((i,s)=>n(i,s,r)):z,xp(1),t?ND(e):kD(()=>new zl))}())}expandSegment(e,t,r,i,s,o){return jt(r).pipe(Ys(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(ci(l=>{if(l instanceof su)return ve(null);throw l}))),jn(a=>!!a),ci((a,c)=>{if(a instanceof zl||"EmptyError"===a.name)return PS(t,i,s)?ve(new Le([],{})):Oa(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return RS(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):Oa(t):Oa(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?NS(s):this.lineralizeSegments(r,s).pipe(Pt(o=>{const a=new Le(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=nu(t,i,s);if(!a)return Oa(t);const d=this.applyRedirectCommands(c,i.redirectTo,u);return i.redirectTo.startsWith("/")?NS(d):this.lineralizeSegments(i,d).pipe(Pt(h=>this.expandSegment(e,t,r,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ve(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(pe(d=>(r._loadedConfig=d,new Le(i,{})))):ve(new Le(i,{}));const{matched:o,consumedSegments:a,remainingSegments:c}=nu(t,r,i);return o?this.getChildConfig(e,r,i).pipe(Pt(u=>{const d=u.module,h=u.routes,{segmentGroup:f,slicedSegments:y}=ru(t,a,c,h),A=new Le(f.segments,f.children);if(0===y.length&&A.hasChildren())return this.expandChildren(d,h,A).pipe(pe(Y=>new Le(a,Y)));if(0===h.length&&0===y.length)return ve(new Le(a,{}));const j=Bn(r)===s;return this.expandSegment(d,A,h,y,j?Oe:s,!0).pipe(pe(O=>new Le(a.concat(O.segments),O.children)))})):Oa(t)}getChildConfig(e,t,r){return t.children?ve(new Bp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ve(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(Pt(i=>i?this.configLoader.load(e.injector,t).pipe(pe(s=>(t._loadedConfig=s,s))):function $V(n){return Ks(Ap(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ve(new Bp([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return ve(!0);const s=i.map(o=>{const a=e.get(o);let c;if(function xV(n){return n&&hi(n.canLoad)}(a))c=a.canLoad(t,r);else{if(!hi(a))throw new Error("Invalid CanLoad guard");c=a(t,r)}return mr(c)});return ve(s).pipe(Ra(),Dn(o=>{if(!Fi(o))return;const a=Ap(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),pe(o=>!0===o))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ve(r);if(i.numberOfChildren>1||!i.children[Oe])return BV(e.redirectTo);i=i.children[Oe]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ni(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Vt(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Vt(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,r,i)}),new Le(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Hp(n){const e={};for(const r of Object.keys(n.children)){const s=Hp(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function qV(n){if(1===n.numberOfChildren&&n.children[Oe]){const e=n.children[Oe];return new Le(n.segments.concat(e.segments),e.children)}return n}(new Le(n.segments,e))}class kS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ou{constructor(e,t){this.component=e,this.route=t}}function GV(n,e,t){const r=n._root;return Na(r,e?e._root:null,t,[r.value])}function au(n,e,t){const r=function QV(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Na(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Xs(e);return n.children.forEach(o=>{(function JV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function KV(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ki(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ki(n.url,e.url)||!gr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fp(n,e)||!gr(n.queryParams,e.queryParams);default:return!Fp(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new kS(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Na(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ou(a.outlet.component,o))}else o&&ka(e,a,i),i.canActivateChecks.push(new kS(r)),Na(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Vt(s,(o,a)=>ka(o,t.getContext(a),i)),i}function ka(n,e,t){const r=Xs(n),i=n.value;Vt(r,(s,o)=>{ka(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new ou(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class sj{}function FS(n){return new W(e=>e.error(n))}class aj{constructor(e,t,r,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=ru(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Oe);if(null===t)return null;const r=new Xl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Oe,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Fr(r,t),s=new CS(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=_S(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=IS(e,s),c=this.processSegmentGroup(a,o,s);if(null===c)return null;r.push(...c)}const i=LS(r);return function cj(n){n.sort((e,t)=>e.value.outlet===Oe?-1:t.value.outlet===Oe?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,r,i);if(null!==o)return o}return PS(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!RS(e,t,r,i))return null;let s,o=[],a=[];if("**"===e.path){const f=r.length>0?sS(r).parameters:{};s=new Xl(r,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,BS(e),Bn(e),e.component,e,VS(t),jS(t)+r.length,$S(e))}else{const f=nu(t,e,r);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments,s=new Xl(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,BS(e),Bn(e),e.component,e,VS(t),jS(t)+o.length,$S(e))}const c=function lj(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:u}=ru(t,o,a,c.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const f=this.processChildren(c,l);return null===f?null:[new Fr(s,f)]}if(0===c.length&&0===u.length)return[new Fr(s,[])];const d=Bn(e)===i,h=this.processSegment(c,l,u,d?Oe:i);return null===h?null:[new Fr(s,h)]}}function uj(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function LS(n){const e=[],t=new Set;for(const r of n){if(!uj(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=LS(r.children);e.push(new Fr(r.value,i))}return e.filter(r=>!t.has(r))}function VS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function jS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function BS(n){return n.data||{}}function $S(n){return n.resolve||{}}function US(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qp(n){return ui(e=>{const t=n(e);return t?jt(t).pipe(pe(()=>e)):ve(e)})}class vj extends class yj{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const zp=new _e("ROUTES");class HS{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe(pe(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new Bp(iS(o.injector.get(zp,void 0,Ce.Self|Ce.Optional)).map(Up),o)}),ci(s=>{throw t._loader$=void 0,s}));return t._loader$=new dg(i,()=>new ie).pipe(mu()),t._loader$}loadModuleFactory(e){return mr(e()).pipe(Pt(t=>t instanceof j_?ve(t):jt(this.compiler.compileModuleAsync(t))))}}class Cj{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function bj(n){throw n}function wj(n,e,t){return e.parse("/")}function qS(n,e){return ve(null)}const Dj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Sj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let dn=(()=>{class n{constructor(t,r,i,s,o,a,c){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ie,this.errorHandler=bj,this.malformedUriErrorHandler=wj,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qS,afterPreactivation:qS},this.urlHandlingStrategy=new Cj,this.routeReuseStrategy=new vj,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Tr),this.console=o.get(TR);const d=o.get(gt);this.isNgZoneEnabled=d instanceof gt&&gt.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function K2(){return new Ni(new Le([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new HS(o,a,h=>this.triggerEvent(new XD(h)),h=>this.triggerEvent(new eS(h))),this.routerState=vS(this.currentUrlTree,this.rootComponentType),this.transitions=new Ue({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(At(i=>0!==i.id),pe(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ui(i=>{let s=!1,o=!1;return ve(i).pipe(Dn(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ui(a=>{const c=this.browserUrlTree.toString(),l=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return zS(a.source)&&(this.browserUrlTree=a.extractedUrl),ve(a).pipe(ui(d=>{const h=this.transitions.getValue();return r.next(new Ip(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Js:Promise.resolve(d)}),function zV(n,e,t,r){return ui(i=>function UV(n,e,t,r,i){return new HV(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(pe(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Dn(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function dj(n,e,t,r,i){return Pt(s=>function oj(n,e,t,r,i="emptyOnly",s="legacy"){try{const o=new aj(n,e,t,r,i,s).recognize();return null===o?FS(new sj):ve(o)}catch(o){return FS(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe(pe(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Dn(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new L2(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:y,restoredState:A,extras:j}=a,U=new Ip(h,this.serializeUrl(f),y,A);r.next(U);const O=vS(f,this.rootComponentType).snapshot;return ve(Object.assign(Object.assign({},a),{targetSnapshot:O,urlAfterRedirects:f,extras:Object.assign(Object.assign({},j),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Js}),qp(a=>{const{targetSnapshot:c,id:l,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(c,{navigationId:l,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Dn(a=>{const c=new V2(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),pe(a=>Object.assign(Object.assign({},a),{guards:GV(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function YV(n,e){return Pt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ve(Object.assign(Object.assign({},t),{guardsResult:!0})):function ZV(n,e,t,r){return jt(n).pipe(Pt(i=>function ij(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ve(s.map(a=>{const c=au(a,e,i);let l;if(function RV(n){return n&&hi(n.canDeactivate)}(c))l=mr(c.canDeactivate(n,e,t,r));else{if(!hi(c))throw new Error("Invalid CanDeactivate guard");l=mr(c(n,e,t,r))}return l.pipe(jn())})).pipe(Ra()):ve(!0)}(i.component,i.route,t,e,r)),jn(i=>!0!==i,!0))}(o,r,i,n).pipe(Pt(a=>a&&function TV(n){return"boolean"==typeof n}(a)?function XV(n,e,t,r){return jt(e).pipe(Ys(i=>Tp(function tj(n,e){return null!==n&&e&&e(new U2(n)),ve(!0)}(i.route.parent,r),function ej(n,e){return null!==n&&e&&e(new q2(n)),ve(!0)}(i.route,r),function rj(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function WV(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>KD(()=>ve(o.guards.map(c=>{const l=au(c,o.node,t);let u;if(function AV(n){return n&&hi(n.canActivateChild)}(l))u=mr(l.canActivateChild(r,n));else{if(!hi(l))throw new Error("Invalid CanActivateChild guard");u=mr(l(r,n))}return u.pipe(jn())})).pipe(Ra())));return ve(s).pipe(Ra())}(n,i.path,t),function nj(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ve(!0);const i=r.map(s=>KD(()=>{const o=au(s,e,t);let a;if(function IV(n){return n&&hi(n.canActivate)}(o))a=mr(o.canActivate(e,n));else{if(!hi(o))throw new Error("Invalid CanActivate guard");a=mr(o(e,n))}return a.pipe(jn())}));return ve(i).pipe(Ra())}(n,i.route,t))),jn(i=>!0!==i,!0))}(r,s,n,e):ve(a)),pe(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Dn(a=>{if(Fi(a.guardsResult)){const l=Ap(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw l.url=a.guardsResult,l}const c=new j2(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),At(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),qp(a=>{if(a.guards.canActivateChecks.length)return ve(a).pipe(Dn(c=>{const l=new B2(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}),ui(c=>{let l=!1;return ve(c).pipe(function hj(n,e){return Pt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ve(t);let s=0;return jt(i).pipe(Ys(o=>function fj(n,e,t,r){return function pj(n,e,t,r){const i=US(n);if(0===i.length)return ve({});const s={};return jt(i).pipe(Pt(o=>function gj(n,e,t,r){const i=au(n,e,r);return mr(i.resolve?i.resolve(e,t):i(e,t))}(n[o],e,t,r).pipe(Dn(a=>{s[o]=a}))),xp(1),Pt(()=>US(s).length===i.length?ve(s):Js))}(n._resolve,n,e,r).pipe(pe(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),_S(n,t).resolve),null)))}(o.route,r,n,e)),Dn(()=>s++),xp(1),Pt(o=>s===i.length?ve(t):Js))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Dn({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(c),this.cancelNavigationTransition(c,"At least one route resolver didn't emit any value."))}}))}),Dn(c=>{const l=new $2(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}))}),qp(a=>{const{targetSnapshot:c,id:l,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(c,{navigationId:l,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),pe(a=>{const c=function pV(n,e,t){const r=xa(n,e._root,t?t._root:void 0);return new yS(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:c})}),Dn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>pe(r=>(new EV(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Dn({next(){s=!0},complete(){s=!0}}),function O2(n){return e=>e.lift(new N2(n))}(()=>{var a;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),ci(a=>{if(o=!0,function W2(n){return n&&n[nS]}(a)){const c=Fi(a.url);c||(this.navigated=!0,this.restoreHistory(i,!0));const l=new ZD(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(l),c?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zS(i.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const c=new F2(i.id,this.serializeUrl(i.extractedUrl),a);r.next(c);try{i.resolve(this.errorHandler(a))}catch(l){i.reject(l)}}return Js}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},o=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(o){const c=Object.assign({},o);delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,r,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){xS(t),this.config=t.map(Up),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=i||this.routerState.root,u=c?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function yV(n,e,t,r,i){if(0===t.length)return Lp(e.root,e.root,e.root,r,i);const s=function vV(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new DS(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Vt(s.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new DS(t,e,r)}(t);if(s.toRoot())return Lp(e.root,e.root,new Le([],{}),r,i);const o=function _V(n,e,t){if(n.isAbsolute)return new Vp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new Vp(s,s===e.root,0)}const r=eu(n.commands[0])?0:1;return function CV(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Vp(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?tu(o.segmentGroup,o.index,s.commands):SS(o.segmentGroup,o.index,s.commands);return Lp(e.root,o.segmentGroup,a,r,i)}(l,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Fi(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Ej(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Dj):!1===r?Object.assign({},Sj):r,Fi(t))return aS(this.currentUrlTree,t,i);const s=this.parseUrl(t);return aS(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ea(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){var a,c;if(this.disposed)return Promise.resolve(!1);let l,u,d;o?(l=o.resolve,u=o.reject,d=o.promise):d=new Promise((y,A)=>{l=y,u=A});const h=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),f=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):f=0,this.setTransition({id:h,targetPageId:f,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:l,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(y=>Promise.reject(y))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new ZD(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){rh()},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();function zS(n){return"imperative"!==n}let Fa=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new ie,this.subscription=t.events.subscribe(s=>{s instanceof Ea&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,o){if(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:to(this.skipLocationChange),replaceUrl:to(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:to(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(V(dn),V(eo),V(Fs))},n.\u0275dir=he({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&K("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&Jn("target",r.target)("href",r.href,Lo)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Yt]}),n})();function to(n){return""===n||!!n}class GS{}class WS{preload(e,t){return ve(null)}}let QS=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new HS(i,r,c=>t.triggerEvent(new XD(c)),c=>t.triggerEvent(new eS(c)))}setUpPreloading(){this.subscription=this.router.events.pipe(At(t=>t instanceof Ea),Ys(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Tr);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return jt(i).pipe(mo(),pe(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ve(r._loadedConfig):this.loader.load(t.injector,r)).pipe(Pt(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(X(dn),X(DC),X(tn),X(GS))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),Wp=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ip?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ea&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof tS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new tS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){rh()},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const Li=new _e("ROUTER_CONFIGURATION"),JS=new _e("ROUTER_FORROOT_GUARD"),Ij=[Zh,{provide:dS,useClass:hS},{provide:dn,useFactory:function Nj(n,e,t,r,i,s,o={},a,c){const l=new dn(null,n,e,t,r,i,iS(s));return a&&(l.urlHandlingStrategy=a),c&&(l.routeReuseStrategy=c),function kj(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,l),o.enableTracing&&l.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),l},deps:[dS,Pa,Zh,tn,DC,zp,Li,[class _j{},new Gr],[class mj{},new Gr]]},Pa,{provide:eo,useFactory:function Fj(n){return n.routerState.root},deps:[dn]},QS,WS,class xj{preload(e,t){return t().pipe(ci(()=>ve(null)))}},{provide:Li,useValue:{enableTracing:!1}}];function Aj(){return new xC("Router",dn)}let KS=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Ij,YS(t),{provide:JS,useFactory:Oj,deps:[[dn,new Gr,new Oo]]},{provide:Li,useValue:r||{}},{provide:Fs,useFactory:Pj,deps:[Yr,[new gc(Yh),new Gr],Li]},{provide:Wp,useFactory:Rj,deps:[dn,RO,Li]},{provide:GS,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:WS},{provide:xC,multi:!0,useFactory:Aj},[Qp,{provide:kh,multi:!0,useFactory:Lj,deps:[Qp]},{provide:ZS,useFactory:Vj,deps:[Qp]},{provide:wC,multi:!0,useExisting:ZS}]]}}static forChild(t){return{ngModule:n,providers:[YS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(X(JS,8),X(dn,8))},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({}),n})();function Rj(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Wp(n,e,t)}function Pj(n,e,t={}){return t.useHash?new _P(n,e):new WC(n,e)}function Oj(n){return"guarded"}function YS(n){return[{provide:cM,multi:!0,useValue:n},{provide:zp,multi:!0,useValue:n}]}let Qp=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ie}appInitializer(){return this.injector.get(mP,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(dn),o=this.injector.get(Li);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?ve(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Li),i=this.injector.get(QS),s=this.injector.get(Wp),o=this.injector.get(dn),a=this.injector.get(qh);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(X(tn))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();function Lj(n){return n.appInitializer.bind(n)}function Vj(n){return n.bootstrapListener.bind(n)}const ZS=new _e("Router Initializer");g(3639);const XS=["*"],Bj=["chatInput"],$j=function(n){return{backgroundImage:n}};function Uj(n,e){if(1&n){const t=yt();I(0,"div",6)(1,"ngx-chat-avatar",7),K("click",function(){return Re(t),Z().avatarClickHandler.emit()}),x()()}if(2&n){const t=Z();N(1),Er("has-click-handler",t.avatarInteractive),B("imageUrl",t.avatar)}}function Hj(n,e){if(1&n){const t=yt();I(0,"div",8)(1,"img",9),K("load",function(){return Re(t),Z().showImagePlaceholder=!1}),x()()}if(2&n){const t=Z();Er("chat-message-image-wrapper--placeholder",t.showImagePlaceholder),N(1),B("src",t.imageLink,Lo)}}function qj(n,e){1&n&&(bt(0),$(1,"\u2713"),wt())}function zj(n,e){1&n&&(bt(0),$(1,"\u2713\u2713"),wt())}function Gj(n,e){1&n&&(bt(0),I(1,"span",16),$(2,"\u2713\u2713"),x(),wt())}function Wj(n,e){if(1&n&&(bt(0,14),se(1,qj,2,0,"ng-container",15),se(2,zj,2,0,"ng-container",15),se(3,Gj,3,0,"ng-container",15),wt()),2&n){const t=Z(2);B("ngSwitch",t.messageState),N(1),B("ngSwitchCase",t.MessageState.SENT),N(1),B("ngSwitchCase",t.MessageState.RECIPIENT_RECEIVED),N(1),B("ngSwitchCase",t.MessageState.RECIPIENT_SEEN)}}function Qj(n,e){if(1&n&&(I(0,"div",10)(1,"small",11),$(2),se(3,Wj,4,4,"ng-container",12),x(),I(4,"small",13),$(5),x()()),2&n){const t=Z();N(1),Ko("title",t.nick),N(1),ze(" ",t.nick," "),N(1),B("ngIf","out"===t.direction),N(2),ft(t.formattedDate)}}const Jj=["messageArea"];function Kj(n,e){if(1&n&&Ee(0,"ngx-chat-message",9),2&n){const t=e.$implicit,r=Z(2);Er("chat-message--in",t.direction===r.Direction.in)("chat-message--out",t.direction===r.Direction.out),B("id","message-"+t.id)("contact",r.getOrCreateContactWithFullJid(t))("nick",t.direction===r.Direction.in?r.getOrCreateContactWithFullJid(t).name:"")("avatar",r.getOrCreateContactWithFullJid(t).avatar)("message",t)("showAvatars",r.showAvatars)}}function Yj(n,e){if(1&n&&(bt(0),I(1,"div",7),$(2),Se(3,"date"),x(),se(4,Kj,1,10,"ngx-chat-message",8),wt()),2&n){const t=e.$implicit,r=Z();N(2),ft(function J_(n,e,t,r,i,s){const o=n+20,a=q(),c=Xi(a,o);return oa(a,o)?G_(a,Zt(),e,c.transform,t,r,i,s,c):c.transform(t,r,i,s)}(3,2,t.date,r.chatService.translations.dateFormat,void 0,r.chatService.translations.locale)),N(2),B("ngForOf",t.messages)}}function Zj(n,e){if(1&n&&(I(0,"div",10),$(1),x()),2&n){const t=Z();N(1),ze(" ",t.chatService.translations.noMessages," ")}}function Xj(n,e){if(1&n&&(I(0,"span",16),$(1),x()),2&n){const t=Z(2);N(1),ft(t.chatService.translations.acceptSubscriptionRequest)}}function eB(n,e){if(1&n){const t=yt();I(0,"a",17),K("click",function(i){return Re(t),Z(2).acceptSubscriptionRequest(i)}),$(1),x()}if(2&n){const t=Z(2);N(1),ft(t.chatService.translations.acceptSubscriptionRequest)}}function tB(n,e){if(1&n&&(I(0,"span",16),$(1),x()),2&n){const t=Z(2);N(1),ft(t.chatService.translations.denySubscriptionRequest)}}function nB(n,e){if(1&n){const t=yt();I(0,"a",17),K("click",function(i){return Re(t),Z(2).denySubscriptionRequest(i)}),$(1),x()}if(2&n){const t=Z(2);N(1),ft(t.chatService.translations.denySubscriptionRequest)}}function rB(n,e){if(1&n){const t=yt();I(0,"li")(1,"a",17),K("click",function(i){return Re(t),Z(3).blockContactAndReport(i)}),$(2),x()()}if(2&n){const t=Z(3);N(2),ft(t.chatService.translations.blockAndReport)}}function iB(n,e){if(1&n){const t=yt();I(0,"ul",18)(1,"li")(2,"a",17),K("click",function(i){return Re(t),Z(2).blockContact(i)}),$(3),x()(),se(4,rB,3,1,"li",19),I(5,"li")(6,"a",17),K("click",function(i){return Re(t),Z(2).dismissBlockOptions(i)}),$(7),x()()()}if(2&n){const t=Z(2);N(3),ft(t.chatService.translations.block),N(1),B("ngIf",t.reportUserService),N(3),ft(t.chatService.translations.dismiss)}}function sB(n,e){if(1&n&&(I(0,"ngx-chat-message-simple",11)(1,"span"),$(2),x(),I(3,"ul",12)(4,"li"),se(5,Xj,2,1,"span",13),se(6,eB,2,1,"a",14),x(),I(7,"li"),se(8,tB,2,1,"span",13),se(9,nB,2,1,"a",14),x()(),se(10,iB,8,3,"ul",15),Se(11,"async"),x()),2&n){const t=Z();B("direction",t.Direction.in)("avatar",t.showAvatars?t.recipient.avatar:void 0)("footerHidden",!0),N(2),ze(" ",t.chatService.translations.subscriptionRequestMessage," "),N(3),B("ngIf",t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS),N(1),B("ngIf",t.subscriptionAction===t.SubscriptionAction.PENDING_REQUEST),N(2),B("ngIf",t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS),N(1),B("ngIf",t.subscriptionAction===t.SubscriptionAction.PENDING_REQUEST),N(1),B("ngIf",!0===Me(11,9,t.blockPlugin.supportsBlock$)&&t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS)}}function oB(n,e){if(1&n){const t=yt();I(0,"div",3),K("click",function(){return Re(t),Z().closeClick.emit()}),$(1," \xd7 "),x()}}const aB=[[["",8,"window-header-content"]],[["",8,"window-content"]]],cB=[".window-header-content",".window-content"];function lB(n,e){if(1&n&&(I(0,"div",9)(1,"span",10),$(2),Se(3,"async"),x()()),2&n){const t=Z();N(2),ze(" ",t.chatService.translations.presence[Me(3,1,t.chatWindowState.recipient.presence$)]," ")}}function uB(n,e){if(1&n){const t=yt();I(0,"div",17),K("click",function(){const s=Re(t).$implicit;return Z(2).onActionClick(s)}),x()}if(2&n){const t=e.$implicit;B("ngClass",t.cssClass)("innerHTML",t.html,Dm)}}function dB(n,e){if(1&n){const t=yt();I(0,"ngx-chat-filedrop",11),K("fileUpload",function(i){return Re(t),Z().uploadFile(i)}),I(1,"div",12),K("click",function(){return Re(t),Z().onFocus()}),Ee(2,"ngx-chat-message-list",13),I(3,"div",14)(4,"ngx-chat-message-input",15),K("messageSent",function(){return Re(t),Z().afterSendMessage()}),x(),se(5,uB,1,2,"div",16),x()()()}if(2&n){const t=Z();B("enabled",t.httpFileUploadPlugin.fileUploadSupported)("dropMessage",t.chatService.translations.dropMessage),N(2),B("recipient",t.chatWindowState.recipient)("showAvatars",!1),N(2),B("recipient",t.chatWindowState.recipient),N(1),B("ngForOf",t.chatService.chatActions)}}const hB=function(n){return{"has-click-handler":n}},fB=["video"];function pB(n,e){1&n&&Ee(0,"ngx-chat-video-window",3),2&n&&B("track",e.$implicit)}function gB(n,e){1&n&&Ee(0,"ngx-chat-window",4),2&n&&B("chatWindowState",e.$implicit)}function mB(n,e){if(1&n&&(I(0,"div",7),$(1),Se(2,"async"),x()),2&n){const t=Z();N(1),ft(Me(2,1,t.unreadCount$))}}function yB(n,e){1&n&&(I(0,"div",9),$(1,"\u25cf "),x()),2&n&&B("ngClass","roster-presence--"+Z().ngIf)}function vB(n,e){if(1&n&&(bt(0),se(1,yB,2,1,"div",8),wt()),2&n){const t=e.ngIf,r=Z();N(1),B("ngIf",t!==r.Presence.unavailable)}}function _B(n,e){1&n&&(I(0,"div",6),$(1,"\xbb"),x())}function CB(n,e){1&n&&(I(0,"div",6),$(1,"\xab"),x())}function bB(n,e){if(1&n){const t=yt();I(0,"ngx-chat-roster-recipient",10),K("click",function(){const s=Re(t).$implicit;return Z(3).onClickRecipient(s)}),x()}2&n&&B("recipient",e.$implicit)}function wB(n,e){if(1&n&&(bt(0),I(1,"div",7),$(2),x(),I(3,"div",8),se(4,bB,1,1,"ngx-chat-roster-recipient",9),x(),wt()),2&n){const t=Z().ngIf,r=Z();N(2),ft(r.chatService.translations.rooms),N(2),B("ngForOf",t)}}function DB(n,e){if(1&n&&(bt(0),se(1,wB,5,2,"ng-container",4),wt()),2&n){const t=e.ngIf;N(1),B("ngIf",t.length>0)}}function SB(n,e){if(1&n){const t=yt();I(0,"ngx-chat-roster-recipient",10),K("click",function(){const s=Re(t).$implicit;return Z(2).onClickRecipient(s)}),x()}2&n&&B("recipient",e.$implicit)}function EB(n,e){if(1&n&&(bt(0),I(1,"div",7),$(2),x(),I(3,"div",8),se(4,SB,1,1,"ngx-chat-roster-recipient",9),Se(5,"async"),x(),wt()),2&n){const t=Z();N(2),ft(t.chatService.translations.contacts),N(2),B("ngForOf",Me(5,2,t.contacts))}}function MB(n,e){if(1&n){const t=yt();I(0,"ngx-chat-roster-recipient",10),K("click",function(){const s=Re(t).$implicit;return Z(2).onClickRecipient(s)}),x()}2&n&&B("recipient",e.$implicit)}function TB(n,e){if(1&n&&(bt(0),I(1,"div",7),$(2),x(),I(3,"div",8),se(4,MB,1,1,"ngx-chat-roster-recipient",9),Se(5,"async"),x(),wt()),2&n){const t=Z();N(2),ft(t.chatService.translations.contactRequestIn),N(2),B("ngForOf",Me(5,2,t.contactRequestsReceived$))}}function xB(n,e){if(1&n){const t=yt();I(0,"ngx-chat-roster-recipient",10),K("click",function(){const s=Re(t).$implicit;return Z(2).onClickRecipient(s)}),x()}2&n&&B("recipient",e.$implicit)}function IB(n,e){if(1&n&&(bt(0),I(1,"div",7),$(2),x(),I(3,"div",8),se(4,xB,1,1,"ngx-chat-roster-recipient",9),Se(5,"async"),x(),wt()),2&n){const t=Z();N(2),ft(t.chatService.translations.contactRequestOut),N(2),B("ngForOf",Me(5,2,t.contactRequestsSent$))}}function AB(n,e){if(1&n){const t=yt();I(0,"ngx-chat-roster-recipient",10),K("click",function(){Re(t);const i=Z().$implicit;return Z(2).onClickRecipient(i)}),x()}2&n&&B("recipient",Z().$implicit)}function RB(n,e){if(1&n&&(bt(0),se(1,AB,1,1,"ngx-chat-roster-recipient",12),wt()),2&n){const t=e.$implicit;N(1),B("ngIf",t.messages.length>0)}}function PB(n,e){if(1&n&&(bt(0),I(1,"div",7),$(2),x(),I(3,"div",8),se(4,RB,2,1,"ng-container",11),Se(5,"async"),x(),wt()),2&n){const t=Z();N(2),ft(t.chatService.translations.contactsUnaffiliated),N(2),B("ngForOf",Me(5,2,t.contactsUnaffiliated$))}}function OB(n,e){if(1&n&&(I(0,"div",13),$(1),x()),2&n){const t=Z();N(1),ze(" ",t.chatService.translations.noContacts," ")}}function NB(n,e){if(1&n&&(I(0,"div",20),$(1),x()),2&n){const t=e.$implicit;N(1),ze(" ",t.name," ")}}function kB(n,e){if(1&n&&(I(0,"div",21),$(1),x()),2&n){const t=e.$implicit;N(1),ze(" ",t.name," ")}}function FB(n,e){if(1&n&&(I(0,"p",22)(1,"em"),$(2),x(),Ee(3,"br"),$(4),Se(5,"async"),Ee(6,"br"),$(7),Se(8,"async"),Ee(9,"br"),$(10),Se(11,"async"),Ee(12,"br"),$(13),Se(14,"async"),x()),2&n){const t=e.$implicit;N(2),ze("",t.name,":"),N(2),ze(" subscription=",Me(5,5,t.subscription$),""),N(3),ze(" presence=",Me(8,7,t.presence$),""),N(3),ze(" pendingIn=",Me(11,9,t.pendingIn$),""),N(3),ze(" pendingOut=",Me(14,11,t.pendingOut$)," ")}}function LB(n,e){if(1&n&&(bt(0),Ee(1,"hr"),I(2,"div",14),$(3," debug contact requests in: "),se(4,NB,2,1,"div",15),Se(5,"async"),x(),Ee(6,"hr"),I(7,"div",16),$(8," debug contact requests out: "),se(9,kB,2,1,"div",17),Se(10,"async"),x(),Ee(11,"hr"),I(12,"p"),$(13),Se(14,"async"),Ee(15,"br"),x(),se(16,FB,15,13,"p",18),Se(17,"async"),I(18,"p",19),$(19),Se(20,"async"),x(),wt()),2&n){const t=Z();N(4),B("ngForOf",Me(5,5,t.chatService.contactRequestsReceived$)),N(5),B("ngForOf",Me(10,7,t.chatService.contactRequestsSent$)),N(4),ze(" debug contacts (count: ",Me(14,9,t.chatService.contacts$).length,")"),N(3),B("ngForOf",Me(17,11,t.chatService.contacts$)),N(3),ze("state: ",Me(20,13,t.chatService.state$),"")}}function VB(n,e){1&n&&Ee(0,"ngx-chat-window-list",2),2&n&&B("rosterState",Z().rosterState)}function jB(n,e){if(1&n){const t=yt();I(0,"ngx-chat-roster-list",3),K("rosterStateChanged",function(i){return Re(t),Z().onRosterStateChanged(i)}),x()}if(2&n){const t=Z();B("rosterState",t.rosterState)("contacts",t.contacts)("contactRequestsReceived$",t.contactRequestsReceived$)("contactRequestsSent$",t.contactRequestsSent$)("contactsUnaffiliated$",t.contactsUnaffiliated$)}}let BB=(()=>{class n{constructor(){this.fileUpload=new Ge,this.enabled=!0,this.isDropTarget=!1}onDragOver(t){this.enabled&&(t.preventDefault(),t.stopPropagation(),this.isDropTarget=!0)}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDropTarget=!1}onDrop(t){return J(this,void 0,void 0,function*(){if(this.enabled){t.preventDefault(),t.stopPropagation(),this.isDropTarget=!1;for(let r=0;r<t.dataTransfer.items.length;r++){const i=t.dataTransfer.items[r];"file"===i.kind&&this.fileUpload.emit(i.getAsFile())}}})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-filedrop"]],hostBindings:function(t,r){1&t&&K("dragover",function(s){return r.onDragOver(s)})("dragenter",function(s){return r.onDragOver(s)})("dragleave",function(s){return r.onDragLeave(s)})("dragexit",function(s){return r.onDragLeave(s)})("drop",function(s){return r.onDrop(s)})},inputs:{dropMessage:"dropMessage",enabled:"enabled"},outputs:{fileUpload:"fileUpload"},ngContentSelectors:XS,decls:5,vars:3,consts:[[1,"drop-message"]],template:function(t,r){1&t&&(Nc(),I(0,"div")(1,"div",0),$(2),x(),I(3,"div"),Jo(4),x()()),2&t&&(N(1),Er("drop-message--visible",r.isDropTarget),N(1),ze(" ",r.dropMessage," "))},styles:[".drop-message[_ngcontent-%COMP%]{pointer-events:none;display:none}.drop-message--visible[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;justify-content:center;align-content:center;flex-direction:column;text-align:center;font-size:1.5em;z-index:999;background-color:#fff9;padding:1em}"]}),n})();const hn=new _e("ngxChatService");let cu=(()=>{class n{constructor(t){this.chatService=t,this.messageSent=new Ge,this.message=""}ngOnInit(){}onSendMessage(t){t&&t.preventDefault(),this.chatService.sendMessage(this.recipient,this.message),this.message="",this.messageSent.emit()}focus(){this.chatInput.nativeElement.focus()}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message-input"]],viewQuery:function(t,r){if(1&t&&Di(Bj,5),2&t){let i;Ir(i=Ar())&&(r.chatInput=i.first)}},inputs:{recipient:"recipient"},outputs:{messageSent:"messageSent"},decls:2,vars:2,consts:[["cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",1,"chat-input",3,"ngModel","placeholder","ngModelChange","keydown.enter"],["chatInput",""]],template:function(t,r){1&t&&(I(0,"textarea",0,1),K("ngModelChange",function(s){return r.message=s})("keydown.enter",function(s){return r.onSendMessage(s)}),x()),2&t&&(Ko("placeholder",r.chatService.translations.placeholder),B("ngModel",r.message))},directives:[AL,ei,Vs,Ti],styles:["@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.chat-input[_ngcontent-%COMP%]{border:none;width:100%;font-size:1em;padding:0;display:block;resize:none;overflow-x:hidden;outline:none}"]}),n})();var Qt=(()=>(function(n){n.SENDING="sending",n.SENT="sent",n.RECIPIENT_RECEIVED="recipientReceived",n.RECIPIENT_SEEN="recipientSeen"}(Qt||(Qt={})),Qt))(),ke=(()=>(function(n){n.in="in",n.out="out"}(ke||(ke={})),ke))();class Nt{onBeforeOnline(){return Promise.resolve()}onOffline(){}afterSendMessage(e,t){}beforeSendMessage(e,t){}handleStanza(e){return!1}afterReceiveMessage(e,t,r){}}class eE extends Nt{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.supportsBlock$=new Ue("unknown")}onBeforeOnline(){return J(this,void 0,void 0,function*(){const e=yield this.determineSupportForBlock();this.supportsBlock$.next(e),e&&(yield this.requestBlockedJids())})}determineSupportForBlock(){return J(this,void 0,void 0,function*(){try{return yield this.serviceDiscoveryPlugin.supportsFeature(this.xmppChatAdapter.chatConnectionService.userJid.domain,"urn:xmpp:blocking")}catch(e){return!1}})}onOffline(){this.supportsBlock$.next("unknown"),this.xmppChatAdapter.blockedContactIds$.next(new Set)}blockJid(e){return this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set"},(0,R.Ls)("block",{xmlns:"urn:xmpp:blocking"},(0,R.Ls)("item",{jid:e}))))}unblockJid(e){return this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set"},(0,R.Ls)("unblock",{xmlns:"urn:xmpp:blocking"},(0,R.Ls)("item",{jid:e}))))}requestBlockedJids(){return J(this,void 0,void 0,function*(){const t=(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"get"},(0,R.Ls)("blocklist",{xmlns:"urn:xmpp:blocking"})))).getChild("blocklist").getChildren("item").map(r=>r.attrs.jid);this.xmppChatAdapter.blockedContactIds$.next(new Set(t))})}handleStanza(e){var t;const{from:r}=e.attrs;if(r&&r===(null===(t=this.xmppChatAdapter.chatConnectionService.userJid)||void 0===t?void 0:t.bare().toString())){const i=e.getChild("block","urn:xmpp:blocking"),s=e.getChild("unblock","urn:xmpp:blocking"),o=this.xmppChatAdapter.blockedContactIds$.getValue();if(i)return i.getChildren("item").map(a=>a.attrs.jid).forEach(a=>o.add(a)),this.xmppChatAdapter.blockedContactIds$.next(o),!0;if(s){const a=s.getChildren("item").map(c=>c.attrs.jid);return 0===a.length?o.clear():a.forEach(c=>o.delete(c)),this.xmppChatAdapter.blockedContactIds$.next(o),!0}}return!1}}class no{}let tE=(()=>{class n extends Error{constructor(t){super(n.extractErrorTextFromErrorResponse(t,n.extractErrorDataFromErrorResponse(t))),this.errorStanza=t;const{code:r,type:i,condition:s}=n.extractErrorDataFromErrorResponse(t);this.errorCode=r,this.errorType=i,this.errorCondition=s}static extractErrorDataFromErrorResponse(t){var r;const i=t.getChild("error");return{code:Number(null==i?void 0:i.attrs.code)||void 0,type:null==i?void 0:i.attrs.type,condition:null===(r=null==i?void 0:i.children.filter(c=>"text"!==c.getName()&&c.attrs.xmlns===n.ERROR_ELEMENT_NS)[0])||void 0===r?void 0:r.getName()}}static extractErrorTextFromErrorResponse(t,{code:r,type:i,condition:s}){var o;const a=[`errorCode: ${null!=r?r:"[unknown]"}`,`errorType: ${null!=i?i:"[unknown]"}`,`errorCondition: ${null!=s?s:"[unknown]"}`].join(", ");return`IqResponseError: ${(null===(o=t.getChild("error"))||void 0===o?void 0:o.getChildText("text",n.ERROR_ELEMENT_NS))||"Unknown error"}${a?` (${a})`:""}`}}return n.ERROR_ELEMENT_NS="urn:ietf:params:xml:ns:xmpp-stanzas",n})();const nE="http://jabber.org/protocol/pubsub#event";class rE extends no{constructor(e){super(),this.publishOptions={persistItems:!1},e&&(this.publishOptions=Object.assign(Object.assign({},this.publishOptions),e))}toStanza(){const{node:e,id:t,persistItems:r}=this.publishOptions,i=this.publishOptions.data||(0,R.Ls)("data");return(0,R.Ls)("iq",{type:"set"},(0,R.Ls)("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"},(0,R.Ls)("publish",{node:e},(0,R.Ls)("item",{id:t},i)),(0,R.Ls)("publish-options",{},(0,R.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,R.Ls)("field",{var:"FORM_TYPE",type:"hidden"},(0,R.Ls)("value",{},"http://jabber.org/protocol/pubsub#publish-options")),(0,R.Ls)("field",{var:"pubsub#persist_items"},(0,R.Ls)("value",{},r?1:0)),(0,R.Ls)("field",{var:"pubsub#access_model"},(0,R.Ls)("value",{},"whitelist"))))))}}class $B extends no{constructor(e){super(),this.node=e}toStanza(){return(0,R.Ls)("iq",{type:"get"},(0,R.Ls)("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"},(0,R.Ls)("items",{node:this.node})))}}class UB extends Nt{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.publish$=new ie,this.supportsPrivatePublish=new Ue("unknown")}onBeforeOnline(){return this.determineSupportForPrivatePublish()}onOffline(){this.supportsPrivatePublish.next("unknown")}storePrivatePayloadPersistent(e,t,r){return new Promise((i,s)=>{this.supportsPrivatePublish.pipe(At(o=>"unknown"!==o)).subscribe(o=>{o?i(this.xmppChatAdapter.chatConnectionService.sendIq(new rE({node:e,id:t,data:r,persistItems:!0}).toStanza())):s(new Error("does not support private publish subscribe"))})})}privateNotify(e,t,r){return new Promise((i,s)=>{this.supportsPrivatePublish.pipe(At(o=>"unknown"!==o)).subscribe(o=>{o?i(this.xmppChatAdapter.chatConnectionService.sendIq(new rE({node:e,id:r,data:t,persistItems:!1}).toStanza())):s(new Error("does not support private publish subscribe"))})})}handleStanza(e){const t=e.getChild("event",nE);return!(!e.is("message")||!t||(this.publish$.next(t),0))}retrieveNodeItems(e){return J(this,void 0,void 0,function*(){try{return(yield this.xmppChatAdapter.chatConnectionService.sendIq(new $B(e).toStanza())).getChild("pubsub").getChild("items").getChildren("item")}catch(t){if(t instanceof tE&&("item-not-found"===t.errorCondition||404===t.errorCode))return[];throw t}})}determineSupportForPrivatePublish(){return J(this,void 0,void 0,function*(){let e;try{e=(yield this.serviceDiscoveryPlugin.findService("pubsub","pep")).features.includes("http://jabber.org/protocol/pubsub#publish-options")}catch(t){e=!1}this.supportsPrivatePublish.next(e)})}}const La="urn:xmpp:mucsub:0";var ro=(()=>(function(n){n.presence="urn:xmpp:mucsub:nodes:presence",n.messages="urn:xmpp:mucsub:nodes:messages",n.affiliations="urn:xmpp:mucsub:nodes:affiliations",n.subscribers="urn:xmpp:mucsub:nodes:subscribers",n.config="urn:xmpp:mucsub:nodes:config",n.subject="urn:xmpp:mucsub:nodes:subject",n.system="urn:xmpp:mucsub:nodes:system"}(ro||(ro={})),ro))();class iE extends Nt{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.supportsMucSub$=new Ue("unknown")}onBeforeOnline(){return this.determineSupportForMucSub()}determineSupportForMucSub(){return J(this,void 0,void 0,function*(){let e;try{e=(yield this.serviceDiscoveryPlugin.findService("conference","text")).features.includes(La)}catch(t){e=!1}this.supportsMucSub$.next(e)})}onOffline(){this.supportsMucSub$.next("unknown")}subscribeRoom(e,t=[]){return J(this,void 0,void 0,function*(){const r=this.xmppChatAdapter.chatConnectionService.userJid.local;yield this.xmppChatAdapter.chatConnectionService.sendIq(function HB(n,e,t){return(0,R.Ls)("iq",{type:"set",to:n},(0,R.Ls)("subscribe",{xmlns:La,nick:e},t.map(r=>(0,R.Ls)("event",{node:r}))))}(e,r,t))})}unsubscribeRoom(e){return J(this,void 0,void 0,function*(){yield this.xmppChatAdapter.chatConnectionService.sendIq(function qB(n){return(0,R.Ls)("iq",{type:"set",to:n},(0,R.Ls)("unsubscribe",{xmlns:La}))}(e))})}unsubscribeJidFromRoom(e,t){this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set",to:e},(0,R.Ls)("unsubscribe",{xmlns:"urn:xmpp:mucsub:0",jid:t})))}getSubscribedRooms(){return J(this,void 0,void 0,function*(){const{local:e,domain:t}=this.xmppChatAdapter.chatConnectionService.userJid,r=`${e}@${t}`;return(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"get",from:r,to:"muc."+t},(0,R.Ls)("subscriptions",{xmlns:"urn:xmpp:mucsub:0"})))).getChildren("subscription").map(s=>s.getAttr("jid"))})}getSubscribers(e){this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"get",to:e},(0,R.Ls)("subscriptions",{xmlns:"urn:xmpp:mucsub:0"})))}retrieveSubscriptions(){var e,t;return J(this,void 0,void 0,function*(){const r=yield this.serviceDiscoveryPlugin.findService("conference","text"),s=null===(t=null===(e=(yield this.xmppChatAdapter.chatConnectionService.sendIq(function zB(n){return(0,R.Ls)("iq",{type:"get",to:n},(0,R.Ls)("subscriptions",{xmlns:La}))}(r.jid))).getChild("subscriptions",La))||void 0===e?void 0:e.getChildren("subscription"))||void 0===t?void 0:t.map(o=>{var a,c;const l=null!==(c=null===(a=o.getChildren("event"))||void 0===a?void 0:a.map(u=>u.attrs.node))&&void 0!==c?c:[];return[o.attrs.jid,l]});return new Map(s)})}}class Jp extends Nt{constructor(e,t,r,i,s){super(),this.chatService=e,this.serviceDiscoveryPlugin=t,this.multiUserChatPlugin=r,this.logService=i,this.messagePlugin=s,this.mamMessageReceived$=new ie,this.chatService.state$.pipe(At(o=>"online"===o)).subscribe(()=>J(this,void 0,void 0,function*(){(yield this.supportsMessageArchiveManagement())&&(yield this.requestNewestMessages())})),this.mamMessageReceived$.pipe(Qs(10)).subscribe(()=>this.chatService.contacts$.next(this.chatService.contacts$.getValue()))}requestNewestMessages(){return J(this,void 0,void 0,function*(){yield this.chatService.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set"},(0,R.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,R.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,R.Ls)("max",{},250),(0,R.Ls)("before")))))})}loadMostRecentUnloadedMessages(e){return J(this,void 0,void 0,function*(){const t="room"===e.recipientType?e.roomJid.toString():void 0,r=(0,R.Ls)("iq",{type:"set",to:t},(0,R.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,R.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,R.Ls)("field",{var:"FORM_TYPE",type:"hidden"},(0,R.Ls)("value",{},"urn:xmpp:mam:2")),"contact"===e.recipientType?(0,R.Ls)("field",{var:"with"},(0,R.Ls)("value",{},e.jidBare)):void 0,e.oldestMessage?(0,R.Ls)("field",{var:"end"},(0,R.Ls)("value",{},e.oldestMessage.datetime.toISOString())):void 0),(0,R.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,R.Ls)("max",{},100),(0,R.Ls)("before"))));yield this.chatService.chatConnectionService.sendIq(r)})}loadAllMessages(){return J(this,void 0,void 0,function*(){if(!(yield this.supportsMessageArchiveManagement()))throw new Error("message archive management not suppported");let e=yield this.chatService.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set"},(0,R.Ls)("query",{xmlns:"urn:xmpp:mam:2"})));for(;"true"!==e.getChild("fin").attrs.complete;){const t=e.getChild("fin").getChild("set").getChildText("last");e=yield this.chatService.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set"},(0,R.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,R.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,R.Ls)("max",{},250),(0,R.Ls)("after",{},t)))))}})}supportsMessageArchiveManagement(){return J(this,void 0,void 0,function*(){const e=yield this.serviceDiscoveryPlugin.supportsFeature(this.chatService.chatConnectionService.userJid.bare().toString(),"urn:xmpp:mam:2");return e||this.logService.info("server doesnt support MAM"),e})}handleStanza(e){return!!this.isMamMessageStanza(e)&&(this.handleMamMessageStanza(e),!0)}isMamMessageStanza(e){const t=e.getChild("result");return"message"===e.name&&"urn:xmpp:mam:2"===(null==t?void 0:t.attrs.xmlns)}handleMamMessageStanza(e){const t=e.getChild("result").getChild("forwarded"),r=t.getChild("message"),i=t.getChild("delay"),s=r.getChild("event",nE);null==r.getAttr("type")&&null!=s?this.handlePubSubEvent(s,i):this.handleArchivedMessage(r,i)}handleArchivedMessage(e,t){const r=e.getAttr("type");if("chat"===r)this.messagePlugin.handleStanza(e,t)&&this.mamMessageReceived$.next();else{if("groupchat"!==r)throw new Error(`unknown archived message type: ${r}`);this.multiUserChatPlugin.handleStanza(e,t)}}handlePubSubEvent(e,t){const r=e.getChild("items");(null==r?void 0:r.attrs.node)===ro.messages?r.getChildren("item").forEach(o=>this.handleArchivedMessage(o.getChild("message"),t)):this.logService.warn(`Handling of MUC/Sub message types other than ${ro.messages} isn't implemented yet!`)}}const GB=new _e("ngxChatReportUserService"),WB=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;function sE(n){return n.match(WB)||[]}class Va extends Nt{static extractIdFromStanza(e){const t=e.getChild("origin-id"),r=e.getChild("stanza-id");return e.attrs.id||t&&t.attrs.id||r&&r.attrs.id}beforeSendMessage(e,t){const r=function QB(){let n;for(;!n;)n=Math.random().toString(36).substr(2,12);return n}();e.children.push((0,R.Ls)("origin-id",{xmlns:"urn:xmpp:sid:0",id:r})),t&&(t.id=r)}afterSendMessage(e,t){e.id=Va.extractIdFromStanza(t)}afterReceiveMessage(e,t){e.id=Va.extractIdFromStanza(t)}}const io="ngxchat:contactmessagestates",oE="entries",aE="contact-message-state";class cE extends Nt{constructor(e,t,r,i,s){super(),this.publishSubscribePlugin=e,this.xmppChatAdapter=t,this.chatMessageListRegistry=r,this.logService=i,this.entityTimePlugin=s,this.jidToMessageStateDate=new Map,this.chatMessageListRegistry.openChats$.pipe(At(()=>"online"===t.state$.getValue())).subscribe(o=>{o.forEach(a=>J(this,void 0,void 0,function*(){a.mostRecentMessageReceived&&(yield this.sendMessageStateNotification(a.jidBare,a.mostRecentMessageReceived.id,Qt.RECIPIENT_SEEN))}))}),this.publishSubscribePlugin.publish$.subscribe(o=>this.handlePubSubEvent(o))}onBeforeOnline(){return J(this,void 0,void 0,function*(){this.parseContactMessageStates().catch(e=>this.logService.error("error parsing contact message states",e))})}parseContactMessageStates(){return J(this,void 0,void 0,function*(){const e=yield this.publishSubscribePlugin.retrieveNodeItems(io);this.processPubSub(e)})}processPubSub(e){let t=[];1===e.length&&(t=e[0].getChild(oE).getChildren(aE).map(r=>{const{lastRecipientReceived:i,lastRecipientSeen:s,lastSent:o,jid:a}=r.attrs;return[a,{lastRecipientSeen:new Date(+s||0),lastRecipientReceived:new Date(+i||0),lastSent:new Date(+o||0)}]})),this.jidToMessageStateDate=new Map(t)}persistContactMessageStates(){return J(this,void 0,void 0,function*(){const e=[...this.jidToMessageStateDate.entries()].map(([t,r])=>(0,R.Ls)(aE,{jid:t,lastRecipientReceived:String(r.lastRecipientReceived.getTime()),lastRecipientSeen:String(r.lastRecipientSeen.getTime()),lastSent:String(r.lastSent.getTime())}));yield this.publishSubscribePlugin.storePrivatePayloadPersistent(io,"current",(0,R.Ls)(oE,{},e))})}onOffline(){this.jidToMessageStateDate.clear()}beforeSendMessage(e,t){const{type:r}=e.attrs;"chat"===r&&t&&(t.state=Qt.SENDING)}afterSendMessage(e,t){return J(this,void 0,void 0,function*(){const{type:r,to:i}=t.attrs;"chat"===r&&(this.updateContactMessageState((0,R.kO)(i).bare().toString(),Qt.SENT,new Date(yield this.entityTimePlugin.getNow())),delete e.state)})}afterReceiveMessage(e,t,r){t.getChild("message-state",io)?r.discard=!0:e.direction===ke.in&&!e.fromArchive&&"groupchat"!==t.attrs.type&&this.acknowledgeReceivedMessage(t)}acknowledgeReceivedMessage(e){const{from:t}=e.attrs,i=this.chatMessageListRegistry.isChatOpen(this.xmppChatAdapter.getOrCreateContactById(t))?Qt.RECIPIENT_SEEN:Qt.RECIPIENT_RECEIVED,s=Va.extractIdFromStanza(e);this.sendMessageStateNotification((0,R.kO)(t),s,i).catch(o=>this.logService.error("error sending state notification",o))}sendMessageStateNotification(e,t,r){return J(this,void 0,void 0,function*(){const i=(0,R.Ls)("message",{to:e.bare().toString(),from:this.xmppChatAdapter.chatConnectionService.userJid.toString(),type:"chat"},(0,R.Ls)("message-state",{xmlns:io,messageId:t,date:new Date(yield this.entityTimePlugin.getNow()).toISOString(),state:r}));yield this.xmppChatAdapter.chatConnectionService.send(i)})}handleStanza(e){const{type:t,from:r}=e.attrs,i=e.getChild("message-state",io);return!("chat"!==t||!i||(this.handleStateNotificationStanza(i,r),0))}handleStateNotificationStanza(e,t){const{state:r,date:i}=e.attrs,s=this.xmppChatAdapter.getOrCreateContactById(t),o=new Date(i);this.updateContactMessageState(s.jidBare.toString(),r,o)}updateContactMessageState(e,t,r){const i=this.getContactMessageState(e);let s=!1;t===Qt.RECIPIENT_RECEIVED&&i.lastRecipientReceived<r?(i.lastRecipientReceived=r,s=!0):t===Qt.RECIPIENT_SEEN&&i.lastRecipientSeen<r?(i.lastRecipientReceived=r,i.lastRecipientSeen=r,s=!0):t===Qt.SENT&&i.lastSent<r&&(i.lastSent=r,s=!0),s&&this.persistContactMessageStates().catch(o=>this.logService.error("error persisting contact message states",o))}getContactMessageState(e){return this.jidToMessageStateDate.has(e)||this.jidToMessageStateDate.set(e,{lastRecipientReceived:new Date(0),lastRecipientSeen:new Date(0),lastSent:new Date(0)}),this.jidToMessageStateDate.get(e)}handlePubSubEvent(e){const t=e.getChild("items"),r=null==t?void 0:t.attrs.node,i=null==t?void 0:t.getChildren("item");r===io&&i&&this.processPubSub(i)}}const Kp="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDYwMCA2MDAiPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwLV8xIj4KICAgICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgogIDxnIGlkPSJfMSIgZGF0YS1uYW1lPSIxIiBjbGlwLXBhdGg9InVybCgjY2xpcC1fMSkiPgogICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9IiNmZmYiLz4KICAgIDxnIGlkPSJHcnVwcGVfNzcxNyIgZGF0YS1uYW1lPSJHcnVwcGUgNzcxNyI+CiAgICAgIDxyZWN0IGlkPSJSZWNodGVja18xMzk3IiBkYXRhLW5hbWU9IlJlY2h0ZWNrIDEzOTciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIiBmaWxsPSIjZTVlNmU4Ii8+CiAgICAgIDxlbGxpcHNlIGlkPSJFbGxpcHNlXzI4MyIgZGF0YS1uYW1lPSJFbGxpcHNlIDI4MyIgY3g9IjExNi4yMzEiIGN5PSIxMjUuNjcxIiByeD0iMTE2LjIzMSIgcnk9IjEyNS42NzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4NS4yMzEgMTExLjQ4NSkiIGZpbGw9IiNhZmI0YjgiLz4KICAgICAgPHBhdGggaWQ9IlBmYWRfMjQ5NjIiIGRhdGEtbmFtZT0iUGZhZCAyNDk2MiIgZD0iTTU0Ni4zNTksNTk1LjI3NnMwLTIxNy41NjMtMjQ0LjkwOS0yMTcuNTYzaC0xLjQ1N2MtMjQ0LjkwOSwwLTI0NC45MDksMjE3LjU2My0yNDQuOTA5LDIxNy41NjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgNC43MjQpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K";var Rt=(()=>(function(n){n.present="present",n.unavailable="unavailable",n.away="away"}(Rt||(Rt={})),Rt))();function lE(){return{acceptSubscriptionRequest:"Accept",block:"Block",blockAndReport:"Block & report",chat:"Chat",contactRequestIn:"Incoming contact requests",contactRequestOut:"Outgoing contact requests",contacts:"Contacts",contactsUnaffiliated:"Unknown",dateFormat:"EEEE, MM/dd/yyyy",denySubscriptionRequest:"Deny",dismiss:"Dismiss",dropMessage:"Drop your file to send it",locale:void 0,noContacts:"No contacts yet.",noMessages:"No messages yet.",placeholder:"Enter your message!",presence:{[Rt.away]:"Away",[Rt.present]:"Online",[Rt.unavailable]:"Offline"},rooms:"Rooms",subscriptionRequestMessage:"I want to add you as a contact.",timeFormat:"shortTime"}}class Yp{constructor(){this.discard=!1}}class uE extends Nt{constructor(e,t){super(),this.xmppChatAdapter=e,this.logService=t}handleStanza(e,t){return!!this.isMessageStanza(e)&&(this.handleMessageStanza(e,t),!0)}isMessageStanza(e){var t;return"message"===e.name&&"groupchat"!==e.attrs.type&&"error"!==e.attrs.type&&!!(null===(t=e.getChildText("body"))||void 0===t?void 0:t.trim())}handleMessageStanza(e,t){const r=this.xmppChatAdapter.chatConnectionService.userJid.bare().equals((0,R.kO)(e.attrs.to).bare()),i=r?ke.in:ke.out,s=null!=t,o=null!=t?t:e.getChild("delay"),a=(null==o?void 0:o.attrs.stamp)?new Date(o.attrs.stamp):new Date;i===ke.in&&!s&&this.logService.debug("message received <=",e.getChildText("body"));const c={body:e.getChildText("body").trim(),direction:i,datetime:a,delayed:!!o,fromArchive:s},l=new Yp;if(this.xmppChatAdapter.plugins.forEach(h=>h.afterReceiveMessage(c,e,l)),l.discard)return;const d=this.xmppChatAdapter.getOrCreateContactById(r?e.attrs.from:e.attrs.to);d.addMessage(c),i===ke.in&&!s&&this.xmppChatAdapter.message$.next(d)}sendMessage(e,t){const r=(0,R.Ls)("message",{to:e.jidBare.toString(),from:this.xmppChatAdapter.chatConnectionService.userJid.toString(),type:"chat"},(0,R.Ls)("body",{},t)),i={direction:ke.out,body:t,datetime:new Date,delayed:!1,fromArchive:!1};this.xmppChatAdapter.plugins.forEach(s=>s.beforeSendMessage(r,i)),e.addMessage(i),this.xmppChatAdapter.chatConnectionService.send(r).then(()=>{this.xmppChatAdapter.plugins.forEach(s=>s.afterSendMessage(i,r))},s=>{this.logService.error("rejected message "+i.id,s)})}}const Zp=n=>n.toString();function dE(n,e,t=Zp){e.splice(Xp(t(n),e,t),0,n)}function Xp(n,e,t=Zp){let r=0,i=e.length;for(;r!==i;){const s=Math.floor(r+(i-r)/2);n<t(e[s])?i=s:r=s+1}return r}function hE(n,e){return n[function YB(n,e){for(let t=n.length-1;t>=0;t--)if(e(n[t]))return t;return-1}(n,e)]}function eg(n){const e=n.toISOString();return e.slice(0,e.indexOf("T"))}class fE{constructor(e){this.logService=e,this.messages=[],this.dateMessageGroups=[],this.messageIdToMessage=new Map,this.messages$=new ie}addMessage(e){return e.id&&this.messageIdToMessage.has(e.id)?(this.logService&&this.logService.warn(`message with id ${e.id} already exists`),!1):(dE(e,this.messages,t=>t.datetime),this.addToDateMessageGroups(e),this.messageIdToMessage.set(e.id,e),this.messages$.next(e),!0)}get oldestMessage(){return this.messages[0]}get mostRecentMessage(){return this.messages[this.messages.length-1]}get mostRecentMessageReceived(){return hE(this.messages,e=>e.direction===ke.in)}get mostRecentMessageSent(){return hE(this.messages,e=>e.direction===ke.out)}addToDateMessageGroups(e){const t=eg(e.datetime),r=function KB(n,e,t=Zp){let r=0,i=e.length;for(;r!==i;){const s=Math.floor(r+(i-r)/2),o=t(e[s]);if(n<o)i=s;else{if(!(n>o))return s;r=s+1}}return-1}(t,this.dateMessageGroups,i=>eg(i.date));if(-1!==r)dE(e,this.dateMessageGroups[r].messages,i=>i.datetime);else{const i={date:e.datetime,messages:[e]},s=Xp(t,this.dateMessageGroups,o=>eg(o.date));this.dateMessageGroups.splice(s,0,i)}}}function pE(n){return!!n.bare}class ja{static buildRoomMessage(e,t,r=[]){return(0,R.Ls)("message",{from:e,to:t,type:"groupchat"},...r)}static buildRoomMessageWithBody(e,t,r,i=[]){return ja.buildRoomMessage(e,t,[(0,R.Ls)("body",{},r),...i])}static buildRoomMessageWithThread(e,t,r,i){return ja.buildRoomMessageWithBody(e,t,r,[(0,R.Ls)("thread",{},i)])}}class gE extends no{constructor(e,t){super(),this.xmlns=e,this.to=t}toStanza(){return(0,R.Ls)("iq",Object.assign({type:"get"},this.to?{to:this.to}:{}),(0,R.Ls)("query",{xmlns:this.xmlns}))}}let Ba=(()=>{class n extends Nt{constructor(t){super(),this.chatAdapter=t,this.servicesInitialized$=new Ue(!1),this.hostedServices=[],this.resourceCache=new Map}onBeforeOnline(){return J(this,void 0,void 0,function*(){yield this.discoverServices(this.chatAdapter.chatConnectionService.userJid.domain),this.servicesInitialized$.next(!0)})}onOffline(){this.servicesInitialized$.next(!1),this.hostedServices=[],this.resourceCache.clear()}supportsFeature(t,r){return new Promise((i,s)=>{this.servicesInitialized$.pipe(jn(o=>!!o)).subscribe(()=>J(this,void 0,void 0,function*(){try{const o=this.resourceCache.get(t)||(yield this.discoverServiceInformation(t));o||s(new Error("no service found for jid "+t)),i(o.features.includes(r))}catch(o){s(o)}}))})}findService(t,r){return new Promise((i,s)=>{this.servicesInitialized$.pipe(jn(o=>!!o)).subscribe(()=>{const o=this.hostedServices.filter(a=>a.identities.filter(c=>c.category===t&&c.type===r).length>0);if(0===o.length)s(new Error(`no service matching category ${t} and type ${r} found!`));else{if(!(o.length>1))return i(o[0]);s(new Error(`multiple services matching category ${t} and type ${r} found! ${JSON.stringify(o)}`))}})})}discoverServices(t){return J(this,void 0,void 0,function*(){const r=yield this.chatAdapter.chatConnectionService.sendIq(new gE(n.DISCO_ITEMS,this.chatAdapter.chatConnectionService.userJid.domain).toStanza()),i=new Set(r.getChild("query").getChildren("item").map(o=>o.attrs.jid));i.add(t);const s=yield Promise.all([...i.keys()].map(o=>this.discoverServiceInformation(o)));this.hostedServices.push(...s)})}discoverServiceInformation(t){return J(this,void 0,void 0,function*(){const r=yield this.chatAdapter.chatConnectionService.sendIq(new gE(n.DISCO_INFO,t).toStanza()),i=r.getChild("query"),s=i.getChildren("feature").map(a=>a.attrs.var),o={identities:i.getChildren("identity").map(a=>a.attrs),features:s,jid:r.attrs.from};return this.resourceCache.set(r.attrs.from,o),o})}}return n.DISCO_INFO="http://jabber.org/protocol/disco#info",n.DISCO_ITEMS="http://jabber.org/protocol/disco#items",n})();class so{constructor(e,t,r){this.recipientType="room",this.avatar="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDYwMCA2MDAiPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwLV8zIj4KICAgICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgogIDxnIGlkPSJfMyIgZGF0YS1uYW1lPSIzIiBjbGlwLXBhdGg9InVybCgjY2xpcC1fMykiPgogICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9IiNmZmYiLz4KICAgIDxnIGlkPSJHcnVwcGVfNzcxOCIgZGF0YS1uYW1lPSJHcnVwcGUgNzcxOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTc4MC42OTcgODgxLjUpIj4KICAgICAgPHJlY3QgaWQ9IlJlY2h0ZWNrXzEzOTgiIGRhdGEtbmFtZT0iUmVjaHRlY2sgMTM5OCIgd2lkdGg9IjYwMCIgaGVpZ2h0PSI1OTkuOTk1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3ODAuNjk3IC04ODEuNSkiIGZpbGw9IiNlNWU2ZTgiLz4KICAgICAgPGVsbGlwc2UgaWQ9IkVsbGlwc2VfMjg0IiBkYXRhLW5hbWU9IkVsbGlwc2UgMjg0IiBjeD0iMTE2LjIzMSIgY3k9IjEyNS42NzEiIHJ4PSIxMTYuMjMxIiByeT0iMTI1LjY3MSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTY1LjkyNiAtNzY5LjA5MykiIGZpbGw9IiNhZmI0YjgiLz4KICAgICAgPGVsbGlwc2UgaWQ9IkVsbGlwc2VfMjg1IiBkYXRhLW5hbWU9IkVsbGlwc2UgMjg1IiBjeD0iNjcuOTk4IiBjeT0iNzMuNTIxIiByeD0iNjcuOTk4IiByeT0iNzMuNTIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MTYuMjEgLTY2NS40OTYpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxlbGxpcHNlIGlkPSJFbGxpcHNlXzI4OSIgZGF0YS1uYW1lPSJFbGxpcHNlIDI4OSIgY3g9IjY3Ljk5OCIgY3k9IjczLjUyMSIgcng9IjY3Ljk5OCIgcnk9IjczLjUyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIxMi4xMDcgLTY2NS40OTYpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxwYXRoIGlkPSJQZmFkXzI0OTYzIiBkYXRhLW5hbWU9IlBmYWQgMjQ5NjMiIGQ9Ik0xMzI3LjA1Mi0yODYuMjI1czAtMjE3LjU2My0yNDQuOTA3LTIxNy41NjNoLTEuNDU3Yy0yNDQuOTA3LDAtMjQ0LjkwNywyMTcuNTYzLTI0NC45MDcsMjE3LjU2M1oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgNC43MjUpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxwYXRoIGlkPSJQZmFkXzI0OTY0IiBkYXRhLW5hbWU9IlBmYWQgMjQ5NjQiIGQ9Ik05MzMuOTc3LTQ4My44Yy0xLjA1LjYtMi4xLDEuMjItMy4xNCwxLjg0LTMyLjM0LDE5LjM0LTU4LjI5LDQ2LjI3LTc3LjEyLDgwLjA1LTMxLjcsNTYuODgtMzQuMzU1LDExOC43MjgtMzQuMzU1LDEyMS4yNDhoLTQwLjkxTDc4MC43LTQ3MS4zMmMyMy4yOC0xOC44Miw1Ny4wNS0zMi40NywxMDYuMDQtMzIuNDdoLjk0YTIxNy43NTMsMjE3Ljc1MywwLDAsMSw0My44Myw0LjE4QTguNTQ5LDguNTQ5LDAsMCwxLDkzMy45NzctNDgzLjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAgLTAuNzI1KSIgZmlsbD0iI2FmYjRiOCIvPgogICAgICA8cGF0aCBpZD0iUGZhZF8yNDk2OCIgZGF0YS1uYW1lPSJQZmFkIDI0OTY4IiBkPSJNNzgyLjc5LTQ4My44YzEuMDUuNiwyLjEsMS4yMiwzLjE0LDEuODQsMzIuMzQsMTkuMzQsNTguMjksNDYuMjcsNzcuMTIsODAuMDUsMzEuNyw1Ni44OCwzNC4zNTUsMTE4LjcyOCwzNC4zNTUsMTIxLjI0OGg0MC45MUw5MzYuMDctNDcxLjMyYy0yMy4yOC0xOC44Mi01Ny4wNS0zMi40Ny0xMDYuMDQtMzIuNDdoLS45NGEyMTcuNzUzLDIxNy43NTMsMCwwLDAtNDMuODMsNC4xOEE4LjU0OSw4LjU0OSwwLDAsMCw3ODIuNzktNDgzLjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NTcuNTQ3IC0wLjcyNikiIGZpbGw9IiNhZmI0YjgiLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=",this.metadata={},this.roomJid=e.bare(),this.name=null!=r?r:e.bare().toString(),this.occupantJid=e,this.messageStore=new fE(t)}get jidBare(){return this.roomJid}get messages$(){return this.messageStore.messages$}get messages(){return this.messageStore.messages}get dateMessagesGroups(){return this.messageStore.dateMessageGroups}get oldestMessage(){return this.messageStore.oldestMessage}get mostRecentMessage(){return this.messageStore.mostRecentMessage}get mostRecentMessageReceived(){return this.messageStore.mostRecentMessageReceived}get mostRecentMessageSent(){return this.messageStore.mostRecentMessageSent}addMessage(e){this.messageStore.addMessage(e)}equalsBareJid(e){if(e instanceof so||pE(e)){const t=e instanceof so?e.roomJid:e.bare();return this.roomJid.bare().equals(t)}return!1}}var Lr=(()=>(function(n){n[n.none=0]="none",n[n.member=1]="member",n[n.admin=2]="admin",n[n.owner=3]="owner",n[n.outcast=4]="outcast"}(Lr||(Lr={})),Lr))();class oo extends no{constructor(e,t){super(),this.roomJid=e,this.affiliation=t}static build(e,t){return new oo(e,t).toStanza()}toStanza(){return(0,R.Ls)("iq",{type:"get",to:this.roomJid},(0,R.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#admin"},(0,R.Ls)("item",{affiliation:this.affiliation})))}}class tg extends no{constructor(e,t){super(),this.roomJid=e,this.modifications=t}static build(e,t){return new tg(e,t).toStanza()}toStanza(){return(0,R.Ls)("iq",{to:this.roomJid,type:"set"},(0,R.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#admin"},...this.modifications.map(e=>this.buildItem(e))))}buildItem({nick:e,jid:t,affiliation:r}){const i=(0,R.Ls)("item",{jid:t,affiliation:Lr[r]});return e&&(i.attrs.nick=e),i}}class ao extends Nt{constructor(e,t,r){super(),this.xmppChatAdapter=e,this.logService=t,this.serviceDiscoveryPlugin=r,this.rooms$=new Ue([]),this.message$=new ie,this.roomJoinResponseHandlers=new Map}onOffline(){this.roomJoinResponseHandlers.clear(),this.rooms$.next([])}handleStanza(e,t){return this.isRoomPresenceStanza(e)?this.handleRoomPresenceStanza(e):!!this.isRoomMessageStanza(e)&&this.handleRoomMessageStanza(e,t)}isRoomPresenceStanza(e){return"presence"===e.name&&null!=(e.getChild("x","http://jabber.org/protocol/muc")||e.getChild("x","http://jabber.org/protocol/muc#user"))}handleRoomPresenceStanza(e){const t=this.roomJoinResponseHandlers.get(e.attrs.from);return!!t&&(this.roomJoinResponseHandlers.delete(e.attrs.from),t(e),!0)}createRoom(e){return J(this,void 0,void 0,function*(){const{roomId:t,nick:r,name:i}=e,s=yield this.serviceDiscoveryPlugin.findService("conference","text"),o=(0,R.kO)(t,s.jid,r),{presenceResponse:a,room:c}=yield this.joinRoomInternal(o,i);if("owner"!==a.getChild("x").getChild("item").attrs.affiliation)throw new Error("error creating room, user is not owner: "+a.toString());const d=(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"get",to:c.roomJid.toString()},(0,R.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"})))).getChild("query").getChild("x");if(!d)throw new Error("room not configurable");const h=this.applyRoomCreationRequestOptions(this.extractDefaultConfiguration(d.getChildren("field")),e);try{return yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set",to:c.roomJid.toString()},(0,R.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"},(0,R.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,R.Ls)("field",{var:"FORM_TYPE"},(0,R.Ls)("value",{},"http://jabber.org/protocol/muc#roomconfig")),...this.configurationToElements(h))))),c}catch(f){throw this.logService.error("room configuration rejected",f),f}})}destroyRoom(e){return J(this,void 0,void 0,function*(){let t;try{t=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set",to:e.toString()},(0,R.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"},(0,R.Ls)("destroy"))))}catch(i){throw this.logService.error("error destroying room"),i}const r=this.rooms$.getValue().filter(i=>!i.roomJid.equals(e));return this.rooms$.next(r),t})}joinRoomInternal(e,t){return J(this,void 0,void 0,function*(){if(this.getRoomByJid(e.bare()))throw new Error("can not join room more than once: "+e.bare().toString());const r=this.xmppChatAdapter.chatConnectionService.userJid,i=(0,R.kO)(e.local,e.domain,e.resource||r.local),s=new Promise(c=>this.roomJoinResponseHandlers.set(i.toString(),c));try{yield this.xmppChatAdapter.chatConnectionService.send((0,R.Ls)("presence",{from:r.toString(),to:i.toString()},(0,R.Ls)("x",{xmlns:"http://jabber.org/protocol/muc"})))}catch(c){throw this.logService.error("error sending presence stanza to join a room",c),this.roomJoinResponseHandlers.delete(i.toString()),c}const o=yield s;if(o.getChild("error"))throw new Error("error joining room: "+o.toString());let a=this.getRoomByJid(e);return a||(a=new so(i,this.logService,t),this.rooms$.next([a].concat(this.rooms$.getValue()))),{presenceResponse:o,room:a}})}joinRoom(e){return J(this,void 0,void 0,function*(){return(yield this.joinRoomInternal(e)).room})}queryAllRooms(){return J(this,void 0,void 0,function*(){const e=yield this.serviceDiscoveryPlugin.findService("conference","text"),r=(e.jid.toString(),[]);let i=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"get",to:e.jid.toString()},(0,R.Ls)("query",{xmlns:Ba.DISCO_ITEMS})));r.push(...this.extractRoomSummariesFromResponse(i));let s=this.extractResultSetFromResponse(i);for(;s&&s.getChild("last");){const o=s.getChildText("last");i=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"get",to:e.jid.toString()},(0,R.Ls)("query",{xmlns:Ba.DISCO_ITEMS},(0,R.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,R.Ls)("max",{},250),(0,R.Ls)("after",{},o))))),r.push(...this.extractRoomSummariesFromResponse(i)),s=this.extractResultSetFromResponse(i)}return r})}extractRoomSummariesFromResponse(e){var t,r;return(null===(r=null===(t=e.getChild("query",Ba.DISCO_ITEMS))||void 0===t?void 0:t.getChildren("item"))||void 0===r?void 0:r.map(i=>i.attrs))||[]}extractResultSetFromResponse(e){var t;return null===(t=e.getChild("query",Ba.DISCO_ITEMS))||void 0===t?void 0:t.getChild("set","http://jabber.org/protocol/rsm")}queryMemberList(e){return J(this,void 0,void 0,function*(){const t=yield Promise.all([this.xmppChatAdapter.chatConnectionService.sendIq(oo.build(e,"admin")),this.xmppChatAdapter.chatConnectionService.sendIq(oo.build(e,"member")),this.xmppChatAdapter.chatConnectionService.sendIq(oo.build(e,"owner")),this.xmppChatAdapter.chatConnectionService.sendIq(oo.build(e,"outcast"))]);let r=[];for(const i of t){const s=i.getChild("query").getChildren("item").map(o=>({jid:o.attrs.jid,nick:o.attrs.nick,affiliation:this.reverseMapAffiliation(o.attrs.affiliation)}));r=r.concat(s)}return r})}reverseMapAffiliation(e){if(!e||"none"===e)return Lr.none;if("member"===e)return Lr.member;if("admin"===e)return Lr.admin;if("owner"===e)return Lr.owner;if("outcast"===e)return Lr.outcast;{const t="unexpected affilation: "+e;throw this.logService.error(t),new Error(t)}}modifyMemberList(e,t,r,i){return J(this,void 0,void 0,function*(){return yield this.xmppChatAdapter.chatConnectionService.sendIq(tg.build(e,[{jid:t,affiliation:r,nick:i}]))})}sendMessage(e,t,r){return J(this,void 0,void 0,function*(){const i=this.xmppChatAdapter.chatConnectionService.userJid.toString(),s=e.roomJid.toString(),o=r?ja.buildRoomMessageWithThread(i,s,t,r):ja.buildRoomMessageWithBody(i,s,t);for(const a of this.xmppChatAdapter.plugins)a.beforeSendMessage(o);return yield this.xmppChatAdapter.chatConnectionService.send(o)})}configurationToElements(e){return[...e.entries()].map(([t,r])=>(0,R.Ls)("field",{var:t},...r.map(i=>(0,R.Ls)("value",{},i))))}extractDefaultConfiguration(e){const t=e.filter(r=>"hidden"!==r.attrs.type).map(r=>[r.attrs.var,r.getChildren("value").map(i=>i.getText())]);return new Map(t)}applyRoomCreationRequestOptions(e,t){const r=new Map(e);return r.set("muc#roomconfig_whois",[t.nonAnonymous?"anyone":"moderators"]).set("muc#roomconfig_publicroom",[t.public?"1":"0"]).set("muc#roomconfig_membersonly",[t.membersOnly?"1":"0"]).set("muc#roomconfig_persistentroom",[t.persistentRoom?"1":"0"]),void 0!==t.allowSubscription&&r.set("allow_subscription",[!0===t.allowSubscription?"1":"0"]),r}isRoomMessageStanza(e){var t;return"message"===e.name&&"groupchat"===e.attrs.type&&!!(null===(t=e.getChildText("body"))||void 0===t?void 0:t.trim())}handleRoomMessageStanza(e,t){const r=null!=t?t:e.getChild("delay"),i=(null==r?void 0:r.attrs.stamp)?new Date(r.attrs.stamp):new Date,s=(0,R.kO)(e.attrs.from),o=this.getRoomByJid(s.bare());if(!o)return this.logService.warn(`received stanza for unknown room: ${s.bare().toString()}`),!1;const a={body:e.getChildText("body").trim(),datetime:i,id:e.attrs.id,from:s,direction:s.equals(o.occupantJid)?ke.out:ke.in,delayed:!!r,fromArchive:null!=t},c=new Yp;for(const l of this.xmppChatAdapter.plugins)l.afterReceiveMessage(a,e,c);return c.discard||o.addMessage(a),a.delayed||this.message$.next(o),!0}getRoomByJid(e){return this.rooms$.getValue().find(t=>t.roomJid.equals(e))}ban(){throw new Error("moderation not implemented")}invite(){throw new Error("moderation not implemented")}join(){throw new Error("moderation not implemented")}kick(){throw new Error("moderation not implemented")}nick(){throw new Error("moderation not implemented")}part(){this.leave()}leave(){throw new Error("moderation not implemented")}topic(){throw new Error("moderation not implemented")}}var ot=(()=>(function(n){n.to="to",n.from="from",n.both="both",n.none="none"}(ot||(ot={})),ot))();class lu extends Nt{constructor(e,t){super(),this.chatService=e,this.logService=t}handleStanza(e){return!this.isCapabilitiesStanza(e)&&(this.isRosterPushStanza(e)?this.handleRosterPushStanza(e):!!this.isPresenceStanza(e)&&this.handlePresenceStanza(e))}isRosterPushStanza(e){return"iq"===e.name&&"set"===e.attrs.type&&e.getChild("query","jabber:iq:roster")}isPresenceStanza(e){return"presence"===e.name&&!e.getChild("x","http://jabber.org/protocol/muc#user")}isCapabilitiesStanza(e){return!!e.getChild("c","http://jabber.org/protocol/caps")}handleRosterPushStanza(e){const t=e.getChild("query").getChild("item"),r=this.chatService.getOrCreateContactById(t.attrs.jid,t.attrs.name||t.attrs.jid);r.pendingOut$.next("subscribe"===t.attrs.ask);const i=t.attrs.subscription||"none";this.chatService.chatConnectionService.sendIqAckResult(e.attrs.id);let s=!1;if("remove"===i?(r.pendingOut$.next(!1),r.subscription$.next(ot.none),s=!0):"none"===i?(r.subscription$.next(ot.none),s=!0):"to"===i?(r.subscription$.next(ot.to),s=!0):"from"===i?(r.subscription$.next(ot.from),s=!0):"both"===i&&(r.subscription$.next(ot.both),s=!0),s){const o=this.chatService.contacts$.getValue();this.chatService.contacts$.next(o)}return s}handlePresenceStanza(e){const t=this.chatService.getOrCreateContactById(e.attrs.from);if(this.chatService.chatConnectionService.userJid.bare().equals((0,R.kO)(e.attrs.to).bare())){if(!e.attrs.type){const i=e.getChildText("show"),o={chat:Rt.present,null:Rt.present,away:Rt.away,dnd:Rt.away,xa:Rt.away}[i];return o?t.updateResourcePresence(e.attrs.from,o):this.logService.error("illegal presence:",e.attrs.from,i),!0}if("unavailable"===e.attrs.type)return t.updateResourcePresence(e.attrs.from,Rt.unavailable),!0;if("subscribe"===e.attrs.type){if(t.isSubscribed()||t.pendingOut$.getValue())return t.pendingIn$.next(!1),this.sendAcceptPresenceSubscriptionRequest(e.attrs.from),t.subscription$.next(this.transitionSubscriptionRequestReceivedAccepted(t.subscription$.getValue())),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0;if(t)return t.pendingIn$.next(!0),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0}else if("subscribed"===e.attrs.type)return t.pendingOut$.next(!1),t.subscription$.next(this.transitionSubscriptionRequestSentAccepted(t.subscription$.getValue())),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0}return!1}transitionSubscriptionRequestReceivedAccepted(e){switch(e){case ot.none:return ot.from;case ot.to:return ot.both;default:return e}}transitionSubscriptionRequestSentAccepted(e){switch(e){case ot.none:return ot.to;case ot.from:return ot.both;default:return e}}sendAcceptPresenceSubscriptionRequest(e){this.chatService.getOrCreateContactById(e).pendingIn$.next(!1),this.chatService.chatConnectionService.send((0,R.Ls)("presence",{to:e,type:"subscribed",id:this.chatService.chatConnectionService.getNextIqId()}))}onBeforeOnline(){return this.refreshRosterContacts()}getRosterContacts(){return new Promise(e=>this.chatService.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"get"},(0,R.Ls)("query",{xmlns:"jabber:iq:roster"}))).then(t=>e(this.convertToContacts(t)),t=>{this.logService.error("error converting roster contact push",t.toString()),e([])}))}convertToContacts(e){return e.getChild("query").getChildElements().map(t=>{const r=this.chatService.getOrCreateContactById(t.attrs.jid,t.attrs.name||t.attrs.jid);return r.subscription$.next(this.parseSubscription(t.attrs.subscription)),r.pendingOut$.next("subscribe"===t.attrs.ask),r})}parseSubscription(e){switch(e){case"to":return ot.to;case"from":return ot.from;case"both":return ot.both;default:return ot.none}}addRosterContact(e){this.sendAcceptPresenceSubscriptionRequest(e),this.sendAddToRoster(e),this.sendSubscribeToPresence(e)}sendAddToRoster(e){return this.chatService.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set"},(0,R.Ls)("query",{xmlns:"jabber:iq:roster"},(0,R.Ls)("item",{jid:e}))))}sendSubscribeToPresence(e){this.chatService.chatConnectionService.send((0,R.Ls)("presence",{id:this.chatService.chatConnectionService.getNextIqId(),to:e,type:"subscribe"}))}removeRosterContact(e){const t=this.chatService.getContactById(e);t&&(t.subscription$.next(ot.none),t.pendingOut$.next(!1),t.pendingIn$.next(!1),this.sendRemoveFromRoster(e),this.sendWithdrawPresenceSubscription(e))}sendRemoveFromRoster(e){this.chatService.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set"},(0,R.Ls)("query",{xmlns:"jabber:iq:roster"},(0,R.Ls)("item",{jid:e,subscription:"remove"}))))}sendWithdrawPresenceSubscription(e){this.chatService.chatConnectionService.send((0,R.Ls)("presence",{id:this.chatService.chatConnectionService.getNextIqId(),to:e,type:"unsubscribed"}))}refreshRosterContacts(){return this.getRosterContacts()}}var Vr=(()=>(function(n){n[n.Disabled=0]="Disabled",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Info=3]="Info",n[n.Debug=4]="Debug"}(Vr||(Vr={})),Vr))();let co=(()=>{class n{constructor(){this.logLevel=Vr.Info,this.writer=console,this.messagePrefix=()=>"ChatService:"}error(...t){this.logLevel>=Vr.Error&&this.writer.error(this.messagePrefix(),...t)}warn(...t){this.logLevel>=Vr.Warn&&this.writer.warn(this.messagePrefix(),...t)}info(...t){this.logLevel>=Vr.Info&&this.writer.info(this.messagePrefix(),...t)}debug(...t){this.logLevel>=Vr.Debug&&this.writer.debug(this.messagePrefix(),...t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),mE=(()=>{class n{client(t){return(0,R.Lp)(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),ng=(()=>{class n{constructor(t,r,i){this.logService=t,this.ngZone=r,this.xmppClientFactoryService=i,this.state$=new Ue("disconnected"),this.stanzaUnknown$=new ie,this.iqId=(new Date).getTime(),this.iqStanzaResponseHandlers=new Map}onOnline(t){this.logService.info("online =","online as",t.toString()),this.userJid=t,this.state$.next("online")}sendPresence(){return J(this,void 0,void 0,function*(){yield this.send((0,R.Ls)("presence"))})}send(t){return J(this,void 0,void 0,function*(){this.logService.debug(">>>",t),yield this.client.send(t)})}sendIq(t){return new Promise((r,i)=>{t.attrs=Object.assign({id:this.getNextIqId(),from:this.userJid.toString()},t.attrs);const{id:s}=t.attrs;if(!t.attrs.type){const o="iq stanza without type: "+t.toString();throw this.logService.error(o),new Error(o)}this.iqStanzaResponseHandlers.set(s,o=>{"result"===o.attrs.type?r(o):i(new tE(o))}),this.send(t).catch(o=>{this.logService.error("error sending iq",o),this.iqStanzaResponseHandlers.delete(s),i(o)})})}sendIqAckResult(t){return J(this,void 0,void 0,function*(){yield this.send((0,R.Ls)("iq",{from:this.userJid.toString(),id:t,type:"result"}))})}onStanzaReceived(t){let r=!1;if(this.isIqStanzaResponse(t)){const i=this.iqStanzaResponseHandlers.get(t.attrs.id);i&&(this.logService.debug("<<<",t.toString(),"handled by callback",i),this.iqStanzaResponseHandlers.delete(t.attrs.id),i(t),r=!0)}r||this.stanzaUnknown$.next(t)}isIqStanzaResponse(t){const r=t.attrs.type;return"iq"===t.name&&("result"===r||"error"===r)}logIn(t){return J(this,void 0,void 0,function*(){yield this.ngZone.runOutsideAngular(()=>J(this,void 0,void 0,function*(){t.username.indexOf("@")>=0&&this.logService.warn("username should not contain domain, only local part, this can lead to errors!"),this.client=this.xmppClientFactoryService.client(t),this.client.on("error",r=>{this.ngZone.run(()=>{this.logService.error("chat service error =>",r.toString(),r)})}),this.client.on("status",(r,i)=>{this.ngZone.run(()=>{this.logService.info("status update =",r,i?JSON.stringify(i):""),"offline"===r&&this.state$.next("disconnected")})}),this.client.on("online",r=>this.ngZone.run(()=>this.onOnline(r))),this.client.on("stanza",r=>{this.ngZone.run(()=>{this.onStanzaReceived(r)})}),this.client.on("disconnect",()=>{this.ngZone.run(()=>{this.state$.next("reconnecting")})}),yield this.client.start()}))})}logOut(){return J(this,void 0,void 0,function*(){if(this.logService.debug("logging out"),this.client){this.client.reconnect.stop();try{yield this.send((0,R.Ls)("presence",{type:"unavailable"}))}catch(t){this.logService.error("error sending presence unavailable")}finally{this.client.stop()}}})}getNextIqId(){return String(this.iqId++)}reconnectSilently(){this.logService.warn("hard reconnect..."),this.state$.next("disconnected")}}return n.\u0275fac=function(t){return new(t||n)(X(co),X(gt),X(mE))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class $a{constructor(e,t,r,i){this.name=t,this.recipientType="contact",this.avatar=Kp,this.metadata={},this.presence$=new Ue(Rt.unavailable),this.subscription$=new Ue(ot.none),this.pendingOut$=new Ue(!1),this.pendingIn$=new Ue(!1),this.resources$=new Ue(new Map),i&&(this.avatar=i);const s=(0,R.kO)(e);this.jidFull=s,this.jidBare=s.bare(),this.messageStore=new fE(r)}get messages$(){return this.messageStore.messages$}get messages(){return this.messageStore.messages}get dateMessagesGroups(){return this.messageStore.dateMessageGroups}get oldestMessage(){return this.messageStore.oldestMessage}get mostRecentMessage(){return this.messageStore.mostRecentMessage}get mostRecentMessageReceived(){return this.messageStore.mostRecentMessageReceived}get mostRecentMessageSent(){return this.messageStore.mostRecentMessageSent}addMessage(e){this.messageStore.addMessage(e)}equalsBareJid(e){if(e instanceof $a||pE(e)){const t=e instanceof $a?e.jidBare:e.bare();return this.jidBare.equals(t)}return!1}isSubscribed(){const e=this.subscription$.getValue();return e===ot.both||e===ot.to}isUnaffiliated(){return!this.isSubscribed()&&!this.pendingIn$.getValue()&&!this.pendingOut$.getValue()}updateResourcePresence(e,t){const r=this.resources$.getValue();r.set(e,t),this.presence$.next(this.determineOverallPresence(r)),this.resources$.next(r)}getMessageById(e){return this.messageStore.messageIdToMessage.get(e)}determineOverallPresence(e){let t=Rt.unavailable;return[...e.values()].some(r=>r===Rt.present?(t=r,!0):(r===Rt.away&&(t=Rt.away),!1)),t}}let Ua=(()=>{class n{constructor(t){this.logService=t}createContact(t,r,i){return r||(r=t),new $a(t,r,this.logService,i)}}return n.\u0275fac=function(t){return new(t||n)(X(co))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),yE=(()=>{class n{constructor(t,r,i){this.chatConnectionService=t,this.logService=r,this.contactFactory=i,this.message$=new ie,this.messageSent$=new ie,this.contacts$=new Ue([]),this.contactCreated$=new ie,this.blockedContactIds$=new Ue(new Set),this.blockedContacts$=Da([this.contacts$,this.blockedContactIds$]).pipe(pe(([s,o])=>s.filter(a=>o.has(a.jidBare.toString())))),this.notBlockedContacts$=Da([this.contacts$,this.blockedContactIds$]).pipe(pe(([s,o])=>s.filter(a=>!o.has(a.jidBare.toString())))),this.contactsSubscribed$=this.notBlockedContacts$.pipe(pe(s=>s.filter(o=>o.isSubscribed()))),this.contactRequestsReceived$=this.notBlockedContacts$.pipe(pe(s=>s.filter(o=>o.pendingIn$.getValue()))),this.contactRequestsSent$=this.notBlockedContacts$.pipe(pe(s=>s.filter(o=>o.pendingOut$.getValue()))),this.contactsUnaffiliated$=this.notBlockedContacts$.pipe(pe(s=>s.filter(o=>o.isUnaffiliated()&&o.messages.length>0))),this.state$=new Ue("disconnected"),this.plugins=[],this.enableDebugging=!1,this.userAvatar$=new Ue(Kp),this.translations=lE(),this.chatActions=[{id:"sendMessage",cssClass:"chat-window-send",html:"&raquo;",onClick:s=>{s.chatWindow.sendMessage()}}],this.state$.subscribe(s=>this.logService.info("state changed to:",s)),t.state$.pipe(At(s=>s!==this.state$.getValue())).subscribe(s=>{this.handleInternalStateChange(s)}),this.chatConnectionService.stanzaUnknown$.subscribe(s=>this.onUnknownStanza(s)),gu(this.messageSent$,this.message$).subscribe(()=>{this.contacts$.next(this.contacts$.getValue())})}handleInternalStateChange(t){"online"===t?(this.state$.next("connecting"),Promise.all(this.plugins.map(r=>r.onBeforeOnline())).then(()=>this.announceAvailability(),r=>{this.logService.error("error while connecting",r),this.announceAvailability()})):("online"===this.state$.getValue()&&this.onOffline(),this.state$.next("disconnected"))}onOffline(){this.contacts$.next([]),this.plugins.forEach(t=>{try{t.onOffline()}catch(r){this.logService.error("error while handling offline in ",t)}})}announceAvailability(){this.logService.info("announcing availability"),this.chatConnectionService.sendPresence(),this.state$.next("online")}addPlugins(t){t.forEach(r=>{this.plugins.push(r)})}reloadContacts(){this.getPlugin(lu).refreshRosterContacts()}getContactById(t){const r=(0,R.kO)(t).bare();return this.contacts$.getValue().find(i=>i.jidBare.equals(r))}getOrCreateContactById(t,r){let i=this.getContactById(t);return i||(i=this.contactFactory.createContact((0,R.kO)(t).bare().toString(),r),this.contacts$.next([i,...this.contacts$.getValue()]),this.contactCreated$.next(i)),i}addContact(t){this.getPlugin(lu).addRosterContact(t)}removeContact(t){this.getPlugin(lu).removeRosterContact(t)}logIn(t){return J(this,void 0,void 0,function*(){this.lastLogInRequest=t,"disconnected"===this.state$.getValue()&&(yield this.chatConnectionService.logIn(t))})}logOut(){return this.chatConnectionService.logOut()}sendMessage(t,r){return J(this,void 0,void 0,function*(){const i=r.trim();if(0!==i.length)switch(t.recipientType){case"room":yield this.getPlugin(ao).sendMessage(t,i);break;case"contact":this.getPlugin(uE).sendMessage(t,i),this.messageSent$.next(t);break;default:throw new Error("invalid recipient type: "+(null==t?void 0:t.recipientType))}})}loadCompleteHistory(){return this.getPlugin(Jp).loadAllMessages()}getPlugin(t){for(const r of this.plugins)if(r.constructor===t)return r;throw new Error("plugin not found: "+t)}onUnknownStanza(t){let r=!1;for(const i of this.plugins)try{i.handleStanza(t)&&(this.logService.debug(i.constructor.name,"handled",t.toString()),r=!0)}catch(s){this.logService.error("error handling stanza in ",i.constructor.name,s)}r||this.logService.warn("unknown stanza <=",t.toString())}reconnectSilently(){this.chatConnectionService.reconnectSilently()}reconnect(){return this.logIn(this.lastLogInRequest)}}return n.\u0275fac=function(t){return new(t||n)(X(ng),X(co),X(Ua))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const vE=new _e("ngxChatContactClickHandler");let rg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-avatar"]],inputs:{imageUrl:"imageUrl"},decls:1,vars:3,consts:[[1,"chat-avatar",3,"ngStyle"]],template:function(t,r){1&t&&Ee(0,"div",0),2&t&&B("ngStyle",_h(1,$j,"url("+r.imageUrl+")"))},directives:[cb],styles:[".chat-avatar[_ngcontent-%COMP%]{border-radius:50%;background-size:cover;background-position:50%;background-repeat:no-repeat;width:100%;height:100%}"]}),n})(),ig=(()=>{class n{constructor(){this.avatarClickHandler=new Ge,this.footerHidden=!1,this.MessageState=Qt}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message-simple"]],inputs:{avatar:"avatar",avatarInteractive:"avatarInteractive",direction:"direction",formattedDate:"formattedDate",footerHidden:"footerHidden",imageLink:"imageLink",showImagePlaceholder:"showImagePlaceholder",messageState:"messageState",nick:"nick"},outputs:{avatarClickHandler:"avatarClickHandler"},ngContentSelectors:XS,decls:7,vars:7,consts:[[1,"chat-message"],[1,"chat-message-text-wrapper"],["class","chat-message-avatar",4,"ngIf"],[1,"chat-message-text"],["class","chat-message-image-wrapper",3,"chat-message-image-wrapper--placeholder",4,"ngIf"],["class","chat-message-footer",4,"ngIf"],[1,"chat-message-avatar"],[3,"imageUrl","click"],[1,"chat-message-image-wrapper"],[1,"chat-message-image",3,"src","load"],[1,"chat-message-footer"],[1,"chat-message-name",3,"title"],[3,"ngSwitch",4,"ngIf"],[1,"chat-message-datetime"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"state--seen"]],template:function(t,r){1&t&&(Nc(),I(0,"div",0)(1,"div",1),se(2,Uj,2,3,"div",2),I(3,"div",3),Jo(4),x()(),se(5,Hj,2,3,"div",4),se(6,Qj,6,4,"div",5),x()),2&t&&(Er("chat-message--in","in"===r.direction)("chat-message--out","out"===r.direction),N(2),B("ngIf",r.avatar),N(3),B("ngIf",r.imageLink||r.showImagePlaceholder),N(1),B("ngIf",!r.footerHidden))},directives:[rg,hr,ol,ob],styles:[".chat-message-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:2em;height:2em;padding:.5em}.chat-message--in[_ngcontent-%COMP%]   .chat-message-avatar[_ngcontent-%COMP%]{padding-right:0}.chat-message--out[_ngcontent-%COMP%]   .chat-message-avatar[_ngcontent-%COMP%]{padding-left:0}.has-click-handler[_ngcontent-%COMP%]:hover{cursor:pointer}.chat-message-text[_ngcontent-%COMP%]{min-width:0;padding:.5em;word-break:break-word}.chat-message[_ngcontent-%COMP%]{border-radius:.5em;margin:.25em}.chat-message--out[_ngcontent-%COMP%]{background-color:#e6ffd1}.chat-message--in[_ngcontent-%COMP%]{background-color:#dbedff}.chat-message-text-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}.chat-message--out[_ngcontent-%COMP%]   .chat-message-text-wrapper[_ngcontent-%COMP%]{flex-direction:row-reverse}.chat-message-image-wrapper[_ngcontent-%COMP%]{max-width:100%;max-height:150px;overflow:hidden;height:auto;margin:0 .5em;display:flex;justify-content:center}.chat-message-image-wrapper.chat-message-image-wrapper--placeholder[_ngcontent-%COMP%]{height:150px}.chat-message-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain;min-width:0}.chat-message-footer[_ngcontent-%COMP%]{font-size:.75em;text-align:right;color:#999;padding:0 .5em .5em;clear:both}.chat-message-datetime[_ngcontent-%COMP%]{display:inline-block;vertical-align:bottom}.chat-message-name[_ngcontent-%COMP%]{display:inline-block;max-width:9em;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;vertical-align:bottom;margin-right:.5em}.state--seen[_ngcontent-%COMP%]{color:#00c5d2}"],changeDetection:0}),n})();const XB=new _e("ngxChatLinkOpener");let e$=(()=>{class n{constructor(t,r,i){this.router=t,this.platformLocation=r,this.linkOpener=i}onClick(t){if(this.linkOpener)t.preventDefault(),this.linkOpener.openLink(this.link);else if(this.isInApp()){t.preventDefault();const r=document.createElement("a");r.href=this.link,this.router.navigateByUrl(r.pathname)}}isInApp(){return this.link.startsWith(this.appUrl())}appUrl(){return window.location.protocol+"//"+window.location.host+this.platformLocation.getBaseHrefFromDOM()}}return n.\u0275fac=function(t){return new(t||n)(V(dn),V(Yr),V(XB,8))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message-link"]],decls:2,vars:2,consts:[["target","_blank","rel","noopener",3,"href","click"]],template:function(t,r){1&t&&(I(0,"a",0),K("click",function(s){return r.onClick(s)}),$(1),x()),2&t&&(Ko("href",r.link,Lo),N(1),ft(r.text))},styles:["a[_ngcontent-%COMP%]{color:#198cff;cursor:pointer}a[_ngcontent-%COMP%]:visited{color:#9a46e8}"]}),n})(),t$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message-text"]],inputs:{text:"text"},decls:1,vars:1,template:function(t,r){1&t&&$(0),2&t&&ft(r.text)},styles:["[_nghost-%COMP%]{white-space:pre-wrap}"]}),n})(),n$=(()=>{class n{constructor(t,r){this.resolver=t,this.viewContainerRef=r}ngOnChanges(){this.transform()}transform(){const t=this.ngxChatLinks;if(!t)return;const r=sE(t),i=this.resolver.resolveComponentFactory(t$),s=this.resolver.resolveComponentFactory(e$);let o=0;for(const c of r){const l=t.indexOf(c,o),u=t.substring(o,l);u&&(this.viewContainerRef.createComponent(i).instance.text=u);const d=this.viewContainerRef.createComponent(s);d.instance.link=c,d.instance.text=this.shorten(c),o=l+c.length}const a=t.substring(o);a&&(this.viewContainerRef.createComponent(i).instance.text=a)}shorten(t){const r=document.createElement("a");r.href=t;let i=r.pathname;return i.length>17&&(i=i.substring(0,5)+"..."+i.substring(i.length-10)),r.protocol+"//"+r.host+i}}return n.\u0275fac=function(t){return new(t||n)(V(Ps),V(Nn))},n.\u0275dir=he({type:n,selectors:[["","ngxChatLinks",""]],inputs:{ngxChatLinks:"ngxChatLinks"},features:[Yt]}),n})(),_E=(()=>{class n{constructor(t,r,i){this.chatService=t,this.httpClient=r,this.contactClickHandler=i,this.showMessageReadState=!0,this.showImagePlaceholder=!0,this.Direction=ke,this.messageStatePlugin=this.chatService.getPlugin(cE)}ngOnInit(){this.tryFindImageLink()}tryFindImageLink(){if(this.chatService instanceof yE){const t=sE(this.message.body);if(0===t.length)return void(this.showImagePlaceholder=!1);this.tryFindEmbedImageUrls(t)}}tryFindEmbedImageUrls(t){return J(this,void 0,void 0,function*(){for(const r of t)try{const i=yield this.httpClient.head(r,{observe:"response"}).toPromise(),s=i.headers.get("Content-Type"),o=s&&s.startsWith("image"),a=i.headers.get("Content-Length");if(o&&parseInt(a,10)<256e3){this.imageLink=r;break}}catch(i){}this.imageLink||(this.showImagePlaceholder=!1)})}getMessageState(){if(this.showMessageReadState){if(this.message.state)return this.message.state;if(this.messageStatePlugin&&this.contact){const t=this.message.datetime,r=this.messageStatePlugin.getContactMessageState(this.contact.jidBare.toString());return this.getStateForDate(t,r)}}}getStateForDate(t,r){return t<=r.lastRecipientSeen?Qt.RECIPIENT_SEEN:t<=r.lastRecipientReceived?Qt.RECIPIENT_RECEIVED:t<=r.lastSent?Qt.SENT:void 0}onContactClick(){this.contactClickHandler&&this.contactClickHandler.onClick(this.contact)}getAvatar(){if(this.showAvatars)return this.message.direction===ke.in?this.avatar:this.chatService.userAvatar$.getValue()}}return n.\u0275fac=function(t){return new(t||n)(V(hn),V(Dp),V(vE,8))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message"]],inputs:{showAvatars:"showAvatars",avatar:"avatar",message:"message",nick:"nick",contact:"contact",showMessageReadState:"showMessageReadState"},decls:3,vars:12,consts:[[3,"imageLink","showImagePlaceholder","avatar","avatarInteractive","direction","messageState","formattedDate","nick","avatarClickHandler"],[3,"ngxChatLinks"]],template:function(t,r){1&t&&(I(0,"ngx-chat-message-simple",0),K("avatarClickHandler",function(){return r.onContactClick()}),Se(1,"date"),Ee(2,"span",1),x()),2&t&&(B("imageLink",r.imageLink)("showImagePlaceholder",r.showImagePlaceholder)("avatar",r.getAvatar())("avatarInteractive",r.message.direction===r.Direction.in)("direction",r.message.direction)("messageState",r.getMessageState())("formattedDate",Q_(1,9,r.message.datetime,r.chatService.translations.timeFormat))("nick",r.nick),N(2),B("ngxChatLinks",r.message.body))},directives:[ig,n$],pipes:[df],styles:[".chat-message--out[_nghost-%COMP%]{align-self:flex-end}.chat-message--in[_nghost-%COMP%]{align-self:flex-start}"]}),n})();class i${constructor(e,t){this.recipient=e,this.isCollapsed=t}}let lo=(()=>{class n{constructor(t){this.chatService=t,this.openChats$=new Ue([]),this.openTracks$=new Ue([]),this.chatService.state$.pipe(At(r=>"disconnected"===r)).subscribe(()=>{this.openChats$.next([])}),this.chatService.contactRequestsReceived$.subscribe(r=>{for(const i of r)this.openChat(i)})}openChatCollapsed(t){if(!this.isChatWithRecipientOpen(t)){const r=this.openChats$.getValue(),s=[new i$(t,!0)].concat(r);this.openChats$.next(s)}}openChat(t){this.openChatCollapsed(t),this.findChatWindowStateByRecipient(t).isCollapsed=!1}closeChat(t){const r=this.openChats$.getValue(),i=this.findChatWindowStateIndexByRecipient(t);if(i>=0){const s=r.slice();s.splice(i,1),this.openChats$.next(s)}}openTrack(t){this.openTracks$.next(this.openTracks$.getValue().concat([t]))}closeTrack(t){this.openTracks$.next(this.openTracks$.getValue().filter(r=>r!==t))}isChatWithRecipientOpen(t){return void 0!==this.findChatWindowStateByRecipient(t)}findChatWindowStateIndexByRecipient(t){return this.openChats$.getValue().findIndex(r=>r.recipient.equalsBareJid(t))}findChatWindowStateByRecipient(t){return this.openChats$.getValue().find(r=>r.recipient.equalsBareJid(t))}}return n.\u0275fac=function(t){return new(t||n)(X(hn))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),sg=(()=>{class n{constructor(){this.openChats$=new Ue(new Set),this.chatOpened$=new ie,this.recipientToOpenMessageListCount=new Map}isChatOpen(t){return this.getOrDefault(t,0)>0}incrementOpenWindowCount(t){const r=this.isChatOpen(t);this.recipientToOpenMessageListCount.set(t,this.getOrDefault(t,0)+1);const i=this.openChats$.getValue();i.add(t),this.openChats$.next(i),r||this.chatOpened$.next(t)}decrementOpenWindowCount(t){const r=this.getOrDefault(t,0)-1;if(r<=0){this.recipientToOpenMessageListCount.set(t,0);const i=this.openChats$.getValue();i.delete(t),this.openChats$.next(i)}else this.recipientToOpenMessageListCount.set(t,r)}getOrDefault(t,r){return this.recipientToOpenMessageListCount.get(t)||r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),s$=(()=>{class n{constructor(t){this.el=t,this.ngxChatIntersectionObserver=new Ge,this.intersectionObserver=new IntersectionObserver(r=>{this.ngxChatIntersectionObserver.emit(r[0])},{rootMargin:"150px 0px 150px 0px"}),this.intersectionObserver.observe(t.nativeElement)}ngOnDestroy(){this.intersectionObserver.disconnect()}}return n.\u0275fac=function(t){return new(t||n)(V(rn))},n.\u0275dir=he({type:n,selectors:[["","ngxChatIntersectionObserver",""]],outputs:{ngxChatIntersectionObserver:"ngxChatIntersectionObserver"}}),n})();var fn=(()=>(function(n){n[n.PENDING_REQUEST=0]="PENDING_REQUEST",n[n.SHOW_BLOCK_ACTIONS=1]="SHOW_BLOCK_ACTIONS",n[n.NO_PENDING_REQUEST=2]="NO_PENDING_REQUEST"}(fn||(fn={})),fn))();let Ha=(()=>{class n{constructor(t,r,i,s,o,a){this.chatListService=t,this.chatService=r,this.chatMessageListRegistry=i,this.reportUserService=s,this.changeDetectorRef=o,this.contactFactory=a,this.Direction=ke,this.SubscriptionAction=fn,this.subscriptionAction=fn.NO_PENDING_REQUEST,this.onTop$=new ie,this.ngDestroy=new ie,this.isAtBottom=!0,this.bottomLeftAt=0,this.oldestVisibleMessageBeforeLoading=null,this.blockPlugin=this.chatService.getPlugin(eE)}ngOnInit(){return J(this,void 0,void 0,function*(){this.onTop$.pipe(At(t=>t.isIntersecting),Qs(1e3)).subscribe(()=>this.loadOlderMessagesBeforeViewport()),"contact"===this.recipient.recipientType&&this.recipient.pendingIn$.pipe(At(t=>!0===t),Ws(this.ngDestroy)).subscribe(()=>{this.subscriptionAction=fn.PENDING_REQUEST,this.scheduleScrollToLastMessage()}),this.chatMessageListRegistry.incrementOpenWindowCount(this.recipient)})}ngAfterViewInit(){return J(this,void 0,void 0,function*(){this.chatMessageViewChildrenList.changes.subscribe(()=>{this.oldestVisibleMessageBeforeLoading&&this.scrollToMessage(this.oldestVisibleMessageBeforeLoading),this.oldestVisibleMessageBeforeLoading=null}),this.recipient.messages$.pipe(Qs(10),At(()=>this.isNearBottom()),Ws(this.ngDestroy)).subscribe(r=>this.scheduleScrollToLastMessage()),this.recipient.messages.length<10&&(yield this.loadMessages()),this.scheduleScrollToLastMessage()})}ngOnChanges(t){const r=t.contact;r&&r.previousValue&&r.currentValue&&(this.chatMessageListRegistry.decrementOpenWindowCount(r.previousValue),this.chatMessageListRegistry.incrementOpenWindowCount(r.currentValue)),r&&r.currentValue&&this.scheduleScrollToLastMessage()}ngOnDestroy(){this.ngDestroy.next(),this.chatMessageListRegistry.decrementOpenWindowCount(this.recipient)}acceptSubscriptionRequest(t){t.preventDefault(),this.subscriptionAction===fn.PENDING_REQUEST&&(this.chatService.addContact(this.recipient.jidBare.toString()),this.subscriptionAction=fn.NO_PENDING_REQUEST,this.scheduleScrollToLastMessage())}denySubscriptionRequest(t){t.preventDefault(),this.subscriptionAction===fn.PENDING_REQUEST&&(this.chatService.removeContact(this.recipient.jidBare.toString()),this.subscriptionAction=fn.SHOW_BLOCK_ACTIONS,this.scheduleScrollToLastMessage())}scheduleScrollToLastMessage(){setTimeout(()=>this.scrollToLastMessage(),0)}scrollToLastMessage(){this.chatMessageAreaElement&&(this.chatMessageAreaElement.nativeElement.scrollTop=this.chatMessageAreaElement.nativeElement.scrollHeight,this.isAtBottom=!0)}scrollToMessage(t){this.chatMessageAreaElement&&document.getElementById("message-"+t.id).scrollIntoView(!1)}blockContact(t){t.preventDefault(),this.blockPlugin.blockJid(this.recipient.jidBare.toString()),this.chatListService.closeChat(this.recipient),this.subscriptionAction=fn.NO_PENDING_REQUEST}blockContactAndReport(t){"contact"===this.recipient.recipientType&&(t.preventDefault(),this.reportUserService.reportUser(this.recipient),this.blockContact(t))}dismissBlockOptions(t){t.preventDefault(),this.subscriptionAction=fn.NO_PENDING_REQUEST}subscriptionActionShown(){return"contact"===this.recipient.recipientType&&(this.subscriptionAction===fn.PENDING_REQUEST||!0===this.blockPlugin.supportsBlock$.getValue()&&this.subscriptionAction===fn.SHOW_BLOCK_ACTIONS)}loadOlderMessagesBeforeViewport(){return J(this,void 0,void 0,function*(){if(!this.isLoadingHistory()&&!this.isNearBottom())try{this.oldestVisibleMessageBeforeLoading=this.recipient.oldestMessage,yield this.loadMessages()}catch(t){this.oldestVisibleMessageBeforeLoading=null}})}loadMessages(){return J(this,void 0,void 0,function*(){try{this.changeDetectorRef.detach(),yield this.chatService.getPlugin(Jp).loadMostRecentUnloadedMessages(this.recipient)}finally{this.changeDetectorRef.reattach()}})}onBottom(t){this.isAtBottom=t.isIntersecting,t.isIntersecting?this.isAtBottom=!0:(this.isAtBottom=!1,this.bottomLeftAt=Date.now())}isNearBottom(){return this.isAtBottom||Date.now()-this.bottomLeftAt<1e3}isLoadingHistory(){return!!this.oldestVisibleMessageBeforeLoading}getOrCreateContactWithFullJid(t){if("contact"===this.recipient.recipientType)return this.recipient;const r=t;let i=this.chatService.contacts$.getValue().find(s=>s.jidFull.equals(r.from));return i||(i=this.contactFactory.createContact(r.from.toString(),r.from.resource),this.chatService.contacts$.next([i].concat(this.chatService.contacts$.getValue()))),i}}return n.\u0275fac=function(t){return new(t||n)(V(lo),V(hn),V(sg),V(GB,8),V(la),V(Ua))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message-list"]],viewQuery:function(t,r){if(1&t&&(Di(Jj,5),Di(_E,5)),2&t){let i;Ir(i=Ar())&&(r.chatMessageAreaElement=i.first),Ir(i=Ar())&&(r.chatMessageViewChildrenList=i)}},inputs:{recipient:"recipient",showAvatars:"showAvatars"},features:[Yt],decls:7,vars:3,consts:[[1,"chat-messages"],["messageArea",""],[1,"chat-messages-start",3,"ngxChatIntersectionObserver"],[4,"ngFor","ngForOf"],["class","chat-messages-empty",4,"ngIf"],[3,"direction","avatar","footerHidden",4,"ngIf"],[1,"chat-messages-end",3,"ngxChatIntersectionObserver"],[1,"chat-messages-date-group"],[3,"id","chat-message--in","chat-message--out","contact","nick","avatar","message","showAvatars",4,"ngFor","ngForOf"],[3,"id","contact","nick","avatar","message","showAvatars"],[1,"chat-messages-empty"],[3,"direction","avatar","footerHidden"],[1,"chat-presence-subscription-actions"],["class","action-disabled",4,"ngIf"],["href","#",3,"click",4,"ngIf"],["class","deny-actions",4,"ngIf"],[1,"action-disabled"],["href","#",3,"click"],[1,"deny-actions"],[4,"ngIf"]],template:function(t,r){1&t&&(I(0,"div",0,1)(2,"div",2),K("ngxChatIntersectionObserver",function(s){return r.onTop$.next(s)}),x(),se(3,Yj,5,7,"ng-container",3),se(4,Zj,2,1,"div",4),se(5,sB,12,11,"ngx-chat-message-simple",5),I(6,"div",6),K("ngxChatIntersectionObserver",function(s){return r.onBottom(s)}),x()()),2&t&&(N(3),B("ngForOf",r.recipient.dateMessagesGroups),N(1),B("ngIf",0===r.recipient.messages.length),N(1),B("ngIf",r.subscriptionActionShown()))},directives:[_E,ig,s$,Ls,hr],pipes:[df,Zr],styles:[".chat-message--out[_nghost-%COMP%]{align-self:flex-end}.chat-message--in[_nghost-%COMP%]{align-self:flex-start}.chat-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:10em;max-height:20em;overflow-y:scroll}.chat-messages-date-group[_ngcontent-%COMP%]{font-size:.7em;font-style:italic;margin:.5em 0;text-align:center}ngx-chat-message[_ngcontent-%COMP%], ngx-chat-message-simple[_ngcontent-%COMP%]{max-width:76%;align-self:flex-start;-webkit-animation-duration:1.5s;animation-duration:1.5s;-webkit-animation-timing-function:cubic-bezier(.16,1,.3,1);animation-timing-function:cubic-bezier(.16,1,.3,1)}ngx-chat-message.chat-message--in[_ngcontent-%COMP%], ngx-chat-message-simple.chat-message--in[_ngcontent-%COMP%]{-webkit-animation-name:ngx-chat-message-in;animation-name:ngx-chat-message-in}ngx-chat-message.chat-message--out[_ngcontent-%COMP%], ngx-chat-message-simple.chat-message--out[_ngcontent-%COMP%]{-webkit-animation-name:ngx-chat-message-out;animation-name:ngx-chat-message-out}.chat-messages-empty[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;color:#999;margin-top:1em;margin-bottom:1em}.chat-presence-subscription-actions[_ngcontent-%COMP%], .deny-actions[_ngcontent-%COMP%]{list-style:none;padding:0;margin:1em 0 0}.chat-presence-subscription-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .deny-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .chat-presence-subscription-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited, .deny-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#198cff}.deny-actions[_ngcontent-%COMP%]{margin-top:1em}.action-disabled[_ngcontent-%COMP%]{color:#999}.chat-messages-start[_ngcontent-%COMP%]{min-height:5px;height:5px;margin-top:5px}.chat-messages-end[_ngcontent-%COMP%]{min-height:5px;height:5px;margin-bottom:5px}"]}),n})();class CE extends Nt{constructor(e,t,r,i){super(),this.httpClient=e,this.serviceDiscoveryPlugin=t,this.xmppChatAdapter=r,this.logService=i}onBeforeOnline(){return this.uploadService=this.serviceDiscoveryPlugin.findService("store","file"),this.uploadService.then(()=>{this.fileUploadSupported=!0},()=>{this.fileUploadSupported=!1,this.logService.info("http file upload not supported")}),Promise.resolve()}onOffline(){this.uploadService=null,this.fileUploadSupported=!1}upload(e){return J(this,void 0,void 0,function*(){yield this.uploadService;const{name:t,size:r,type:i}=e,s=yield this.requestSlot(t,r.toString(),i);return yield this.uploadToSlot(s,e)})}requestSlot(e,t,r){return J(this,void 0,void 0,function*(){const i=(yield this.uploadService).jid;return(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{to:i,type:"get"},(0,R.Ls)("request",{xmlns:"urn:xmpp:http:upload:0",filename:e,size:t,"content-type":r})))).getChild("slot").getChild("put").attrs.url})}uploadToSlot(e,t){return J(this,void 0,void 0,function*(){return yield this.httpClient.put(e,t,{responseType:"blob"}).toPromise(),e})}}let bE=(()=>{class n{constructor(){this.closeClick=new Ge,this.headerClick=new Ge}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-window-frame"]],outputs:{closeClick:"closeClick",headerClick:"headerClick"},ngContentSelectors:cB,decls:5,vars:1,consts:[[1,"window"],[1,"window-header",3,"click"],["class","window-close",3,"click",4,"ngIf"],[1,"window-close",3,"click"]],template:function(t,r){1&t&&(Nc(aB),I(0,"div",0)(1,"div",1),K("click",function(){return r.headerClick.emit()}),Jo(2),se(3,oB,2,0,"div",2),x(),Jo(4,1),x()),2&t&&(N(3),B("ngIf",r.closeClick.observers.length>0))},directives:[hr],styles:["@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.window[_ngcontent-%COMP%]{border:1px solid #e1e1e1;border-bottom:none;background:#f5f5f5;margin-left:1em;width:17em;bottom:0;pointer-events:auto;position:relative}.window-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid #e1e1e1;cursor:pointer;height:2.5em;align-items:center;padding:.25em}.window-header[_ngcontent-%COMP%]:hover{background-color:#efefef}.window-close[_ngcontent-%COMP%]{padding:.5em;text-align:right;color:#777}.window-close[_ngcontent-%COMP%]:hover{color:#000}"]}),n})(),o$=(()=>{class n{constructor(t,r,i){this.chatService=t,this.chatListService=r,this.contactClickHandler=i,this.ngDestroy=new ie,this.httpFileUploadPlugin=this.chatService.getPlugin(CE)}ngOnInit(){this.chatWindowState.recipient.messages$.pipe(At(r=>r.direction===ke.in),Ws(this.ngDestroy)).subscribe(()=>{this.chatWindowState.isCollapsed=!1})}ngOnDestroy(){this.ngDestroy.next(),this.ngDestroy.complete()}onClickHeader(){this.chatWindowState.isCollapsed=!this.chatWindowState.isCollapsed}onClickClose(){this.chatListService.closeChat(this.chatWindowState.recipient)}sendMessage(){this.messageInput.onSendMessage()}afterSendMessage(){this.contactMessageList.scheduleScrollToLastMessage()}uploadFile(t){return J(this,void 0,void 0,function*(){const r=yield this.httpFileUploadPlugin.upload(t);this.chatService.sendMessage(this.chatWindowState.recipient,r)})}onFocus(){this.messageInput.focus()}onActionClick(t){t.onClick({contact:this.chatWindowState.recipient.jidBare.toString(),chatWindow:this})}onContactClick(t){this.contactClickHandler&&!this.chatWindowState.isCollapsed&&(t.stopPropagation(),this.contactClickHandler.onClick(this.chatWindowState.recipient))}}return n.\u0275fac=function(t){return new(t||n)(V(hn),V(lo),V(vE,8))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-window"]],viewQuery:function(t,r){if(1&t&&(Di(cu,5),Di(Ha,5)),2&t){let i;Ir(i=Ar())&&(r.messageInput=i.first),Ir(i=Ar())&&(r.contactMessageList=i.first)}},inputs:{chatWindowState:"chatWindowState"},decls:10,vars:8,consts:[[3,"headerClick","closeClick"],[1,"window-header-content"],[1,"chat-contact-avatar-wrapper",3,"click"],[3,"imageUrl"],[1,"header-middle"],[1,"chat-contact-name-wrapper",3,"title"],[3,"ngClass","click"],["class","chat-contact-status-wrapper",4,"ngIf"],["class","window-content",3,"enabled","dropMessage","fileUpload",4,"ngIf"],[1,"chat-contact-status-wrapper"],[1,"chat-contact-status"],[1,"window-content",3,"enabled","dropMessage","fileUpload"],[3,"click"],[3,"recipient","showAvatars"],[1,"chat-input-container"],[3,"recipient","messageSent"],["class","chat-action",3,"ngClass","innerHTML","click",4,"ngFor","ngForOf"],[1,"chat-action",3,"ngClass","innerHTML","click"]],template:function(t,r){1&t&&(I(0,"ngx-chat-window-frame",0),K("headerClick",function(){return r.onClickHeader()})("closeClick",function(){return r.onClickClose()}),bt(1,1),I(2,"div",2),K("click",function(s){return r.onContactClick(s)}),Ee(3,"ngx-chat-avatar",3),x(),I(4,"div",4)(5,"div",5)(6,"span",6),K("click",function(s){return r.onContactClick(s)}),$(7),x()(),se(8,lB,4,3,"div",7),x(),wt(),se(9,dB,6,6,"ngx-chat-filedrop",8),x()),2&t&&(N(3),B("imageUrl",r.chatWindowState.recipient.avatar),N(2),B("title",r.chatWindowState.recipient.name),N(1),B("ngClass",_h(6,hB,!r.chatWindowState.isCollapsed&&!!r.contactClickHandler)),N(1),ze(" ",r.chatWindowState.recipient.name," "),N(1),B("ngIf",!r.chatWindowState.isCollapsed&&"contact"===r.chatWindowState.recipient.recipientType),N(1),B("ngIf",!r.chatWindowState.isCollapsed))},directives:[bE,rg,BB,Ha,cu,lf,hr,Ls],pipes:[Zr],styles:["@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.chat-contact-avatar-wrapper[_ngcontent-%COMP%]{min-width:2em;width:2em;min-height:2em;height:2em}.header-middle[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:1;padding:0 .5em;white-space:nowrap;overflow:hidden;font-size:.8em;line-height:1.2;height:100%;display:flex;flex-direction:column;justify-content:space-around}.chat-contact-name-wrapper[_ngcontent-%COMP%], .chat-contact-status-wrapper[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:block}.has-click-handler[_ngcontent-%COMP%]:hover{text-decoration:underline}.chat-contact-status[_ngcontent-%COMP%]{color:#999}.window-content[_ngcontent-%COMP%]{text-align:left;padding:0;min-height:5em;display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto}.chat-input-container[_ngcontent-%COMP%]{display:flex;padding:.5em;border-top:1px solid #e1e1e1;background:#fff;cursor:text}.chat-action[_ngcontent-%COMP%]{cursor:pointer;align-self:center;text-align:center}.chat-window-send[_ngcontent-%COMP%]{background-color:#fff;border-color:#fff;color:#000;width:1.5em}.chat-window-send[_ngcontent-%COMP%]:active{border:none}ngx-chat-message-input[_ngcontent-%COMP%]{flex-grow:1}"]}),n})(),a$=(()=>{class n{constructor(){}ngAfterViewInit(){this.track.attach(this.video.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-video-window"]],viewQuery:function(t,r){if(1&t&&Di(fB,5),2&t){let i;Ir(i=Ar())&&(r.video=i.first)}},inputs:{track:"track"},decls:3,vars:0,consts:[["autoplay","1"],["video",""]],template:function(t,r){1&t&&(I(0,"ngx-chat-window-frame"),Ee(1,"video",0,1),x())},directives:[bE],styles:["video[_ngcontent-%COMP%]{width:100%}"]}),n})(),c$=(()=>{class n{constructor(t){this.chatListService=t}}return n.\u0275fac=function(t){return new(t||n)(V(lo))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-window-list"]],inputs:{rosterState:"rosterState"},decls:5,vars:7,consts:[[1,"chat-list"],[3,"track",4,"ngFor","ngForOf"],[3,"chatWindowState",4,"ngFor","ngForOf"],[3,"track"],[3,"chatWindowState"]],template:function(t,r){1&t&&(I(0,"div",0),se(1,pB,1,1,"ngx-chat-video-window",1),Se(2,"async"),se(3,gB,1,1,"ngx-chat-window",2),Se(4,"async"),x()),2&t&&(B("@rosterVisibility",r.rosterState),N(1),B("ngForOf",Me(2,3,r.chatListService.openTracks$)),N(2),B("ngForOf",Me(4,5,r.chatListService.openChats$)))},directives:[a$,o$,Ls],pipes:[Zr],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.chat-list[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:flex-end;position:fixed;bottom:0;right:16em;z-index:5;pointer-events:none}"],data:{animation:[Uf("rosterVisibility",[$s("hidden",ii({right:"1em"})),$s("shown",ii({right:"15em"})),Us("hidden => shown",Bs("400ms ease")),Us("shown => hidden",Bs("400ms ease"))])]}}),n})();const og="ngxchat:unreadmessagedate",wE="entries",DE="last-read";class l$ extends no{constructor(){super(...arguments),this.lastReadNodes=[]}addLastReadNode(e,t){this.lastReadNodes.push((0,R.Ls)(DE,{jid:e,date:t}))}toStanza(){return(0,R.Ls)(wE,{},this.lastReadNodes)}}class ag extends Nt{constructor(e,t,r,i,s){super(),this.chatService=e,this.chatMessageListRegistry=t,this.publishSubscribePlugin=r,this.entityTimePlugin=i,this.multiUserChatPlugin=s,this.jidToUnreadCount$=new Ue(new Map),this.jidToLastReadTimestamp=new Map,this.recipientIdToMessageSubscription=new Map,this.chatMessageListRegistry.chatOpened$.pipe(function YL(n,e=Gs){const r=FD(n)?+n-e.now():Math.abs(n);return i=>i.lift(new ZL(r,e))}(0)).subscribe(o=>this.checkForUnreadCountChange(o)),gu(s.rooms$,this.chatService.contactCreated$.pipe(pe(o=>[o]))).subscribe(o=>{for(const a of o){const c=a.jidBare.toString();if(!this.recipientIdToMessageSubscription.has(c)){const u=a.messages$.pipe(Qs(20)).subscribe(()=>this.checkForUnreadCountChange(a));this.recipientIdToMessageSubscription.set(c,u)}}}),this.publishSubscribePlugin.publish$.subscribe(o=>this.handlePubSubEvent(o)),this.unreadMessageCountSum$=Da([this.jidToUnreadCount$,this.chatService.blockedContactIds$]).pipe(Qs(20),pe(([o,a])=>{let c=0;for(const[l,u]of o)a.has(l)||(c+=u);return c}),LD(),hg())}checkForUnreadCountChange(e){return J(this,void 0,void 0,function*(){this.chatMessageListRegistry.isChatOpen(e)&&(this.jidToLastReadTimestamp.set(e.jidBare.toString(),yield this.entityTimePlugin.getNow()),yield this.persistLastSeenDates()),this.updateContactUnreadMessageState(e)})}onBeforeOnline(){return J(this,void 0,void 0,function*(){const e=yield this.fetchLastSeenDates();this.mergeJidToDates(e)})}onOffline(){for(const e of this.recipientIdToMessageSubscription.values())e.unsubscribe();this.recipientIdToMessageSubscription.clear(),this.jidToLastReadTimestamp.clear(),this.jidToUnreadCount$.next(new Map)}fetchLastSeenDates(){return J(this,void 0,void 0,function*(){const e=yield this.publishSubscribePlugin.retrieveNodeItems(og);return this.parseLastSeenDates(e)})}parseLastSeenDates(e){const t=new Map;if(1===e.length){const[r]=e;for(const i of r.getChild(wE).getChildren(DE)){const{jid:s,date:o}=i.attrs;isNaN(o)||t.set(s,o)}}return t}updateContactUnreadMessageState(e){const t=e.jidBare.toString(),r=this.jidToLastReadTimestamp.get(t)||0,i=this.calculateUnreadMessageCount(e,r),s=this.jidToUnreadCount$.getValue();s.get(t)!==i&&this.jidToUnreadCount$.next(s.set(t,i))}calculateUnreadMessageCount(e,t){const r=Xp(t,e.messages,i=>i.datetime.getTime());return e.messages.slice(r).filter(i=>i.direction===ke.in).length}persistLastSeenDates(){return J(this,void 0,void 0,function*(){const e=new l$;for(const[t,r]of this.jidToLastReadTimestamp)e.addLastReadNode(t,r.toString());yield this.publishSubscribePlugin.storePrivatePayloadPersistent(og,"current",e.toStanza())})}handlePubSubEvent(e){const t=e.getChild("items"),r=t&&t.attrs.node,i=t&&t.getChildren("item");if(r===og&&i){const s=this.parseLastSeenDates(i);this.mergeJidToDates(s)}}mergeJidToDates(e){for(const[t,r]of e){const i=this.jidToLastReadTimestamp.get(t);(!i||i<r)&&this.jidToLastReadTimestamp.set(t,r)}}}let u$=(()=>{class n{constructor(t){this.chatService=t,this.Presence=Rt}ngOnInit(){this.unreadCount$=this.chatService.getPlugin(ag).jidToUnreadCount$.pipe(pe(t=>t.get(this.recipient.jidBare.toString())||0),LD(),Qs(20)),this.presence$="contact"===this.recipient.recipientType?this.recipient.presence$:ve(Rt.unavailable)}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-roster-recipient"]],inputs:{recipient:"recipient"},decls:10,vars:9,consts:[[1,"roster-recipient",3,"title"],[1,"roster-recipient-avatar"],[3,"imageUrl"],[1,"roster-recipient-name"],[1,"roster-recipient-status"],["class","unread-message-badge",4,"ngIf"],[4,"ngIf"],[1,"unread-message-badge"],["class","roster-presence",3,"ngClass",4,"ngIf"],[1,"roster-presence",3,"ngClass"]],template:function(t,r){1&t&&(I(0,"div",0)(1,"div",1),Ee(2,"ngx-chat-avatar",2),x(),I(3,"div",3),$(4),x(),I(5,"div",4),se(6,mB,3,3,"div",5),Se(7,"async"),se(8,vB,2,1,"ng-container",6),Se(9,"async"),x()()),2&t&&(B("title",r.recipient.name),N(2),B("imageUrl",r.recipient.avatar),N(2),ze(" ",r.recipient.name," "),N(2),B("ngIf",Me(7,5,r.unreadCount$)>0),N(2),B("ngIf",Me(9,7,r.presence$)))},directives:[rg,hr,lf],pipes:[Zr],styles:["@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.roster-recipient[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.roster-recipient-avatar[_ngcontent-%COMP%]{min-width:2em;width:2em;min-height:2em;height:2em}.roster-recipient-name[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;flex-grow:1}.roster-recipient-status[_ngcontent-%COMP%]{white-space:nowrap}.roster-presence[_ngcontent-%COMP%]{display:inline-block;padding-top:.5em;margin-left:.3em}.roster-presence.roster-presence--present[_ngcontent-%COMP%]{color:#69ca48}.roster-presence.roster-presence--away[_ngcontent-%COMP%]{color:#ffbe00}.roster-presence.roster-presence--unavailable[_ngcontent-%COMP%]{color:transparent}.unread-message-badge[_ngcontent-%COMP%]{display:inline-block;padding-top:.2em;background-color:#ff5940;color:#fff;border-radius:50%;align-self:center;margin-top:.25em;width:1.5em;height:1.5em;text-align:center}"]}),n})(),d$=(()=>{class n{constructor(t,r){this.chatService=t,this.chatListService=r,this.rosterStateChanged=new Ge,this.multiUserChatPlugin=this.chatService.getPlugin(ao)}ngOnInit(){this.contacts||(this.contacts=this.chatService.contactsSubscribed$),this.contactRequestsReceived$||(this.contactRequestsReceived$=this.chatService.contactRequestsReceived$),this.contactRequestsSent$||(this.contactRequestsSent$=this.chatService.contactRequestsSent$),this.contactsUnaffiliated$||(this.contactsUnaffiliated$=this.chatService.contactsUnaffiliated$),this.hasNoContacts$=Da([this.contacts,this.contactRequestsReceived$,this.contactRequestsSent$,this.contactsUnaffiliated$]).pipe(pe(([t,r,i,s])=>t.length+r.length+i.length+s.length===0))}onClickRecipient(t){this.chatListService.openChat(t)}toggleVisibility(){this.rosterStateChanged.emit("shown"===this.rosterState?"hidden":"shown")}}return n.\u0275fac=function(t){return new(t||n)(V(hn),V(lo))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-roster-list"]],inputs:{rosterState:"rosterState",contacts:"contacts",contactRequestsReceived$:"contactRequestsReceived$",contactRequestsSent$:"contactRequestsSent$",contactsUnaffiliated$:"contactsUnaffiliated$"},outputs:{rosterStateChanged:"rosterStateChanged"},decls:20,vars:27,consts:[[1,"roster-drawer",3,"click"],["class","roster-drawer__button",4,"ngIf"],[1,"roster-list"],[1,"roster-header"],[4,"ngIf"],["class","roster-list__empty",4,"ngIf"],[1,"roster-drawer__button"],[1,"roster-group-header"],[1,"contact-list-wrapper"],[3,"recipient","click",4,"ngFor","ngForOf"],[3,"recipient","click"],[4,"ngFor","ngForOf"],[3,"recipient","click",4,"ngIf"],[1,"roster-list__empty"],[1,"contact-pending-request-received-wrapper"],["class","contact-pending-request-received",4,"ngFor","ngForOf"],[1,"contact-pending-request-sent-wrapper"],["class","contact-pending-request-sent",4,"ngFor","ngForOf"],["style","margin-bottom: 1em",4,"ngFor","ngForOf"],[1,"roster-debug-state"],[1,"contact-pending-request-received"],[1,"contact-pending-request-sent"],[2,"margin-bottom","1em"]],template:function(t,r){1&t&&(I(0,"div",0),K("click",function(){return r.toggleVisibility()}),se(1,_B,2,0,"div",1),se(2,CB,2,0,"div",1),x(),I(3,"div",2),Se(4,"async"),I(5,"div",3),$(6),x(),se(7,DB,2,1,"ng-container",4),Se(8,"async"),se(9,EB,6,4,"ng-container",4),Se(10,"async"),se(11,TB,6,4,"ng-container",4),Se(12,"async"),se(13,IB,6,4,"ng-container",4),Se(14,"async"),se(15,PB,6,4,"ng-container",4),Se(16,"async"),se(17,OB,2,1,"div",5),Se(18,"async"),se(19,LB,21,15,"ng-container",4),x()),2&t&&(B("@drawerVisibility",r.rosterState),N(1),B("ngIf","shown"===r.rosterState),N(1),B("ngIf","hidden"===r.rosterState),N(1),B("@rosterVisibility",r.rosterState),Jn("data-ngx-chat-state",Me(4,13,r.chatService.state$)),N(3),ze(" ",r.chatService.translations.chat," "),N(1),B("ngIf",Me(8,15,r.multiUserChatPlugin.rooms$)),N(2),B("ngIf",Me(10,17,r.contacts).length>0),N(2),B("ngIf",Me(12,19,r.contactRequestsReceived$).length>0),N(2),B("ngIf",Me(14,21,r.contactRequestsSent$).length>0),N(2),B("ngIf",Me(16,23,r.contactsUnaffiliated$).length>0),N(2),B("ngIf",Me(18,25,r.hasNoContacts$)),N(2),B("ngIf",r.chatService.enableDebugging))},directives:[u$,hr,Ls],pipes:[Zr],styles:["@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.roster-list[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;right:0;width:14em;overflow-y:auto;border-left:1px solid #e1e1e1;z-index:80;margin-left:10px;background-color:#f5f5f5;text-align:left;padding:.5em .5em 0;display:flex;flex-direction:column}.roster-list[_ngcontent-%COMP%]   .roster-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1em}.roster-list[_ngcontent-%COMP%]   .roster-group-header[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1;padding-bottom:.5em}.roster-list[_ngcontent-%COMP%]   .roster-footer[_ngcontent-%COMP%]{border-top:1px solid #e1e1e1;width:14em;padding-top:.5em}.roster-list[_ngcontent-%COMP%]   .contact-list-wrapper[_ngcontent-%COMP%]{margin-bottom:1em}.roster-list[_ngcontent-%COMP%]   ngx-chat-roster-recipient[_ngcontent-%COMP%]{display:block;padding:.5em}.roster-list[_ngcontent-%COMP%]   ngx-chat-roster-recipient[_ngcontent-%COMP%]:hover{background-color:#e8e8e8;cursor:pointer}.roster-list__empty[_ngcontent-%COMP%]{color:#999;text-align:center;margin-top:.5em;font-size:1.5em}.roster-drawer[_ngcontent-%COMP%]{top:0;bottom:0;right:14em;width:1em;position:fixed;z-index:80;cursor:pointer}.roster-drawer[_ngcontent-%COMP%]:hover{background-color:#1e1e1e33}.roster-drawer__button[_ngcontent-%COMP%]{top:50%;color:transparent;background-color:transparent;position:fixed;margin-left:.4rem}.roster-drawer[_ngcontent-%COMP%]:hover   .roster-drawer__button[_ngcontent-%COMP%]{color:#fff}"],data:{animation:[Uf("rosterVisibility",[$s("hidden",ii({right:"-14em"})),$s("shown",ii({right:"0em"})),Us("hidden => shown",Bs("400ms ease")),Us("shown => hidden",Bs("400ms ease"))]),Uf("drawerVisibility",[$s("hidden",ii({right:"0em"})),$s("shown",ii({right:"14em"})),Us("hidden => shown",Bs("400ms ease")),Us("shown => hidden",Bs("400ms ease"))])]}}),n})(),h$=(()=>{class n{constructor(t){this.chatService=t,this.showChatComponent=!1}set translations(t){const r=lE();t&&(this.chatService.translations=Object.assign(Object.assign(Object.assign({},r),t),{presence:Object.assign(Object.assign({},r.presence),t.presence)}))}ngOnInit(){this.chatService.state$.subscribe(t=>this.onChatStateChange(t)),this.onRosterStateChanged(this.rosterState),this.userAvatar$&&this.userAvatar$.subscribe(t=>this.chatService.userAvatar$.next(t))}ngOnChanges(t){t.rosterState&&this.onRosterStateChanged(t.rosterState.currentValue)}onChatStateChange(t){this.showChatComponent="online"===t,this.updateBodyClass()}onRosterStateChanged(t){this.rosterState=t,this.updateBodyClass()}updateBodyClass(){const t="has-roster";this.showChatComponent&&"hidden"!==this.rosterState?document.body.classList.add(t):document.body.classList.remove(t)}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat"]],inputs:{translations:"translations",contacts:"contacts",contactRequestsReceived$:"contactRequestsReceived$",contactRequestsSent$:"contactRequestsSent$",contactsUnaffiliated$:"contactsUnaffiliated$",userAvatar$:"userAvatar$",rosterState:"rosterState"},features:[Yt],decls:2,vars:2,consts:[[3,"rosterState",4,"ngIf"],[3,"rosterState","contacts","contactRequestsReceived$","contactRequestsSent$","contactsUnaffiliated$","rosterStateChanged",4,"ngIf"],[3,"rosterState"],[3,"rosterState","contacts","contactRequestsReceived$","contactRequestsSent$","contactsUnaffiliated$","rosterStateChanged"]],template:function(t,r){1&t&&(se(0,VB,1,1,"ngx-chat-window-list",0),se(1,jB,1,5,"ngx-chat-roster-list",1)),2&t&&(B("ngIf",r.showChatComponent),N(1),B("ngIf",r.showChatComponent))},directives:[c$,d$,hr],styles:[""]}),n})();function SE(n){return(n.split("://")[1]||n).split(":")[0].split("/")[0]}const uu="storage:bookmarks";class f$ extends Nt{constructor(e){super(),this.publishSubscribePlugin=e,this.pendingAddConference=null}onOffline(){this.pendingAddConference=null}retrieveMultiUserChatRooms(){return J(this,void 0,void 0,function*(){const e=yield this.publishSubscribePlugin.retrieveNodeItems(uu),t=e&&e[0]&&e[0].getChild("storage",uu),r=e&&t.getChildren("conference");return r?r.map(i=>this.convertElementToSavedConference(i)):[]})}convertElementToSavedConference(e){return{name:e.attrs.name,jid:e.attrs.jid,autojoin:"true"===e.attrs.autojoin}}saveConferences(e){const t=function ZB(n,e=((t,r)=>t===r)){const t=[];for(const r of n){let i=!1;for(const s of t)if(e(r,s)){i=!0;break}i||t.push(r)}return t}(e,(r,i)=>r.jid===i.jid);return this.publishSubscribePlugin.storePrivatePayloadPersistent(uu,null,(0,R.Ls)("storage",{xmlns:uu},t.map(r=>this.convertSavedConferenceToElement(r))))}addConference(e){return J(this,void 0,void 0,function*(){for(;this.pendingAddConference;)try{yield this.pendingAddConference}catch(t){}this.pendingAddConference=this.addConferenceInternal(e);try{return yield this.pendingAddConference}finally{this.pendingAddConference=null}})}addConferenceInternal(e){return J(this,void 0,void 0,function*(){const r=[...yield this.retrieveMultiUserChatRooms(),e];return yield this.saveConferences(r)})}convertSavedConferenceToElement({name:e,autojoin:t,jid:r}){return(0,R.Ls)("conference",{name:e,jid:r,autojoin:t.toString()})}}class p$ extends Nt{constructor(e,t,r){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.logService=r,this.serverSupportsTime$=new Ue("unknown"),this.serverTime$=new Ue(null)}onBeforeOnline(){return J(this,void 0,void 0,function*(){if(yield this.serviceDiscoveryPlugin.supportsFeature(this.xmppChatAdapter.chatConnectionService.userJid.domain,"urn:xmpp:time")){const t=yield this.requestTime(this.xmppChatAdapter.chatConnectionService.userJid.domain);this.serverTime$.next(t),this.serverSupportsTime$.next(!0)}else this.serverSupportsTime$.next(!1)})}onOffline(){this.serverSupportsTime$.next("unknown"),this.serverTime$.next(null)}getNow(){return J(this,void 0,void 0,function*(){const e=this.serverTime$.pipe(pe(t=>this.calculateNow(t)),jn());return yield this.serverSupportsTime$.pipe(function s2(n,e=Gs){return function r2(n,e,t=Gs){return r=>{let i=FD(n),s=i?+n-t.now():Math.abs(n);return r.lift(new i2(s,i,e,t))}}(n,Ks(new n2),e)}(5e3),jn(t=>"unknown"!==t),Pt(t=>t?e:ve(Date.now())),ci(()=>ve(Date.now()))).toPromise()})}calculateNow(e){return e.utcTimestamp+(performance.now()-e.localReference)}requestTime(e){var t;return J(this,void 0,void 0,function*(){const r=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"get",to:e},(0,R.Ls)("time",{xmlns:"urn:xmpp:time"}))),i=null===(t=r.getChild("time","urn:xmpp:time"))||void 0===t?void 0:t.getChildText("utc");if(!i){const s="invalid time response";throw this.logService.error(s,r.toString()),new Error(s)}return{utcTimestamp:Date.parse(i),localReference:performance.now()}})}}class g$ extends Nt{constructor(e){super(),this.xmppChatAdapter=e}onBeforeOnline(){return J(this,void 0,void 0,function*(){return yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set"},(0,R.Ls)("enable",{xmlns:"urn:xmpp:carbons:2"})))})}handleStanza(e){const t=e.getChildByAttr("xmlns","urn:xmpp:carbons:2"),r=t&&t.getChild("forwarded","urn:xmpp:forward:0"),i=r&&r.getChild("message","jabber:client"),s=e.attrs.from,o=this.xmppChatAdapter.chatConnectionService.userJid;return!!(e.is("message")&&t&&r&&i&&o&&o.bare().toString()===s)&&this.handleCarbonMessageStanza(i,t)}handleCarbonMessageStanza(e,t){const r=t.is("received")?ke.in:ke.out,i={body:e.getChildText("body").trim(),direction:r,datetime:new Date,delayed:!1,fromArchive:!1},s=new Yp;if(this.xmppChatAdapter.plugins.forEach(o=>o.afterReceiveMessage(i,e,s)),!s.discard){const{from:o,to:a}=e.attrs,l=this.xmppChatAdapter.getOrCreateContactById(r===ke.in?o:a);l.addMessage(i),r===ke.in&&this.xmppChatAdapter.message$.next(l)}return!0}}class m$ extends Error{constructor(e){super(e),this.name="TimeoutError"}}function EE(n,e){const t=function y$(n){let e;const t=new Promise(r=>{e=setTimeout(r,n)});return t.timeout=e,t}(e);return Promise.race([n.finally(function r(){clearTimeout(t.timeout)}),t.then(()=>{throw new m$})])}class v$ extends Nt{constructor(e,t,r){super(),this.xmppChatAdapter=e,this.logService=t,this.ngZone=r,this.pingInterval=6e4,this.xmppChatAdapter.state$.pipe(At(i=>"online"===i)).subscribe(()=>this.schedulePings()),this.xmppChatAdapter.state$.pipe(At(i=>"disconnected"===i)).subscribe(()=>this.unschedulePings())}schedulePings(){this.unschedulePings(),this.ngZone.runOutsideAngular(()=>{this.timeoutHandle=window.setInterval(()=>this.ping(),this.pingInterval)})}ping(){return J(this,void 0,void 0,function*(){this.logService.debug("ping...");try{yield EE(this.sendPing(),1e4),this.logService.debug("... pong")}catch(e){"online"===this.xmppChatAdapter.state$.getValue()&&"online"===this.xmppChatAdapter.chatConnectionService.state$.getValue()&&this.logService.error("... pong errored,  connection should be online, waiting for browser websocket timeout")}})}sendPing(){return J(this,void 0,void 0,function*(){return yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"get"},(0,R.Ls)("ping",{xmlns:"urn:xmpp:ping"})))})}unschedulePings(){window.clearInterval(this.timeoutHandle)}}class _$ extends Nt{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t}register(e,t){return J(this,void 0,void 0,function*(){return t||(t=(yield this.getPushServiceComponent()).jid),yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set"},(0,R.Ls)("enable",{xmlns:"urn:xmpp:push:0",jid:t,node:e})))})}getPushServiceComponent(){return J(this,void 0,void 0,function*(){return yield this.serviceDiscoveryPlugin.findService("pubsub","push")})}unregister(e,t){return J(this,void 0,void 0,function*(){return t||(t=(yield this.getPushServiceComponent()).jid),yield this.xmppChatAdapter.chatConnectionService.sendIq((0,R.Ls)("iq",{type:"set"},(0,R.Ls)("disable",{xmlns:"urn:xmpp:push:0",jid:t,node:e})))})}}class ME extends Nt{constructor(e,t){super(),this.logService=e,this.ngZone=t,this.registered$=new ie,this.cleanUp=new ie,this.loggedIn$=new ie,this.registrationTimeout=5e3}register(e,t,r,i){return J(this,void 0,void 0,function*(){yield this.ngZone.runOutsideAngular(()=>J(this,void 0,void 0,function*(){try{yield EE((()=>J(this,void 0,void 0,function*(){i=i||SE(r),this.logService.debug("registration plugin","connecting..."),yield this.connect(e,t,r,i),this.logService.debug("registration plugin","connection established, starting registration"),yield this.client.iqCaller.request((0,R.Ls)("iq",{type:"get",to:i},(0,R.Ls)("query",{xmlns:"jabber:iq:register"}))),this.logService.debug("registration plugin","server acknowledged registration request, sending credentials"),yield this.client.iqCaller.request((0,R.Ls)("iq",{type:"set"},(0,R.Ls)("query",{xmlns:"jabber:iq:register"},(0,R.Ls)("username",{},e),(0,R.Ls)("password",{},t)))),this.registered$.next(),yield this.loggedIn$.pipe(Ws(this.cleanUp),jn()).toPromise(),this.logService.debug("registration plugin","registration successful")}))(),this.registrationTimeout)}catch(s){throw this.logService.warn("error registering",s),s}finally{this.cleanUp.next(),this.logService.debug("registration plugin","cleaning up"),yield this.client.stop()}}))})}connect(e,t,r,i){return new Promise(s=>(this.client=(0,R.Lp)({domain:i||SE(r),service:r,credentials:o=>J(this,void 0,void 0,function*(){s(),yield this.registered$.pipe(Ws(this.cleanUp),jn()).toPromise(),yield o({username:e,password:t})})}),this.client.reconnect.stop(),this.client.timeout=this.registrationTimeout,this.client.on("online",()=>{this.logService.debug("registration plugin","online event"),this.loggedIn$.next()}),this.client.on("error",o=>{this.logService.error("registration plugin",o)}),this.client.on("offline",()=>{this.logService.debug("registration plugin","offline event")}),this.client.start()))}}let TE=(()=>{class n{constructor(t){this.chatService=t,this.enabled=!1,t.message$.subscribe(r=>{this.receivedDirectMessage(r)}),t.getPlugin(ao).message$.subscribe(r=>J(this,void 0,void 0,function*(){yield this.receivedGroupMessage(r)}))}enable(){this.supportsNotification()&&(this.requestNotificationPermission(),this.enabled=!0)}disable(){this.enabled=!1}requestNotificationPermission(){Notification.requestPermission()}receivedDirectMessage(t){if(this.shouldDisplayNotification()){const r=new Notification(t.name,{body:t.mostRecentMessage.body,icon:t.avatar});r.addEventListener("click",()=>{window.focus(),r.close()})}}receivedGroupMessage(t){return J(this,void 0,void 0,function*(){if(this.shouldDisplayNotification()){const r=t.mostRecentMessage.body,i=t.mostRecentMessage.from,s=yield this.customizeGroupMessage(i,r),o=new Notification(t.name,s);o.addEventListener("click",()=>{window.focus(),o.close()})}})}customizeGroupMessage(t,r){return J(this,void 0,void 0,function*(){return{body:`${t}: ${r}`}})}shouldDisplayNotification(){const t=Notification;return this.enabled&&"hidden"===document.visibilityState&&this.supportsNotification()&&"granted"===t.permission}supportsNotification(){return"Notification"in window}}return n.\u0275fac=function(t){return new(t||n)(X(hn))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),C$=(()=>{class n{static forRoot(){return{ngModule:n,providers:[TE,lo,sg,Ua,co,ng,mE,{provide:hn,deps:[ng,sg,Ua,Dp,co,gt],useFactory:n.xmppChatAdapter}]}}static xmppChatAdapter(t,r,i,s,o,a){const c=new yE(t,o,i),l=new Ba(c),u=new UB(c,l),d=new p$(c,l,o),h=new ao(c,o,l),f=new ag(c,r,u,d,h),y=new uE(c,o);return c.addPlugins([new f$(u),new Jp(c,l,h,o,y),y,new Va,h,u,new lu(c,o),l,new _$(c,l),new v$(c,o,a),new ME(o,a),new g$(c),f,new CE(s,l,c,o),new cE(u,c,r,o,d),new iE(c,l),new eE(c,l),d]),c}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({imports:[[db,Nw,b2,RL]]}),n})();var cg=g(6105);let b$=(()=>{class n{constructor(t){this.chatService=t}sendIq(){return J(this,void 0,void 0,function*(){const t=(0,cg.parse)(this.iqRequest);if(t){const r=yield this.chatService.chatConnectionService.sendIq(t);this.iqResponse=(0,cg.stringify)(r,4,1)}})}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["app-iq"]],decls:9,vars:2,consts:[["rows","10",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,r){1&t&&(I(0,"div")(1,"h2"),$(2,"Send custom IQ packets:"),x(),I(3,"textarea",0),K("ngModelChange",function(s){return r.iqRequest=s}),x(),I(4,"button",1),K("click",function(){return r.sendIq()}),$(5,"Send IQ"),x(),I(6,"pre")(7,"code"),$(8),x()()()),2&t&&(N(3),B("ngModel",r.iqRequest),N(5),ft(r.iqResponse))},directives:[ei,Vs,Ti],styles:[""]}),n})(),w$=(()=>{class n{constructor(t){this.chatService=t}sendStanza(){return J(this,void 0,void 0,function*(){const t=(0,cg.parse)(this.stanza);t&&(yield this.chatService.chatConnectionService.send(t))})}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["app-send-stanza"]],decls:8,vars:1,consts:[["rows","10",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,r){1&t&&(I(0,"div")(1,"h2"),$(2,"Send custom stanza:"),x(),I(3,"textarea",0),K("ngModelChange",function(s){return r.stanza=s}),x(),I(4,"button",1),K("click",function(){return r.sendStanza()}),$(5,"Send stanza"),x(),I(6,"div"),$(7,"Note: responses will not be displayed!"),x()()),2&t&&(N(3),B("ngModel",r.stanza))},directives:[ei,Vs,Ti],styles:[""]}),n})();function D$(n,e){if(1&n){const t=yt();I(0,"div")(1,"button",5),K("click",function(){const s=Re(t).$implicit;return Z(2).selectedRoom=s}),$(2),x()()}if(2&n){const t=e.$implicit;N(2),ze(" ",t.roomJid.bare().toString()," ")}}function S$(n,e){if(1&n&&(bt(0),Ee(1,"ngx-chat-message-list",8)(2,"ngx-chat-message-input",8),wt()),2&n){const t=Z(2);N(1),B("recipient",t.selectedRoom),N(1),B("recipient",t.selectedRoom)}}function E$(n,e){1&n&&(I(0,"span"),$(1,"(no room joined yet)"),x())}function M$(n,e){if(1&n&&(I(0,"li"),$(1),x()),2&n){const t=e.$implicit;N(1),ze(" ",t," ")}}function T$(n,e){if(1&n&&(I(0,"li"),$(1),I(2,"ul"),se(3,M$,2,1,"li",2),x()()),2&n){const t=e.$implicit;N(1),ze(" ",t.key,": "),N(2),B("ngForOf",t.value)}}function x$(n,e){if(1&n&&(I(0,"li"),$(1),x()),2&n){const t=e.$implicit;N(1),ze(" ",t.jid," ")}}function I$(n,e){if(1&n){const t=yt();I(0,"div"),$(1),I(2,"button",5),K("click",function(){const s=Re(t).$implicit;return Z(2).joinRoom(s.jid)}),$(3,"join"),x(),I(4,"button",5),K("click",function(){const s=Re(t).$implicit;return Z(2).subscribeWithMucSub(s.jid)}),$(5,"subscribe with MUC/Sub"),x(),I(6,"button",5),K("click",function(){const s=Re(t).$implicit;return Z(2).unsubscribeFromMucSub(s.jid)}),$(7,"unsubscribe from MUC/Sub"),x(),I(8,"button",5),K("click",function(){const s=Re(t).$implicit;return Z(2).destroyRoom(s.jid)}),$(9,"destroy"),x()()}if(2&n){const t=e.$implicit;N(1),lh(" ",t.name,": ",t.jid," ")}}function A$(n,e){if(1&n){const t=yt();I(0,"button",5),K("click",function(){return Re(t),Z(2).createNewRoom()}),$(1,"Create new room"),x()}}function R$(n,e){if(1&n){const t=yt();I(0,"form",9),K("submit",function(){return Re(t),Z(2).createRoomOnServer()}),I(1,"div",10)(2,"input",11,12),K("ngModelChange",function(i){return Re(t),Z(2).newRoom.roomId=i}),x(),I(4,"div",13),$(5," Room id is required "),x()(),I(6,"label")(7,"input",14),K("ngModelChange",function(i){return Re(t),Z(2).newRoom.membersOnly=i}),x(),$(8," members only "),x(),Ee(9,"br"),I(10,"label")(11,"input",15),K("ngModelChange",function(i){return Re(t),Z(2).newRoom.nonAnonymous=i}),x(),$(12," non-anonymous "),x(),Ee(13,"br"),I(14,"label")(15,"input",16),K("ngModelChange",function(i){return Re(t),Z(2).newRoom.persistentRoom=i}),x(),$(16," persistent "),x(),Ee(17,"br"),I(18,"label")(19,"input",17),K("ngModelChange",function(i){return Re(t),Z(2).newRoom.public=i}),x(),$(20," public "),x(),Ee(21,"br"),I(22,"label")(23,"input",18),K("ngModelChange",function(i){return Re(t),Z(2).newRoom.allowSubscription=i}),x(),$(24," allow subscription "),x(),Ee(25,"br"),I(26,"button",19),$(27,"Create room"),x(),I(28,"button",5),K("click",function(){return Re(t),Z(2).cancelRoomCreation()}),$(29,"Cancel room creation"),x()()}if(2&n){const t=Pc(3),r=Z(2);N(2),B("ngModel",r.newRoom.roomId),N(2),B("hidden",t.valid||t.pristine),N(3),B("ngModel",r.newRoom.membersOnly),N(4),B("ngModel",r.newRoom.nonAnonymous),N(4),B("ngModel",r.newRoom.persistentRoom),N(4),B("ngModel",r.newRoom.public),N(4),B("ngModel",r.newRoom.allowSubscription)}}function P$(n,e){if(1&n){const t=yt();I(0,"div"),se(1,D$,3,1,"div",2),Se(2,"async"),se(3,S$,3,2,"ng-container",3),se(4,E$,2,0,"span",3),Se(5,"async"),Ee(6,"hr"),I(7,"input",4),K("ngModelChange",function(i){return Re(t),Z().roomJid=i}),x(),I(8,"button",5),K("click",function(){Re(t);const i=Z();return i.joinRoom(i.roomJid)}),$(9,"Join room"),x(),I(10,"button",5),K("click",function(){Re(t);const i=Z();return i.subscribeWithMucSub(i.roomJid)}),$(11,"subscribe with MUC/Sub"),x(),I(12,"button",5),K("click",function(){Re(t);const i=Z();return i.unsubscribeFromMucSub(i.roomJid)}),$(13,"unsubscribe from MUC/Sub"),x(),I(14,"button",5),K("click",function(){return Re(t),Z().getSubscriptions()}),$(15,"get MUC/Sub subscriptions"),x(),I(16,"div"),$(17),x(),I(18,"ul"),se(19,T$,4,2,"li",2),Se(20,"keyvalue"),x(),Ee(21,"br"),I(22,"div"),$(23),x(),I(24,"ul"),se(25,x$,2,1,"li",2),x(),Ee(26,"hr"),I(27,"button",5),K("click",function(){return Re(t),Z().queryAllRooms()}),$(28,"List all rooms"),x(),se(29,I$,10,2,"div",2),Ee(30,"hr"),se(31,A$,2,0,"button",6),se(32,R$,30,7,"form",7),x()}if(2&n){const t=Z();N(1),B("ngForOf",Me(2,11,t.multiUserChatPlugin.rooms$)),N(2),B("ngIf",t.selectedRoom),N(1),B("ngIf",0===Me(5,13,t.multiUserChatPlugin.rooms$).length),N(3),B("ngModel",t.roomJid),N(10),ze("Current MUC subscriptions to room: ",t.roomJid,""),N(2),B("ngForOf",Me(20,15,t.mucSubSubscriptions)),N(4),ze("Members of room: ",t.roomJid,""),N(2),B("ngForOf",t.roomMemberList),N(4),B("ngForOf",t.allRooms),N(2),B("ngIf",null==t.newRoom),N(1),B("ngIf",null!=t.newRoom)}}function O$(n,e){1&n&&(I(0,"span"),$(1,"You need to be online."),x())}function N$(n,e){1&n&&(se(0,O$,2,0,"span",3),Se(1,"async")),2&n&&B("ngIf","online"!==Me(1,1,Z().chatService.state$))}let k$=(()=>{class n{constructor(t){this.chatService=t,this.allRooms=[],this.roomMemberList=[],this.mucSubSubscriptions=new Map,this.multiUserChatPlugin=t.getPlugin(ao),this.mucSubPlugin=t.getPlugin(iE)}joinRoom(t){return J(this,void 0,void 0,function*(){const r=(0,R.kO)(t);this.selectedRoom=yield this.multiUserChatPlugin.joinRoom(r)})}subscribeWithMucSub(t){return J(this,void 0,void 0,function*(){yield this.mucSubPlugin.subscribeRoom(t,[ro.messages])})}unsubscribeFromMucSub(t){return J(this,void 0,void 0,function*(){yield this.mucSubPlugin.unsubscribeRoom(t)})}getSubscriptions(){return J(this,void 0,void 0,function*(){this.mucSubSubscriptions=yield this.mucSubPlugin.retrieveSubscriptions()})}queryMemberList(t){return J(this,void 0,void 0,function*(){const r=new so((0,R.kO)(t),null).toString();this.roomMemberList=yield this.multiUserChatPlugin.queryMemberList(r)})}destroyRoom(t){return J(this,void 0,void 0,function*(){const r=(0,R.kO)(t);yield this.multiUserChatPlugin.destroyRoom(r),yield this.queryAllRooms()})}queryAllRooms(){return J(this,void 0,void 0,function*(){this.allRooms=yield this.multiUserChatPlugin.queryAllRooms()})}createNewRoom(){this.newRoom={roomId:"",membersOnly:!0,nonAnonymous:!1,persistentRoom:!0,public:!1,allowSubscription:!0}}cancelRoomCreation(){this.newRoom=null}createRoomOnServer(){var t;return J(this,void 0,void 0,function*(){!(null===(t=this.newRoom)||void 0===t?void 0:t.roomId)||""===this.newRoom.roomId||(yield this.multiUserChatPlugin.createRoom(this.newRoom),this.newRoom=void 0)})}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["app-multi-user-chat"]],decls:8,vars:4,consts:[[4,"ngIf","ngIfElse"],["offline",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","text","placeholder","room",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[3,"click",4,"ngIf"],[3,"submit",4,"ngIf"],[3,"recipient"],[3,"submit"],[1,"form-group"],["name","roomId","type","text","placeholder","Room id","required","required",1,"form-control",3,"ngModel","ngModelChange"],["roomId","ngModel"],[1,"alert","alert-danger",3,"hidden"],["name","membersOnly","type","checkbox",3,"ngModel","ngModelChange"],["name","nonAnonymous","type","checkbox",3,"ngModel","ngModelChange"],["name","persistentRoom","type","checkbox",3,"ngModel","ngModelChange"],["name","public","type","checkbox",3,"ngModel","ngModelChange"],["name","allowSubscription","type","checkbox",3,"ngModel","ngModelChange"],["type","submit"]],template:function(t,r){if(1&t&&(I(0,"div")(1,"h2"),$(2,"Chat rooms:"),x(),se(3,P$,33,17,"div",0),Se(4,"async"),Ee(5,"hr"),se(6,N$,2,3,"ng-template",null,1,Ih),x()),2&t){const i=Pc(7);N(3),B("ngIf","online"===Me(4,2,r.chatService.state$))("ngIfElse",i)}},directives:[hr,Ls,Ha,cu,ei,Vs,Ti,pw,Zb,wl,Dl,bf],pipes:[Zr,hf],styles:["ngx-chat-message-input[_ngcontent-%COMP%]{display:block;border:1px solid #dadada;width:100%;padding:.5em}"]}),n})();function F$(n,e){if(1&n&&(I(0,"div")(1,"p"),$(2),x()()),2&n){const t=Z();N(2),ft(t.registrationMessage)}}function L$(n,e){if(1&n&&(bt(0),Ee(1,"ngx-chat-message-list",17),Se(2,"async"),Ee(3,"ngx-chat-message-input",18),Se(4,"async"),wt()),2&n){const t=Z();N(1),B("recipient",Me(2,3,t.chatService.contactsSubscribed$)[0])("showAvatars",!0),N(2),B("recipient",Me(4,5,t.chatService.contactsSubscribed$)[0])}}function V$(n,e){1&n&&$(0,"You need to be logged in and have contacts to see this component")}let j$=(()=>{class n{constructor(t,r,i,s,o){this.chatService=t,this.contactFactory=r,this.logService=i,this.chatListStateService=s;const a=JSON.parse(localStorage.getItem("data"))||{};this.logService.logLevel=Vr.Debug,this.domain=a.domain,this.service=a.service,this.password=a.password,this.username=a.username,this.chatService.state$.subscribe(c=>this.stateChanged(c)),this.multiUserChatPlugin=this.chatService.getPlugin(ao),this.unreadMessageCountPlugin=this.chatService.getPlugin(ag),o.enable(),window.chatService=t}onLogin(){const t={domain:this.domain,service:this.service,password:this.password,username:this.username};localStorage.setItem("data",JSON.stringify(t)),this.chatService.logIn(t)}onLogout(){this.chatService.logOut()}onRegister(){return J(this,void 0,void 0,function*(){this.registrationMessage="registering ...";try{yield this.chatService.getPlugin(ME).register(this.username,this.password,this.service,this.domain),this.registrationMessage="registration successful"}catch(t){throw this.registrationMessage="registration failed: "+t.toString(),t}})}onAddContact(){this.chatService.addContact(this.otherJid)}onRemoveContact(){this.chatService.removeContact(this.otherJid)}onOpenChat(){this.chatListStateService.openChat(this.chatService.getOrCreateContactById(this.otherJid))}stateChanged(t){return J(this,void 0,void 0,function*(){console.log("state changed!",t)})}onReconnect(){this.chatService.reconnect()}}return n.\u0275fac=function(t){return new(t||n)(V(hn),V(Ua),V(co),V(lo),V(TE))},n.\u0275cmp=rt({type:n,selectors:[["app-index"]],decls:80,vars:25,consts:[[1,"container"],[1,"form-group"],["name","domain","type","text","placeholder","jabber.example.com",1,"form-control",3,"ngModel","ngModelChange"],["name","service","type","text","placeholder","wss://jabber.example.com:5280/websocket",1,"form-control",3,"ngModel","ngModelChange"],["name","username","type","text","placeholder","test",1,"form-control",3,"ngModel","ngModelChange"],["name","password","type","password","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["name","login",3,"click"],["name","logout",3,"click"],["name","register",3,"click"],["name","reconnect",3,"click"],[4,"ngIf"],["type","text","placeholder","JID",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngIf","ngIfElse"],["messagesComponentInformation",""],["routerLink","/ui"],["rosterState","shown"],[3,"recipient","showAvatars"],[3,"recipient"]],template:function(t,r){if(1&t&&(I(0,"div",0)(1,"div",1)(2,"div"),$(3," XMPP domain "),I(4,"small"),$(5,"(e.g. jabber.example.com)"),x()(),I(6,"div")(7,"input",2),K("ngModelChange",function(s){return r.domain=s}),x()()(),I(8,"div",1)(9,"div"),$(10," Host Websocket endpoint "),I(11,"small"),$(12,"(e.g. wss://jabber.example.com:5280/websocket)"),x()(),I(13,"div")(14,"input",3),K("ngModelChange",function(s){return r.service=s}),x()()(),I(15,"div",1)(16,"div"),$(17," Username "),I(18,"small"),$(19,"(e.g. test if test@jabber.example.com is your full JID)"),x()(),I(20,"div")(21,"input",4),K("ngModelChange",function(s){return r.username=s}),x()()(),I(22,"div",1)(23,"div"),$(24," Password "),x(),I(25,"div")(26,"input",5),K("ngModelChange",function(s){return r.password=s}),x()()(),I(27,"div")(28,"button",6),K("click",function(){return r.onLogin()}),$(29,"Log in"),x(),I(30,"button",7),K("click",function(){return r.onLogout()}),$(31,"Log out"),x(),I(32,"button",8),K("click",function(){return r.onRegister()}),$(33,"Register"),x(),I(34,"button",9),K("click",function(){return r.onReconnect()}),$(35,"Reconnect"),x()(),I(36,"div"),$(37),Se(38,"async"),x(),se(39,F$,3,1,"div",10),Ee(40,"hr"),I(41,"div",1)(42,"div"),$(43," Contact Management "),x(),I(44,"div")(45,"input",11),K("ngModelChange",function(s){return r.otherJid=s}),x()()(),I(46,"button",12),K("click",function(){return r.onAddContact()}),$(47,"Add contact"),x(),I(48,"button",12),K("click",function(){return r.onRemoveContact()}),$(49,"Remove contact"),x(),I(50,"button",12),K("click",function(){return r.onOpenChat()}),$(51,"Open chat"),x(),Ee(52,"hr"),I(53,"button",12),K("click",function(){return r.chatService.enableDebugging=!r.chatService.enableDebugging}),$(54,"Enable debugging"),x(),I(55,"div")(56,"h2"),$(57,"Custom component for a chat session"),x(),se(58,L$,5,7,"ng-container",13),Se(59,"async"),Se(60,"async"),se(61,V$,1,0,"ng-template",null,14,Ih),x(),Ee(63,"hr")(64,"app-iq")(65,"app-send-stanza")(66,"app-multi-user-chat"),I(67,"div")(68,"h2"),$(69,"Unread messages count:"),x(),$(70),Se(71,"async"),I(72,"pre"),$(73),Se(74,"json"),Se(75,"keyvalue"),Se(76,"async"),x()(),I(77,"a",15),$(78,"Show mock chats"),x()(),Ee(79,"ngx-chat",16)),2&t){const i=Pc(62);N(7),B("ngModel",r.domain),N(7),B("ngModel",r.service),N(7),B("ngModel",r.username),N(5),B("ngModel",r.password),N(11),ze("State: ",Me(38,11,r.chatService.state$),""),N(2),B("ngIf",r.registrationMessage),N(6),B("ngModel",r.otherJid),N(13),B("ngIf","online"===Me(59,13,r.chatService.state$)&&Me(60,15,r.chatService.contactsSubscribed$).length>0)("ngIfElse",i),N(12),ze(" Sum unread messages: ",Me(71,17,r.unreadMessageCountPlugin.unreadMessageCountSum$)," "),N(3),ft(Me(74,19,Me(75,21,Me(76,23,r.unreadMessageCountPlugin.jidToUnreadCount$))))}},directives:[ei,Vs,Ti,hr,Ha,cu,b$,w$,k$,Fa,h$],pipes:[Zr,lb,hf],styles:[""]}),n})(),B$=(()=>{class n{constructor(){this.Direction=ke,this.MessageState=Qt,this.dummyAvatarContact=Kp,this.myJid=(0,R.kO)("me@example.com"),this.otherContactJid=(0,R.kO)("other@example.com")}ngOnInit(){this.contact=new $a(this.otherContactJid.toString(),"chat partner name"),this.room=new so(this.myJid,null),this.add({body:"This is an incoming example message",datetime:new Date("2019-12-22T14:00:00"),direction:ke.in}),this.add({body:"This is an incoming example message on another day",datetime:new Date("2019-12-24T14:00:00"),direction:ke.in}),this.add({body:"This is an incoming example message with a really long link https://forum.golem.de/kommentare/wissenschaft/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/oneweb-ist-doch-bald-pleite/137396,5739317,5739317,read.html#msg-5739317 which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:ke.in}),this.add({body:"This is an incoming example message with a really long link https://forum.golem.de/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/ which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:ke.in}),this.add({body:"This is an outgoing example message with a really long link https://forum.golem.de/kommentare/wissenschaft/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/oneweb-ist-doch-bald-pleite/137396,5739317,5739317,read.html#msg-5739317 which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:ke.out}),this.add({body:"This is an outgoing example message with a really long link https://forum.golem.de/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/ which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:ke.out}),this.add({body:"This is an outgoing example message",datetime:new Date("2019-12-24T14:05:01"),direction:ke.out}),this.add({body:"123",datetime:new Date("2019-12-24T14:05:01"),direction:ke.out}),this.add({body:"This is an outgoing message with a link to an image https://dummyimage.com/600x400/000/fff and some text after the link",datetime:new Date("2019-12-24T14:05:01"),direction:ke.out}),this.add({body:"This is an incoming message with a link to an image https://dummyimage.com/600x400/000/fff and some text after the link",datetime:new Date("2019-12-24T14:05:01"),direction:ke.in}),this.add({body:"Really tall image https://dummyimage.com/600x4000/000/fff",datetime:new Date("2019-12-24T14:05:01"),direction:ke.in}),this.add({body:"Really wide image https://dummyimage.com/6000x400/000/fff",datetime:new Date("2019-12-24T14:05:01"),direction:ke.in}),this.add({body:"Rinderkennzeichnungs- und Rindfleischetikettierungs\xfcberwachungsaufgaben\xfcbertragungsgesetz",datetime:new Date("2019-12-24T14:05:01"),direction:ke.in})}add(t){this.contact.addMessage(Object.assign(Object.assign({},t),{delayed:!1,fromArchive:!1,id:null})),this.room.addMessage(Object.assign(Object.assign({},t),{delayed:!1,fromArchive:!1,from:t.direction===ke.in?this.otherContactJid:this.myJid}))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["app-ui"]],decls:34,vars:21,consts:[[1,"container"],["routerLink","/"],[1,"example"],[1,"chat-message-list-wrapper"],[3,"recipient","showAvatars"],[1,"chat-message-list-wrapper","simple-message-list"],["formattedDate","2020-06-04 18:35","nick","chat partner",1,"chat-message--out",3,"avatar","direction","messageState"],["formattedDate","2020-06-04 18:36","nick","chat partner",1,"chat-message--out",3,"avatar","direction","messageState"],["formattedDate","2020-06-04 18:37","imageLink","https://dummyimage.com/600x400/000/fff","nick","chat partner",1,"chat-message--out",3,"direction"],[3,"recipient"]],template:function(t,r){1&t&&(I(0,"div",0)(1,"a",1),$(2,"Back to ngx-chat sample component"),x(),I(3,"div",2)(4,"p"),$(5,"Default theme (avatars)"),x(),I(6,"div",3),Ee(7,"ngx-chat-message-list",4),x()(),I(8,"div",2)(9,"p"),$(10,"Default theme (no avatars)"),x(),I(11,"div",3),Ee(12,"ngx-chat-message-list",4),x()(),I(13,"div",2)(14,"p"),$(15,"Simple chat message component used directly"),x(),I(16,"div",5)(17,"ngx-chat-message-simple",6),$(18," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),x(),I(19,"ngx-chat-message-simple",6),$(20," sending "),x(),I(21,"ngx-chat-message-simple",6),$(22," sent "),x(),I(23,"ngx-chat-message-simple",6),$(24," recipient received "),x(),I(25,"ngx-chat-message-simple",7),$(26," recipient seen "),x(),I(27,"ngx-chat-message-simple",8),$(28," content goes here "),x()()(),I(29,"div",2)(30,"p"),$(31,"Mock for multi user chat room"),x(),I(32,"div",3),Ee(33,"ngx-chat-message-list",9),x()()()),2&t&&(N(7),B("recipient",r.contact)("showAvatars",!0),N(5),B("recipient",r.contact)("showAvatars",!1),N(5),B("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.SENDING),N(2),B("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.SENDING),N(2),B("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.SENT),N(2),B("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.RECIPIENT_RECEIVED),N(2),B("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.RECIPIENT_SEEN),N(2),B("direction",r.Direction.out),N(6),B("recipient",r.room))},directives:[Fa,Ha,ig],styles:[".chat-message-list-wrapper[_ngcontent-%COMP%]{border:1px solid #e3e3e3}.example[_ngcontent-%COMP%]{margin-bottom:2em}.simple-message-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple[_ngcontent-%COMP%]{max-width:76%}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple.chat-message--in[_ngcontent-%COMP%]{align-self:flex-start}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple.chat-message--out[_ngcontent-%COMP%]{align-self:flex-end}"]}),n})(),$$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({imports:[[KS.forRoot([{path:"",component:j$},{path:"ui",component:B$},{path:"**",redirectTo:"/"}],{relativeLinkResolution:"legacy"})],KS]}),n})(),U$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&Ee(0,"router-outlet")},directives:[$p],styles:[""]}),n})(),H$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n,bootstrap:[U$]}),n.\u0275inj=Bt({providers:[],imports:[[Eb,cL,C$.forRoot(),Nw,$$]]}),n})();(function JR(){OC=!1})(),nN().bootstrapModule(H$).catch(n=>console.log(n))},512:w=>{"use strict";w.exports.encode=function(g){return global.btoa(g)},w.exports.decode=function(g){return global.atob(g)}},4924:(w,T,g)=>{"use strict";const v=g(3619),D=g(6320),C=g(3639);w.exports.Client=v,w.exports.xml=D,w.exports.jid=C},3619:(w,T,g)=>{"use strict";const v=g(1574);class D extends v{constructor(p){super(p),this.transports=[]}send(p,...m){return this.Transport.prototype.send.call(this,p,...m)}_findTransport(p){return this.transports.find(m=>{try{return void 0!==m.prototype.socketParameters(p)}catch(E){return!1}})}connect(p){const m=this._findTransport(p);if(!m)throw new Error("No compatible connection method found.");return this.Transport=m,this.Socket=m.prototype.Socket,this.Parser=m.prototype.Parser,super.connect(p)}socketParameters(...p){return this.Transport.prototype.socketParameters(...p)}header(...p){return this.Transport.prototype.header(...p)}headerElement(...p){return this.Transport.prototype.headerElement(...p)}footer(...p){return this.Transport.prototype.footer(...p)}footerElement(...p){return this.Transport.prototype.footerElement(...p)}}D.prototype.NS="jabber:client",w.exports=D},9225:(w,T,g)=>{"use strict";const{xml:v,jid:D,Client:C}=g(4924),p=g(3067),m=g(3595),E=g(1656),L=g(6405),k=g(2454),P=g(9824),M=g(524),S=g(9862),_=g(3635),b=g(874),F=g(1875),Q=g(7049),ge=g(5080);w.exports.Ls=v,w.exports.kO=D,w.exports.Lp=function le(Qe={}){const qi=Qe,{resource:z,credentials:H,username:G,password:W}=qi,ue=OE(qi,["resource","credentials","username","password"]),{domain:Be,service:oe}=ue;!Be&&oe&&(ue.domain=p(oe));const Xe=new C(ue),$e=m({entity:Xe}),ie=E({entity:Xe}),Ft=L({entity:Xe}),Jt=k({middleware:Ft}),pe=P({middleware:Ft,entity:Xe}),Bi=M({middleware:Ft,entity:Xe}),$i=S({entity:Xe}),Je=_({streamFeatures:Jt},H||{username:G,password:W}),Ui=b({iqCaller:pe,streamFeatures:Jt},z),Hi=F({iqCaller:pe,streamFeatures:Jt}),vr=Object.entries({plain:ge,anonymous:Q}).map(([po,go])=>({[po]:go(Je)}));return Object.assign(Xe,{entity:Xe,reconnect:$e,websocket:ie,middleware:Ft,streamFeatures:Jt,iqCaller:pe,iqCallee:Bi,resolve:$i,sasl:Je,resourceBinding:Ui,sessionEstablishment:Hi,mechanisms:vr})}},3067:w=>{"use strict";w.exports=function(g){return(g.split("://")[1]||g).split(":")[0].split("/")[0]}},1574:(w,T,g)=>{"use strict";var v=g(8926).default;const{EventEmitter:D,promise:C}=g(6160),p=g(3639),m=g(6320),E=g(4867),{parseHost:L,parseService:k}=g(3672);class M extends D{constructor(_={}){super(),this.jid=null,this.timeout=2e3,this.options=_,this.socketListeners=Object.create(null),this.parserListeners=Object.create(null),this.status="offline",this.socket=null,this.parser=null,this.root=null}_reset(){this.jid=null,this.status="offline",this._detachSocket(),this._detachParser()}_streamError(_,b){var F=this;return v(function*(){try{yield F.send(m("stream:error",{},[m(_,{xmlns:"urn:ietf:params:xml:ns:xmpp-streams"},b)]))}catch(Q){}return F._end()})()}_onData(_){const b=_.toString("utf8");this.emit("input",b),this.parser.write(b)}_onParserError(_){this._streamError("bad-format"),this._detachParser(),this.emit("error",_)}_attachSocket(_){const b=this.socket=_,F=this.socketListeners;F.data=this._onData.bind(this),F.close=(Q,ge)=>{this._reset(),this._status("disconnect",{clean:!Q,event:ge})},F.connect=()=>{this._status("connect")},F.error=Q=>{this.emit("error",Q)},b.on("close",F.close),b.on("data",F.data),b.on("error",F.error),b.on("connect",F.connect)}_detachSocket(){const{socketListeners:_,socket:b}=this;return Object.getOwnPropertyNames(_).forEach(F=>{b.removeListener(F,_[F]),delete _[F]}),this.socket=null,b}_onElement(_){this.emit("element",_),this.emit(this.isStanza(_)?"stanza":"nonza",_),"stream:error"===_.name&&this._onStreamError(_)}_onStreamError(_){const b=E.fromElement(_);"see-other-host"===b.condition?this._onSeeOtherHost(b):this.emit("error",b),this._end()}_onSeeOtherHost(_){var b=this;return v(function*(){const{protocol:F}=k(b.options.service),Q=_.element.getChildText("see-other-host"),{port:ge}=L(Q);let le;le=ge?`${F||"xmpp:"}//${Q}`:(F?`${F}//`:"")+Q;try{yield C(b,"disconnect");const{domain:Qe,lang:z}=b.options;yield b.connect(le),yield b.open({domain:Qe,lang:z})}catch(Qe){b.emit("error",Qe)}})()}_attachParser(_){const b=this.parser=_,F=this.parserListeners;F.element=this._onElement.bind(this),F.error=this._onParserError.bind(this),F.end=Q=>{this._detachParser(),this._status("close",Q)},F.start=Q=>{this._status("open",Q)},b.on("error",F.error),b.on("element",F.element),b.on("end",F.end),b.on("start",F.start)}_detachParser(){const _=this.parserListeners;Object.getOwnPropertyNames(_).forEach(b=>{this.parser.removeListener(b,_[b]),delete _[b]}),this.parser=null}_jid(_){return this.jid=p(_),this.jid}_status(_,...b){this.status=_,this.emit("status",_,...b),this.emit(_,...b)}_end(){var _=this;return v(function*(){let b;try{b=yield _.close()}catch(F){}try{yield _.disconnect()}catch(F){}return b})()}start(){var _=this;return v(function*(){if("offline"!==_.status)throw new Error("Connection is not offline");const{service:b,domain:F,lang:Q}=_.options;yield _.connect(b);const ge=C(_,"online");return yield _.open({domain:F,lang:Q}),ge})()}connect(_){var b=this;return v(function*(){b._status("connecting",_);const F=new b.Socket;return b._attachSocket(F),F.connect(b.socketParameters(_)),C(F,"connect")})()}disconnect(_=this.timeout){var b=this;return v(function*(){b.socket&&b._status("disconnecting"),b.socket.end(),yield C(b.socket,"close","error",_)})()}open(_){var b=this;return v(function*(){b._status("opening"),"string"==typeof _&&(_={domain:_});const{domain:F,lang:Q,timeout:ge=b.timeout}=_,le=b.headerElement();return le.attrs.to=F,le.attrs["xml:lang"]=Q,b.root=le,b._attachParser(new b.Parser),yield b.write(b.header(le)),C(b,"open","error",ge)})()}stop(){var _=this;return v(function*(){const b=yield _._end();return"offline"!==_.status&&_._status("offline",b),b})()}close(_=this.timeout){var b=this;return v(function*(){const F=Promise.all([C(b.parser,"end","error",_),b.write(b.footer(b.footerElement()))]);b.parser&&b.socket&&b._status("closing");const[Q]=yield F;return b.root=null,Q})()}restart(){var _=this;return v(function*(){_._detachParser();const{domain:b,lang:F}=_.options;return _.open({domain:b,lang:F})})()}send(_){var b=this;return v(function*(){_.parent=b.root,b.emit("outgoing",_),yield b.write(_),b.emit("send",_)})()}sendReceive(_,b=this.timeout){return Promise.all([this.send(_),C(this,"element","error",b)]).then(([,F])=>F)}write(_){return new Promise((b,F)=>{if("closing"===this.status)return void F(new Error("Connection is closing"));const Q=_.toString("utf8");this.socket.write(Q,ge=>{if(ge)return F(ge);this.emit("output",Q),b()})})}isStanza(_){const{name:b}=_;return"iq"===b||"message"===b||"presence"===b}isNonza(_){return!this.isStanza(_)}header(_){return _.toString()}headerElement(){return new m.Element("",{version:"1.0",xmlns:this.NS})}footer(_){return _.toString()}footerElement(){}socketParameters(){}}M.prototype.NS="",M.prototype.Socket=null,M.prototype.Parser=null,w.exports=M},4867:(w,T,g)=>{"use strict";const v=g(8007);w.exports=class D extends v{constructor(...p){super(...p),this.name="StreamError"}}},3672:w=>{"use strict";function T(D){let{port:C,hostname:p,protocol:m}=new URL(D);return"[::1]"===p&&(p="::1"),{port:C,hostname:p,protocol:m}}function g(D){const{port:C,hostname:p}=T(`http://${D}`);return{port:C,hostname:p}}Object.assign(w.exports,{parseURI:T,parseHost:g,parseService:function v(D){return D.includes("://")?T(D):g(D)}})},8007:w=>{"use strict";class T extends Error{constructor(v,D,C){super(v+(D?` - ${D}`:"")),this.name="XMPPError",this.condition=v,this.text=D,this.application=C}static fromElement(v){const[D,C,p]=v.children;let m,E;C&&(C.is("text")?m=C:C&&(E=C),p&&(E=p));const L=new this(D.name,m?m.text():"",E);return L.element=v,L}}w.exports=T},6160:(w,T,g)=>{"use strict";const v=g(4240),D=g(9320),C=g(4441),p=g(5305),m=g(9069),E=g(2458);T.EventEmitter=m,T.timeout=v,T.delay=D,T.TimeoutError=C,T.promise=p,T.Deferred=E},2458:w=>{"use strict";w.exports=function(){this.promise=new Promise((g,v)=>{this.resolve=g,this.reject=v})}},4441:w=>{"use strict";w.exports=class extends Error{constructor(g){super(g),this.name="TimeoutError"}}},9320:w=>{"use strict";w.exports=function(g){let v;const D=new Promise(C=>{v=setTimeout(C,g)});return D.timeout=v,D}},5305:(w,T,g)=>{"use strict";const v=g(4441);w.exports=function(C,p,m="error",E){return new Promise((L,k)=>{let P;const M=()=>{clearTimeout(P),C.removeListener(p,_),C.removeListener(m,S)};function S(b){k(b),M()}function _(b){L(b),M()}C.once(p,_),m&&C.once(m,S),E&&(P=setTimeout(()=>{M(),k(new v)},E))})}},4240:(w,T,g)=>{"use strict";const v=g(4441),D=g(9320);w.exports=function(p,m){const E=D(m);return Promise.race([p.finally(function L(){clearTimeout(E.timeout)}),E.then(()=>{throw new v})])}},8284:w=>{"use strict";w.exports=function(){let g;for(;!g;)g=Math.random().toString(36).slice(2,12);return g}},524:(w,T,g)=>{"use strict";var v=g(8926).default;const D=g(6320);function E({stanza:_}){return D("iq",{to:_.attrs.from,from:_.attrs.to,id:_.attrs.id})}function k(_,b,F){const Q=E(_);return Q.attrs.type="error",F&&Q.append(F),Q.append(b),Q}function P(_,b){return D("error",{type:_},D(b,"urn:ietf:params:xml:ns:xmpp-stanzas"))}function S(_,b,F,Q){return function(ge,le){return ge.type!==_|!ge.element||!ge.element.is(F,b)?le():Q(ge,le)}}w.exports=function({middleware:_,entity:b}){return _.use(function M(_){return function(){var b=v(function*(Q,ge){if(!function p({name:_,type:b}){return!("iq"!==_||"error"===b||"result"===b)}(Q))return ge();const{stanza:le}=Q,Qe=le.getChildElements(),[z]=Qe;if(!function m({type:_},b,F){return!("get"!==_&&"set"!==_||1!==b.length||!F)}(Q,Qe,z))return k(Q,P("modify","bad-request"),z);let H;Q.element=z;try{H=yield ge()}catch(G){_.emit("error",G),H=P("cancel","internal-server-error")}return H||(H=P("cancel","service-unavailable")),H instanceof D.Element&&H.is("error")?k(Q,H,z):function L(_,b){const F=E(_);return F.attrs.type="result",b&&F.append(b),F}(Q,H instanceof D.Element?H:void 0)});return function F(Q,ge){return b.apply(this,arguments)}}()}(b)),{get(F,Q,ge){_.use(S("get",F,Q,ge))},set(F,Q,ge){_.use(S("set",F,Q,ge))}}}},9824:(w,T,g)=>{"use strict";var v=g(8926).default;const D=g(8284),C=g(9839),{Deferred:p}=g(6160),m=g(6160).timeout,E=g(6320);class k{constructor({entity:M,middleware:S}){this.handlers=new Map,this.entity=M,this.middleware=S}start(){this.middleware.use(this._route.bind(this))}_route({type:M,name:S,id:_,stanza:b},F){if(!function L({name:P,type:M}){return!("iq"!==P||"error"!==M&&"result"!==M)}({name:S,type:M}))return F();const Q=this.handlers.get(_);if(!Q)return F();"error"===M?Q.reject(C.fromElement(b.getChild("error"))):Q.resolve(b),this.handlers.delete(_)}request(M,S=3e4){var _=this;return v(function*(){M.attrs.id||(M.attrs.id=D());const b=new p;_.handlers.set(M.attrs.id,b);try{yield _.entity.send(M),yield m(b.promise,S)}catch(F){throw _.handlers.delete(M.attrs.id),F}return b.promise})()}_childRequest(M,S,_,...b){const{name:F}=S,{xmlns:Q}=S.attrs;return this.request(E("iq",{type:M,to:_},S),...b).then(ge=>ge.getChild(F,Q))}get(...M){var S=this;return v(function*(){return S._childRequest("get",...M)})()}set(...M){var S=this;return v(function*(){return S._childRequest("set",...M)})()}}w.exports=function(...M){const S=new k(...M);return S.start(),S}},3639:(w,T,g)=>{"use strict";const v=g(1867),D=g(1857),C=g(1817);function p(...m){return m[1]||m[2]?new v(...m):C(...m)}(T=w.exports=p.bind()).jid=p,T.JID=v,T.equal=function(m,E){return m.equals(E)},T.detectEscape=D.detect,T.escapeLocal=D.escape,T.unescapeLocal=D.unescape,T.parse=C},1867:(w,T,g)=>{"use strict";const v=g(1857);class D{constructor(p,m,E){if("string"!=typeof m||!m)throw new TypeError("Invalid domain.");this.setDomain(m),this.setLocal("string"==typeof p?p:""),this.setResource("string"==typeof E?E:"")}[Symbol.toPrimitive](p){return"number"===p?NaN:this.toString()}toString(p){let m=this._domain;return this._local&&(m=this.getLocal(p)+"@"+m),this._resource&&(m=m+"/"+this._resource),m}bare(){return this._resource?new D(this._local,this._domain,null):this}equals(p){return this._local===p._local&&this._domain===p._domain&&this._resource===p._resource}setLocal(p,m){return(m=m||v.detect(p))&&(p=v.escape(p)),this._local=p&&p.toLowerCase(),this}getLocal(p){let m=null;return m=(p=p||!1)?v.unescape(this._local):this._local,m}setDomain(p){return this._domain=p.toLowerCase(),this}getDomain(){return this._domain}setResource(p){return this._resource=p,this}getResource(){return this._resource}}Object.defineProperty(D.prototype,"local",{get:D.prototype.getLocal,set:D.prototype.setLocal}),Object.defineProperty(D.prototype,"domain",{get:D.prototype.getDomain,set:D.prototype.setDomain}),Object.defineProperty(D.prototype,"resource",{get:D.prototype.getResource,set:D.prototype.setResource}),w.exports=D},1857:w=>{"use strict";w.exports.detect=function(T){return!(!T||-1===T.replace(/\\20/g,"").replace(/\\22/g,"").replace(/\\26/g,"").replace(/\\27/g,"").replace(/\\2f/g,"").replace(/\\3a/g,"").replace(/\\3c/g,"").replace(/\\3e/g,"").replace(/\\40/g,"").replace(/\\5c/g,"").search(/\\| |"|&|'|\/|:|<|>|@/g))},w.exports.escape=function(T){return null===T?null:T.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/"/g,"\\22").replace(/&/g,"\\26").replace(/'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40").replace(/\3a/g,"\x05c3a")},w.exports.unescape=function(T){return null===T?null:T.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")}},1817:(w,T,g)=>{"use strict";const v=g(1867);w.exports=function(C){let p,m;const E=C.indexOf("/");-1!==E&&(m=C.slice(E+1),C=C.slice(0,E));const L=C.indexOf("@");return-1!==L&&(p=C.slice(0,L),C=C.slice(L+1)),new v(p,C,m)}},6405:(w,T,g)=>{"use strict";const v=g(4775),D=g(7702),C=g(3299);function p(E,L,k){return function(P){const M=new k(E,P);return v(L)(M)}}function m(E){return function(L,k){k().then(P=>P&&E.send(P)).catch(P=>E.emit("error",P))}}w.exports=function({entity:E}){const L=[m(E)],k=[],P=p(E,L,D),M=p(E,k,C);return E.on("element",P),E.hookOutgoing=M,{use:S=>(L.push(S),S),filter:S=>(k.push(S),S)}}},4111:w=>{"use strict";w.exports=class{constructor(g,v){this.stanza=v,this.entity=g;const{name:D,attrs:C}=v,{type:p,id:m}=C;this.name=D,this.id=m||"",this.type="message"===D?p||"normal":"presence"===D?p||"available":p||"",this.from=null,this.to=null,this.local="",this.domain="",this.resource=""}}},7702:(w,T,g)=>{"use strict";const v=g(4111),D=g(3639);w.exports=class extends v{constructor(p,m){super(p,m);const{jid:E,domain:L}=p,k=m.attrs.to||E&&E.toString(),P=m.attrs.from||L;k&&(this.to=new D(k)),P&&(this.from=new D(P),this.local=this.from.local,this.domain=this.from.domain,this.resource=this.from.resource)}}},3299:(w,T,g)=>{"use strict";const v=g(4111),D=g(3639);w.exports=class extends v{constructor(p,m){super(p,m);const{jid:E,domain:L}=p,k=m.attrs.from||E&&E.toString(),P=m.attrs.to||L;k&&(this.from=new D(k)),P&&(this.to=new D(P),this.local=this.to.local,this.domain=this.to.domain,this.resource=this.to.resource)}}},9839:(w,T,g)=>{"use strict";const v=g(8007);w.exports=class D extends v{constructor(p,m,E,L){super(p,m,E),this.type=L,this.name="StanzaError"}static fromElement(p){const m=super.fromElement(p);return m.type=p.attrs.type,m}}},3595:(w,T,g)=>{"use strict";var v=g(8926).default;const{EventEmitter:D}=g(6160);class C extends D{constructor(m){super(),this.delay=1e3,this.entity=m,this._timeout=null}scheduleReconnect(){var m=this;const{entity:E,delay:L,_timeout:k}=this;clearTimeout(k),this._timeout=setTimeout(v(function*(){if("disconnect"===E.status)try{yield m.reconnect()}catch(P){}}),L)}reconnect(){var m=this;return v(function*(){const{entity:E}=m;m.emit("reconnecting");const{service:L,domain:k,lang:P}=E.options;yield E.connect(L),yield E.open({domain:k,lang:P}),m.emit("reconnected")})()}start(){const{entity:m}=this,E={};E.disconnect=()=>{this.scheduleReconnect()},this.listeners=E,m.on("disconnect",E.disconnect)}stop(){const{entity:m,listeners:E,_timeout:L}=this;m.removeListener("disconnect",E.disconnect),clearTimeout(L)}}w.exports=function({entity:m}){const E=new C(m);return E.start(),E}},9862:(w,T,g)=>{"use strict";var v=g(8926).default;const D=g(9012),{promise:C}=g(6160);function m(){return(m=v(function*(P){return[...new Set((yield D(P,{srv:[{service:"xmpps-client",protocol:"tcp"},{service:"xmpp-client",protocol:"tcp"}]})).map(M=>M.uri))]})).apply(this,arguments)}function L(P,M){return k.apply(this,arguments)}function k(){return(k=v(function*(P,M){if(0===M.length)throw new Error("Couldn't connect");const S=M.shift(),_=P._findTransport(S);if(!_)return L(P,M);P._status("connecting",S);const b=_.prototype.socketParameters(S),F=new _.prototype.Socket;try{F.connect(b),yield C(F,"connect")}catch(Q){return L(P,M)}P._attachSocket(F),F.emit("connect"),P.Transport=_,P.Socket=_.prototype.Socket,P.Parser=_.prototype.Parser})).apply(this,arguments)}w.exports=function({entity:P}){const M=P.connect;P.connect=function(){var S=v(function*(b){if(!b||b.match(/:\/\//))return M.call(this,b);const F=function E(P,M){return M.filter(S=>P._findTransport(S))}(P,yield function p(P){return m.apply(this,arguments)}(b));if(0===F.length)throw new Error("No compatible transport found.");try{yield L(P,F)}catch(Q){throw P._reset(),P._status("disconnect"),Q}});return function _(b){return S.apply(this,arguments)}}()}},8394:w=>{"use strict";function T(g){return g.startsWith("https")||g.startsWith("wss")}w.exports.q=function(v,D){let C,p;return C=T(v.uri)&&!T(D.uri)?-1:!T(v.uri)&&T(D.uri)?1:0,0!==C?C:(p=v.method===D.method?0:"websocket"===v.method?-1:"websocket"===D.method?1:"xbosh"===v.method?-1:"xbosh"===D.method?1:"httppoll"===v.method?-1:"httppoll"===D.method?1:0,0!==p?p:0)}},2830:(w,T,g)=>{"use strict";const v=global.fetch||g(2754),D=g(2371),C=g(8394).q;w.exports.resolve=function p(m){return v(`https://${m}/.well-known/host-meta`).then(E=>E.text()).then(E=>D(E).getChildren("Link").filter(L=>["urn:xmpp:alt-connections:websocket","urn:xmpp:alt-connections:httppoll","urn:xmpp:alt-connections:xbosh"].includes(L.attrs.rel)).map(({attrs:L})=>({rel:L.rel,href:L.href,method:L.rel.split(":").pop(),uri:L.href})).sort(C)).catch(()=>[])}},9012:(w,T,g)=>{"use strict";const v=g(6739),D=g(2830);w.exports=function(...p){return Promise.all([v.resolve?v.resolve(...p):Promise.resolve([]),D.resolve(...p)]).then(([m,E])=>m.concat(E))},v.resolve&&(w.exports.dns=v),w.exports.http=D},874:(w,T,g)=>{"use strict";var v=g(8926).default;const D=g(6320),C="urn:ietf:params:xml:ns:xmpp-bind";function p(k){return D("bind",{xmlns:C},k&&D("resource",{},k))}function m(k,P,M){return E.apply(this,arguments)}function E(){return(E=v(function*(k,P,M){const _=(yield P.set(p(M))).getChildText("jid");return k._jid(_),_})).apply(this,arguments)}w.exports=function({streamFeatures:k,iqCaller:P},M){k.use("bind",C,function L({iqCaller:k},P){return function(){var M=v(function*({entity:S},_){"function"==typeof P?yield P(b=>m(S,k,b)):yield m(S,k,P),_()});return function(S,_){return M.apply(this,arguments)}}()}({iqCaller:P},M))}},7049:(w,T,g)=>{"use strict";const v=g(4959);w.exports=function(C){C.use(v)}},5080:(w,T,g)=>{"use strict";const v=g(6758);w.exports=function(C){C.use(v)}},3635:(w,T,g)=>{"use strict";var v=g(8926).default;const{encode:D,decode:C}=g(512),p=g(9175),m=g(6320),E=g(4218),L="urn:ietf:params:xml:ns:xmpp-sasl";function P(S,_,b,F){return M.apply(this,arguments)}function M(){return(M=v(function*(S,_,b,F){const Q=S.create([b]);if(!Q)throw new Error("No compatible mechanism");const{domain:ge}=_.options,le=PE({username:null,password:null,server:ge,host:ge,realm:ge,serviceType:"xmpp",serviceName:ge},F);return new Promise((Qe,z)=>{const H=G=>{if(G.attrs.xmlns===L){if("challenge"===G.name){Q.challenge(C(G.text()));const W=Q.response(le);return void _.send(m("response",{xmlns:L,mechanism:Q.name},"string"==typeof W?D(W):""))}"failure"===G.name?z(p.fromElement(G)):"success"===G.name&&Qe(),_.removeListener("nonza",H)}};_.on("nonza",H),Q.clientFirst&&_.send(m("auth",{xmlns:L,mechanism:Q.name},D(Q.response(le))))})})).apply(this,arguments)}w.exports=function({streamFeatures:_},b){const F=new E;return _.use("mechanisms",L,function(){var Q=v(function*({stanza:ge,entity:le}){const Qe=function k(S){return S.getChild("mechanisms",L).children.map(_=>_.text())}(ge);let G=F._mechs.map(({name:W})=>W).filter(W=>Qe.includes(W))[0];"function"==typeof b?yield b(W=>P(F,le,G,W,ge),G):(!b.username&&!b.password&&(G="ANONYMOUS"),yield P(F,le,G,b,ge)),yield le.restart()});return function(ge){return Q.apply(this,arguments)}}()),{use:(...Q)=>F.use(...Q)}}},9175:(w,T,g)=>{"use strict";const v=g(8007);w.exports=class D extends v{constructor(...p){super(...p),this.name="SASLError"}}},1875:(w,T,g)=>{"use strict";var v=g(8926).default;const D=g(6320),C="urn:ietf:params:xml:ns:xmpp-session";w.exports=function({iqCaller:p,streamFeatures:m}){m.use("session",C,function(){var E=v(function*(L,k,P){return P.getChild("optional")||(yield p.set(D("session",C))),k()});return function(L,k,P){return E.apply(this,arguments)}}())}},2454:(w,T,g)=>{"use strict";const v=g(1310);w.exports=function({middleware:D}){return D.use(v()),{use:function C(p,m,E){return D.use((L,k)=>{const{stanza:P}=L;if(!P.is("features","http://etherx.jabber.org/streams"))return k();const M=P.getChild(p,m);return M?E(L,k,M):k()})}}}},1310:(w,T,g)=>{"use strict";var v=g(8926).default;w.exports=function(){return function(){var C=v(function*({stanza:p,entity:m},E){if(!p.is("features","http://etherx.jabber.org/streams"))return E();yield E(),m.jid&&m._status("online",m.jid)});return function(p,m){return C.apply(this,arguments)}}()}},1656:(w,T,g)=>{"use strict";const v=g(8672);w.exports=function({entity:C}){C.transports.push(v)}},8672:(w,T,g)=>{"use strict";const v=g(7013),D=g(1574),C=g(6320),p=g(4519),m="urn:ietf:params:xml:ns:xmpp-framing";class E extends D{send(k,...P){return!k.attrs.xmlns&&super.isStanza(k)&&(k.attrs.xmlns="jabber:client"),super.send(k,...P)}footerElement(){return new C.Element("close",{xmlns:m})}headerElement(){const k=super.headerElement();return k.name="open",k.attrs.xmlns=m,k}socketParameters(k){return k.match(/^wss?:\/\//)?k:void 0}}E.prototype.Socket=v,E.prototype.NS="jabber:client",E.prototype.Parser=p,w.exports=E},4519:(w,T,g)=>{"use strict";const{Parser:v,Element:D,XMLError:C}=g(6320);w.exports=class extends v{onStartElement(m,E){const L=new D(m,E),{cursor:k}=this;k&&k.append(L),this.cursor=L}onEndElement(m){const{cursor:E}=this;m===E.name?E.parent?this.cursor=E.parent:(E.is("open","urn:ietf:params:xml:ns:xmpp-framing")?this.emit("start",E):E.is("close","urn:ietf:params:xml:ns:xmpp-framing")?this.emit("end",E):this.emit("element",E),this.cursor=null):this.emit("error",new C(`${E.name} must be closed.`))}}},7013:(w,T,g)=>{"use strict";const v=g(2993),D=global.WebSocket||v,C=g(9069),p="ECONNERROR";w.exports=class m extends C{constructor(){super(),this.listeners=Object.create(null)}connect(L){this.url=L,this._attachSocket(new D(L,["xmpp"]))}_attachSocket(L){const k=this.socket=L,{listeners:P}=this;P.open=()=>{this.emit("connect")},P.message=({data:M})=>this.emit("data",M),P.error=M=>{let{error:S}=M;S||(S=new Error(`WebSocket ${p} ${this.url}`),S.errno=p,S.code=p),S.event=M,S.url=this.url,this.emit("error",S)},P.close=M=>{this._detachSocket(),this.emit("close",!M.wasClean,M)},k.addEventListener("open",P.open),k.addEventListener("message",P.message),k.addEventListener("error",P.error),k.addEventListener("close",P.close)}_detachSocket(){delete this.url;const{socket:L,listeners:k}=this;Object.getOwnPropertyNames(k).forEach(P=>{L.removeEventListener(P,k[P]),delete k[P]}),delete this.socket}end(){this.socket.close()}write(L,k){D===v?this.socket.send(L,k):(this.socket.send(L),k())}}},6320:(w,T,g)=>{"use strict";const v=g(6826),D=g(6229),C=g(1416),{escapeXML:p,unescapeXML:m,escapeXMLText:E,unescapeXMLText:L}=g(2104),k=g(163);T=w.exports=function P(...M){return v(...M)},Object.assign(T,{x:v,Element:D,Parser:C,escapeXML:p,unescapeXML:m,escapeXMLText:E,unescapeXMLText:L,XMLError:k})},6229:(w,T,g)=>{"use strict";const v=g(1251);w.exports=class D extends v{setAttrs(p){"string"==typeof p?this.attrs.xmlns=p:p&&Object.keys(p).forEach(function(m){if("__source"===m||"__self"===m)return;const E=p[m];null!=E&&(this.attrs[m.toString()]=E.toString())},this)}append(p){return(p=Array.isArray(p)?p:[p]).forEach(m=>{this.children.push(m),"object"==typeof m&&(m.parent=this)}),this}prepend(p){return(p=Array.isArray(p)?p:[p]).forEach(m=>{this.children.unshift(m),"object"==typeof m&&(m.parent=this)}),this}}},1416:(w,T,g)=>{"use strict";const v=g(9863),D=g(6229),C=g(9069),p=g(163);w.exports=(()=>{class E extends C{constructor(){super();const k=new v;this.root=null,this.cursor=null,k.on("startElement",this.onStartElement.bind(this)),k.on("endElement",this.onEndElement.bind(this)),k.on("text",this.onText.bind(this)),this.parser=k}onStartElement(k,P){const M=new D(k,P),{root:S,cursor:_}=this;S?_!==S&&_.append(M):(this.root=M,this.emit("start",M)),this.cursor=M}onEndElement(k){const{root:P,cursor:M}=this;if(k===M.name){if(M!==P)return M.parent?void(this.cursor=M.parent):(M.parent=P,this.emit("element",M),void(this.cursor=P));this.emit("end",P)}else this.emit("error",new p(`${M.name} must be closed.`))}onText(k){const{cursor:P}=this;P?P.t(k):this.emit("error",new p(`${k} must be a child.`))}write(k){this.parser.write(k)}end(k){k&&this.parser.write(k)}}return E.XMLError=p,E})()},163:w=>{"use strict";w.exports=class extends Error{constructor(...g){super(...g),this.name="XMLError"}}},2371:(w,T,g)=>{"use strict";const v=g(1416);w.exports=function(C){const p=new v;let m=null,E=null;if(p.on("start",L=>{m=L}),p.on("element",L=>{m.append(L)}),p.on("error",L=>{E=L}),p.write(C),p.end(),E)throw E;return m}},6826:(w,T,g)=>{"use strict";const v=g(6229);function D(p,m){!1===m||null==m||(m instanceof v?p.append(m):Array.isArray(m)?m.forEach(E=>D(p,E)):p.append(String(m)))}w.exports=function C(p,m,...E){const L=new v(p,m);for(let k=0;k<E.length;k++)D(L,E[k]);return L}},9069:w=>{"use strict";var v,T="object"==typeof Reflect?Reflect:null,g=T&&"function"==typeof T.apply?T.apply:function(H,G,W){return Function.prototype.apply.call(H,G,W)};v=T&&"function"==typeof T.ownKeys?T.ownKeys:Object.getOwnPropertySymbols?function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:function(H){return Object.getOwnPropertyNames(H)};var C=Number.isNaN||function(H){return H!=H};function p(){p.init.call(this)}w.exports=p,w.exports.once=function ge(z,H){return new Promise(function(G,W){function ue(oe){z.removeListener(H,Be),W(oe)}function Be(){"function"==typeof z.removeListener&&z.removeListener("error",ue),G([].slice.call(arguments))}Qe(z,H,Be,{once:!0}),"error"!==H&&function le(z,H,G){"function"==typeof z.on&&Qe(z,"error",H,G)}(z,ue,{once:!0})})},p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var m=10;function E(z){if("function"!=typeof z)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof z)}function L(z){return void 0===z._maxListeners?p.defaultMaxListeners:z._maxListeners}function k(z,H,G,W){var ue,Be,oe;if(E(G),void 0===(Be=z._events)?(Be=z._events=Object.create(null),z._eventsCount=0):(void 0!==Be.newListener&&(z.emit("newListener",H,G.listener?G.listener:G),Be=z._events),oe=Be[H]),void 0===oe)oe=Be[H]=G,++z._eventsCount;else if("function"==typeof oe?oe=Be[H]=W?[G,oe]:[oe,G]:W?oe.unshift(G):oe.push(G),(ue=L(z))>0&&oe.length>ue&&!oe.warned){oe.warned=!0;var Xe=new Error("Possible EventEmitter memory leak detected. "+oe.length+" "+String(H)+" listeners added. Use emitter.setMaxListeners() to increase limit");Xe.name="MaxListenersExceededWarning",Xe.emitter=z,Xe.type=H,Xe.count=oe.length,function D(z){console&&console.warn&&console.warn(z)}(Xe)}return z}function P(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M(z,H,G){var W={fired:!1,wrapFn:void 0,target:z,type:H,listener:G},ue=P.bind(W);return ue.listener=G,W.wrapFn=ue,ue}function S(z,H,G){var W=z._events;if(void 0===W)return[];var ue=W[H];return void 0===ue?[]:"function"==typeof ue?G?[ue.listener||ue]:[ue]:G?function Q(z){for(var H=new Array(z.length),G=0;G<H.length;++G)H[G]=z[G].listener||z[G];return H}(ue):b(ue,ue.length)}function _(z){var H=this._events;if(void 0!==H){var G=H[z];if("function"==typeof G)return 1;if(void 0!==G)return G.length}return 0}function b(z,H){for(var G=new Array(H),W=0;W<H;++W)G[W]=z[W];return G}function Qe(z,H,G,W){if("function"==typeof z.on)W.once?z.once(H,G):z.on(H,G);else{if("function"!=typeof z.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof z);z.addEventListener(H,function ue(Be){W.once&&z.removeEventListener(H,ue),G(Be)})}}Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(z){if("number"!=typeof z||z<0||C(z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+z+".");m=z}}),p.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(H){if("number"!=typeof H||H<0||C(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this},p.prototype.getMaxListeners=function(){return L(this)},p.prototype.emit=function(H){for(var G=[],W=1;W<arguments.length;W++)G.push(arguments[W]);var ue="error"===H,Be=this._events;if(void 0!==Be)ue=ue&&void 0===Be.error;else if(!ue)return!1;if(ue){var oe;if(G.length>0&&(oe=G[0]),oe instanceof Error)throw oe;var Xe=new Error("Unhandled error."+(oe?" ("+oe.message+")":""));throw Xe.context=oe,Xe}var $e=Be[H];if(void 0===$e)return!1;if("function"==typeof $e)g($e,this,G);else{var ie=$e.length,Ft=b($e,ie);for(W=0;W<ie;++W)g(Ft[W],this,G)}return!0},p.prototype.on=p.prototype.addListener=function(H,G){return k(this,H,G,!1)},p.prototype.prependListener=function(H,G){return k(this,H,G,!0)},p.prototype.once=function(H,G){return E(G),this.on(H,M(this,H,G)),this},p.prototype.prependOnceListener=function(H,G){return E(G),this.prependListener(H,M(this,H,G)),this},p.prototype.off=p.prototype.removeListener=function(H,G){var W,ue,Be,oe,Xe;if(E(G),void 0===(ue=this._events))return this;if(void 0===(W=ue[H]))return this;if(W===G||W.listener===G)0==--this._eventsCount?this._events=Object.create(null):(delete ue[H],ue.removeListener&&this.emit("removeListener",H,W.listener||G));else if("function"!=typeof W){for(Be=-1,oe=W.length-1;oe>=0;oe--)if(W[oe]===G||W[oe].listener===G){Xe=W[oe].listener,Be=oe;break}if(Be<0)return this;0===Be?W.shift():function F(z,H){for(;H+1<z.length;H++)z[H]=z[H+1];z.pop()}(W,Be),1===W.length&&(ue[H]=W[0]),void 0!==ue.removeListener&&this.emit("removeListener",H,Xe||G)}return this},p.prototype.removeAllListeners=function(H){var G,W,ue;if(void 0===(W=this._events))return this;if(void 0===W.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==W[H]&&(0==--this._eventsCount?this._events=Object.create(null):delete W[H]),this;if(0===arguments.length){var oe,Be=Object.keys(W);for(ue=0;ue<Be.length;++ue)"removeListener"!==(oe=Be[ue])&&this.removeAllListeners(oe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(G=W[H]))this.removeListener(H,G);else if(void 0!==G)for(ue=G.length-1;ue>=0;ue--)this.removeListener(H,G[ue]);return this},p.prototype.listeners=function(H){return S(this,H,!0)},p.prototype.rawListeners=function(H){return S(this,H,!1)},p.listenerCount=function(z,H){return"function"==typeof z.listenerCount?z.listenerCount(H):_.call(z,H)},p.prototype.listenerCount=_,p.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]}},3894:w=>{w.exports="function"==typeof Object.create?function(g,v){v&&(g.super_=v,g.prototype=Object.create(v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,v){if(v){g.super_=v;var D=function(){};D.prototype=v.prototype,g.prototype=new D,g.prototype.constructor=g}}},4775:w=>{"use strict";w.exports=function T(g){if(!Array.isArray(g))throw new TypeError("Middleware stack must be an array!");for(const v of g)if("function"!=typeof v)throw new TypeError("Middleware must be composed of functions!");return function(v,D){let C=-1;return function p(m){if(m<=C)return Promise.reject(new Error("next() called multiple times"));C=m;let E=g[m];if(m===g.length&&(E=D),!E)return Promise.resolve();try{return Promise.resolve(E(v,p.bind(null,m+1)))}catch(L){return Promise.reject(L)}}(0)}}},6105:(w,T,g)=>{"use strict";var v=g(4887),D=g(8574),C=g(2104),p=g(1251),m=g(8660),E=g(473),L=g(9472),k=g(2739),P=g(8336),M=g(3853),S=g(7875);(T=w.exports=function(){return L.apply(null,arguments)}).Element=p,T.equal=m.equal,T.nameEqual=m.name,T.attrsEqual=m.attrs,T.childrenEqual=m.children,T.isNode=P.isNode,T.isElement=P.isElement,T.isText=P.isText,T.clone=M,T.createElement=E,T.escapeXML=C.escapeXML,T.unescapeXML=C.unescapeXML,T.escapeXMLText=C.escapeXMLText,T.unescapeXMLText=C.unescapeXMLText,T.Parser=D,T.parse=v,T.tag=L,T.tagString=k,T.stringify=S},1251:(w,T,g)=>{"use strict";var v=g(2104),D=v.escapeXML,C=v.escapeXMLText,p=g(8660),m=p.equal,E=p.name,L=p.attrs,k=p.children,P=g(3853);function M(S,_){this.name=S,this.parent=null,this.children=[],this.attrs={},this.setAttrs(_)}M.prototype.is=function(S,_){return this.getName()===S&&(!_||this.getNS()===_)},M.prototype.getName=function(){return this.name.indexOf(":")>=0?this.name.substr(this.name.indexOf(":")+1):this.name},M.prototype.getNS=function(){if(this.name.indexOf(":")>=0){var S=this.name.substr(0,this.name.indexOf(":"));return this.findNS(S)}return this.findNS()},M.prototype.findNS=function(S){if(S){var _="xmlns:"+S;if(this.attrs[_])return this.attrs[_];if(this.parent)return this.parent.findNS(S)}else{if(this.attrs.xmlns)return this.attrs.xmlns;if(this.parent)return this.parent.findNS()}},M.prototype.getXmlns=function(){var S={};for(var _ in this.parent&&(S=this.parent.getXmlns()),this.attrs){var b=_.match("xmlns:?(.*)");this.attrs.hasOwnProperty(_)&&b&&(S[this.attrs[_]]=b[1])}return S},M.prototype.setAttrs=function(S){"string"==typeof S?this.attrs.xmlns=S:S&&Object.keys(S).forEach(function(_){this.attrs[_]=S[_]},this)},M.prototype.getAttr=function(S,_){if(!_)return this.attrs[S];var b=this.getXmlns();return b[_]?this.attrs[[b[_],S].join(":")]:null},M.prototype.getChild=function(S,_){return this.getChildren(S,_)[0]},M.prototype.getChildren=function(S,_){for(var b=[],F=0;F<this.children.length;F++){var Q=this.children[F];Q.getName&&Q.getName()===S&&(!_||Q.getNS()===_)&&b.push(Q)}return b},M.prototype.getChildByAttr=function(S,_,b,F){return this.getChildrenByAttr(S,_,b,F)[0]},M.prototype.getChildrenByAttr=function(S,_,b,F){for(var Q=[],ge=0;ge<this.children.length;ge++){var le=this.children[ge];le.attrs&&le.attrs[S]===_&&(!b||le.getNS()===b)&&Q.push(le),F&&le.getChildrenByAttr&&Q.push(le.getChildrenByAttr(S,_,b,!0))}return F&&(Q=[].concat.apply([],Q)),Q},M.prototype.getChildrenByFilter=function(S,_){for(var b=[],F=0;F<this.children.length;F++){var Q=this.children[F];S(Q)&&b.push(Q),_&&Q.getChildrenByFilter&&b.push(Q.getChildrenByFilter(S,!0))}return _&&(b=[].concat.apply([],b)),b},M.prototype.getText=function(){for(var S="",_=0;_<this.children.length;_++){var b=this.children[_];("string"==typeof b||"number"==typeof b)&&(S+=b)}return S},M.prototype.getChildText=function(S,_){var b=this.getChild(S,_);return b?b.getText():null},M.prototype.getChildElements=function(){return this.getChildrenByFilter(function(S){return S instanceof M})},M.prototype.tree=M.prototype.root=function(){return this.parent?this.parent.root():this},M.prototype.up=function(){return this.parent?this.parent:this},M.prototype.c=function(S,_){return this.cnode(new M(S,_))},M.prototype.cnode=function(S){return this.children.push(S),"object"==typeof S&&(S.parent=this),S},M.prototype.t=function(S){return this.children.push(S),this},M.prototype.remove=function(S,_){return this.children=this.children.filter("string"==typeof S?function(F){return!(F.is&&F.is(S,_))}:function(F){return F!==S}),this},M.prototype.clone=function(){return P(this)},M.prototype.text=function(S){return S&&1===this.children.length?(this.children[0]=S,this):this.getText()},M.prototype.attr=function(S,_){return void 0!==_||null===_?(this.attrs||(this.attrs={}),this.attrs[S]=_,this):this.attrs[S]},M.prototype.toString=function(){var S="";return this.write(function(_){S+=_}),S},M.prototype.toJSON=function(){return{name:this.name,attrs:this.attrs,children:this.children.map(function(S){return S&&S.toJSON?S.toJSON():S})}},M.prototype._addChildren=function(S){S(">");for(var _=0;_<this.children.length;_++){var b=this.children[_];(b||0===b)&&(b.write?b.write(S):"string"==typeof b?S(C(b)):b.toString&&S(C(b.toString(10))))}S("</"),S(this.name),S(">")},M.prototype.write=function(S){for(var _ in S("<"),S(this.name),this.attrs){var b=this.attrs[_];null!=b&&(S(" "),S(_),S('="'),"string"!=typeof b&&(b=b.toString()),S(D(b)),S('"'))}0===this.children.length?S("/>"):this._addChildren(S)},M.prototype.nameEquals=function(S){return E(this,S)},M.prototype.attrsEquals=function(S){return L(this,S)},M.prototype.childrenEquals=function(S){return k(this,S)},M.prototype.equals=function(S){return m(this,S)},w.exports=M},8574:(w,T,g)=>{"use strict";var v=g(9069).EventEmitter,D=g(3894),C=g(1251),p=g(9863),m=function(E){v.call(this);var L=this.Parser=E&&E.Parser||this.DefaultParser,k=this.Element=E&&E.Element||this.DefaultElement;this.parser=new L;var P,M=this;this.parser.on("startElement",function(S,_){var b=new k(S,_);P=P?P.cnode(b):b}),this.parser.on("endElement",function(S){P&&S===P.name&&(P.parent?P=P.parent:M.tree||(M.tree=P,P=void 0))}),this.parser.on("text",function(S){P&&P.t(S)}),this.parser.on("error",function(S){M.error=S,M.emit("error",S)})};D(m,v),m.prototype.DefaultParser=p,m.prototype.DefaultElement=C,m.prototype.write=function(E){this.parser.write(E)},m.prototype.end=function(E){this.parser.end(E),this.error||(this.tree?this.emit("tree",this.tree):this.emit("error",new Error("Incomplete document")))},w.exports=m},3853:w=>{"use strict";w.exports=function(g){for(var v=new g.constructor(g.name,g.attrs),D=0;D<g.children.length;D++){var C=g.children[D];v.cnode(C.clone?C.clone():C)}return v}},473:(w,T,g)=>{"use strict";var v=g(1251);w.exports=function(C,p){for(var m=new v(C,p),E=2;E<arguments.length;E++){var L=arguments[E];L&&m.cnode(L)}return m}},8660:w=>{"use strict";function T(C,p){return C.name===p.name}function g(C,p){var m=C.attrs,E=Object.keys(m),L=E.length;if(L!==Object.keys(p.attrs).length)return!1;for(var k=0,P=L;k<P;k++){var M=E[k],S=m[M];if(null==S||null==p.attrs[M]){if(S!==p.attrs[M])return!1}else if(S.toString()!==p.attrs[M].toString())return!1}return!0}function v(C,p){var m=C.children,E=m.length;if(E!==p.children.length)return!1;for(var L=0,k=E;L<k;L++){var P=m[L];if("string"==typeof P){if(P!==p.children[L])return!1}else if(!P.equals(p.children[L]))return!1}return!0}w.exports.name=T,w.exports.attrs=g,w.exports.children=v,w.exports.equal=function D(C,p){return!(!T(C,p)||!g(C,p)||!v(C,p))}},2104:(w,T)=>{"use strict";var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};function v(p){return g[p]}var D={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"};function C(p){if("#"===p[1]){var m;if(9===(m="x"===p[2]?parseInt(p.slice(3),16):parseInt(p.slice(2),10))||10===m||13===m||m>=32&&m<=55295||m>=57344&&m<=65533||m>=65536&&m<=1114111)return String.fromCodePoint(m);throw new Error("Illegal XML character 0x"+m.toString(16))}if(D[p])return D[p]||p;throw new Error("Illegal XML entity "+p)}T.escapeXML=function(m){return m.replace(/&|<|>|"|'/g,v)},T.unescapeXML=function(m){for(var E="",L=-1,k=-1,P=0;-1!==(L=m.indexOf("&",P))&&-1!==(k=m.indexOf(";",L+1));)E=E+m.substring(P,L)+C(m.substring(L,k+1)),P=k+1;return 0===P?m:E+=m.substring(P)},T.escapeXMLText=function(m){return m.replace(/&|<|>/g,v)},T.unescapeXMLText=function(m){return m.replace(/&(amp|#38|lt|#60|gt|#62);/g,C)}},8336:(w,T,g)=>{"use strict";var v=g(1251);w.exports.isNode=function(C){return C instanceof v||"string"==typeof C},w.exports.isElement=function(C){return C instanceof v},w.exports.isText=function(C){return"string"==typeof C}},4887:(w,T,g)=>{"use strict";var v=g(8574);w.exports=function(C,p){var m;m="function"==typeof p?new p:new v(p);var E=null,L=null;if(m.on("tree",function(k){E=k}),m.on("error",function(k){L=k}),m.write(C),m.end(),L)throw L;return E}},9863:(w,T,g)=>{"use strict";var v=g(3894),D=g(9069).EventEmitter,C=g(2104).unescapeXML,Q=w.exports=function(){D.call(this);var Qe,z,H,G,W,ue,Be,Xe,le=0,oe=0;this._handleTagOpening=function($e,ie,Ft){$e?this.emit("endElement",ie):(this.emit("startElement",ie,Ft),W&&this.emit("endElement",ie))},this.write=function($e){"string"!=typeof $e&&($e=$e.toString());var ie=0;function Ft(){if("number"==typeof oe){var qa=$e.substring(oe,ie);return oe=void 0,qa}}for(Qe&&($e=Qe+$e,ie+=Qe.length,Qe=null);ie<$e.length;ie++){if(0===le){var Jt=$e.indexOf("<",ie);-1!==Jt&&ie!==Jt&&(ie=Jt)}else if(8===le){var pe=$e.indexOf(Be,ie);-1!==pe&&(ie=pe)}else if(1===le){var Bi=$e.indexOf("--\x3e",ie);-1!==Bi&&(ie=Bi+2)}else if(10===le){var $i=$e.indexOf("]]>",ie);-1!==$i&&(ie=$i+2)}var Je=$e.charCodeAt(ie);switch(le){case 0:if(60===Je){var Ui=Ft();Ui&&this.emit("text",C(Ui)),le=3,oe=ie+1,H={}}break;case 9:if(93===Je&&"]>"===$e.substr(ie+1,2)){var Hi=Ft();Hi&&this.emit("text",Hi),le=0}break;case 3:47===Je&&oe===ie?(oe=ie+1,G=!0):33===Je?"[CDATA["===$e.substr(ie+1,7)?(oe=ie+8,le=9):(oe=void 0,le=1):63===Je?(oe=void 0,le=2):(Je<=32||47===Je||62===Je)&&(z=Ft(),ie--,le=4);break;case 1:if(62===Je){var vr=$e.charCodeAt(ie-1),qi=$e.charCodeAt(ie-2);(45===vr&&45===qi||93===vr&&93===qi)&&(le=0)}break;case 2:62===Je&&63===$e.charCodeAt(ie-1)&&(le=0);break;case 4:62===Je?(this._handleTagOpening(G,z,H),z=void 0,H=void 0,G=void 0,W=void 0,le=0,oe=ie+1):47===Je?W=!0:Je>32&&(oe=ie,le=5);break;case 5:(Je<=32||61===Je)&&(Xe=Ft(),ie--,le=6);break;case 6:61===Je&&(le=7);break;case 7:(34===Je||39===Je)&&(ue=Je,Be=34===Je?'"':"'",le=8,oe=ie+1);break;case 8:if(Je===ue){var go=C(Ft());H[Xe]=go,Xe=void 0,le=4}}}"number"==typeof oe&&oe<=$e.length&&(Qe=$e.slice(oe),oe=0)}};v(Q,D),Q.prototype.end=function(ge){ge&&this.write(ge),this.write=function(){}}},7875:w=>{"use strict";w.exports=function T(g,v,D){"number"==typeof v&&(v=" ".repeat(v)),D||(D=1);var C="";return C+="<"+g.name,Object.keys(g.attrs).forEach(function(p){C+=" "+p+'="'+g.attrs[p]+'"'}),g.children.length?(C+=">",g.children.forEach(function(p,m){v&&(C+="\n"+v.repeat(D)),C+="string"==typeof p?p:T(p,v,D+1)}),v&&(C+="\n"+v.repeat(D-1)),C+="</"+g.name+">"):C+="/>",C}},9472:(w,T,g)=>{"use strict";var v=g(2739),D=g(4887);w.exports=function(){return D(v.apply(null,arguments))}},2739:(w,T,g)=>{"use strict";var v=g(2104).escapeXML;w.exports=function(){for(var C=arguments[0],p="",m=1;m<arguments.length;m++)p+=C[m-1],p+=v(arguments[m]);return p+C[C.length-1]}},7477:function(w,T,g){!function(v,D){function C(){}C.prototype.name="ANONYMOUS",C.prototype.clientFirst=!0,C.prototype.response=function(p){return p.trace||""},C.prototype.challenge=function(p){},D.exports=C}(0,w=g.nmd(w))},4959:function(w,T,g){var D,C;D=w=g.nmd(w),C=g(7477),(D.exports=C).Mechanism=C},7978:function(w,T,g){!function(v,D){function C(){}C.prototype.name="PLAIN",C.prototype.clientFirst=!0,C.prototype.response=function(p){var m="";return m+=p.authzid||"",m+="\0",m+=p.username,(m+="\0")+p.password},C.prototype.challenge=function(p){return this},D.exports=C}(0,w=g.nmd(w))},6758:function(w,T,g){var D,C;D=w=g.nmd(w),C=g(7978),(D.exports=C).Mechanism=C},6496:function(w,T,g){!function(v,D){function C(){this._mechs=[]}C.prototype.use=function(p,m){return m||(p=(m=p).prototype.name),this._mechs.push({name:p,mech:m}),this},C.prototype.create=function(p){for(var m=0,E=this._mechs.length;m<E;m++)for(var L=0,k=p.length;L<k;L++){var P=this._mechs[m];if(P.name==p[L])return new P.mech}return null},D.exports=C}(0,w=g.nmd(w))},4218:function(w,T,g){var D,C;D=w=g.nmd(w),C=g(6496),(D.exports=C).Factory=C},8926:w=>{function T(v,D,C,p,m,E,L){try{var k=v[E](L),P=k.value}catch(M){return void C(M)}k.done?D(P):Promise.resolve(P).then(p,m)}w.exports=function g(v){return function(){var D=this,C=arguments;return new Promise(function(p,m){var E=v.apply(D,C);function L(P){T(E,p,m,L,k,"next",P)}function k(P){T(E,p,m,L,k,"throw",P)}L(void 0)})}},w.exports.__esModule=!0,w.exports.default=w.exports},2754:()=>{},6739:()=>{},2993:()=>{}},w=>{w(w.s=1803)}]);