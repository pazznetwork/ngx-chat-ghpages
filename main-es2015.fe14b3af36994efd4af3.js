var c5=Object.defineProperty,Ld=Object.getOwnPropertySymbols,NT=Object.prototype.hasOwnProperty,OT=Object.prototype.propertyIsEnumerable,kT=(t,e,n)=>e in t?c5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,FT=(t,e)=>{for(var n in e||(e={}))NT.call(e,n)&&kT(t,n,e[n]);if(Ld)for(var n of Ld(e))OT.call(e,n)&&kT(t,n,e[n]);return t},LT=(t,e)=>{var n={};for(var s in t)NT.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&Ld)for(var s of Ld(t))e.indexOf(s)<0&&OT.call(t,s)&&(n[s]=t[s]);return n};(self.webpackChunkngx_chat=self.webpackChunkngx_chat||[]).push([[179],{8255:function(t){function e(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=function(){return[]},e.resolve=e,e.id=8255,t.exports=e},2332:function(t){"use strict";t.exports.encode=function(t){return global.btoa(t)},t.exports.decode=function(t){return global.atob(t)}},6424:function(t,e,n){"use strict";const s=n(1843),r=n(998),i=n(8310);t.exports.Client=s,t.exports.xml=r,t.exports.jid=i},1843:function(t,e,n){"use strict";const s=n(7611);class r extends s{constructor(t){super(t),this.transports=[]}send(t,...e){return this.Transport.prototype.send.call(this,t,...e)}_findTransport(t){return this.transports.find(e=>{try{return void 0!==e.prototype.socketParameters(t)}catch(n){return!1}})}connect(t){const e=this._findTransport(t);if(!e)throw new Error("No compatible connection method found.");return this.Transport=e,this.Socket=e.prototype.Socket,this.Parser=e.prototype.Parser,super.connect(t)}socketParameters(...t){return this.Transport.prototype.socketParameters(...t)}header(...t){return this.Transport.prototype.header(...t)}headerElement(...t){return this.Transport.prototype.headerElement(...t)}footer(...t){return this.Transport.prototype.footer(...t)}footerElement(...t){return this.Transport.prototype.footerElement(...t)}}r.prototype.NS="jabber:client",t.exports=r},6023:function(t,e,n){"use strict";const{xml:s,jid:r,Client:i}=n(6424),o=n(156),a=n(6179),c=n(412),l=n(6246),u=n(5331),h=n(4040),d=n(4198),p=n(2274),f=n(9816),g=n(1098),m=n(794),y=n(6295),v=n(5967);t.exports.Ls=s,t.exports.kO=r,t.exports.Lp=function(t={}){const e=t,{resource:n,credentials:s,username:r,password:b}=e,_=LT(e,["resource","credentials","username","password"]),{domain:w,service:S}=_;!w&&S&&(_.domain=o(S));const C=new i(_),x=a({entity:C}),E=c({entity:C}),k=l({entity:C}),T=u({middleware:k}),I=h({middleware:k,entity:C}),O=d({middleware:k,entity:C}),M=p({entity:C}),A=f({streamFeatures:T},s||{username:r,password:b}),P=g({iqCaller:I,streamFeatures:T},n),R=m({iqCaller:I,streamFeatures:T}),N=Object.entries({plain:v,anonymous:y}).map(([t,e])=>({[t]:e(A)}));return Object.assign(C,{entity:C,reconnect:x,websocket:E,middleware:k,streamFeatures:T,iqCaller:I,iqCallee:O,resolve:M,sasl:A,resourceBinding:P,sessionEstablishment:R,mechanisms:N})}},156:function(t){"use strict";t.exports=function(t){return(t.split("://")[1]||t).split(":")[0].split("/")[0]}},7611:function(t,e,n){"use strict";var s=n(1325).default;const{EventEmitter:r,promise:i}=n(9014),o=n(8310),a=n(998),c=n(6823),{parseHost:l,parseService:u}=n(6616);class h extends r{constructor(t={}){super(),this.jid=null,this.timeout=2e3,this.options=t,this.socketListeners=Object.create(null),this.parserListeners=Object.create(null),this.status="offline",this.socket=null,this.parser=null,this.root=null}_reset(){this.jid=null,this.status="offline",this._detachSocket(),this._detachParser()}_streamError(t,e){var n=this;return s(function*(){try{yield n.send(a("stream:error",{},[a(t,{xmlns:"urn:ietf:params:xml:ns:xmpp-streams"},e)]))}catch(s){}return n._end()})()}_onData(t){const e=t.toString("utf8");this.emit("input",e),this.parser.write(e)}_onParserError(t){this._streamError("bad-format"),this._detachParser(),this.emit("error",t)}_attachSocket(t){const e=this.socket=t,n=this.socketListeners;n.data=this._onData.bind(this),n.close=(t,e)=>{this._reset(),this._status("disconnect",{clean:!t,event:e})},n.connect=()=>{this._status("connect")},n.error=t=>{this.emit("error",t)},e.on("close",n.close),e.on("data",n.data),e.on("error",n.error),e.on("connect",n.connect)}_detachSocket(){const{socketListeners:t,socket:e}=this;return Object.getOwnPropertyNames(t).forEach(n=>{e.removeListener(n,t[n]),delete t[n]}),this.socket=null,e}_onElement(t){this.emit("element",t),this.emit(this.isStanza(t)?"stanza":"nonza",t),"stream:error"===t.name&&this._onStreamError(t)}_onStreamError(t){const e=c.fromElement(t);"see-other-host"===e.condition?this._onSeeOtherHost(e):this.emit("error",e),this._end()}_onSeeOtherHost(t){var e=this;return s(function*(){const{protocol:n}=u(e.options.service),s=t.element.getChildText("see-other-host"),{port:r}=l(s);let o;o=r?`${n||"xmpp:"}//${s}`:(n?`${n}//`:"")+s;try{yield i(e,"disconnect");const{domain:t,lang:n}=e.options;yield e.connect(o),yield e.open({domain:t,lang:n})}catch(a){e.emit("error",a)}})()}_attachParser(t){const e=this.parser=t,n=this.parserListeners;n.element=this._onElement.bind(this),n.error=this._onParserError.bind(this),n.end=t=>{this._detachParser(),this._status("close",t)},n.start=t=>{this._status("open",t)},e.on("error",n.error),e.on("element",n.element),e.on("end",n.end),e.on("start",n.start)}_detachParser(){const t=this.parserListeners;Object.getOwnPropertyNames(t).forEach(e=>{this.parser.removeListener(e,t[e]),delete t[e]}),this.parser=null}_jid(t){return this.jid=o(t),this.jid}_status(t,...e){this.status=t,this.emit("status",t,...e),this.emit(t,...e)}_end(){var t=this;return s(function*(){let e;try{e=yield t.close()}catch(n){}try{yield t.disconnect()}catch(n){}return e})()}start(){var t=this;return s(function*(){if("offline"!==t.status)throw new Error("Connection is not offline");const{service:e,domain:n,lang:s}=t.options;yield t.connect(e);const r=i(t,"online");return yield t.open({domain:n,lang:s}),r})()}connect(t){var e=this;return s(function*(){e._status("connecting",t);const n=new e.Socket;return e._attachSocket(n),n.connect(e.socketParameters(t)),i(n,"connect")})()}disconnect(t=this.timeout){var e=this;return s(function*(){e.socket&&e._status("disconnecting"),e.socket.end(),yield i(e.socket,"close","error",t)})()}open(t){var e=this;return s(function*(){e._status("opening"),"string"==typeof t&&(t={domain:t});const{domain:n,lang:s,timeout:r=e.timeout}=t,o=e.headerElement();return o.attrs.to=n,o.attrs["xml:lang"]=s,e.root=o,e._attachParser(new e.Parser),yield e.write(e.header(o)),i(e,"open","error",r)})()}stop(){var t=this;return s(function*(){const e=yield t._end();return"offline"!==t.status&&t._status("offline",e),e})()}close(t=this.timeout){var e=this;return s(function*(){const n=Promise.all([i(e.parser,"end","error",t),e.write(e.footer(e.footerElement()))]);e.parser&&e.socket&&e._status("closing");const[s]=yield n;return e.root=null,s})()}restart(){var t=this;return s(function*(){t._detachParser();const{domain:e,lang:n}=t.options;return t.open({domain:e,lang:n})})()}send(t){var e=this;return s(function*(){t.parent=e.root,e.emit("outgoing",t),yield e.write(t),e.emit("send",t)})()}sendReceive(t,e=this.timeout){return Promise.all([this.send(t),i(this,"element","error",e)]).then(([,t])=>t)}write(t){return new Promise((e,n)=>{if("closing"===this.status)return void n(new Error("Connection is closing"));const s=t.toString("utf8");this.socket.write(s,t=>{if(t)return n(t);this.emit("output",s),e()})})}isStanza(t){const{name:e}=t;return"iq"===e||"message"===e||"presence"===e}isNonza(t){return!this.isStanza(t)}header(t){return t.toString()}headerElement(){return new a.Element("",{version:"1.0",xmlns:this.NS})}footer(t){return t.toString()}footerElement(){}socketParameters(){}}h.prototype.NS="",h.prototype.Socket=null,h.prototype.Parser=null,t.exports=h},6823:function(t,e,n){"use strict";const s=n(1721);t.exports=class extends s{constructor(...t){super(...t),this.name="StreamError"}}},6616:function(t){"use strict";function e(t){let{port:e,hostname:n,protocol:s}=new URL(t);return"[::1]"===n&&(n="::1"),{port:e,hostname:n,protocol:s}}function n(t){const{port:n,hostname:s}=e(`http://${t}`);return{port:n,hostname:s}}Object.assign(t.exports,{parseURI:e,parseHost:n,parseService:function(t){return t.includes("://")?e(t):n(t)}})},1721:function(t){"use strict";class e extends Error{constructor(t,e,n){super(t+(e?` - ${e}`:"")),this.name="XMPPError",this.condition=t,this.text=e,this.application=n}static fromElement(t){const[e,n,s]=t.children;let r,i;n&&(n.is("text")?r=n:n&&(i=n),s&&(i=s));const o=new this(e.name,r?r.text():"",i);return o.element=t,o}}t.exports=e},9014:function(t,e,n){"use strict";const s=n(6797),r=n(5800),i=n(3246),o=n(8762),a=n(3105),c=n(1581);e.EventEmitter=a,e.timeout=s,e.delay=r,e.TimeoutError=i,e.promise=o,e.Deferred=c},1581:function(t){"use strict";t.exports=function(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}},3246:function(t){"use strict";t.exports=class extends Error{constructor(t){super(t),this.name="TimeoutError"}}},5800:function(t){"use strict";t.exports=function(t){let e;const n=new Promise(n=>{e=setTimeout(n,t)});return n.timeout=e,n}},8762:function(t,e,n){"use strict";const s=n(3246);t.exports=function(t,e,n="error",r){return new Promise((i,o)=>{let a;const c=()=>{clearTimeout(a),t.removeListener(e,u),t.removeListener(n,l)};function l(t){o(t),c()}function u(t){i(t),c()}t.once(e,u),n&&t.once(n,l),r&&(a=setTimeout(()=>{c(),o(new s)},r))})}},6797:function(t,e,n){"use strict";const s=n(3246),r=n(5800);t.exports=function(t,e){const n=r(e);return Promise.race([t.finally(function(){clearTimeout(n.timeout)}),n.then(()=>{throw new s})])}},4113:function(t){"use strict";t.exports=function(){let t;for(;!t;)t=Math.random().toString(36).slice(2,12);return t}},4198:function(t,e,n){"use strict";var s=n(1325).default;const r=n(998);function i({stanza:t}){return r("iq",{to:t.attrs.from,from:t.attrs.to,id:t.attrs.id})}function o(t,e,n){const s=i(t);return s.attrs.type="error",n&&s.append(n),s.append(e),s}function a(t,e){return r("error",{type:t},r(e,"urn:ietf:params:xml:ns:xmpp-stanzas"))}function c(t,e,n,s){return function(r,i){return r.type!==t|!r.element||!r.element.is(n,e)?i():s(r,i)}}t.exports=function({middleware:t,entity:e}){return t.use(function(t){return function(){var e=s(function*(e,n){if(!function({name:t,type:e}){return!("iq"!==t||"error"===e||"result"===e)}(e))return n();const{stanza:s}=e,c=s.getChildElements(),[l]=c;if(!function({type:t},e,n){return!("get"!==t&&"set"!==t||1!==e.length||!n)}(e,c,l))return o(e,a("modify","bad-request"),l);let u;e.element=l;try{u=yield n()}catch(h){t.emit("error",h),u=a("cancel","internal-server-error")}return u||(u=a("cancel","service-unavailable")),u instanceof r.Element&&u.is("error")?o(e,u,l):function(t,e){const n=i(t);return n.attrs.type="result",e&&n.append(e),n}(e,u instanceof r.Element?u:void 0)});return function(t,n){return e.apply(this,arguments)}}()}(e)),{get(e,n,s){t.use(c("get",e,n,s))},set(e,n,s){t.use(c("set",e,n,s))}}}},4040:function(t,e,n){"use strict";var s=n(1325).default;const r=n(4113),i=n(1751),{Deferred:o}=n(9014),a=n(9014).timeout,c=n(998);class l{constructor({entity:t,middleware:e}){this.handlers=new Map,this.entity=t,this.middleware=e}start(){this.middleware.use(this._route.bind(this))}_route({type:t,name:e,id:n,stanza:s},r){if(!function({name:t,type:e}){return!("iq"!==t||"error"!==e&&"result"!==e)}({name:e,type:t}))return r();const o=this.handlers.get(n);if(!o)return r();"error"===t?o.reject(i.fromElement(s.getChild("error"))):o.resolve(s),this.handlers.delete(n)}request(t,e=3e4){var n=this;return s(function*(){t.attrs.id||(t.attrs.id=r());const s=new o;n.handlers.set(t.attrs.id,s);try{yield n.entity.send(t),yield a(s.promise,e)}catch(i){throw n.handlers.delete(t.attrs.id),i}return s.promise})()}_childRequest(t,e,n,...s){const{name:r}=e,{xmlns:i}=e.attrs;return this.request(c("iq",{type:t,to:n},e),...s).then(t=>t.getChild(r,i))}get(...t){var e=this;return s(function*(){return e._childRequest("get",...t)})()}set(...t){var e=this;return s(function*(){return e._childRequest("set",...t)})()}}t.exports=function(...t){const e=new l(...t);return e.start(),e}},8310:function(t,e,n){"use strict";const s=n(2353),r=n(773),i=n(1453);function o(...t){return t[1]||t[2]?new s(...t):i(...t)}(e=t.exports=o.bind()).jid=o,e.JID=s,e.equal=function(t,e){return t.equals(e)},e.detectEscape=r.detect,e.escapeLocal=r.escape,e.unescapeLocal=r.unescape,e.parse=i},2353:function(t,e,n){"use strict";const s=n(773);class r{constructor(t,e,n){if("string"!=typeof e||!e)throw new TypeError("Invalid domain.");this.setDomain(e),this.setLocal("string"==typeof t?t:""),this.setResource("string"==typeof n?n:"")}[Symbol.toPrimitive](t){return"number"===t?NaN:this.toString()}toString(t){let e=this._domain;return this._local&&(e=this.getLocal(t)+"@"+e),this._resource&&(e=e+"/"+this._resource),e}bare(){return this._resource?new r(this._local,this._domain,null):this}equals(t){return this._local===t._local&&this._domain===t._domain&&this._resource===t._resource}setLocal(t,e){return(e=e||s.detect(t))&&(t=s.escape(t)),this._local=t&&t.toLowerCase(),this}getLocal(t){let e=null;return e=(t=t||!1)?s.unescape(this._local):this._local,e}setDomain(t){return this._domain=t.toLowerCase(),this}getDomain(){return this._domain}setResource(t){return this._resource=t,this}getResource(){return this._resource}}Object.defineProperty(r.prototype,"local",{get:r.prototype.getLocal,set:r.prototype.setLocal}),Object.defineProperty(r.prototype,"domain",{get:r.prototype.getDomain,set:r.prototype.setDomain}),Object.defineProperty(r.prototype,"resource",{get:r.prototype.getResource,set:r.prototype.setResource}),t.exports=r},773:function(t){"use strict";t.exports.detect=function(t){return!(!t||-1===t.replace(/\\20/g,"").replace(/\\22/g,"").replace(/\\26/g,"").replace(/\\27/g,"").replace(/\\2f/g,"").replace(/\\3a/g,"").replace(/\\3c/g,"").replace(/\\3e/g,"").replace(/\\40/g,"").replace(/\\5c/g,"").search(/\\| |"|&|'|\/|:|<|>|@/g))},t.exports.escape=function(t){return null===t?null:t.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/"/g,"\\22").replace(/&/g,"\\26").replace(/'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40").replace(/\3a/g,"\x05c3a")},t.exports.unescape=function(t){return null===t?null:t.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")}},1453:function(t,e,n){"use strict";const s=n(2353);t.exports=function(t){let e,n;const r=t.indexOf("/");-1!==r&&(n=t.slice(r+1),t=t.slice(0,r));const i=t.indexOf("@");return-1!==i&&(e=t.slice(0,i),t=t.slice(i+1)),new s(e,t,n)}},6246:function(t,e,n){"use strict";const s=n(7367),r=n(3249),i=n(2168);function o(t,e,n){return function(r){const i=new n(t,r);return s(e)(i)}}function a(t){return function(e,n){n().then(e=>e&&t.send(e)).catch(e=>t.emit("error",e))}}t.exports=function({entity:t}){const e=[a(t)],n=[],s=o(t,e,r),c=o(t,n,i);return t.on("element",s),t.hookOutgoing=c,{use:t=>(e.push(t),t),filter:t=>(n.push(t),t)}}},6082:function(t){"use strict";t.exports=class{constructor(t,e){this.stanza=e,this.entity=t;const{name:n,attrs:s}=e,{type:r,id:i}=s;this.name=n,this.id=i||"",this.type="message"===n?r||"normal":"presence"===n?r||"available":r||"",this.from=null,this.to=null,this.local="",this.domain="",this.resource=""}}},3249:function(t,e,n){"use strict";const s=n(6082),r=n(8310);t.exports=class extends s{constructor(t,e){super(t,e);const{jid:n,domain:s}=t,i=e.attrs.to||n&&n.toString(),o=e.attrs.from||s;i&&(this.to=new r(i)),o&&(this.from=new r(o),this.local=this.from.local,this.domain=this.from.domain,this.resource=this.from.resource)}}},2168:function(t,e,n){"use strict";const s=n(6082),r=n(8310);t.exports=class extends s{constructor(t,e){super(t,e);const{jid:n,domain:s}=t,i=e.attrs.from||n&&n.toString(),o=e.attrs.to||s;i&&(this.from=new r(i)),o&&(this.to=new r(o),this.local=this.to.local,this.domain=this.to.domain,this.resource=this.to.resource)}}},1751:function(t,e,n){"use strict";const s=n(1721);t.exports=class extends s{constructor(t,e,n,s){super(t,e,n),this.type=s,this.name="StanzaError"}static fromElement(t){const e=super.fromElement(t);return e.type=t.attrs.type,e}}},6179:function(t,e,n){"use strict";var s=n(1325).default;const{EventEmitter:r}=n(9014);class i extends r{constructor(t){super(),this.delay=1e3,this.entity=t,this._timeout=null}scheduleReconnect(){var t=this;const{entity:e,delay:n,_timeout:r}=this;clearTimeout(r),this._timeout=setTimeout(s(function*(){if("disconnect"===e.status)try{yield t.reconnect()}catch(n){}}),n)}reconnect(){var t=this;return s(function*(){const{entity:e}=t;t.emit("reconnecting");const{service:n,domain:s,lang:r}=e.options;yield e.connect(n),yield e.open({domain:s,lang:r}),t.emit("reconnected")})()}start(){const{entity:t}=this,e={};e.disconnect=()=>{this.scheduleReconnect()},this.listeners=e,t.on("disconnect",e.disconnect)}stop(){const{entity:t,listeners:e,_timeout:n}=this;t.removeListener("disconnect",e.disconnect),clearTimeout(n)}}t.exports=function({entity:t}){const e=new i(t);return e.start(),e}},2274:function(t,e,n){"use strict";var s=n(1325).default;const r=n(8210),{promise:i}=n(9014);function o(){return(o=s(function*(t){return[...new Set((yield r(t,{srv:[{service:"xmpps-client",protocol:"tcp"},{service:"xmpp-client",protocol:"tcp"}]})).map(t=>t.uri))]})).apply(this,arguments)}function a(t,e){return c.apply(this,arguments)}function c(){return(c=s(function*(t,e){if(0===e.length)throw new Error("Couldn't connect");const n=e.shift(),s=t._findTransport(n);if(!s)return a(t,e);t._status("connecting",n);const r=s.prototype.socketParameters(n),o=new s.prototype.Socket;try{o.connect(r),yield i(o,"connect")}catch(c){return a(t,e)}t._attachSocket(o),o.emit("connect"),t.Transport=s,t.Socket=s.prototype.Socket,t.Parser=s.prototype.Parser})).apply(this,arguments)}t.exports=function({entity:t}){const e=t.connect;t.connect=function(){var n=s(function*(n){if(!n||n.match(/:\/\//))return e.call(this,n);const s=function(t,e){return e.filter(e=>t._findTransport(e))}(t,yield function(t){return o.apply(this,arguments)}(n));if(0===s.length)throw new Error("No compatible transport found.");try{yield a(t,s)}catch(r){throw t._reset(),t._status("disconnect"),r}});return function(t){return n.apply(this,arguments)}}()}},892:function(t){"use strict";function e(t){return t.startsWith("https")||t.startsWith("wss")}t.exports.q=function(t,n){let s,r;return s=e(t.uri)&&!e(n.uri)?-1:!e(t.uri)&&e(n.uri)?1:0,0!==s?s:(r=t.method===n.method?0:"websocket"===t.method?-1:"websocket"===n.method?1:"xbosh"===t.method?-1:"xbosh"===n.method?1:"httppoll"===t.method?-1:"httppoll"===n.method?1:0,0!==r?r:0)}},8542:function(t,e,n){"use strict";const s=global.fetch||n(2754),r=n(4971),i=n(892).q;t.exports.resolve=function(t){return s(`https://${t}/.well-known/host-meta`).then(t=>t.text()).then(t=>r(t).getChildren("Link").filter(t=>["urn:xmpp:alt-connections:websocket","urn:xmpp:alt-connections:httppoll","urn:xmpp:alt-connections:xbosh"].includes(t.attrs.rel)).map(({attrs:t})=>({rel:t.rel,href:t.href,method:t.rel.split(":").pop(),uri:t.href})).sort(i)).catch(()=>[])}},8210:function(t,e,n){"use strict";const s=n(6739),r=n(8542);t.exports=function(...t){return Promise.all([s.resolve?s.resolve(...t):Promise.resolve([]),r.resolve(...t)]).then(([t,e])=>t.concat(e))},s.resolve&&(t.exports.dns=s),t.exports.http=r},1098:function(t,e,n){"use strict";var s=n(1325).default;const r=n(998),i="urn:ietf:params:xml:ns:xmpp-bind";function o(t){return r("bind",{xmlns:i},t&&r("resource",{},t))}function a(t,e,n){return c.apply(this,arguments)}function c(){return(c=s(function*(t,e,n){const s=(yield e.set(o(n))).getChildText("jid");return t._jid(s),s})).apply(this,arguments)}t.exports=function({streamFeatures:t,iqCaller:e},n){t.use("bind",i,function({iqCaller:t},e){return function(){var n=s(function*({entity:n},s){"function"==typeof e?yield e(e=>a(n,t,e)):yield a(n,t,e),s()});return function(t,e){return n.apply(this,arguments)}}()}({iqCaller:e},n))}},6295:function(t,e,n){"use strict";const s=n(7698);t.exports=function(t){t.use(s)}},5967:function(t,e,n){"use strict";const s=n(2731);t.exports=function(t){t.use(s)}},9816:function(t,e,n){"use strict";var s=n(1325).default;const{encode:r,decode:i}=n(2332),o=n(6044),a=n(998),c=n(4615),l="urn:ietf:params:xml:ns:xmpp-sasl";function u(t,e,n,s){return h.apply(this,arguments)}function h(){return(h=s(function*(t,e,n,s){const c=t.create([n]);if(!c)throw new Error("No compatible mechanism");const{domain:u}=e.options,h=FT({username:null,password:null,server:u,host:u,realm:u,serviceType:"xmpp",serviceName:u},s);return new Promise((t,n)=>{const s=u=>{if(u.attrs.xmlns===l){if("challenge"===u.name){c.challenge(i(u.text()));const t=c.response(h);return void e.send(a("response",{xmlns:l,mechanism:c.name},"string"==typeof t?r(t):""))}"failure"===u.name?n(o.fromElement(u)):"success"===u.name&&t(),e.removeListener("nonza",s)}};e.on("nonza",s),c.clientFirst&&e.send(a("auth",{xmlns:l,mechanism:c.name},r(c.response(h))))})})).apply(this,arguments)}t.exports=function({streamFeatures:t},e){const n=new c;return t.use("mechanisms",l,function(){var t=s(function*({stanza:t,entity:s}){const r=t.getChild("mechanisms",l).children.map(t=>t.text());let i=n._mechs.map(({name:t})=>t).filter(t=>r.includes(t))[0];"function"==typeof e?yield e(e=>u(n,s,i,e,t),i):(!e.username&&!e.password&&(i="ANONYMOUS"),yield u(n,s,i,e,t)),yield s.restart()});return function(e){return t.apply(this,arguments)}}()),{use:(...t)=>n.use(...t)}}},6044:function(t,e,n){"use strict";const s=n(1721);t.exports=class extends s{constructor(...t){super(...t),this.name="SASLError"}}},794:function(t,e,n){"use strict";var s=n(1325).default;const r=n(998),i="urn:ietf:params:xml:ns:xmpp-session";t.exports=function({iqCaller:t,streamFeatures:e}){e.use("session",i,function(){var e=s(function*(e,n,s){return s.getChild("optional")||(yield t.set(r("session",i))),n()});return function(t,n,s){return e.apply(this,arguments)}}())}},5331:function(t,e,n){"use strict";const s=n(2018);t.exports=function({middleware:t}){return t.use(s()),{use:function(e,n,s){return t.use((t,r)=>{const{stanza:i}=t;if(!i.is("features","http://etherx.jabber.org/streams"))return r();const o=i.getChild(e,n);return o?s(t,r,o):r()})}}}},2018:function(t,e,n){"use strict";var s=n(1325).default;t.exports=function(){return function(){var t=s(function*({stanza:t,entity:e},n){if(!t.is("features","http://etherx.jabber.org/streams"))return n();yield n(),e.jid&&e._status("online",e.jid)});return function(e,n){return t.apply(this,arguments)}}()}},412:function(t,e,n){"use strict";const s=n(6918);t.exports=function({entity:t}){t.transports.push(s)}},6918:function(t,e,n){"use strict";const s=n(1210),r=n(7611),i=n(998),o=n(1060),a="urn:ietf:params:xml:ns:xmpp-framing";class c extends r{send(t,...e){return!t.attrs.xmlns&&super.isStanza(t)&&(t.attrs.xmlns="jabber:client"),super.send(t,...e)}footerElement(){return new i.Element("close",{xmlns:a})}headerElement(){const t=super.headerElement();return t.name="open",t.attrs.xmlns=a,t}socketParameters(t){return t.match(/^wss?:\/\//)?t:void 0}}c.prototype.Socket=s,c.prototype.NS="jabber:client",c.prototype.Parser=o,t.exports=c},1060:function(t,e,n){"use strict";const{Parser:s,Element:r,XMLError:i}=n(998);t.exports=class extends s{onStartElement(t,e){const n=new r(t,e),{cursor:s}=this;s&&s.append(n),this.cursor=n}onEndElement(t){const{cursor:e}=this;t===e.name?e.parent?this.cursor=e.parent:(e.is("open","urn:ietf:params:xml:ns:xmpp-framing")?this.emit("start",e):e.is("close","urn:ietf:params:xml:ns:xmpp-framing")?this.emit("end",e):this.emit("element",e),this.cursor=null):this.emit("error",new i(`${e.name} must be closed.`))}}},1210:function(t,e,n){"use strict";const s=n(2993),r=global.WebSocket||s,i=n(3105),o="ECONNERROR";t.exports=class extends i{constructor(){super(),this.listeners=Object.create(null)}connect(t){this.url=t,this._attachSocket(new r(t,["xmpp"]))}_attachSocket(t){const e=this.socket=t,{listeners:n}=this;n.open=()=>{this.emit("connect")},n.message=({data:t})=>this.emit("data",t),n.error=t=>{let{error:e}=t;e||(e=new Error(`WebSocket ${o} ${this.url}`),e.errno=o,e.code=o),e.event=t,e.url=this.url,this.emit("error",e)},n.close=t=>{this._detachSocket(),this.emit("close",!t.wasClean,t)},e.addEventListener("open",n.open),e.addEventListener("message",n.message),e.addEventListener("error",n.error),e.addEventListener("close",n.close)}_detachSocket(){delete this.url;const{socket:t,listeners:e}=this;Object.getOwnPropertyNames(e).forEach(n=>{t.removeEventListener(n,e[n]),delete e[n]}),delete this.socket}end(){this.socket.close()}write(t,e){r===s?this.socket.send(t,e):(this.socket.send(t),e())}}},998:function(t,e,n){"use strict";const s=n(3634),r=n(8254),i=n(8982),{escapeXML:o,unescapeXML:a,escapeXMLText:c,unescapeXMLText:l}=n(6597),u=n(2877);e=t.exports=function(...t){return s(...t)},Object.assign(e,{x:s,Element:r,Parser:i,escapeXML:o,unescapeXML:a,escapeXMLText:c,unescapeXMLText:l,XMLError:u})},8254:function(t,e,n){"use strict";const s=n(1504);t.exports=class extends s{setAttrs(t){"string"==typeof t?this.attrs.xmlns=t:t&&Object.keys(t).forEach(function(e){if("__source"===e||"__self"===e)return;const n=t[e];null!=n&&(this.attrs[e.toString()]=n.toString())},this)}append(t){return(t=Array.isArray(t)?t:[t]).forEach(t=>{this.children.push(t),"object"==typeof t&&(t.parent=this)}),this}prepend(t){return(t=Array.isArray(t)?t:[t]).forEach(t=>{this.children.unshift(t),"object"==typeof t&&(t.parent=this)}),this}}},8982:function(t,e,n){"use strict";const s=n(6188),r=n(8254),i=n(3105),o=n(2877);t.exports=(()=>{class t extends i{constructor(){super();const t=new s;this.root=null,this.cursor=null,t.on("startElement",this.onStartElement.bind(this)),t.on("endElement",this.onEndElement.bind(this)),t.on("text",this.onText.bind(this)),this.parser=t}onStartElement(t,e){const n=new r(t,e),{root:s,cursor:i}=this;s?i!==s&&i.append(n):(this.root=n,this.emit("start",n)),this.cursor=n}onEndElement(t){const{root:e,cursor:n}=this;if(t===n.name){if(n!==e)return n.parent?void(this.cursor=n.parent):(n.parent=e,this.emit("element",n),void(this.cursor=e));this.emit("end",e)}else this.emit("error",new o(`${n.name} must be closed.`))}onText(t){const{cursor:e}=this;e?e.t(t):this.emit("error",new o(`${t} must be a child.`))}write(t){this.parser.write(t)}end(t){t&&this.parser.write(t)}}return t.XMLError=o,t})()},2877:function(t){"use strict";t.exports=class extends Error{constructor(...t){super(...t),this.name="XMLError"}}},4971:function(t,e,n){"use strict";const s=n(8982);t.exports=function(t){const e=new s;let n=null,r=null;if(e.on("start",t=>{n=t}),e.on("element",t=>{n.append(t)}),e.on("error",t=>{r=t}),e.write(t),e.end(),r)throw r;return n}},3634:function(t,e,n){"use strict";const s=n(8254);function r(t,e){!1===e||null==e||(e instanceof s?t.append(e):Array.isArray(e)?e.forEach(e=>r(t,e)):t.append(String(e)))}t.exports=function(t,e,...n){const i=new s(t,e);for(let s=0;s<n.length;s++)r(i,n[s]);return i}},3105:function(t){"use strict";var e,n="object"==typeof Reflect?Reflect:null,s=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function c(t,e,n,s){var r,i,o;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),void 0===o)o=i[e]=n,++t._eventsCount;else if("function"==typeof o?o=i[e]=s?[n,o]:[o,n]:s?o.unshift(n):o.push(n),(r=a(t))>0&&o.length>r&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=o.length,function(t){console&&console.warn&&console.warn(t)}(c)}return t}function l(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,s(this.listener,this.target,t))}function u(t,e,n){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=l.bind(s);return r.listener=n,s.wrapFn=r,r}function h(t,e,n){var s=t._events;if(void 0===s)return[];var r=s[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):p(r,r.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),s=0;s<e;++s)n[s]=t[s];return n}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),i.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return a(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[t];if(void 0===c)return!1;if("function"==typeof c)s(c,this,e);else{var l=c.length,u=p(c,l);for(n=0;n<l;++n)s(u[n],this,e)}return!0},i.prototype.on=i.prototype.addListener=function(t,e){return c(this,t,e,!1)},i.prototype.prependListener=function(t,e){return c(this,t,e,!0)},i.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,u(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,u(this,t,e)),this},i.prototype.off=i.prototype.removeListener=function(t,e){var n,s,r,i,o;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(s=this._events))return this;if(void 0===(n=s[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){o=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(s[t]=n[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||e)}return this},i.prototype.removeAllListeners=function(t){var e,n,s;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,i=Object.keys(n);for(s=0;s<i.length;++s)"removeListener"!==(r=i[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},i.prototype.listeners=function(t){return h(this,t,!0)},i.prototype.rawListeners=function(t){return h(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},i.prototype.listenerCount=d,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7367:function(t){"use strict";t.exports=function(t){if(!Array.isArray(t))throw new TypeError("Middleware stack must be an array!");for(const e of t)if("function"!=typeof e)throw new TypeError("Middleware must be composed of functions!");return function(e,n){let s=-1;return function r(i){if(i<=s)return Promise.reject(new Error("next() called multiple times"));s=i;let o=t[i];if(i===t.length&&(o=n),!o)return Promise.resolve();try{return Promise.resolve(o(e,r.bind(null,i+1)))}catch(a){return Promise.reject(a)}}(0)}}},4115:function(t,e,n){"use strict";var s=n(3338),r=n(4009),i=n(6597),o=n(1504),a=n(1564),c=n(7413),l=n(8064),u=n(1640),h=n(5672),d=n(3555),p=n(205);(e=t.exports=function(){return l.apply(null,arguments)}).Element=o,e.equal=a.equal,e.nameEqual=a.name,e.attrsEqual=a.attrs,e.childrenEqual=a.children,e.isNode=h.isNode,e.isElement=h.isElement,e.isText=h.isText,e.clone=d,e.createElement=c,e.escapeXML=i.escapeXML,e.unescapeXML=i.unescapeXML,e.escapeXMLText=i.escapeXMLText,e.unescapeXMLText=i.unescapeXMLText,e.Parser=r,e.parse=s,e.tag=l,e.tagString=u,e.stringify=p},1504:function(t,e,n){"use strict";var s=n(6597),r=s.escapeXML,i=s.escapeXMLText,o=n(1564),a=o.equal,c=o.name,l=o.attrs,u=o.children,h=n(3555);function d(t,e){this.name=t,this.parent=null,this.children=[],this.attrs={},this.setAttrs(e)}d.prototype.is=function(t,e){return this.getName()===t&&(!e||this.getNS()===e)},d.prototype.getName=function(){return this.name.indexOf(":")>=0?this.name.substr(this.name.indexOf(":")+1):this.name},d.prototype.getNS=function(){if(this.name.indexOf(":")>=0){var t=this.name.substr(0,this.name.indexOf(":"));return this.findNS(t)}return this.findNS()},d.prototype.findNS=function(t){if(t){var e="xmlns:"+t;if(this.attrs[e])return this.attrs[e];if(this.parent)return this.parent.findNS(t)}else{if(this.attrs.xmlns)return this.attrs.xmlns;if(this.parent)return this.parent.findNS()}},d.prototype.getXmlns=function(){var t={};for(var e in this.parent&&(t=this.parent.getXmlns()),this.attrs){var n=e.match("xmlns:?(.*)");this.attrs.hasOwnProperty(e)&&n&&(t[this.attrs[e]]=n[1])}return t},d.prototype.setAttrs=function(t){"string"==typeof t?this.attrs.xmlns=t:t&&Object.keys(t).forEach(function(e){this.attrs[e]=t[e]},this)},d.prototype.getAttr=function(t,e){if(!e)return this.attrs[t];var n=this.getXmlns();return n[e]?this.attrs[[n[e],t].join(":")]:null},d.prototype.getChild=function(t,e){return this.getChildren(t,e)[0]},d.prototype.getChildren=function(t,e){for(var n=[],s=0;s<this.children.length;s++){var r=this.children[s];r.getName&&r.getName()===t&&(!e||r.getNS()===e)&&n.push(r)}return n},d.prototype.getChildByAttr=function(t,e,n,s){return this.getChildrenByAttr(t,e,n,s)[0]},d.prototype.getChildrenByAttr=function(t,e,n,s){for(var r=[],i=0;i<this.children.length;i++){var o=this.children[i];o.attrs&&o.attrs[t]===e&&(!n||o.getNS()===n)&&r.push(o),s&&o.getChildrenByAttr&&r.push(o.getChildrenByAttr(t,e,n,!0))}return s&&(r=[].concat.apply([],r)),r},d.prototype.getChildrenByFilter=function(t,e){for(var n=[],s=0;s<this.children.length;s++){var r=this.children[s];t(r)&&n.push(r),e&&r.getChildrenByFilter&&n.push(r.getChildrenByFilter(t,!0))}return e&&(n=[].concat.apply([],n)),n},d.prototype.getText=function(){for(var t="",e=0;e<this.children.length;e++){var n=this.children[e];("string"==typeof n||"number"==typeof n)&&(t+=n)}return t},d.prototype.getChildText=function(t,e){var n=this.getChild(t,e);return n?n.getText():null},d.prototype.getChildElements=function(){return this.getChildrenByFilter(function(t){return t instanceof d})},d.prototype.tree=d.prototype.root=function(){return this.parent?this.parent.root():this},d.prototype.up=function(){return this.parent?this.parent:this},d.prototype.c=function(t,e){return this.cnode(new d(t,e))},d.prototype.cnode=function(t){return this.children.push(t),"object"==typeof t&&(t.parent=this),t},d.prototype.t=function(t){return this.children.push(t),this},d.prototype.remove=function(t,e){return this.children=this.children.filter("string"==typeof t?function(n){return!(n.is&&n.is(t,e))}:function(e){return e!==t}),this},d.prototype.clone=function(){return h(this)},d.prototype.text=function(t){return t&&1===this.children.length?(this.children[0]=t,this):this.getText()},d.prototype.attr=function(t,e){return void 0!==e||null===e?(this.attrs||(this.attrs={}),this.attrs[t]=e,this):this.attrs[t]},d.prototype.toString=function(){var t="";return this.write(function(e){t+=e}),t},d.prototype.toJSON=function(){return{name:this.name,attrs:this.attrs,children:this.children.map(function(t){return t&&t.toJSON?t.toJSON():t})}},d.prototype._addChildren=function(t){t(">");for(var e=0;e<this.children.length;e++){var n=this.children[e];(n||0===n)&&(n.write?n.write(t):"string"==typeof n?t(i(n)):n.toString&&t(i(n.toString(10))))}t("</"),t(this.name),t(">")},d.prototype.write=function(t){for(var e in t("<"),t(this.name),this.attrs){var n=this.attrs[e];null!=n&&(t(" "),t(e),t('="'),"string"!=typeof n&&(n=n.toString()),t(r(n)),t('"'))}0===this.children.length?t("/>"):this._addChildren(t)},d.prototype.nameEquals=function(t){return c(this,t)},d.prototype.attrsEquals=function(t){return l(this,t)},d.prototype.childrenEquals=function(t){return u(this,t)},d.prototype.equals=function(t){return a(this,t)},t.exports=d},4009:function(t,e,n){"use strict";var s=n(3105).EventEmitter,r=n(158),i=n(1504),o=n(6188),a=function(t){s.call(this);var e=this.Parser=t&&t.Parser||this.DefaultParser,n=this.Element=t&&t.Element||this.DefaultElement;this.parser=new e;var r,i=this;this.parser.on("startElement",function(t,e){var s=new n(t,e);r=r?r.cnode(s):s}),this.parser.on("endElement",function(t){r&&t===r.name&&(r.parent?r=r.parent:i.tree||(i.tree=r,r=void 0))}),this.parser.on("text",function(t){r&&r.t(t)}),this.parser.on("error",function(t){i.error=t,i.emit("error",t)})};r(a,s),a.prototype.DefaultParser=o,a.prototype.DefaultElement=i,a.prototype.write=function(t){this.parser.write(t)},a.prototype.end=function(t){this.parser.end(t),this.error||(this.tree?this.emit("tree",this.tree):this.emit("error",new Error("Incomplete document")))},t.exports=a},3555:function(t){"use strict";t.exports=function(t){for(var e=new t.constructor(t.name,t.attrs),n=0;n<t.children.length;n++){var s=t.children[n];e.cnode(s.clone?s.clone():s)}return e}},7413:function(t,e,n){"use strict";var s=n(1504);t.exports=function(t,e){for(var n=new s(t,e),r=2;r<arguments.length;r++){var i=arguments[r];i&&n.cnode(i)}return n}},1564:function(t){"use strict";function e(t,e){return t.name===e.name}function n(t,e){var n=t.attrs,s=Object.keys(n),r=s.length;if(r!==Object.keys(e.attrs).length)return!1;for(var i=0,o=r;i<o;i++){var a=s[i],c=n[a];if(null==c||null==e.attrs[a]){if(c!==e.attrs[a])return!1}else if(c.toString()!==e.attrs[a].toString())return!1}return!0}function s(t,e){var n=t.children,s=n.length;if(s!==e.children.length)return!1;for(var r=0,i=s;r<i;r++){var o=n[r];if("string"==typeof o){if(o!==e.children[r])return!1}else if(!o.equals(e.children[r]))return!1}return!0}t.exports.name=e,t.exports.attrs=n,t.exports.children=s,t.exports.equal=function(t,r){return!(!e(t,r)||!n(t,r)||!s(t,r))}},6597:function(t,e){"use strict";var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};function s(t){return n[t]}var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"};function i(t){if("#"===t[1]){var e;if(9===(e="x"===t[2]?parseInt(t.slice(3),16):parseInt(t.slice(2),10))||10===e||13===e||e>=32&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111)return String.fromCodePoint(e);throw new Error("Illegal XML character 0x"+e.toString(16))}if(r[t])return r[t]||t;throw new Error("Illegal XML entity "+t)}e.escapeXML=function(t){return t.replace(/&|<|>|"|'/g,s)},e.unescapeXML=function(t){for(var e="",n=-1,s=-1,r=0;-1!==(n=t.indexOf("&",r))&&-1!==(s=t.indexOf(";",n+1));)e=e+t.substring(r,n)+i(t.substring(n,s+1)),r=s+1;return 0===r?t:e+=t.substring(r)},e.escapeXMLText=function(t){return t.replace(/&|<|>/g,s)},e.unescapeXMLText=function(t){return t.replace(/&(amp|#38|lt|#60|gt|#62);/g,i)}},5672:function(t,e,n){"use strict";var s=n(1504);t.exports.isNode=function(t){return t instanceof s||"string"==typeof t},t.exports.isElement=function(t){return t instanceof s},t.exports.isText=function(t){return"string"==typeof t}},3338:function(t,e,n){"use strict";var s=n(4009);t.exports=function(t,e){var n;n="function"==typeof e?new e:new s(e);var r=null,i=null;if(n.on("tree",function(t){r=t}),n.on("error",function(t){i=t}),n.write(t),n.end(),i)throw i;return r}},6188:function(t,e,n){"use strict";var s=n(158),r=n(3105).EventEmitter,i=n(6597).unescapeXML,o=t.exports=function(){r.call(this);var t,e,n,s,o,a,c,l,u=0,h=0;this._handleTagOpening=function(t,e,n){t?this.emit("endElement",e):(this.emit("startElement",e,n),o&&this.emit("endElement",e))},this.write=function(r){"string"!=typeof r&&(r=r.toString());var d=0;function p(){if("number"==typeof h){var t=r.substring(h,d);return h=void 0,t}}for(t&&(r=t+r,d+=t.length,t=null);d<r.length;d++){if(0===u){var f=r.indexOf("<",d);-1!==f&&d!==f&&(d=f)}else if(8===u){var g=r.indexOf(c,d);-1!==g&&(d=g)}else if(1===u){var m=r.indexOf("--\x3e",d);-1!==m&&(d=m+2)}else if(10===u){var y=r.indexOf("]]>",d);-1!==y&&(d=y+2)}var v=r.charCodeAt(d);switch(u){case 0:if(60===v){var b=p();b&&this.emit("text",i(b)),u=3,h=d+1,n={}}break;case 9:if(93===v&&"]>"===r.substr(d+1,2)){var _=p();_&&this.emit("text",_),u=0}break;case 3:47===v&&h===d?(h=d+1,s=!0):33===v?"[CDATA["===r.substr(d+1,7)?(h=d+8,u=9):(h=void 0,u=1):63===v?(h=void 0,u=2):(v<=32||47===v||62===v)&&(e=p(),d--,u=4);break;case 1:if(62===v){var w=r.charCodeAt(d-1),S=r.charCodeAt(d-2);(45===w&&45===S||93===w&&93===S)&&(u=0)}break;case 2:62===v&&63===r.charCodeAt(d-1)&&(u=0);break;case 4:62===v?(this._handleTagOpening(s,e,n),e=void 0,n=void 0,s=void 0,o=void 0,u=0,h=d+1):47===v?o=!0:v>32&&(h=d,u=5);break;case 5:(v<=32||61===v)&&(l=p(),d--,u=6);break;case 6:61===v&&(u=7);break;case 7:(34===v||39===v)&&(a=v,c=34===v?'"':"'",u=8,h=d+1);break;case 8:if(v===a){var C=i(p());n[l]=C,l=void 0,u=4}}}"number"==typeof h&&h<=r.length&&(t=r.slice(h),h=0)}};s(o,r),o.prototype.end=function(t){t&&this.write(t),this.write=function(){}}},205:function(t){"use strict";t.exports=function t(e,n,s){"number"==typeof n&&(n=" ".repeat(n)),s||(s=1);var r="";return r+="<"+e.name,Object.keys(e.attrs).forEach(function(t){r+=" "+t+'="'+e.attrs[t]+'"'}),e.children.length?(r+=">",e.children.forEach(function(e,i){n&&(r+="\n"+n.repeat(s)),r+="string"==typeof e?e:t(e,n,s+1)}),n&&(r+="\n"+n.repeat(s-1)),r+="</"+e.name+">"):r+="/>",r}},8064:function(t,e,n){"use strict";var s=n(1640),r=n(3338);t.exports=function(){return r(s.apply(null,arguments))}},1640:function(t,e,n){"use strict";var s=n(6597).escapeXML;t.exports=function(){for(var t=arguments[0],e="",n=1;n<arguments.length;n++)e+=t[n-1],e+=s(arguments[n]);return e+t[t.length-1]}},158:function(t){t.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},1553:function(t,e,n){!function(t,e){function n(){}n.prototype.name="ANONYMOUS",n.prototype.clientFirst=!0,n.prototype.response=function(t){return t.trace||""},n.prototype.challenge=function(t){},e.exports=n}(0,t=n.nmd(t))},7698:function(t,e,n){var s,r;s=t=n.nmd(t),r=n(1553),(s.exports=r).Mechanism=r},9099:function(t,e,n){!function(t,e){function n(){}n.prototype.name="PLAIN",n.prototype.clientFirst=!0,n.prototype.response=function(t){var e="";return e+=t.authzid||"",e+="\0",e+=t.username,(e+="\0")+t.password},n.prototype.challenge=function(t){return this},e.exports=n}(0,t=n.nmd(t))},2731:function(t,e,n){var s,r;s=t=n.nmd(t),r=n(9099),(s.exports=r).Mechanism=r},3380:function(t,e,n){!function(t,e){function n(){this._mechs=[]}n.prototype.use=function(t,e){return e||(t=(e=t).prototype.name),this._mechs.push({name:t,mech:e}),this},n.prototype.create=function(t){for(var e=0,n=this._mechs.length;e<n;e++)for(var s=0,r=t.length;s<r;s++){var i=this._mechs[e];if(i.name==t[s])return new i.mech}return null},e.exports=n}(0,t=n.nmd(t))},4615:function(t,e,n){var s,r;s=t=n.nmd(t),r=n(3380),(s.exports=r).Factory=r},776:function(t,e,n){"use strict";function s(t){return"function"==typeof t}let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(i.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},c=Array.isArray||(t=>t&&"number"==typeof t.length);function l(t){return null!==t&&"object"==typeof t}const u=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class h{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:r,_subscriptions:i}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof h)e.remove(this);else if(null!==e)for(let s=0;s<e.length;++s)e[s].remove(this);if(s(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){t=o instanceof u?p(o.errors):[o]}}if(c(i)){let e=-1,n=i.length;for(;++e<n;){const n=i[e];if(l(n))try{n.unsubscribe()}catch(a){t=t||[],a instanceof u?t=t.concat(p(a.errors)):t.push(a)}}}if(t)throw new u(t)}add(t){let e=t;if(!t)return h.EMPTY;switch(typeof t){case"function":e=new h(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof h)){const t=e;e=new h,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof h){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[e]:s.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var d;function p(t){return t.reduce((t,e)=>t.concat(e instanceof u?e.errors:e),[])}h.EMPTY=((d=new h).closed=!0,d);const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class g extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof g?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,t,e,n)}}[f](){return this}static create(t,e,n){const s=new g(t,e,n);return s.syncErrorThrowable=!1,s}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class m extends g{constructor(t,e,n,r){super(),this._parentSubscriber=t;let i,o=this;s(e)?i=e:e&&(i=e.next,n=e.error,r=e.complete,e!==a&&(o=Object.create(e),s(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=n,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;i.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=i;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);i.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(s){return i.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=s,t.syncErrorThrown=!0,!0):(o(s),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const y="function"==typeof Symbol&&Symbol.observable||"@@observable";function v(t){return t}let b=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,r=function(t,e,n){if(t){if(t instanceof g)return t;if(t[f])return t[f]()}return t||e||n?new g(t,e,n):new g(a)}(t,e,n);if(r.add(s?s.call(r,this.source):this.source||i.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),i.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){i.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:s}=t;if(e||s)return!1;t=n&&n instanceof g?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,n)=>{let s;s=this.subscribe(e=>{try{t(e)}catch(r){n(r),s&&s.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[y](){return this}pipe(...t){return 0===t.length?this:function(t){return 0===t.length?v:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}(t)(this)}toPromise(t){return new(t=_(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=i.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const w=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class S extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class C extends g{constructor(t){super(t),this.destination=t}}let x=(()=>{class t extends b{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new C(this)}lift(t){const e=new E(this,this);return e.operator=t,e}next(t){if(this.closed)throw new w;if(!this.isStopped){const{observers:e}=this,n=e.length,s=e.slice();for(let r=0;r<n;r++)s[r].next(t)}}error(t){if(this.closed)throw new w;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,s=e.slice();for(let r=0;r<n;r++)s[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new w;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let s=0;s<e;s++)n[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new w;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new w;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new S(this,t))}asObservable(){const t=new b;return t.source=this,t}}return t.create=(t,e)=>new E(t,e),t})();class E extends x{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function k(t){return t&&"function"==typeof t.schedule}function T(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new I(t,e))}}class I{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new O(t,this.project,this.thisArg))}}class O extends g{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const M=t=>e=>{for(let n=0,s=t.length;n<s&&!e.closed;n++)e.next(t[n]);e.complete()},A="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",P=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function R(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const N=t=>{if(t&&"function"==typeof t[y])return(t=>e=>{const n=t[y]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(P(t))return M(t);if(R(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e))(t);if(t&&"function"==typeof t[A])return(t=>e=>{const n=t[A]();for(;;){let t;try{t=n.next()}catch(s){return e.error(s),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const e=`You provided ${l(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}};function D(t,e){return new b(n=>{const s=new h;let r=0;return s.add(e.schedule(function(){r!==t.length?(n.next(t[r++]),n.closed||s.add(this.schedule())):n.complete()})),s})}function L(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[y]}(t))return function(t,e){return new b(n=>{const s=new h;return s.add(e.schedule(()=>{const r=t[y]();s.add(r.subscribe({next(t){s.add(e.schedule(()=>n.next(t)))},error(t){s.add(e.schedule(()=>n.error(t)))},complete(){s.add(e.schedule(()=>n.complete()))}}))})),s})}(t,e);if(R(t))return function(t,e){return new b(n=>{const s=new h;return s.add(e.schedule(()=>t.then(t=>{s.add(e.schedule(()=>{n.next(t),s.add(e.schedule(()=>n.complete()))}))},t=>{s.add(e.schedule(()=>n.error(t)))}))),s})}(t,e);if(P(t))return D(t,e);if(function(t){return t&&"function"==typeof t[A]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new b(n=>{const s=new h;let r;return s.add(()=>{r&&"function"==typeof r.return&&r.return()}),s.add(e.schedule(()=>{r=t[A](),s.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=r.next();t=n.value,e=n.done}catch(s){return void n.error(s)}e?n.complete():(n.next(t),this.schedule())}))})),s})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof b?t:new b(N(t))}class j extends g{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class F extends g{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function $(t,e){if(!e.closed)return t instanceof b?t.subscribe(e):N(t)(e)}function V(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(V((n,s)=>L(t(n,s)).pipe(T((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new U(t,this.project,this.concurrent))}}class U extends F{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(s){return void this.destination.error(s)}this.active++,this._innerSub(e)}_innerSub(t){const e=new j(this),n=this.destination;n.add(e);const s=$(t,e);s!==e&&n.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function z(t=Number.POSITIVE_INFINITY){return V(v,t)}function H(t,e){return e?D(t,e):new b(M(t))}function B(...t){let e=Number.POSITIVE_INFINITY,n=null,s=t[t.length-1];return k(s)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof s&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof b?t[0]:z(e)(H(t,n))}function G(){return function(t){return t.lift(new W(t))}}class W{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const s=new Z(t,n),r=e.subscribe(s);return s.closed||(s.connection=n.connect()),r}}class Z extends g{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,s=t._connection;this.connection=null,s&&(!n||s===n)&&s.unsubscribe()}}class Q extends b{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new Y(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return G()(this)}}const J=(()=>{const t=Q.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Y extends C{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function K(){return new x}function X(){return t=>G()(function(t,e){return function(e){let n;n="function"==typeof t?t:function(){return t};const s=Object.create(e,J);return s.source=e,s.subjectFactory=n,s}}(K)(t))}function tt(t){for(let e in t)if(t[e]===tt)return e;throw Error("Could not find renamed property on target object.")}function et(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function nt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(nt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function st(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const rt=tt({__forward_ref__:tt});function it(t){return t.__forward_ref__=it,t.toString=function(){return nt(this())},t}function ot(t){return at(t)?t():t}function at(t){return"function"==typeof t&&t.hasOwnProperty(rt)&&t.__forward_ref__===it}class ct extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function lt(t){return"string"==typeof t?t:null==t?"":String(t)}function ut(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():lt(t)}function ht(t,e){const n=e?` in ${e}`:"";throw new ct("201",`No provider for ${ut(t)} found${n}`)}function dt(t,e){null==t&&function(t,e,n,s){throw new Error(`ASSERTION ERROR: ${t}`+(null==s?"":` [Expected=> ${n} ${s} ${e} <=Actual]`))}(e,t,null,"!=")}function pt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ft(t){return{providers:t.providers||[],imports:t.imports||[]}}function gt(t){return mt(t,vt)||mt(t,_t)}function mt(t,e){return t.hasOwnProperty(e)?t[e]:null}function yt(t){return t&&(t.hasOwnProperty(bt)||t.hasOwnProperty(wt))?t[bt]:null}const vt=tt({"\u0275prov":tt}),bt=tt({"\u0275inj":tt}),_t=tt({ngInjectableDef:tt}),wt=tt({ngInjectorDef:tt});var St=(()=>((St=St||{})[St.Default=0]="Default",St[St.Host=1]="Host",St[St.Self=2]="Self",St[St.SkipSelf=4]="SkipSelf",St[St.Optional=8]="Optional",St))();let Ct;function xt(t){const e=Ct;return Ct=t,e}function Et(t,e,n){const s=gt(t);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:n&St.Optional?null:void 0!==e?e:void ht(nt(t),"Injector")}function kt(t){return{toString:t}.toString()}var Tt=(()=>((Tt=Tt||{})[Tt.OnPush=0]="OnPush",Tt[Tt.Default=1]="Default",Tt))(),It=(()=>((It=It||{})[It.Emulated=0]="Emulated",It[It.None=2]="None",It[It.ShadowDom=3]="ShadowDom",It))();const Ot="undefined"!=typeof globalThis&&globalThis,Mt="undefined"!=typeof window&&window,At="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt=Ot||"undefined"!=typeof global&&global||Mt||At,Rt={},Nt=[],Dt=tt({"\u0275cmp":tt}),Lt=tt({"\u0275dir":tt}),jt=tt({"\u0275pipe":tt}),Ft=tt({"\u0275mod":tt}),$t=tt({"\u0275loc":tt}),Vt=tt({"\u0275fac":tt}),qt=tt({__NG_ELEMENT_ID__:tt});let Ut=0;function zt(t){return kt(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Tt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Nt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||It.Emulated,id:"c",styles:t.styles||Nt,_:null,setInput:null,schemas:t.schemas||null,tView:null},s=t.directives,r=t.features,i=t.pipes;return n.id+=Ut++,n.inputs=Zt(t.inputs,e),n.outputs=Zt(t.outputs),r&&r.forEach(t=>t(n)),n.directiveDefs=s?()=>("function"==typeof s?s():s).map(Ht):null,n.pipeDefs=i?()=>("function"==typeof i?i():i).map(Bt):null,n})}function Ht(t){return Yt(t)||function(t){return t[Lt]||null}(t)}function Bt(t){return function(t){return t[jt]||null}(t)}const Gt={};function Wt(t){return kt(()=>{const e={type:t.type,bootstrap:t.bootstrap||Nt,declarations:t.declarations||Nt,imports:t.imports||Nt,exports:t.exports||Nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Gt[t.id]=t.type),e})}function Zt(t,e){if(null==t)return Rt;const n={};for(const s in t)if(t.hasOwnProperty(s)){let r=t[s],i=r;Array.isArray(r)&&(i=r[1],r=r[0]),n[r]=s,e&&(e[r]=i)}return n}const Qt=zt;function Jt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Yt(t){return t[Dt]||null}function Kt(t,e){const n=t[Ft]||null;if(!n&&!0===e)throw new Error(`Type ${nt(t)} does not have '\u0275mod' property.`);return n}function Xt(t){return Array.isArray(t)&&"object"==typeof t[1]}function te(t){return Array.isArray(t)&&!0===t[1]}function ee(t){return 0!=(8&t.flags)}function ne(t){return 2==(2&t.flags)}function se(t){return 1==(1&t.flags)}function re(t){return null!==t.template}function ie(t){return 0!=(512&t[2])}function oe(t,e){return t.hasOwnProperty(Vt)?t[Vt]:null}class ae{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ce(){return le}function le(t){return t.type.prototype.ngOnChanges&&(t.setInput=he),ue}function ue(){const t=pe(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Rt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function he(t,e,n,s){const r=pe(t)||function(t,e){return t[de]=e}(t,{previous:Rt,current:null}),i=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[n],c=o[a];i[a]=new ae(c&&c.currentValue,e,o===Rt),t[s]=e}ce.ngInherit=!0;const de="__ngSimpleChanges__";function pe(t){return t[de]||null}let fe;function ge(){return void 0!==fe?fe:"undefined"!=typeof document?document:void 0}function me(t){return!!t.listen}const ye={createRenderer:(t,e)=>ge()};function ve(t){for(;Array.isArray(t);)t=t[0];return t}function be(t,e){return ve(e[t])}function _e(t,e){return ve(e[t.index])}function we(t,e){return t.data[e]}function Se(t,e){return t[e]}function Ce(t,e){const n=e[t];return Xt(n)?n:n[0]}function xe(t){return 4==(4&t[2])}function Ee(t){return 128==(128&t[2])}function ke(t,e){return null==e?null:t[e]}function Te(t){t[18]=0}function Ie(t,e){t[5]+=e;let n=t,s=t[3];for(;null!==s&&(1===e&&1===n[5]||-1===e&&0===n[5]);)s[5]+=e,n=s,s=s[3]}const Oe={lFrame:Xe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Me(){return Oe.bindingsEnabled}function Ae(){return Oe.lFrame.lView}function Pe(){return Oe.lFrame.tView}function Re(t){return Oe.lFrame.contextLView=t,t[8]}function Ne(){let t=De();for(;null!==t&&64===t.type;)t=t.parent;return t}function De(){return Oe.lFrame.currentTNode}function Le(t,e){const n=Oe.lFrame;n.currentTNode=t,n.isParent=e}function je(){return Oe.lFrame.isParent}function Fe(){Oe.lFrame.isParent=!1}function $e(){return Oe.isInCheckNoChangesMode}function Ve(t){Oe.isInCheckNoChangesMode=t}function qe(){const t=Oe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ue(){return Oe.lFrame.bindingIndex}function ze(){return Oe.lFrame.bindingIndex++}function He(t){const e=Oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Be(t,e){const n=Oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ge(e)}function Ge(t){Oe.lFrame.currentDirectiveIndex=t}function We(){return Oe.lFrame.currentQueryIndex}function Ze(t){Oe.lFrame.currentQueryIndex=t}function Qe(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Je(t,e,n){if(n&St.SkipSelf){let s=e,r=t;for(;!(s=s.parent,null!==s||n&St.Host||(s=Qe(r),null===s||(r=r[15],10&s.type))););if(null===s)return!1;e=s,t=r}const s=Oe.lFrame=Ke();return s.currentTNode=e,s.lView=t,!0}function Ye(t){const e=Ke(),n=t[1];Oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ke(){const t=Oe.lFrame,e=null===t?null:t.child;return null===e?Xe(t):e}function Xe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function tn(){const t=Oe.lFrame;return Oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const en=tn;function nn(){const t=tn();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function sn(){return Oe.lFrame.selectedIndex}function rn(t){Oe.lFrame.selectedIndex=t}function on(){const t=Oe.lFrame;return we(t.tView,t.selectedIndex)}function an(t,e){for(let n=e.directiveStart,s=e.directiveEnd;n<s;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:r,ngAfterViewInit:i,ngAfterViewChecked:o,ngOnDestroy:a}=e;s&&(t.contentHooks||(t.contentHooks=[])).push(-n,s),r&&((t.contentHooks||(t.contentHooks=[])).push(n,r),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,r)),i&&(t.viewHooks||(t.viewHooks=[])).push(-n,i),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function cn(t,e,n){hn(t,e,3,n)}function ln(t,e,n,s){(3&t[2])===n&&hn(t,e,n,s)}function un(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function hn(t,e,n,s){const r=null!=s?s:-1,i=e.length-1;let o=0;for(let a=void 0!==s?65535&t[18]:0;a<i;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=s&&o>=s)break}else e[a]<0&&(t[18]+=65536),(o<r||-1==r)&&(dn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function dn(t,e,n,s){const r=n[s]<0,i=n[s+1],o=t[r?-n[s]:n[s]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{i.call(o)}finally{}}}else try{i.call(o)}finally{}}class pn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function fn(t,e,n){const s=me(t);let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],a=n[r++],c=n[r++];s?t.setAttribute(e,a,c,o):e.setAttributeNS(o,a,c)}else{const o=i,a=n[++r];mn(o)?s&&t.setProperty(e,o,a):s?t.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function gn(t){return 3===t||4===t||6===t}function mn(t){return 64===t.charCodeAt(0)}function yn(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let s=0;s<e.length;s++){const r=e[s];"number"==typeof r?n=r:0===n||vn(t,n,r,null,-1===n||2===n?e[++s]:null)}}return t}function vn(t,e,n,s,r){let i=0,o=t.length;if(-1===e)o=-1;else for(;i<t.length;){const n=t[i++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=i-1;break}}}for(;i<t.length;){const e=t[i];if("number"==typeof e)break;if(e===n){if(null===s)return void(null!==r&&(t[i+1]=r));if(s===t[i+1])return void(t[i+2]=r)}i++,null!==s&&i++,null!==r&&i++}-1!==o&&(t.splice(o,0,e),i=o+1),t.splice(i++,0,n),null!==s&&t.splice(i++,0,s),null!==r&&t.splice(i++,0,r)}function bn(t){return-1!==t}function _n(t){return 32767&t}function wn(t,e){let n=function(t){return t>>16}(t),s=e;for(;n>0;)s=s[15],n--;return s}let Sn=!0;function Cn(t){const e=Sn;return Sn=t,e}let xn=0;function En(t,e){const n=Tn(t,e);if(-1!==n)return n;const s=e[1];s.firstCreatePass&&(t.injectorIndex=e.length,kn(s.data,t),kn(e,null),kn(s.blueprint,null));const r=In(t,e),i=t.injectorIndex;if(bn(r)){const t=_n(r),n=wn(r,e),s=n[1].data;for(let r=0;r<8;r++)e[i+r]=n[t+r]|s[t+r]}return e[i+8]=r,i}function kn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Tn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function In(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,s=null,r=e;for(;null!==r;){const t=r[1],e=t.type;if(s=2===e?t.declTNode:1===e?r[6]:null,null===s)return-1;if(n++,r=r[15],-1!==s.injectorIndex)return s.injectorIndex|n<<16}return-1}function On(t,e,n){!function(t,e,n){let s;"string"==typeof n?s=n.charCodeAt(0)||0:n.hasOwnProperty(qt)&&(s=n[qt]),null==s&&(s=n[qt]=xn++);const r=255&s;e.data[t+(r>>5)]|=1<<r}(t,e,n)}function Mn(t,e,n){if(n&St.Optional)return t;ht(e,"NodeInjector")}function An(t,e,n,s){if(n&St.Optional&&void 0===s&&(s=null),0==(n&(St.Self|St.Host))){const r=t[9],i=xt(void 0);try{return r?r.get(e,s,n&St.Optional):Et(e,s,n&St.Optional)}finally{xt(i)}}return Mn(s,e,n)}function Pn(t,e,n,s=St.Default,r){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(qt)?t[qt]:void 0;return"number"==typeof e?e>=0?255&e:Nn:e}(n);if("function"==typeof i){if(!Je(e,t,s))return s&St.Host?Mn(r,n,s):An(e,n,s,r);try{const t=i(s);if(null!=t||s&St.Optional)return t;ht(n)}finally{en()}}else if("number"==typeof i){let r=null,o=Tn(t,e),a=-1,c=s&St.Host?e[16][6]:null;for((-1===o||s&St.SkipSelf)&&(a=-1===o?In(t,e):e[o+8],-1!==a&&$n(s,!1)?(r=e[1],o=_n(a),e=wn(a,e)):o=-1);-1!==o;){const t=e[1];if(Fn(i,o,t.data)){const t=Dn(o,e,n,r,s,c);if(t!==Rn)return t}a=e[o+8],-1!==a&&$n(s,e[1].data[o+8]===c)&&Fn(i,o,e)?(r=t,o=_n(a),e=wn(a,e)):o=-1}}}return An(e,n,s,r)}const Rn={};function Nn(){return new Vn(Ne(),Ae())}function Dn(t,e,n,s,r,i){const o=e[1],a=o.data[t+8],c=Ln(a,o,n,null==s?ne(a)&&Sn:s!=o&&0!=(3&a.type),r&St.Host&&i===a);return null!==c?jn(e,o,c,a):Rn}function Ln(t,e,n,s,r){const i=t.providerIndexes,o=e.data,a=1048575&i,c=t.directiveStart,l=i>>20,u=r?a+l:t.directiveEnd;for(let h=s?a:a+l;h<u;h++){const t=o[h];if(h<c&&n===t||h>=c&&t.type===n)return h}if(r){const t=o[c];if(t&&re(t)&&t.type===n)return c}return null}function jn(t,e,n,s){let r=t[n];const i=e.data;if(function(t){return t instanceof pn}(r)){const o=r;o.resolving&&function(t,e){throw new ct("200",`Circular dependency in DI detected for ${t}`)}(ut(i[n]));const a=Cn(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?xt(o.injectImpl):null;Je(t,s,St.Default);try{r=t[n]=o.factory(void 0,i,t,s),e.firstCreatePass&&n>=s.directiveStart&&function(t,e,n){const{ngOnChanges:s,ngOnInit:r,ngDoCheck:i}=e.type.prototype;if(s){const s=le(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,r),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i))}(n,i[n],e)}finally{null!==c&&xt(c),Cn(a),o.resolving=!1,en()}}return r}function Fn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function $n(t,e){return!(t&St.Self||t&St.Host&&e)}class Vn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Pn(this._tNode,this._lView,t,void 0,e)}}function qn(t){return kt(()=>{const e=t.prototype.constructor,n=e[Vt]||Un(e),s=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==s;){const t=r[Vt]||Un(r);if(t&&t!==n)return t;r=Object.getPrototypeOf(r)}return t=>new t})}function Un(t){return at(t)?()=>{const e=Un(ot(t));return e&&e()}:oe(t)}const zn="__parameters__";function Hn(t,e,n){return kt(()=>{const s=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function r(...t){if(this instanceof r)return s.apply(this,t),this;const e=new r(...t);return n.annotation=e,n;function n(t,n,s){const r=t.hasOwnProperty(zn)?t[zn]:Object.defineProperty(t,zn,{value:[]})[zn];for(;r.length<=s;)r.push(null);return(r[s]=r[s]||[]).push(e),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class Bn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=pt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Gn=new Bn("AnalyzeForEntryComponents"),Wn=Function;function Zn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let s=t[n];Array.isArray(s)?(e===t&&(e=t.slice(0,n)),Zn(s,e)):e!==t&&e.push(s)}return e}function Qn(t,e){t.forEach(t=>Array.isArray(t)?Qn(t,e):e(t))}function Jn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Yn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Kn(t,e){const n=[];for(let s=0;s<t;s++)n.push(e);return n}function Xn(t,e,n){let s=es(t,e);return s>=0?t[1|s]=n:(s=~s,function(t,e,n,s){let r=t.length;if(r==e)t.push(n,s);else if(1===r)t.push(s,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=s}}(t,s,e,n)),s}function ts(t,e){const n=es(t,e);if(n>=0)return t[1|n]}function es(t,e){return function(t,e,n){let s=0,r=t.length>>n;for(;r!==s;){const i=s+(r-s>>1),o=t[i<<n];if(e===o)return i<<n;o>e?r=i:s=i+1}return~(r<<n)}(t,e,1)}const ns={},ss="__NG_DI_FLAG__",rs="ngTempTokenPath",is=/\n/gm,os="__source",as=tt({provide:String,useValue:tt});let cs;function ls(t){const e=cs;return cs=t,e}function us(t,e=St.Default){if(void 0===cs)throw new Error("inject() must be called from an injection context");return null===cs?Et(t,void 0,e):cs.get(t,e&St.Optional?null:void 0,e)}function hs(t,e=St.Default){return(Ct||us)(ot(t),e)}function ds(t){const e=[];for(let n=0;n<t.length;n++){const s=ot(t[n]);if(Array.isArray(s)){if(0===s.length)throw new Error("Arguments array must have arguments.");let t,n=St.Default;for(let e=0;e<s.length;e++){const r=s[e],i=fs(r);"number"==typeof i?-1===i?t=r.token:n|=i:t=r}e.push(hs(t,n))}else e.push(hs(s))}return e}function ps(t,e){return t[ss]=e,t.prototype[ss]=e,t}function fs(t){return t[ss]}function gs(t,e,n,s){const r=t[rs];throw e[os]&&r.unshift(e[os]),t.message=function(t,e,n,s=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=nt(e);if(Array.isArray(e))r=e.map(nt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let s=e[n];t.push(n+":"+("string"==typeof s?JSON.stringify(s):nt(s)))}r=`{${t.join(", ")}}`}return`${n}${s?"("+s+")":""}[${r}]: ${t.replace(is,"\n  ")}`}("\n"+t.message,r,n,s),t.ngTokenPath=r,t[rs]=null,t}const ms=ps(Hn("Inject",t=>({token:t})),-1),ys=ps(Hn("Optional"),8),vs=ps(Hn("SkipSelf"),4);let bs,_s;function ws(t){var e;return(null===(e=function(){if(void 0===bs&&(bs=null,Pt.trustedTypes))try{bs=Pt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return bs}())||void 0===e?void 0:e.createHTML(t))||t}function Ss(t){var e;return(null===(e=function(){if(void 0===_s&&(_s=null,Pt.trustedTypes))try{_s=Pt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return _s}())||void 0===e?void 0:e.createHTML(t))||t}class Cs{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function xs(t){return t instanceof Cs?t.changingThisBreaksApplicationSecurity:t}function Es(t,e){const n=function(t){return t instanceof Cs&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}class ks{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(ws(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Ts{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=ws(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=ws(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let s=e.length-1;0<s;s--){const n=e.item(s).name;("xmlns:ns1"===n||0===n.indexOf("ns1:"))&&t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Is=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Os=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ms(t){return(t=String(t)).match(Is)||t.match(Os)?t:"unsafe:"+t}function As(t){return(t=String(t)).split(",").map(t=>Ms(t.trim())).join(", ")}function Ps(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Rs(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Ns=Ps("area,br,col,hr,img,wbr"),Ds=Ps("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ls=Ps("rp,rt"),js=Rs(Ns,Rs(Ds,Ps("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rs(Ls,Ps("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rs(Ls,Ds)),Fs=Ps("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$s=Ps("srcset"),Vs=Rs(Fs,$s,Ps("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ps("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),qs=Ps("script,style,template");class Us{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!js.hasOwnProperty(e))return this.sanitizedSomething=!0,!qs.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let s=0;s<n.length;s++){const t=n.item(s),e=t.name,r=e.toLowerCase();if(!Vs.hasOwnProperty(r)){this.sanitizedSomething=!0;continue}let i=t.value;Fs[r]&&(i=Ms(i)),$s[r]&&(i=As(i)),this.buf.push(" ",e,'="',Bs(i),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();js.hasOwnProperty(e)&&!Ns.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Bs(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const zs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hs=/([^\#-~ |!])/g;function Bs(t){return t.replace(/&/g,"&amp;").replace(zs,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Hs,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Gs;function Ws(t,e){let n=null;try{Gs=Gs||function(t){const e=new Ts(t);return function(){try{return!!(new window.DOMParser).parseFromString(ws(""),"text/html")}catch(t){return!1}}()?new ks(e):e}(t);let s=e?String(e):"";n=Gs.getInertBodyElement(s);let r=5,i=s;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,s=i,i=n.innerHTML,n=Gs.getInertBodyElement(s)}while(s!==i);return ws((new Us).sanitizeChildren(Zs(n)||n))}finally{if(n){const t=Zs(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Zs(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Qs=(()=>((Qs=Qs||{})[Qs.NONE=0]="NONE",Qs[Qs.HTML=1]="HTML",Qs[Qs.STYLE=2]="STYLE",Qs[Qs.SCRIPT=3]="SCRIPT",Qs[Qs.URL=4]="URL",Qs[Qs.RESOURCE_URL=5]="RESOURCE_URL",Qs))();function Js(t){const e=Ks();return e?Ss(e.sanitize(Qs.HTML,t)||""):Es(t,"HTML")?Ss(xs(t)):Ws(ge(),lt(t))}function Ys(t){const e=Ks();return e?e.sanitize(Qs.URL,t)||"":Es(t,"URL")?xs(t):Ms(lt(t))}function Ks(){const t=Ae();return t&&t[12]}const Xs="__ngContext__";function tr(t,e){t[Xs]=e}function er(t){const e=function(t){return t[Xs]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function nr(t){return t.ngOriginalError}function sr(t,...e){t.error(...e)}class rr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),s=function(t){return t&&t.ngErrorLogger||sr}(t);s(this._console,"ERROR",t),e&&s(this._console,"ORIGINAL ERROR",e),n&&s(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(nr(t)):null}_findOriginalError(t){let e=t&&nr(t);for(;e&&nr(e);)e=nr(e);return e||null}}const ir=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Pt))();function or(t){return t instanceof Function?t():t}var ar=(()=>((ar=ar||{})[ar.Important=1]="Important",ar[ar.DashCase=2]="DashCase",ar))();function cr(t,e){return undefined(t,e)}function lr(t){const e=t[3];return te(e)?e[3]:e}function ur(t){return dr(t[13])}function hr(t){return dr(t[4])}function dr(t){for(;null!==t&&!te(t);)t=t[4];return t}function pr(t,e,n,s,r){if(null!=s){let i,o=!1;te(s)?i=s:Xt(s)&&(o=!0,s=s[0]);const a=ve(s);0===t&&null!==n?null==r?wr(e,n,a):_r(e,n,a,r||null,!0):1===t&&null!==n?_r(e,n,a,r||null,!0):2===t?function(t,e,n){const s=Cr(t,e);s&&function(t,e,n,s){me(t)?t.removeChild(e,n,s):e.removeChild(n)}(t,s,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=i&&function(t,e,n,s,r){const i=n[7];i!==ve(n)&&pr(e,t,s,i,r);for(let o=10;o<n.length;o++){const r=n[o];Ar(r[1],r,t,e,s,i)}}(e,t,i,n,r)}}function fr(t,e,n){return me(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function gr(t,e){const n=t[9],s=n.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,Ie(r,-1)),n.splice(s,1)}function mr(t,e){if(t.length<=10)return;const n=10+e,s=t[n];if(s){const r=s[17];null!==r&&r!==t&&gr(r,s),e>0&&(t[n-1][4]=s[4]);const i=Yn(t,10+e);!function(t,e){Ar(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(s[1],s);const o=i[19];null!==o&&o.detachView(i[1]),s[3]=null,s[4]=null,s[2]&=-129}return s}function yr(t,e){if(!(256&e[2])){const n=e[11];me(n)&&n.destroyNode&&Ar(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return vr(t[1],t);for(;e;){let n=null;if(Xt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Xt(e)&&vr(e[1],e),e=e[3];null===e&&(e=t),Xt(e)&&vr(e[1],e),n=e&&e[4]}e=n}}(e)}}function vr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let s=0;s<n.length;s+=2){const t=e[n[s]];if(!(t instanceof pn)){const e=n[s+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const s=t[e[n]],r=e[n+1];try{r.call(s)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,s=e[7];let r=-1;if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const t=n[i+1],o="function"==typeof t?t(e):ve(e[t]),a=s[r=n[i+2]],c=n[i+3];"boolean"==typeof c?o.removeEventListener(n[i],a,c):c>=0?s[r=c]():s[r=-c].unsubscribe(),i+=2}else{const t=s[r=n[i+1]];n[i].call(t)}if(null!==s){for(let t=r+1;t<s.length;t++)s[t]();e[7]=null}}(t,e),1===e[1].type&&me(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&te(e[3])){n!==e[3]&&gr(n,e);const s=e[19];null!==s&&s.detachView(t)}}}function br(t,e,n){return function(t,e,n){let s=e;for(;null!==s&&40&s.type;)s=(e=s).parent;if(null===s)return n[0];if(2&s.flags){const e=t.data[s.directiveStart].encapsulation;if(e===It.None||e===It.Emulated)return null}return _e(s,n)}(t,e.parent,n)}function _r(t,e,n,s,r){me(t)?t.insertBefore(e,n,s,r):e.insertBefore(n,s,r)}function wr(t,e,n){me(t)?t.appendChild(e,n):e.appendChild(n)}function Sr(t,e,n,s,r){null!==s?_r(t,e,n,s,r):wr(t,e,n)}function Cr(t,e){return me(t)?t.parentNode(e):e.parentNode}function xr(t,e,n){return Er(t,e,n)}let Er=function(t,e,n){return 40&t.type?_e(t,n):null};function kr(t,e,n,s){const r=br(t,s,e),i=e[11],o=xr(s.parent||e[6],s,e);if(null!=r)if(Array.isArray(n))for(let a=0;a<n.length;a++)Sr(i,r,n[a],o,!1);else Sr(i,r,n,o,!1)}function Tr(t,e){if(null!==e){const n=e.type;if(3&n)return _e(e,t);if(4&n)return Or(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Tr(t,n);{const n=t[e.index];return te(n)?Or(-1,n):ve(n)}}if(32&n)return cr(e,t)()||ve(t[e.index]);{const n=Ir(t,e);return null!==n?Array.isArray(n)?n[0]:Tr(lr(t[16]),n):Tr(t,e.next)}}return null}function Ir(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Or(t,e){const n=10+t+1;if(n<e.length){const t=e[n],s=t[1].firstChild;if(null!==s)return Tr(t,s)}return e[7]}function Mr(t,e,n,s,r,i,o){for(;null!=n;){const a=s[n.index],c=n.type;if(o&&0===e&&(a&&tr(ve(a),s),n.flags|=4),64!=(64&n.flags))if(8&c)Mr(t,e,n.child,s,r,i,!1),pr(e,t,r,a,i);else if(32&c){const o=cr(n,s);let c;for(;c=o();)pr(e,t,r,c,i);pr(e,t,r,a,i)}else 16&c?Pr(t,e,s,n,r,i):pr(e,t,r,a,i);n=o?n.projectionNext:n.next}}function Ar(t,e,n,s,r,i){Mr(n,s,t.firstChild,e,r,i,!1)}function Pr(t,e,n,s,r,i){const o=n[16],a=o[6].projection[s.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)pr(e,t,r,a[c],i);else Mr(t,e,a,o[3],r,i,!0)}function Rr(t,e,n){me(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Nr(t,e,n){me(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Dr(t,e,n){let s=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const n=e.length;if(r+n===s||t.charCodeAt(r+n)<=32)return r}n=r+1}}const Lr="ng-template";function jr(t,e,n){let s=0;for(;s<t.length;){let r=t[s++];if(n&&"class"===r){if(r=t[s],-1!==Dr(r.toLowerCase(),e,0))return!0}else if(1===r){for(;s<t.length&&"string"==typeof(r=t[s++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function Fr(t){return 4===t.type&&t.value!==Lr}function $r(t,e,n){return e===(4!==t.type||n?t.value:Lr)}function Vr(t,e,n){let s=4;const r=t.attrs||[],i=function(t){for(let e=0;e<t.length;e++)if(gn(t[e]))return e;return t.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&s){if(s=2|1&s,""!==c&&!$r(t,c,n)||""===c&&1===e.length){if(qr(s))return!1;o=!0}}else{const l=8&s?c:e[++a];if(8&s&&null!==t.attrs){if(!jr(t.attrs,l,n)){if(qr(s))return!1;o=!0}continue}const u=Ur(8&s?"class":c,r,Fr(t),n);if(-1===u){if(qr(s))return!1;o=!0;continue}if(""!==l){let t;t=u>i?"":r[u+1].toLowerCase();const e=8&s?t:null;if(e&&-1!==Dr(e,l,0)||2&s&&l!==t){if(qr(s))return!1;o=!0}}}}else{if(!o&&!qr(s)&&!qr(c))return!1;if(o&&qr(c))continue;o=!1,s=c|1&s}}return qr(s)||o}function qr(t){return 0==(1&t)}function Ur(t,e,n,s){if(null===e)return-1;let r=0;if(s||!n){let n=!1;for(;r<e.length;){const s=e[r];if(s===t)return r;if(3===s||6===s)n=!0;else{if(1===s||2===s){let t=e[++r];for(;"string"==typeof t;)t=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const s=t[n];if("number"==typeof s)return-1;if(s===e)return n;n++}return-1}(e,t)}function zr(t,e,n=!1){for(let s=0;s<e.length;s++)if(Vr(t,e[s],n))return!0;return!1}function Hr(t,e){t:for(let n=0;n<e.length;n++){const s=e[n];if(t.length===s.length){for(let e=0;e<t.length;e++)if(t[e]!==s[e])continue t;return!0}}return!1}function Br(t,e){return t?":not("+e.trim()+")":e}function Gr(t){let e=t[0],n=1,s=2,r="",i=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&s){const e=t[++n];r+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&s?r+="."+o:4&s&&(r+=" "+o);else""!==r&&!qr(o)&&(e+=Br(i,r),r=""),s=o,i=i||!qr(s);n++}return""!==r&&(e+=Br(i,r)),e}const Wr={};function Zr(t){Qr(Pe(),Ae(),sn()+t,$e())}function Qr(t,e,n,s){if(!s)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&cn(e,s,n)}else{const s=t.preOrderHooks;null!==s&&ln(e,s,0,n)}rn(n)}function Jr(t,e){return t<<17|e<<2}function Yr(t){return t>>17&32767}function Kr(t){return 2|t}function Xr(t){return(131068&t)>>2}function ti(t,e){return-131069&t|e<<2}function ei(t){return 1|t}function ni(t,e){const n=t.contentQueries;if(null!==n)for(let s=0;s<n.length;s+=2){const r=n[s],i=n[s+1];if(-1!==i){const n=t.data[i];Ze(r),n.contentQueries(2,e[i],i)}}}function si(t,e,n,s,r,i,o,a,c,l){const u=e.blueprint.slice();return u[0]=r,u[2]=140|s,Te(u),u[3]=u[15]=t,u[8]=n,u[10]=o||t&&t[10],u[11]=a||t&&t[11],u[12]=c||t&&t[12]||null,u[9]=l||t&&t[9]||null,u[6]=i,u[16]=2==e.type?t[16]:u,u}function ri(t,e,n,s,r){let i=t.data[e];if(null===i)i=function(t,e,n,s,r){const i=De(),o=je(),a=t.data[e]=function(t,e,n,s,r,i){return{type:n,index:s,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,n,e,s,r);return null===t.firstChild&&(t.firstChild=a),null!==i&&(o?null==i.child&&null!==a.parent&&(i.child=a):null===i.next&&(i.next=a)),a}(t,e,n,s,r),Oe.lFrame.inI18n&&(i.flags|=64);else if(64&i.type){i.type=n,i.value=s,i.attrs=r;const t=function(){const t=Oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===t?-1:t.injectorIndex}return Le(i,!0),i}function ii(t,e,n,s){if(0===n)return-1;const r=e.length;for(let i=0;i<n;i++)e.push(s),t.blueprint.push(s),t.data.push(null);return r}function oi(t,e,n){Ye(e);try{const s=t.viewQuery;null!==s&&ji(1,s,n);const r=t.template;null!==r&&li(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ni(t,e),t.staticViewQueries&&ji(2,t.viewQuery,n);const i=t.components;null!==i&&function(t,e){for(let n=0;n<e.length;n++)Pi(t,e[n])}(e,i)}catch(s){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),s}finally{e[2]&=-5,nn()}}function ai(t,e,n,s){const r=e[2];if(256==(256&r))return;Ye(e);const i=$e();try{Te(e),function(t){Oe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&li(t,e,n,2,s);const o=3==(3&r);if(!i)if(o){const n=t.preOrderCheckHooks;null!==n&&cn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ln(e,n,0,null),un(e,0)}if(function(t){for(let e=ur(t);null!==e;e=hr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],s=n[3];0==(1024&n[2])&&Ie(s,1),n[2]|=1024}}}(e),function(t){for(let e=ur(t);null!==e;e=hr(e))for(let t=10;t<e.length;t++){const n=e[t],s=n[1];Ee(n)&&ai(s,n,s.template,n[8])}}(e),null!==t.contentQueries&&ni(t,e),!i)if(o){const n=t.contentCheckHooks;null!==n&&cn(e,n)}else{const n=t.contentHooks;null!==n&&ln(e,n,1),un(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const s=n[t];if(s<0)rn(~s);else{const r=s,i=n[++t],o=n[++t];Be(i,r),o(2,e[r])}}}finally{rn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Mi(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&ji(2,c,s),!i)if(o){const n=t.viewCheckHooks;null!==n&&cn(e,n)}else{const n=t.viewHooks;null!==n&&ln(e,n,2),un(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ie(e[3],-1))}finally{nn()}}function ci(t,e,n,s){const r=e[10],i=!$e(),o=xe(e);try{i&&!o&&r.begin&&r.begin(),o&&oi(t,e,s),ai(t,e,n,s)}finally{i&&!o&&r.end&&r.end()}}function li(t,e,n,s,r){const i=sn(),o=2&s;try{rn(-1),o&&e.length>20&&Qr(t,e,20,$e()),n(s,r)}finally{rn(i)}}function ui(t,e,n){if(ee(e)){const s=e.directiveEnd;for(let r=e.directiveStart;r<s;r++){const e=t.data[r];e.contentQueries&&e.contentQueries(1,n[r],r)}}}function hi(t,e,n){!Me()||(function(t,e,n,s){const r=n.directiveStart,i=n.directiveEnd;t.firstCreatePass||En(n,e),tr(s,e);const o=n.initialInputs;for(let a=r;a<i;a++){const s=t.data[a],i=re(s);i&&Ei(e,n,s);const c=jn(e,t,a,n);tr(c,e),null!==o&&Ti(0,a-r,c,s,0,o),i&&(Ce(n.index,e)[8]=c)}}(t,e,n,_e(n,e)),128==(128&n.flags)&&function(t,e,n){const s=n.directiveStart,r=n.directiveEnd,i=n.index,o=Oe.lFrame.currentDirectiveIndex;try{rn(i);for(let n=s;n<r;n++){const s=t.data[n],r=e[n];Ge(n),(null!==s.hostBindings||0!==s.hostVars||null!==s.hostAttrs)&&_i(s,r)}}finally{rn(-1),Ge(o)}}(t,e,n))}function di(t,e,n=_e){const s=e.localNames;if(null!==s){let r=e.index+1;for(let i=0;i<s.length;i+=2){const o=s[i+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function pi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=fi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function fi(t,e,n,s,r,i,o,a,c,l){const u=20+s,h=u+r,d=function(t,e){const n=[];for(let s=0;s<e;s++)n.push(s<t?null:Wr);return n}(u,h),p="function"==typeof l?l():l;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1}}function gi(t,e,n,s){const r=$i(e);null===n?r.push(s):(r.push(n),t.firstCreatePass&&Vi(t).push(s,r.length-1))}function mi(t,e,n){for(let s in t)if(t.hasOwnProperty(s)){const r=t[s];(n=null===n?{}:n).hasOwnProperty(s)?n[s].push(e,r):n[s]=[e,r]}return n}function yi(t,e,n,s,r,i,o,a){const c=_e(e,n);let l,u=e.inputs;!a&&null!=u&&(l=u[s])?(Ui(t,n,l,s,r),ne(e)&&function(t,e){const n=Ce(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(s=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(s),r=null!=o?o(r,e.value||"",s):r,me(i)?i.setProperty(c,s,r):mn(s)||(c.setProperty?c.setProperty(s,r):c[s]=r))}function vi(t,e,n,s){let r=!1;if(Me()){const i=function(t,e,n){const s=t.directiveRegistry;let r=null;if(s)for(let i=0;i<s.length;i++){const o=s[i];zr(n,o.selectors,!1)&&(r||(r=[]),On(En(n,e),t,o.type),re(o)?(wi(t,n),r.unshift(o)):r.push(o))}return r}(t,e,n),o=null===s?null:{"":-1};if(null!==i){r=!0,Ci(n,t.data.length,i.length);for(let t=0;t<i.length;t++){const e=i[t];e.providersResolver&&e.providersResolver(e)}let s=!1,a=!1,c=ii(t,e,i.length,null);for(let r=0;r<i.length;r++){const l=i[r];n.mergedAttrs=yn(n.mergedAttrs,l.hostAttrs),xi(t,n,e,c,l),Si(c,l,o),null!==l.contentQueries&&(n.flags|=8),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=128);const u=l.type.prototype;!s&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),s=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(t,e){const n=e.directiveEnd,s=t.data,r=e.attrs,i=[];let o=null,a=null;for(let c=e.directiveStart;c<n;c++){const t=s[c],n=t.inputs,l=null===r||Fr(e)?null:Ii(n,r);i.push(l),o=mi(n,c,o),a=mi(t.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=i,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const s=t.localNames=[];for(let t=0;t<e.length;t+=2){const r=n[e[t+1]];if(null==r)throw new ct("301",`Export of name '${e[t+1]}' not found!`);s.push(e[t],r)}}}(n,s,o)}return n.mergedAttrs=yn(n.mergedAttrs,n.attrs),r}function bi(t,e,n,s,r,i){const o=i.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const i=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=i&&n.push(i),n.push(s,r,o)}}function _i(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function wi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Si(t,e,n){if(n){if(e.exportAs)for(let s=0;s<e.exportAs.length;s++)n[e.exportAs[s]]=t;re(e)&&(n[""]=t)}}function Ci(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xi(t,e,n,s,r){t.data[s]=r;const i=r.factory||(r.factory=oe(r.type)),o=new pn(i,re(r),null);t.blueprint[s]=o,n[s]=o,bi(t,e,0,s,ii(t,n,r.hostVars,Wr),r)}function Ei(t,e,n){const s=_e(e,t),r=pi(n),i=t[10],o=Ri(t,si(t,r,null,n.onPush?64:16,s,e,i,i.createRenderer(s,n),null,null));t[e.index]=o}function ki(t,e,n,s,r,i){const o=_e(t,e);!function(t,e,n,s,r,i,o){if(null==i)me(t)?t.removeAttribute(e,r,n):e.removeAttribute(r);else{const a=null==o?lt(i):o(i,s||"",r);me(t)?t.setAttribute(e,r,a,n):n?e.setAttributeNS(n,r,a):e.setAttribute(r,a)}}(e[11],o,i,t.value,n,s,r)}function Ti(t,e,n,s,r,i){const o=i[e];if(null!==o){const t=s.setInput;for(let e=0;e<o.length;){const r=o[e++],i=o[e++],a=o[e++];null!==t?s.setInput(n,a,r,i):n[i]=a}}}function Ii(t,e){let n=null,s=0;for(;s<e.length;){const r=e[s];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,t[r],e[s+1])),s+=2}else s+=2;else s+=4}return n}function Oi(t,e,n,s){return new Array(t,!0,!1,e,null,0,s,n,null,null)}function Mi(t,e){const n=Ce(e,t);if(Ee(n)){const t=n[1];80&n[2]?ai(t,n,t.template,n[8]):n[5]>0&&Ai(n)}}function Ai(t){for(let n=ur(t);null!==n;n=hr(n))for(let t=10;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];ai(t,e,t.template,e[8])}else e[5]>0&&Ai(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const s=Ce(e[n],t);Ee(s)&&s[5]>0&&Ai(s)}}function Pi(t,e){const n=Ce(e,t),s=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(s,n),oi(s,n,n[8])}function Ri(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ni(t){for(;t;){t[2]|=64;const e=lr(t);if(ie(t)&&!e)return t;t=e}return null}function Di(t,e,n){const s=e[10];s.begin&&s.begin();try{ai(t,e,t.template,n)}catch(r){throw qi(e,r),r}finally{s.end&&s.end()}}function Li(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],s=er(n),r=s[1];ci(r,s,r.template,n)}}(t[8])}function ji(t,e,n){Ze(0),e(t,n)}const Fi=(()=>Promise.resolve(null))();function $i(t){return t[7]||(t[7]=[])}function Vi(t){return t.cleanup||(t.cleanup=[])}function qi(t,e){const n=t[9],s=n?n.get(rr,null):null;s&&s.handleError(e)}function Ui(t,e,n,s,r){for(let i=0;i<n.length;){const o=n[i++],a=n[i++],c=e[o],l=t.data[o];null!==l.setInput?l.setInput(c,r,s,a):c[a]=r}}function zi(t,e,n){const s=be(e,t);!function(t,e,n){me(t)?t.setValue(e,n):e.textContent=n}(t[11],s,n)}function Hi(t,e,n){let s=n?t.styles:null,r=n?t.classes:null,i=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?i=t:1==i?r=st(r,t):2==i&&(s=st(s,t+": "+e[++o]+";"))}n?t.styles=s:t.stylesWithoutHost=s,n?t.classes=r:t.classesWithoutHost=r}const Bi=new Bn("INJECTOR",-1);class Gi{get(t,e=ns){if(e===ns){const e=new Error(`NullInjectorError: No provider for ${nt(t)}!`);throw e.name="NullInjectorError",e}return e}}const Wi=new Bn("Set Injector scope."),Zi={},Qi={};let Ji;function Yi(){return void 0===Ji&&(Ji=new Gi),Ji}function Ki(t,e=null,n=null,s){return new Xi(t,n,e||Yi(),s)}class Xi{constructor(t,e,n,s=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];e&&Qn(e,n=>this.processProvider(n,t,e)),Qn([t],t=>this.processInjectorType(t,[],r)),this.records.set(Bi,no(void 0,this));const i=this.records.get(Wi);this.scope=null!=i?i.value:null,this.source=s||("object"==typeof t?null:nt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ns,n=St.Default){this.assertNotDestroyed();const s=ls(this),r=xt(void 0);try{if(!(n&St.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof Bn}(t)&&gt(t);e=n&&this.injectableDefInScope(n)?no(to(t),Zi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&St.Self?Yi():this.parent).get(t,e=n&St.Optional&&e===ns?null:e)}catch(i){if("NullInjectorError"===i.name){if((i[rs]=i[rs]||[]).unshift(nt(t)),s)throw i;return gs(i,t,"R3InjectorError",this.source)}throw i}finally{xt(r),ls(s)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(nt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=ot(t)))return!1;let s=yt(t);const r=null==s&&t.ngModule||void 0,i=void 0===r?t:r,o=-1!==n.indexOf(i);if(void 0!==r&&(s=yt(r)),null==s)return!1;if(null!=s.imports&&!o){let t;n.push(i);try{Qn(s.imports,s=>{this.processInjectorType(s,e,n)&&(void 0===t&&(t=[]),t.push(s))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:s}=t[e];Qn(s,t=>this.processProvider(t,n,s||Nt))}}this.injectorDefTypes.add(i);const a=oe(i)||(()=>new i);this.records.set(i,no(a,Zi));const c=s.providers;if(null!=c&&!o){const e=t;Qn(c,t=>this.processProvider(t,e,c))}return void 0!==r&&void 0!==t.providers}processProvider(t,e,n){let s=ro(t=ot(t))?t:ot(t&&t.provide);const r=function(t,e,n){return so(t)?no(void 0,t.useValue):no(eo(t),Zi)}(t);if(ro(t)||!0!==t.multi)this.records.get(s);else{let e=this.records.get(s);e||(e=no(void 0,Zi,!0),e.factory=()=>ds(e.multi),this.records.set(s,e)),s=t,e.multi.push(t)}this.records.set(s,r)}hydrate(t,e){return e.value===Zi&&(e.value=Qi,e.value=e.factory()),"object"==typeof e.value&&e.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ot(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function to(t){const e=gt(t),n=null!==e?e.factory:oe(t);if(null!==n)return n;if(t instanceof Bn)throw new Error(`Token ${nt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=Kn(e,"?");throw new Error(`Can't resolve all parameters for ${nt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[vt]||t[_t]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function eo(t,e,n){let s;if(ro(t)){const e=ot(t);return oe(e)||to(e)}if(so(t))s=()=>ot(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))s=()=>t.useFactory(...ds(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))s=()=>hs(ot(t.useExisting));else{const e=ot(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return oe(e)||to(e);s=()=>new e(...ds(t.deps))}return s}function no(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function so(t){return null!==t&&"object"==typeof t&&as in t}function ro(t){return"function"==typeof t}const io=function(t,e,n){return function(t,e=null,n=null,s){const r=Ki(t,e,n,s);return r._resolveInjectorDefTypes(),r}({name:n},e,t,n)};let oo=(()=>{class t{static create(t,e){return Array.isArray(t)?io(t,e,""):io(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=ns,t.NULL=new Gi,t.\u0275prov=pt({token:t,providedIn:"any",factory:()=>hs(Bi)}),t.__NG_ELEMENT_ID__=-1,t})();function ao(t,e){an(er(t)[1],Ne())}function co(t){let e=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const s=[t];for(;e;){let r;if(re(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(n){s.push(r);const e=t;e.inputs=lo(t.inputs),e.declaredInputs=lo(t.declaredInputs),e.outputs=lo(t.outputs);const n=r.hostBindings;n&&po(t,n);const i=r.viewQuery,o=r.contentQueries;if(i&&uo(t,i),o&&ho(t,o),et(t.inputs,r.inputs),et(t.declaredInputs,r.declaredInputs),et(t.outputs,r.outputs),re(r)&&r.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(r.data.animation)}}const e=r.features;if(e)for(let s=0;s<e.length;s++){const r=e[s];r&&r.ngInherit&&r(t),r===co&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let s=t.length-1;s>=0;s--){const r=t[s];r.hostVars=e+=r.hostVars,r.hostAttrs=yn(r.hostAttrs,n=yn(n,r.hostAttrs))}}(s)}function lo(t){return t===Rt?{}:t===Nt?[]:t}function uo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,s)=>{e(t,s),n(t,s)}:e}function ho(t,e){const n=t.contentQueries;t.contentQueries=n?(t,s,r)=>{e(t,s,r),n(t,s,r)}:e}function po(t,e){const n=t.hostBindings;t.hostBindings=n?(t,s)=>{e(t,s),n(t,s)}:e}let fo=null;function go(){if(!fo){const t=Pt.Symbol;if(t&&t.iterator)fo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(fo=n)}}}return fo}class mo{constructor(t){this.wrapped=t}static wrap(t){return new mo(t)}static unwrap(t){return mo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof mo}}function yo(t){return!!vo(t)&&(Array.isArray(t)||!(t instanceof Map)&&go()in t)}function vo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function bo(t,e,n){return t[e]=n}function _o(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function wo(t,e,n,s){const r=_o(t,e,n);return _o(t,e+1,s)||r}function So(t,e,n,s){const r=Ae();return _o(r,ze(),e)&&(Pe(),ki(on(),r,t,e,n,s)),So}function Co(t,e,n,s){return _o(t,ze(),n)?e+lt(n)+s:Wr}function xo(t,e,n,s,r,i,o,a){const c=Ae(),l=Pe(),u=t+20,h=l.firstCreatePass?function(t,e,n,s,r,i,o,a,c){const l=e.consts,u=ri(e,t,4,o||null,ke(l,a));vi(e,n,u,ke(l,c)),an(e,u);const h=u.tViews=fi(2,u,s,r,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,n,s,r,i,o):l.data[u];Le(h,!1);const d=c[11].createComment("");kr(l,c,d,h),tr(d,c),Ri(c,c[u]=Oi(d,c,d,h)),se(h)&&hi(l,c,h),null!=o&&di(c,h,a)}function Eo(t){return Se(Oe.lFrame.contextLView,20+t)}function ko(t,e=St.Default){const n=Ae();return null===n?hs(t,e):Pn(Ne(),n,ot(t),e)}function To(t,e,n){const s=Ae();return _o(s,ze(),e)&&yi(Pe(),on(),s,t,e,s[11],n,!1),To}function Io(t,e,n,s,r){const i=r?"class":"style";Ui(t,n,e.inputs[i],i,s)}function Oo(t,e,n,s){const r=Ae(),i=Pe(),o=20+t,a=r[11],c=r[o]=fr(a,e,Oe.lFrame.currentNamespace),l=i.firstCreatePass?function(t,e,n,s,r,i,o){const a=e.consts,c=ri(e,t,2,r,ke(a,i));return vi(e,n,c,ke(a,o)),null!==c.attrs&&Hi(c,c.attrs,!1),null!==c.mergedAttrs&&Hi(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,i,r,0,e,n,s):i.data[o];Le(l,!0);const u=l.mergedAttrs;null!==u&&fn(a,c,u);const h=l.classes;null!==h&&Nr(a,c,h);const d=l.styles;null!==d&&Rr(a,c,d),64!=(64&l.flags)&&kr(i,r,c,l),0===Oe.lFrame.elementDepthCount&&tr(c,r),Oe.lFrame.elementDepthCount++,se(l)&&(hi(i,r,l),ui(i,l,r)),null!==s&&di(r,l)}function Mo(){let t=Ne();je()?Fe():(t=t.parent,Le(t,!1));const e=t;Oe.lFrame.elementDepthCount--;const n=Pe();n.firstCreatePass&&(an(n,t),ee(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Io(n,e,Ae(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Io(n,e,Ae(),e.stylesWithoutHost,!1)}function Ao(t,e,n,s){Oo(t,e,n,s),Mo()}function Po(t,e,n){const s=Ae(),r=Pe(),i=t+20,o=r.firstCreatePass?function(t,e,n,s,r){const i=e.consts,o=ke(i,s),a=ri(e,t,8,"ng-container",o);return null!==o&&Hi(a,o,!0),vi(e,n,a,ke(i,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(i,r,s,e,n):r.data[i];Le(o,!0);const a=s[i]=s[11].createComment("");kr(r,s,a,o),tr(a,s),se(o)&&(hi(r,s,o),ui(r,o,s)),null!=n&&di(s,o)}function Ro(){let t=Ne();const e=Pe();je()?Fe():(t=t.parent,Le(t,!1)),e.firstCreatePass&&(an(e,t),ee(t)&&e.queries.elementEnd(t))}function No(){return Ae()}function Do(t){return!!t&&"function"==typeof t.then}function Lo(t){return!!t&&"function"==typeof t.subscribe}const jo=Lo;function Fo(t,e,n,s){const r=Ae(),i=Pe(),o=Ne();return function(t,e,n,s,r,i,o,a){const c=se(s),l=t.firstCreatePass&&Vi(t),u=e[8],h=$i(e);let d=!0;if(3&s.type||a){const p=_e(s,e),f=a?a(p):p,g=h.length,m=a?t=>a(ve(t[s.index])):s.index;if(me(n)){let o=null;if(!a&&c&&(o=function(t,e,n,s){const r=t.cleanup;if(null!=r)for(let i=0;i<r.length-1;i+=2){const t=r[i];if(t===n&&r[i+1]===s){const t=e[7],n=r[i+2];return t.length>n?t[n]:null}"string"==typeof t&&(i+=2)}return null}(t,e,r,s.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=i,o.__ngLastListenerFn__=i,d=!1;else{i=Vo(s,e,u,i,!1);const t=n.listen(f,r,i);h.push(i,t),l&&l.push(r,m,g,g+1)}}else i=Vo(s,e,u,i,!0),f.addEventListener(r,i,o),h.push(i),l&&l.push(r,m,g,o)}else i=Vo(s,e,u,i,!1);const p=s.outputs;let f;if(d&&null!==p&&(f=p[r])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(i),o=h.length;h.push(i,t),l&&l.push(r,s.index,o,-(o+1))}}}(i,r,r[11],o,t,e,!!n,s),Fo}function $o(t,e,n,s){try{return!1!==n(s)}catch(r){return qi(t,r),!1}}function Vo(t,e,n,s,r){return function n(i){if(i===Function)return s;const o=2&t.flags?Ce(t.index,e):e;0==(32&e[2])&&Ni(o);let a=$o(e,0,s,i),c=n.__ngNextListenerFn__;for(;c;)a=$o(e,0,c,i)&&a,c=c.__ngNextListenerFn__;return r&&!1===a&&(i.preventDefault(),i.returnValue=!1),a}}function qo(t=1){return function(t){return(Oe.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Oe.lFrame.contextLView))[8]}(t)}function Uo(t,e){let n=null;const s=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let r=0;r<e.length;r++){const i=e[r];if("*"!==i){if(null===s?zr(t,i,!0):Hr(s,i))return r}else n=r}return n}function zo(t){const e=Ae()[16][6];if(!e.projection){const n=e.projection=Kn(t?t.length:1,null),s=n.slice();let r=e.child;for(;null!==r;){const e=t?Uo(r,t):0;null!==e&&(s[e]?s[e].projectionNext=r:n[e]=r,s[e]=r),r=r.next}}}function Ho(t,e=0,n){const s=Ae(),r=Pe(),i=ri(r,20+t,16,null,n||null);null===i.projection&&(i.projection=e),Fe(),64!=(64&i.flags)&&function(t,e,n){Pr(e[11],0,e,n,br(t,n,e),xr(n.parent||e[6],n,e))}(r,s,i)}function Bo(t,e,n){return Go(t,"",e,"",n),Bo}function Go(t,e,n,s,r){const i=Ae(),o=Co(i,e,n,s);return o!==Wr&&yi(Pe(),on(),i,t,o,i[11],r,!1),Go}function Wo(t,e,n,s,r){const i=t[n+1],o=null===e;let a=s?Yr(i):Xr(i),c=!1;for(;0!==a&&(!1===c||o);){const n=t[a+1];Zo(t[a],e)&&(c=!0,t[a+1]=s?ei(n):Kr(n)),a=s?Yr(n):Xr(n)}c&&(t[n+1]=s?Kr(i):ei(i))}function Zo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&es(t,e)>=0}function Qo(t,e){return function(t,e,n,s){const r=Ae(),i=Pe(),o=He(2);i.firstUpdatePass&&function(t,e,n,s){const r=t.data;if(null===r[n+1]){const i=r[sn()],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(i,s)&&null===e&&!o&&(e=!1),e=function(t,e,n,s){const r=function(t){const e=Oe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let i=s?e.residualClasses:e.residualStyles;if(null===r)0===(s?e.classBindings:e.styleBindings)&&(n=Yo(n=Jo(null,t,e,n,s),e.attrs,s),i=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==r)if(n=Jo(r,t,e,n,s),null===i){let n=function(t,e,n){const s=n?e.classBindings:e.styleBindings;if(0!==Xr(s))return t[Yr(s)]}(t,e,s);void 0!==n&&Array.isArray(n)&&(n=Jo(null,t,e,n[1],s),n=Yo(n,e.attrs,s),function(t,e,n,s){t[Yr(n?e.classBindings:e.styleBindings)]=s}(t,e,s,n))}else i=function(t,e,n){let s;const r=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<r;i++)s=Yo(s,t[i].hostAttrs,n);return Yo(s,e.attrs,n)}(t,e,s)}return void 0!==i&&(s?e.residualClasses=i:e.residualStyles=i),n}(r,i,e,s),function(t,e,n,s,r,i){let o=i?e.classBindings:e.styleBindings,a=Yr(o),c=Xr(o);t[s]=n;let l,u=!1;if(Array.isArray(n)){const t=n;l=t[1],(null===l||es(t,l)>0)&&(u=!0)}else l=n;if(r)if(0!==c){const e=Yr(t[a+1]);t[s+1]=Jr(e,a),0!==e&&(t[e+1]=ti(t[e+1],s)),t[a+1]=function(t,e){return 131071&t|e<<17}(t[a+1],s)}else t[s+1]=Jr(a,0),0!==a&&(t[a+1]=ti(t[a+1],s)),a=s;else t[s+1]=Jr(c,0),0===a?a=s:t[c+1]=ti(t[c+1],s),c=s;u&&(t[s+1]=Kr(t[s+1])),Wo(t,l,s,!0),Wo(t,l,s,!1),function(t,e,n,s,r){const i=r?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof e&&es(i,e)>=0&&(n[s+1]=ei(n[s+1]))}(e,l,t,s,i),o=Jr(a,c),i?e.classBindings=o:e.styleBindings=o}(r,i,e,n,o,s)}}(i,t,o,s),e!==Wr&&_o(r,o,e)&&function(t,e,n,s,r,i,o,a){if(!(3&e.type))return;const c=t.data,l=c[a+1];Xo(function(t){return 1==(1&t)}(l)?Ko(c,e,n,r,Xr(l),o):void 0)||(Xo(i)||function(t){return 2==(2&t)}(l)&&(i=Ko(c,null,n,r,a,o)),function(t,e,n,s,r){const i=me(t);if(e)r?i?t.addClass(n,s):n.classList.add(s):i?t.removeClass(n,s):n.classList.remove(s);else{let e=-1===s.indexOf("-")?void 0:ar.DashCase;if(null==r)i?t.removeStyle(n,s,e):n.style.removeProperty(s);else{const o="string"==typeof r&&r.endsWith("!important");o&&(r=r.slice(0,-10),e|=ar.Important),i?t.setStyle(n,s,r,e):n.style.setProperty(s,r,o?"important":"")}}}(s,o,be(sn(),n),r,i))}(i,i.data[sn()],r,r[11],t,r[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=nt(xs(t)))),t}(e,n),s,o)}(t,e,null,!0),Qo}function Jo(t,e,n,s,r){let i=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(i=e[a],s=Yo(s,i.hostAttrs,r),i!==t);)a++;return null!==t&&(n.directiveStylingLast=a),s}function Yo(t,e,n){const s=n?1:2;let r=-1;if(null!==e)for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?r=o:r===s&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Xn(t,o,!!n||e[++i]))}return void 0===t?null:t}function Ko(t,e,n,s,r,i){const o=null===e;let a;for(;r>0;){const e=t[r],i=Array.isArray(e),c=i?e[1]:e,l=null===c;let u=n[r+1];u===Wr&&(u=l?Nt:void 0);let h=l?ts(u,s):c===s?u:void 0;if(i&&!Xo(h)&&(h=ts(e,s)),Xo(h)&&(a=h,o))return a;const d=t[r+1];r=o?Yr(d):Xr(d)}if(null!==e){let t=i?e.residualClasses:e.residualStyles;null!=t&&(a=ts(t,s))}return a}function Xo(t){return void 0!==t}function ta(t,e=""){const n=Ae(),s=Pe(),r=t+20,i=s.firstCreatePass?ri(s,r,1,e,null):s.data[r],o=n[r]=function(t,e){return me(t)?t.createText(e):t.createTextNode(e)}(n[11],e);kr(s,n,o,i),Le(i,!1)}function ea(t){return na("",t,""),ea}function na(t,e,n){const s=Ae(),r=Co(s,t,e,n);return r!==Wr&&zi(s,sn(),r),na}function sa(t,e,n,s,r){const i=Ae(),o=function(t,e,n,s,r,i){const o=wo(t,Ue(),n,r);return He(2),o?e+lt(n)+s+lt(r)+i:Wr}(i,t,e,n,s,r);return o!==Wr&&zi(i,sn(),o),sa}function ra(t,e,n){const s=Ae();return _o(s,ze(),e)&&yi(Pe(),on(),s,t,e,s[11],n,!0),ra}const ia=void 0;var oa=["en",[["a","p"],["AM","PM"],ia],[["AM","PM"],ia,ia],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ia,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ia,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ia,"{1} 'at' {0}",ia],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let aa={};function ca(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=la(e);if(n)return n;const s=e.split("-")[0];if(n=la(s),n)return n;if("en"===s)return oa;throw new Error(`Missing locale data for the locale "${t}".`)}function la(t){return t in aa||(aa[t]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[t]),aa[t]}var ua=(()=>((ua=ua||{})[ua.LocaleId=0]="LocaleId",ua[ua.DayPeriodsFormat=1]="DayPeriodsFormat",ua[ua.DayPeriodsStandalone=2]="DayPeriodsStandalone",ua[ua.DaysFormat=3]="DaysFormat",ua[ua.DaysStandalone=4]="DaysStandalone",ua[ua.MonthsFormat=5]="MonthsFormat",ua[ua.MonthsStandalone=6]="MonthsStandalone",ua[ua.Eras=7]="Eras",ua[ua.FirstDayOfWeek=8]="FirstDayOfWeek",ua[ua.WeekendRange=9]="WeekendRange",ua[ua.DateFormat=10]="DateFormat",ua[ua.TimeFormat=11]="TimeFormat",ua[ua.DateTimeFormat=12]="DateTimeFormat",ua[ua.NumberSymbols=13]="NumberSymbols",ua[ua.NumberFormats=14]="NumberFormats",ua[ua.CurrencyCode=15]="CurrencyCode",ua[ua.CurrencySymbol=16]="CurrencySymbol",ua[ua.CurrencyName=17]="CurrencyName",ua[ua.Currencies=18]="Currencies",ua[ua.Directionality=19]="Directionality",ua[ua.PluralCase=20]="PluralCase",ua[ua.ExtraData=21]="ExtraData",ua))();const ha="en-US";let da=ha;function pa(t){dt(t,"Expected localeId to be defined"),"string"==typeof t&&(da=t.toLowerCase().replace(/_/g,"-"))}function fa(t,e,n,s,r){if(t=ot(t),Array.isArray(t))for(let i=0;i<t.length;i++)fa(t[i],e,n,s,r);else{const i=Pe(),o=Ae();let a=ro(t)?t:ot(t.provide),c=eo(t);const l=Ne(),u=1048575&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>20;if(ro(t)||!t.multi){const s=new pn(c,r,ko),p=ya(a,e,r?u:u+d,h);-1===p?(On(En(l,o),i,a),ga(i,t,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(s),o.push(s)):(n[p]=s,o[p]=s)}else{const p=ya(a,e,u+d,h),f=ya(a,e,u,u+d),g=p>=0&&n[p],m=f>=0&&n[f];if(r&&!m||!r&&!g){On(En(l,o),i,a);const u=function(t,e,n,s,r){const i=new pn(t,n,ko);return i.multi=[],i.index=e,i.componentProviders=0,ma(i,r,s&&!n),i}(r?ba:va,n.length,r,s,c);!r&&m&&(n[f].providerFactory=u),ga(i,t,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(u),o.push(u)}else ga(i,t,p>-1?p:f,ma(n[r?f:p],c,!r&&s));!r&&s&&m&&n[f].componentProviders++}}}function ga(t,e,n,s){const r=ro(e);if(r||function(t){return!!t.useClass}(e)){const i=(e.useClass||e).prototype.ngOnDestroy;if(i){const o=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[s,i]):o[t+1].push(s,i)}else o.push(n,i)}}}function ma(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ya(t,e,n,s){for(let r=n;r<s;r++)if(e[r]===t)return r;return-1}function va(t,e,n,s){return _a(this.multi,[])}function ba(t,e,n,s){const r=this.multi;let i;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=jn(n,n[1],this.providerFactory.index,s);i=e.slice(0,t),_a(r,i);for(let n=t;n<e.length;n++)i.push(e[n])}else i=[],_a(r,i);return i}function _a(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function wa(t,e=[]){return n=>{n.providersResolver=(n,s)=>function(t,e,n){const s=Pe();if(s.firstCreatePass){const r=re(t);fa(n,s.data,s.blueprint,r,!0),fa(e,s.data,s.blueprint,r,!1)}}(n,s?s(t):t,e)}}class Sa{}const Ca="ngComponent";class xa{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${nt(t)}. Did you add it to @NgModule.entryComponents?`);return e[Ca]=t,e}(t)}}let Ea=(()=>{class t{}return t.NULL=new xa,t})();function ka(...t){}function Ta(t,e){return new Oa(_e(t,e))}const Ia=function(){return Ta(Ne(),Ae())};let Oa=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ia,t})();function Ma(t){return t instanceof Oa?t.nativeElement:t}class Aa{}let Pa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ra(),t})();const Ra=function(){const t=Ae(),e=Ce(Ne().index,t);return function(t){return t[11]}(Xt(e)?e:t)};let Na=(()=>{class t{}return t.\u0275prov=pt({token:t,providedIn:"root",factory:()=>null}),t})();class Da{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const La=new Da("12.2.12");class ja{constructor(){}supports(t){return yo(t)}create(t){return new $a(t)}}const Fa=(t,e)=>e;class $a{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Fa}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,s=0,r=null;for(;e||n;){const i=!n||e&&e.currentIndex<za(n,s,r)?e:n,o=za(i,s,r),a=i.currentIndex;if(i===n)s--,n=n._nextRemoved;else if(e=e._next,null==i.previousIndex)s++;else{r||(r=[]);const t=o-s,e=a-s;if(t!=e){for(let n=0;n<t;n++){const s=n<r.length?r[n]:r[n]=0,i=s+n;e<=i&&i<t&&(r[n]=s+1)}r[i.previousIndex]=e-t}}o!==a&&t(i,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!yo(t))throw new Error(`Error trying to diff '${nt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,s,r=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],s=this._trackByFn(e,n),null!==r&&Object.is(r.trackById,s)?(i&&(r=this._verifyReinsertion(r,n,s,e)),Object.is(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,s,e),i=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[go()]();let s;for(;!(s=n.next()).done;)e(s.value)}}(t,t=>{s=this._trackByFn(e,t),null!==r&&Object.is(r.trackById,s)?(i&&(r=this._verifyReinsertion(r,t,s,e)),Object.is(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,s,e),i=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,s){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,s)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,s))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,s)):t=this._addAfter(new Va(e,n),r,s),t}_verifyReinsertion(t,e,n,s){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const s=t._prevRemoved,r=t._nextRemoved;return null===s?this._removalsHead=r:s._nextRemoved=r,null===r?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const s=null===e?this._itHead:e._next;return t._next=s,t._prev=e,null===s?this._itTail=t:s._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ua),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ua),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Va{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qa{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ua{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new qa,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function za(t,e,n){const s=t.previousIndex;if(null===s)return s;let r=0;return n&&s<n.length&&(r=n[s]),s+e+r}class Ha{constructor(){}supports(t){return t instanceof Map||vo(t)}create(){return new Ba}}class Ba{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||vo(t)))throw new Error(`Error trying to diff '${nt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const s=n._prev,r=n._next;return s&&(s._next=r),r&&(r._prev=s),n._next=null,n._prev=null,n}const n=new Ga(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ga{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Wa(){return new Za([new ja])}let Za=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Wa()),deps:[[t,new vs,new ys]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(t){return t.name||typeof t}(t)}'`)}}return t.\u0275prov=pt({token:t,providedIn:"root",factory:Wa}),t})();function Qa(){return new Ja([new Ha])}let Ja=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Qa()),deps:[[t,new vs,new ys]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=pt({token:t,providedIn:"root",factory:Qa}),t})();function Ya(t,e,n,s,r=!1){for(;null!==n;){const i=e[n.index];if(null!==i&&s.push(ve(i)),te(i))for(let t=10;t<i.length;t++){const e=i[t],n=e[1].firstChild;null!==n&&Ya(e[1],e,n,s)}const o=n.type;if(8&o)Ya(t,e,n.child,s);else if(32&o){const t=cr(n,e);let r;for(;r=t();)s.push(r)}else if(16&o){const t=Ir(e,n);if(Array.isArray(t))s.push(...t);else{const n=lr(e[16]);Ya(n[1],n,t,s,!0)}}n=r?n.projectionNext:n.next}return s}class Ka{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Ya(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(te(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(mr(t,n),Yn(e,n))}this._attachedToViewContainer=!1}yr(this._lView[1],this._lView)}onDestroy(t){gi(this._lView[1],this._lView,null,t)}markForCheck(){Ni(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Di(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Ve(!0);try{Di(t,e,n)}finally{Ve(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){Ar(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Xa extends Ka{constructor(t){super(t),this._view=t}detectChanges(){Li(this._view)}checkNoChanges(){!function(t){Ve(!0);try{Li(t)}finally{Ve(!1)}}(this._view)}get context(){return null}}const tc=function(t){return function(t,e,n){if(ne(t)&&!n){const n=Ce(t.index,e);return new Ka(n,n)}return 47&t.type?new Ka(e[16],e):null}(Ne(),Ae(),16==(16&t))};let ec=(()=>{class t{}return t.__NG_ELEMENT_ID__=tc,t})();const nc=[new Ha],sc=new Za([new ja]),rc=new Ja(nc),ic=function(){return lc(Ne(),Ae())};let oc=(()=>{class t{}return t.__NG_ELEMENT_ID__=ic,t})();const ac=oc,cc=class extends ac{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=si(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(n[19]=s.createEmbeddedView(e)),oi(e,n,t),new Ka(n)}};function lc(t,e){return 4&t.type?new cc(e,t,Ta(t,e)):null}class uc{}class hc{}const dc=function(){return vc(Ne(),Ae())};let pc=(()=>{class t{}return t.__NG_ELEMENT_ID__=dc,t})();const fc=pc,gc=class extends fc{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ta(this._hostTNode,this._hostLView)}get injector(){return new Vn(this._hostTNode,this._hostLView)}get parentInjector(){const t=In(this._hostTNode,this._hostLView);if(bn(t)){const e=wn(t,this._hostLView),n=_n(t);return new Vn(e[1].data[n+8],e)}return new Vn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=mc(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const s=t.createEmbeddedView(e||{});return this.insert(s,n),s}createComponent(t,e,n,s,r){const i=n||this.parentInjector;if(!r&&null==t.ngModule&&i){const t=i.get(uc,null);t&&(r=t)}const o=t.create(i,s,void 0,r);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,s=n[1];if(function(t){return te(t[3])}(n)){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],s=new gc(e,e[6],e[3]);s.detach(s.indexOf(t))}}const r=this._adjustIndex(e),i=this._lContainer;!function(t,e,n,s){const r=10+s,i=n.length;s>0&&(n[r-1][4]=e),s<i-10?(e[4]=n[r],Jn(n,10+s,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(s,n,i,r);const o=Or(r,i),a=n[11],c=Cr(a,i[7]);return null!==c&&function(t,e,n,s,r,i){s[0]=r,s[6]=e,Ar(t,s,n,1,r,i)}(s,i[6],a,n,c,o),t.attachToViewContainerRef(),Jn(yc(i),r,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=mc(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=mr(this._lContainer,e);n&&(Yn(yc(this._lContainer),e),yr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=mr(this._lContainer,e);return n&&null!=Yn(yc(this._lContainer),e)?new Ka(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function mc(t){return t[8]}function yc(t){return t[8]||(t[8]=[])}function vc(t,e){let n;const s=e[t.index];if(te(s))n=s;else{let r;if(8&t.type)r=ve(s);else{const n=e[11];r=n.createComment("");const s=_e(t,e);_r(n,Cr(n,s),r,function(t,e){return me(t)?t.nextSibling(e):e.nextSibling}(n,s),!1)}e[t.index]=n=Oi(s,e,r,t),Ri(e,n)}return new gc(n,t,e)}const bc={};class _c extends Ea{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Yt(t);return new Cc(e,this.ngModule)}}function wc(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Sc=new Bn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ir});class Cc extends Sa{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function(t){return t.map(Gr).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return wc(this.componentDef.inputs)}get outputs(){return wc(this.componentDef.outputs)}create(t,e,n,s){const r=(s=s||this.ngModule)?function(t,e){return{get:(n,s,r)=>{const i=t.get(n,bc,r);return i!==bc||s===bc?i:e.get(n,s,r)}}}(t,s.injector):t,i=r.get(Aa,ye),o=r.get(Na,null),a=i.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",l=n?function(t,e,n){if(me(t))return t.selectRootElement(e,n===It.ShadowDom);let s="string"==typeof e?t.querySelector(e):e;return s.textContent="",s}(a,n,this.componentDef.encapsulation):fr(i.createRenderer(null,this.componentDef),c,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),u=this.componentDef.onPush?576:528,h=function(t,e){return{components:[],scheduler:t||ir,clean:Fi,playerHandler:e||null,flags:0}}(),d=fi(0,null,null,1,0,null,null,null,null,null),p=si(null,d,h,u,null,null,i,a,o,r);let f,g;Ye(p);try{const t=function(t,e,n,s,r,i){const o=n[1];n[20]=t;const a=ri(o,20,2,"#host",null),c=a.mergedAttrs=e.hostAttrs;null!==c&&(Hi(a,c,!0),null!==t&&(fn(r,t,c),null!==a.classes&&Nr(r,t,a.classes),null!==a.styles&&Rr(r,t,a.styles)));const l=s.createRenderer(t,e),u=si(n,pi(e),null,e.onPush?64:16,n[20],a,s,l,i||null,null);return o.firstCreatePass&&(On(En(a,n),o,e.type),wi(o,a),Ci(a,n.length,1)),Ri(n,u),n[20]=u}(l,this.componentDef,p,i,a);if(l)if(n)fn(a,l,["ng-version",La.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let s=1,r=2;for(;s<t.length;){let i=t[s];if("string"==typeof i)2===r?""!==i&&e.push(i,t[++s]):8===r&&n.push(i);else{if(!qr(r))break;r=i}s++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&fn(a,l,t),e&&e.length>0&&Nr(a,l,e.join(" "))}if(g=we(d,20),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const s=e[n];t.push(null!=s?Array.from(s):null)}}f=function(t,e,n,s,r){const i=n[1],o=function(t,e,n){const s=Ne();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),xi(t,s,e,ii(t,e,1,null),n));const r=jn(e,t,s.directiveStart,s);tr(r,e);const i=_e(s,e);return i&&tr(i,e),r}(i,n,e);if(s.components.push(o),t[8]=o,r&&r.forEach(t=>t(o,e)),e.contentQueries){const t=Ne();e.contentQueries(1,o,t.directiveStart)}const a=Ne();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(rn(a.index),bi(n[1],a,0,a.directiveStart,a.directiveEnd,e),_i(e,o)),o}(t,this.componentDef,p,h,[ao]),oi(d,p,null)}finally{nn()}return new xc(this.componentType,f,Ta(g,p),p,g)}}class xc extends class{}{constructor(t,e,n,s,r){super(),this.location=n,this._rootLView=s,this._tNode=r,this.instance=e,this.hostView=this.changeDetectorRef=new Xa(s),this.componentType=t}get injector(){return new Vn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ec=new Map;class kc extends uc{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _c(this);const n=Kt(t),s=function(t){return t[$t]||null}(t);s&&pa(s),this._bootstrapComponents=or(n.bootstrap),this._r3Injector=Ki(t,e,[{provide:uc,useValue:this},{provide:Ea,useValue:this.componentFactoryResolver}],nt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=oo.THROW_IF_NOT_FOUND,n=St.Default){return t===oo||t===uc||t===Bi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Tc extends hc{constructor(t){super(),this.moduleType=t,null!==Kt(t)&&function(t){const e=new Set;!function t(n){const s=Kt(n,!0),r=s.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${nt(e)} vs ${nt(e.name)}`)}(r,Ec.get(r),n),Ec.set(r,n));const i=or(s.imports);for(const o of i)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new kc(this.moduleType,t)}}function Ic(t,e,n,s){return Mc(Ae(),qe(),t,e,n,s)}function Oc(t,e){const n=t[e];return n===Wr?void 0:n}function Mc(t,e,n,s,r,i){const o=e+n;return _o(t,o,r)?bo(t,o+1,i?s.call(i,r):s(r)):Oc(t,o+1)}function Ac(t,e,n,s,r,i,o,a,c){const l=e+n;return function(t,e,n,s,r,i){const o=wo(t,e,n,s);return wo(t,e+2,r,i)||o}(t,l,r,i,o,a)?bo(t,l+4,c?s.call(c,r,i,o,a):s(r,i,o,a)):Oc(t,l+4)}function Pc(t,e){const n=Pe();let s;const r=t+20;n.firstCreatePass?(s=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const s=e[n];if(t===s.name)return s}throw new ct("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[r]=s,s.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,s.onDestroy)):s=n.data[r];const i=s.factory||(s.factory=oe(s.type)),o=xt(ko);try{const t=Cn(!1),e=i();return Cn(t),function(t,e,n,s){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=s}(n,Ae(),r,e),e}finally{xt(o)}}function Rc(t,e,n){const s=t+20,r=Ae(),i=Se(r,s);return Lc(r,Dc(r,s)?Mc(r,qe(),e,i.transform,n,i):i.transform(n))}function Nc(t,e,n,s){const r=t+20,i=Ae(),o=Se(i,r);return Lc(i,Dc(i,r)?function(t,e,n,s,r,i,o){const a=e+n;return wo(t,a,r,i)?bo(t,a+2,o?s.call(o,r,i):s(r,i)):Oc(t,a+2)}(i,qe(),e,o.transform,n,s,o):o.transform(n,s))}function Dc(t,e){return t[1].data[e].pure}function Lc(t,e){return mo.isWrapped(e)&&(e=mo.unwrap(e),t[Ue()]=Wr),e}function jc(t){return e=>{setTimeout(t,void 0,e)}}const Fc=class extends x{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var s,r,i;let o=t,a=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;o=null===(s=e.next)||void 0===s?void 0:s.bind(e),a=null===(r=e.error)||void 0===r?void 0:r.bind(e),c=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}this.__isAsync&&(a=jc(a),o&&(o=jc(o)),c&&(c=jc(c)));const l=super.subscribe({next:o,error:a,complete:c});return t instanceof h&&t.add(l),l}};function $c(){return this._results[go()]()}class Vc{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=go(),n=Vc.prototype;n[e]||(n[e]=$c)}get changes(){return this._changes||(this._changes=new Fc)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const s=Zn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++){let r=t[s],i=e[s];if(n&&(r=n(r),i=n(i)),i!==r)return!1}return!0}(n._results,s,e))&&(n._results=s,n.length=s.length,n.last=s[this.length-1],n.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class qc{constructor(t){this.queryList=t,this.matches=null}clone(){return new qc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Uc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,s=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);s.push(this.queries[n.indexInDeclarationView].clone())}return new Uc(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Xc(t,e).matches&&this.queries[e].setDirty()}}class zc{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Hc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const s=null!==e?e.length:0,r=this.getByIndex(n).embeddedTView(t,s);r&&(r.indexInDeclarationView=n,null!==e?e.push(r):e=[r])}return null!==e?new Hc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Bc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Bc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let s=0;s<n.length;s++){const r=n[s];this.matchTNodeWithReadOption(t,e,Gc(e,r)),this.matchTNodeWithReadOption(t,e,Ln(e,t,r,!1,!1))}else n===oc?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ln(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const s=this.metadata.read;if(null!==s)if(s===Oa||s===pc||s===oc&&4&e.type)this.addMatch(e.index,-2);else{const n=Ln(e,t,s,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Gc(t,e){const n=t.localNames;if(null!==n)for(let s=0;s<n.length;s+=2)if(n[s]===e)return n[s+1];return null}function Wc(t,e,n,s){return-1===n?function(t,e){return 11&t.type?Ta(t,e):4&t.type?lc(t,e):null}(e,t):-2===n?function(t,e,n){return n===Oa?Ta(e,t):n===oc?lc(e,t):n===pc?vc(e,t):void 0}(t,e,s):jn(t,t[1],n,e)}function Zc(t,e,n,s){const r=e[19].queries[s];if(null===r.matches){const s=t.data,i=n.matches,o=[];for(let t=0;t<i.length;t+=2){const r=i[t];o.push(r<0?null:Wc(e,s[r],i[t+1],n.metadata.read))}r.matches=o}return r.matches}function Qc(t,e,n,s){const r=t.queries.getByIndex(n),i=r.matches;if(null!==i){const o=Zc(t,e,r,n);for(let t=0;t<i.length;t+=2){const n=i[t];if(n>0)s.push(o[t/2]);else{const r=i[t+1],o=e[-n];for(let t=10;t<o.length;t++){const e=o[t];e[17]===e[3]&&Qc(e[1],e,r,s)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Qc(n[1],n,r,s)}}}}}return s}function Jc(t){const e=Ae(),n=Pe(),s=We();Ze(s+1);const r=Xc(n,s);if(t.dirty&&xe(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const i=r.crossesNgTemplate?Qc(n,e,s,[]):Zc(n,e,r,s);t.reset(i,Ma),t.notifyOnChanges()}return!0}return!1}function Yc(t,e,n){const s=Pe();s.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new Hc),t.queries.track(new Bc(e,n))}(s,new zc(t,e,n),-1),2==(2&e)&&(s.staticViewQueries=!0)),function(t,e,n){const s=new Vc(4==(4&n));gi(t,e,s,s.destroy),null===e[19]&&(e[19]=new Uc),e[19].queries.push(new qc(s))}(s,Ae(),e)}function Kc(){return function(t,e){return t[19].queries[e].queryList}(Ae(),We())}function Xc(t,e){return t.queries.getByIndex(e)}function tl(t,e){return lc(t,e)}const el=new Bn("Application Initializer");let nl=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ka,this.reject=ka,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Do(e))t.push(e);else if(jo(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(hs(el,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const sl=new Bn("AppId"),rl={provide:sl,useFactory:function(){return`${il()}${il()}${il()}`},deps:[]};function il(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ol=new Bn("Platform Initializer"),al=new Bn("Platform ID"),cl=new Bn("appBootstrapListener");let ll=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const ul=new Bn("LocaleId"),hl=new Bn("DefaultCurrencyCode");class dl{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const pl=function(t){return new Tc(t)},fl=pl,gl=function(t){return Promise.resolve(pl(t))},ml=function(t){const e=pl(t),n=or(Kt(t).declarations).reduce((t,e)=>{const n=Yt(e);return n&&t.push(new Cc(n)),t},[]);return new dl(e,n)},yl=ml,vl=function(t){return Promise.resolve(ml(t))};let bl=(()=>{class t{constructor(){this.compileModuleSync=fl,this.compileModuleAsync=gl,this.compileModuleAndAllComponentsSync=yl,this.compileModuleAndAllComponentsAsync=vl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const _l=(()=>Promise.resolve(0))();function wl(t){"undefined"==typeof Zone?_l.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Sl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fc(!1),this.onMicrotaskEmpty=new Fc(!1),this.onStable=new Fc(!1),this.onError=new Fc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!n&&e,s.shouldCoalesceRunChangeDetection=n,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function(){let t=Pt.requestAnimationFrame,e=Pt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const s=e[Zone.__symbol__("OriginalDelegate")];s&&(e=s)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Pt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,El(t),t.isCheckStableRunning=!0,xl(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),El(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,s,r,i,o,a)=>{try{return kl(t),n.invokeTask(r,i,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&e(),Tl(t)}},onInvoke:(n,s,r,i,o,a,c)=>{try{return kl(t),n.invoke(r,i,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),Tl(t)}},onHasTask:(e,n,s,r)=>{e.hasTask(s,r),n===s&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,El(t),xl(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,n,s,r)=>(e.handleError(s,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(s)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Sl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Sl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,s){const r=this._inner,i=r.scheduleEventTask("NgZoneEvent: "+s,t,Cl,ka,ka);try{return r.runTask(i,e,n)}finally{r.cancelTask(i)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Cl={};function xl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function El(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function kl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Tl(t){t._nesting--,xl(t)}class Il{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fc,this.onMicrotaskEmpty=new Fc,this.onStable=new Fc,this.onError=new Fc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,s){return t.apply(e,n)}}let Ol=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Sl.assertNotInAngularZone(),wl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let s=-1;e&&e>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==s),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(hs(Sl))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Ml=(()=>{class t{constructor(){this._applications=new Map,Pl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Pl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Al{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Pl=new Al,Rl=!0,Nl=!1;let Dl;const Ll=new Bn("AllowMultipleToken");class jl{constructor(t,e){this.name=t,this.token=e}}function Fl(t,e,n=[]){const s=`Platform: ${e}`,r=new Bn(s);return(e=[])=>{let i=$l();if(!i||i.injector.get(Ll,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{const t=n.concat(e).concat({provide:r,useValue:!0},{provide:Wi,useValue:"platform"});!function(t){if(Dl&&!Dl.destroyed&&!Dl.injector.get(Ll,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Dl=t.get(Vl);const e=t.get(ol,null);e&&e.forEach(t=>t())}(oo.create({providers:t,name:s}))}return function(t){const e=$l();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function $l(){return Dl&&!Dl.destroyed?Dl:null}let Vl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Il:("zone.js"===t?void 0:t)||new Sl({enableLongStackTrace:(Nl=!0,Rl),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),s=[{provide:Sl,useValue:n}];return n.run(()=>{const r=oo.create({providers:s,parent:this.injector,name:t.moduleType.name}),i=t.create(r),o=i.injector.get(rr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{zl(this._modules,i),t.unsubscribe()})}),function(t,n,s){try{const e=s();return Do(e)?e.catch(e=>{throw n.runOutsideAngular(()=>t.handleError(e)),e}):e}catch(e){throw n.runOutsideAngular(()=>t.handleError(e)),e}}(o,n,()=>{const t=i.injector.get(nl);return t.runInitializers(),t.donePromise.then(()=>(pa(i.injector.get(ul,ha)||ha),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=ql({},e);return function(t,e,n){const s=new Tc(n);return Promise.resolve(s)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Ul);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${nt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(hs(oo))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function ql(t,e){return Array.isArray(e)?e.reduce(ql,t):Object.assign(Object.assign({},t),e)}let Ul=(()=>{class t{constructor(t,e,n,s,r){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=s,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new b(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),o=new b(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Sl.assertNotInAngularZone(),wl(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Sl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=B(i,o.pipe(X()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Sa?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const s=function(t){return t.isBoundToModule}(n)?void 0:this._injector.get(uc),r=n.create(oo.NULL,[],e||n.selector,s),i=r.location.nativeElement,o=r.injector.get(Ol,null),a=o&&r.injector.get(Ml);return o&&a&&a.registerApplication(i,o),r.onDestroy(()=>{this.detachView(r.hostView),zl(this.components,r),a&&a.unregisterApplication(i)}),this._loadComponent(r),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;zl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(cl,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(hs(Sl),hs(oo),hs(rr),hs(Ea),hs(nl))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function zl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Hl{}class Bl{}const Gl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Wl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Gl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,s]=t.split("#");return void 0===s&&(s="default"),n(8255)(e).then(t=>t[s]).then(t=>Zl(t,e,s)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,s]=t.split("#"),r="NgFactory";return void 0===s&&(s="default",r=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[s+r]).then(t=>Zl(t,e,s))}}return t.\u0275fac=function(e){return new(e||t)(hs(bl),hs(Bl,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function Zl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ql=Fl(null,"core",[{provide:al,useValue:"unknown"},{provide:Vl,deps:[oo]},{provide:Ml,deps:[]},{provide:ll,deps:[]}]),Jl=[{provide:Ul,useClass:Ul,deps:[Sl,oo,rr,Ea,nl]},{provide:Sc,deps:[Sl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:nl,useClass:nl,deps:[[new ys,el]]},{provide:bl,useClass:bl,deps:[]},rl,{provide:Za,useFactory:function(){return sc},deps:[]},{provide:Ja,useFactory:function(){return rc},deps:[]},{provide:ul,useFactory:function(t){return pa(t=t||"undefined"!=typeof $localize&&$localize.locale||ha),t},deps:[[new ms(ul),new ys,new vs]]},{provide:hl,useValue:"USD"}];let Yl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(hs(Ul))},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({providers:Jl}),t})(),Kl=null;function Xl(){return Kl}const tu=new Bn("DocumentToken");let eu=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({factory:nu,token:t,providedIn:"platform"}),t})();function nu(){return hs(ru)}const su=new Bn("Location Initialized");let ru=(()=>{class t extends eu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xl().getBaseHref(this._doc)}onPopState(t){const e=Xl().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=Xl().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){iu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){iu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(hs(tu))},t.\u0275prov=pt({factory:ou,token:t,providedIn:"platform"}),t})();function iu(){return!!window.history.pushState}function ou(){return new ru(hs(tu))}function au(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function cu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function lu(t){return t&&"?"!==t[0]?"?"+t:t}let uu=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({factory:hu,token:t,providedIn:"root"}),t})();function hu(t){const e=hs(tu).location;return new pu(hs(eu),e&&e.origin||"")}const du=new Bn("appBaseHref");let pu=(()=>{class t extends uu{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return au(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+lu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,s){const r=this.prepareExternalUrl(n+lu(s));this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,s){const r=this.prepareExternalUrl(n+lu(s));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(hs(eu),hs(du,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),fu=(()=>{class t extends uu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=au(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,s){let r=this.prepareExternalUrl(n+lu(s));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,s){let r=this.prepareExternalUrl(n+lu(s));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(hs(eu),hs(du,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),gu=(()=>{class t{constructor(t,e){this._subject=new Fc,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=cu(yu(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+lu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,yu(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(hs(uu),hs(eu))},t.normalizeQueryParams=lu,t.joinWithSlash=au,t.stripTrailingSlash=cu,t.\u0275prov=pt({factory:mu,token:t,providedIn:"root"}),t})();function mu(){return new gu(hs(uu),hs(eu))}function yu(t){return t.replace(/\/index.html$/,"")}var vu=(()=>((vu=vu||{})[vu.Zero=0]="Zero",vu[vu.One=1]="One",vu[vu.Two=2]="Two",vu[vu.Few=3]="Few",vu[vu.Many=4]="Many",vu[vu.Other=5]="Other",vu))(),bu=(()=>((bu=bu||{})[bu.Format=0]="Format",bu[bu.Standalone=1]="Standalone",bu))(),_u=(()=>((_u=_u||{})[_u.Narrow=0]="Narrow",_u[_u.Abbreviated=1]="Abbreviated",_u[_u.Wide=2]="Wide",_u[_u.Short=3]="Short",_u))(),wu=(()=>((wu=wu||{})[wu.Short=0]="Short",wu[wu.Medium=1]="Medium",wu[wu.Long=2]="Long",wu[wu.Full=3]="Full",wu))(),Su=(()=>((Su=Su||{})[Su.Decimal=0]="Decimal",Su[Su.Group=1]="Group",Su[Su.List=2]="List",Su[Su.PercentSign=3]="PercentSign",Su[Su.PlusSign=4]="PlusSign",Su[Su.MinusSign=5]="MinusSign",Su[Su.Exponential=6]="Exponential",Su[Su.SuperscriptingExponent=7]="SuperscriptingExponent",Su[Su.PerMille=8]="PerMille",Su[Su.Infinity=9]="Infinity",Su[Su.NaN=10]="NaN",Su[Su.TimeSeparator=11]="TimeSeparator",Su[Su.CurrencyDecimal=12]="CurrencyDecimal",Su[Su.CurrencyGroup=13]="CurrencyGroup",Su))();function Cu(t,e){return Ou(ca(t)[ua.DateFormat],e)}function xu(t,e){return Ou(ca(t)[ua.TimeFormat],e)}function Eu(t,e){return Ou(ca(t)[ua.DateTimeFormat],e)}function ku(t,e){const n=ca(t),s=n[ua.NumberSymbols][e];if(void 0===s){if(e===Su.CurrencyDecimal)return n[ua.NumberSymbols][Su.Decimal];if(e===Su.CurrencyGroup)return n[ua.NumberSymbols][Su.Group]}return s}const Tu=function(t){return ca(t)[ua.PluralCase]};function Iu(t){if(!t[ua.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ua.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ou(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function Mu(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const Au=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Pu={},Ru=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Nu=(()=>((Nu=Nu||{})[Nu.Short=0]="Short",Nu[Nu.ShortGMT=1]="ShortGMT",Nu[Nu.Long=2]="Long",Nu[Nu.Extended=3]="Extended",Nu))(),Du=(()=>((Du=Du||{})[Du.FullYear=0]="FullYear",Du[Du.Month=1]="Month",Du[Du.Date=2]="Date",Du[Du.Hours=3]="Hours",Du[Du.Minutes=4]="Minutes",Du[Du.Seconds=5]="Seconds",Du[Du.FractionalSeconds=6]="FractionalSeconds",Du[Du.Day=7]="Day",Du))(),Lu=(()=>((Lu=Lu||{})[Lu.DayPeriods=0]="DayPeriods",Lu[Lu.Days=1]="Days",Lu[Lu.Months=2]="Months",Lu[Lu.Eras=3]="Eras",Lu))();function ju(t,e,n,s){let r=function(t){if(Ju(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,s=1]=t.split("-").map(t=>+t);return Fu(e,n-1,s)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(Au))return function(t){const e=new Date(0);let n=0,s=0;const r=t[8]?e.setUTCFullYear:e.setFullYear,i=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),s=Number(t[9]+t[11])),r.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-s,c=Number(t[6]||0),l=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return i.call(e,o,a,c,l),e}(n)}const e=new Date(t);if(!Ju(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=$u(n,e)||e;let i,o=[];for(;e;){if(i=Ru.exec(e),!i){o.push(e);break}{o=o.concat(i.slice(1));const t=o.pop();if(!t)break;e=t}}let a=r.getTimezoneOffset();s&&(a=Qu(s,a),r=function(t,e,n){const s=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Qu(e,s)-s))}(r,s));let c="";return o.forEach(t=>{const e=function(t){if(Zu[t])return Zu[t];let e;switch(t){case"G":case"GG":case"GGG":e=zu(Lu.Eras,_u.Abbreviated);break;case"GGGG":e=zu(Lu.Eras,_u.Wide);break;case"GGGGG":e=zu(Lu.Eras,_u.Narrow);break;case"y":e=Uu(Du.FullYear,1,0,!1,!0);break;case"yy":e=Uu(Du.FullYear,2,0,!0,!0);break;case"yyy":e=Uu(Du.FullYear,3,0,!1,!0);break;case"yyyy":e=Uu(Du.FullYear,4,0,!1,!0);break;case"Y":e=Wu(1);break;case"YY":e=Wu(2,!0);break;case"YYY":e=Wu(3);break;case"YYYY":e=Wu(4);break;case"M":case"L":e=Uu(Du.Month,1,1);break;case"MM":case"LL":e=Uu(Du.Month,2,1);break;case"MMM":e=zu(Lu.Months,_u.Abbreviated);break;case"MMMM":e=zu(Lu.Months,_u.Wide);break;case"MMMMM":e=zu(Lu.Months,_u.Narrow);break;case"LLL":e=zu(Lu.Months,_u.Abbreviated,bu.Standalone);break;case"LLLL":e=zu(Lu.Months,_u.Wide,bu.Standalone);break;case"LLLLL":e=zu(Lu.Months,_u.Narrow,bu.Standalone);break;case"w":e=Gu(1);break;case"ww":e=Gu(2);break;case"W":e=Gu(1,!0);break;case"d":e=Uu(Du.Date,1);break;case"dd":e=Uu(Du.Date,2);break;case"c":case"cc":e=Uu(Du.Day,1);break;case"ccc":e=zu(Lu.Days,_u.Abbreviated,bu.Standalone);break;case"cccc":e=zu(Lu.Days,_u.Wide,bu.Standalone);break;case"ccccc":e=zu(Lu.Days,_u.Narrow,bu.Standalone);break;case"cccccc":e=zu(Lu.Days,_u.Short,bu.Standalone);break;case"E":case"EE":case"EEE":e=zu(Lu.Days,_u.Abbreviated);break;case"EEEE":e=zu(Lu.Days,_u.Wide);break;case"EEEEE":e=zu(Lu.Days,_u.Narrow);break;case"EEEEEE":e=zu(Lu.Days,_u.Short);break;case"a":case"aa":case"aaa":e=zu(Lu.DayPeriods,_u.Abbreviated);break;case"aaaa":e=zu(Lu.DayPeriods,_u.Wide);break;case"aaaaa":e=zu(Lu.DayPeriods,_u.Narrow);break;case"b":case"bb":case"bbb":e=zu(Lu.DayPeriods,_u.Abbreviated,bu.Standalone,!0);break;case"bbbb":e=zu(Lu.DayPeriods,_u.Wide,bu.Standalone,!0);break;case"bbbbb":e=zu(Lu.DayPeriods,_u.Narrow,bu.Standalone,!0);break;case"B":case"BB":case"BBB":e=zu(Lu.DayPeriods,_u.Abbreviated,bu.Format,!0);break;case"BBBB":e=zu(Lu.DayPeriods,_u.Wide,bu.Format,!0);break;case"BBBBB":e=zu(Lu.DayPeriods,_u.Narrow,bu.Format,!0);break;case"h":e=Uu(Du.Hours,1,-12);break;case"hh":e=Uu(Du.Hours,2,-12);break;case"H":e=Uu(Du.Hours,1);break;case"HH":e=Uu(Du.Hours,2);break;case"m":e=Uu(Du.Minutes,1);break;case"mm":e=Uu(Du.Minutes,2);break;case"s":e=Uu(Du.Seconds,1);break;case"ss":e=Uu(Du.Seconds,2);break;case"S":e=Uu(Du.FractionalSeconds,1);break;case"SS":e=Uu(Du.FractionalSeconds,2);break;case"SSS":e=Uu(Du.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Hu(Nu.Short);break;case"ZZZZZ":e=Hu(Nu.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Hu(Nu.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Hu(Nu.Long);break;default:return null}return Zu[t]=e,e}(t);c+=e?e(r,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Fu(t,e,n){const s=new Date(0);return s.setFullYear(t,e,n),s.setHours(0,0,0),s}function $u(t,e){const n=function(t){return ca(t)[ua.LocaleId]}(t);if(Pu[n]=Pu[n]||{},Pu[n][e])return Pu[n][e];let s="";switch(e){case"shortDate":s=Cu(t,wu.Short);break;case"mediumDate":s=Cu(t,wu.Medium);break;case"longDate":s=Cu(t,wu.Long);break;case"fullDate":s=Cu(t,wu.Full);break;case"shortTime":s=xu(t,wu.Short);break;case"mediumTime":s=xu(t,wu.Medium);break;case"longTime":s=xu(t,wu.Long);break;case"fullTime":s=xu(t,wu.Full);break;case"short":const e=$u(t,"shortTime"),n=$u(t,"shortDate");s=Vu(Eu(t,wu.Short),[e,n]);break;case"medium":const r=$u(t,"mediumTime"),i=$u(t,"mediumDate");s=Vu(Eu(t,wu.Medium),[r,i]);break;case"long":const o=$u(t,"longTime"),a=$u(t,"longDate");s=Vu(Eu(t,wu.Long),[o,a]);break;case"full":const c=$u(t,"fullTime"),l=$u(t,"fullDate");s=Vu(Eu(t,wu.Full),[c,l])}return s&&(Pu[n][e]=s),s}function Vu(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function qu(t,e,n="-",s,r){let i="";(t<0||r&&t<=0)&&(r?t=1-t:(t=-t,i=n));let o=String(t);for(;o.length<e;)o="0"+o;return s&&(o=o.substr(o.length-e)),i+o}function Uu(t,e,n=0,s=!1,r=!1){return function(i,o){let a=function(t,e){switch(t){case Du.FullYear:return e.getFullYear();case Du.Month:return e.getMonth();case Du.Date:return e.getDate();case Du.Hours:return e.getHours();case Du.Minutes:return e.getMinutes();case Du.Seconds:return e.getSeconds();case Du.FractionalSeconds:return e.getMilliseconds();case Du.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,i);if((n>0||a>-n)&&(a+=n),t===Du.Hours)0===a&&-12===n&&(a=12);else if(t===Du.FractionalSeconds)return function(t,e){return qu(t,3).substr(0,e)}(a,e);const c=ku(o,Su.MinusSign);return qu(a,e,c,s,r)}}function zu(t,e,n=bu.Format,s=!1){return function(r,i){return function(t,e,n,s,r,i){switch(n){case Lu.Months:return function(t,e,n){const s=ca(t),r=Ou([s[ua.MonthsFormat],s[ua.MonthsStandalone]],e);return Ou(r,n)}(e,r,s)[t.getMonth()];case Lu.Days:return function(t,e,n){const s=ca(t),r=Ou([s[ua.DaysFormat],s[ua.DaysStandalone]],e);return Ou(r,n)}(e,r,s)[t.getDay()];case Lu.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(i){const t=function(t){const e=ca(t);return Iu(e),(e[ua.ExtraData][2]||[]).map(t=>"string"==typeof t?Mu(t):[Mu(t[0]),Mu(t[1])])}(e),n=function(t,e,n){const s=ca(t);Iu(s);const r=Ou([s[ua.ExtraData][0],s[ua.ExtraData][1]],e)||[];return Ou(r,n)||[]}(e,r,s),i=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,s=o>=e.hours&&a>=e.minutes,r=o<n.hours||o===n.hours&&a<n.minutes;if(e.hours<n.hours){if(s&&r)return!0}else if(s||r)return!0}else if(t.hours===o&&t.minutes===a)return!0;return!1});if(-1!==i)return n[i]}return function(t,e,n){const s=ca(t),r=Ou([s[ua.DayPeriodsFormat],s[ua.DayPeriodsStandalone]],e);return Ou(r,n)}(e,r,s)[o<12?0:1];case Lu.Eras:return function(t,e){return Ou(ca(t)[ua.Eras],e)}(e,s)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(r,i,t,e,n,s)}}function Hu(t){return function(e,n,s){const r=-1*s,i=ku(n,Su.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case Nu.Short:return(r>=0?"+":"")+qu(o,2,i)+qu(Math.abs(r%60),2,i);case Nu.ShortGMT:return"GMT"+(r>=0?"+":"")+qu(o,1,i);case Nu.Long:return"GMT"+(r>=0?"+":"")+qu(o,2,i)+":"+qu(Math.abs(r%60),2,i);case Nu.Extended:return 0===s?"Z":(r>=0?"+":"")+qu(o,2,i)+":"+qu(Math.abs(r%60),2,i);default:throw new Error(`Unknown zone width "${t}"`)}}}function Bu(t){return Fu(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function Gu(t,e=!1){return function(n,s){let r;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();r=1+Math.floor((e+t)/7)}else{const t=Bu(n),e=function(t){const e=Fu(t,0,1).getDay();return Fu(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),s=t.getTime()-e.getTime();r=1+Math.round(s/6048e5)}return qu(r,t,ku(s,Su.MinusSign))}}function Wu(t,e=!1){return function(n,s){return qu(Bu(n).getFullYear(),t,ku(s,Su.MinusSign),e)}}const Zu={};function Qu(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Ju(t){return t instanceof Date&&!isNaN(t.valueOf())}class Yu{}let Ku=(()=>{class t extends Yu{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(Tu(e||this.locale)(t)){case vu.Zero:return"zero";case vu.One:return"one";case vu.Two:return"two";case vu.Few:return"few";case vu.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(hs(ul))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function Xu(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[s,r]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(s.trim()===e)return decodeURIComponent(r)}return null}let th=(()=>{class t{constructor(t,e,n,s){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(yo(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${nt(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(ko(Za),ko(Ja),ko(Oa),ko(Pa))},t.\u0275dir=Qt({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class eh{constructor(t,e,n,s){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nh=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(t){return t.name||typeof t}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,s)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new eh(null,this._ngForOf,-1,-1),null===s?void 0:s),r=new sh(t,n);e.push(r)}else if(null==s)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,s);const i=new sh(t,r);e.push(i)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,s=this._viewContainer.length;n<s;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=s,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(ko(pc),ko(oc),ko(Za))},t.\u0275dir=Qt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class sh{constructor(t,e){this.record=t,this.view=e}}let rh=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new ih,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){oh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){oh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(ko(pc),ko(oc))},t.\u0275dir=Qt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class ih{constructor(){this.$implicit=null,this.ngIf=null}}function oh(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${nt(e)}'.`)}class ah{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let ch=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),lh=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new ah(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(ko(pc),ko(oc),ko(ch,9))},t.\u0275dir=Qt({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),uh=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,s]=t.split(".");null!=(e=null!=e&&s?`${e}${s}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(ko(Oa),ko(Ja),ko(Pa))},t.\u0275dir=Qt({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})();function hh(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${nt(t)}'`)}class dh{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class ph{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const fh=new ph,gh=new dh;let mh=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Do(e))return fh;if(Lo(e))return gh;throw hh(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(ko(ec,16))},t.\u0275pipe=Jt({name:"async",type:t,pure:!1}),t})(),yh=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",s,r){if(null==e||""===e||e!=e)return null;try{return ju(e,n,r||this.locale,s)}catch(i){throw hh(t,i.message)}}}return t.\u0275fac=function(e){return new(e||t)(ko(ul,16))},t.\u0275pipe=Jt({name:"date",type:t,pure:!0}),t})(),vh=(()=>{class t{transform(t){return JSON.stringify(t,null,2)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Jt({name:"json",type:t,pure:!1}),t})(),bh=(()=>{class t{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=_h}transform(t,e=_h){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const n=this.differ.diff(t),s=e!==this.compareFn;return n&&(this.keyValues=[],n.forEachItem(t=>{this.keyValues.push(function(t,e){return{key:t,value:e}}(t.key,t.currentValue))})),(n||s)&&(this.keyValues.sort(e),this.compareFn=e),this.keyValues}}return t.\u0275fac=function(e){return new(e||t)(ko(Ja,16))},t.\u0275pipe=Jt({name:"keyvalue",type:t,pure:!1}),t})();function _h(t,e){const n=t.key,s=e.key;if(n===s)return 0;if(void 0===n)return 1;if(void 0===s)return-1;if(null===n)return 1;if(null===s)return-1;if("string"==typeof n&&"string"==typeof s)return n<s?-1:1;if("number"==typeof n&&"number"==typeof s)return n-s;if("boolean"==typeof n&&"boolean"==typeof s)return n<s?-1:1;const r=String(n),i=String(s);return r==i?0:r<i?-1:1}let wh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({providers:[{provide:Yu,useClass:Ku}]}),t})();const Sh="browser";let Ch=(()=>{class t{}return t.\u0275prov=pt({token:t,providedIn:"root",factory:()=>new xh(hs(tu),window)}),t})();class xh{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let s=n.currentNode;for(;s;){const t=s.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}s=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,s=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],s-r[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Eh(this.window.history)||Eh(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Eh(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class kh{}class Th extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){Kl||(Kl=t)}(new Th)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Oh=Oh||document.querySelector("base"),Oh?Oh.getAttribute("href"):null);return null==e?null:function(t){Ih=Ih||document.createElement("a"),Ih.setAttribute("href",t);const e=Ih.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){Oh=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Xu(document.cookie,t)}}let Ih,Oh=null;const Mh=new Bn("TRANSITION_ID"),Ah=[{provide:el,useFactory:function(t,e,n){return()=>{n.get(nl).donePromise.then(()=>{const n=Xl(),s=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let t=0;t<s.length;t++)n.remove(s[t])})}},deps:[Mh,tu,oo],multi:!0}];class Ph{static init(){!function(t){Pl=t}(new Ph)}addToWindow(t){Pt.getAngularTestability=(e,n=!0)=>{const s=t.findTestabilityInTree(e,n);if(null==s)throw new Error("Could not find testability for element.");return s},Pt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Pt.getAllAngularRootElements=()=>t.getAllRootElements(),Pt.frameworkStabilizers||(Pt.frameworkStabilizers=[]),Pt.frameworkStabilizers.push(t=>{const e=Pt.getAllAngularTestabilities();let n=e.length,s=!1;const r=function(e){s=s||e,n--,0==n&&t(s)};e.forEach(function(t){t.whenStable(r)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const s=t.getTestability(e);return null!=s?s:n?Xl().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Rh=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Nh=new Bn("EventManagerPlugins");let Dh=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let s=0;s<n.length;s++){const e=n[s];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(hs(Nh),hs(Sl))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Lh{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const s=Xl().getGlobalEventTarget(this._doc,t);if(!s)throw new Error(`Unsupported event target ${s} for event ${e}`);return this.addEventListener(s,e,n)}}let jh=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Fh=(()=>{class t extends jh{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const s=this._doc.createElement("style");s.textContent=t,n.push(e.appendChild(s))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach($h),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($h))}}return t.\u0275fac=function(e){return new(e||t)(hs(tu))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function $h(t){Xl().remove(t)}const Vh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},qh=/%COMP%/g;function Uh(t,e,n){for(let s=0;s<e.length;s++){let r=e[s];Array.isArray(r)?Uh(t,r,n):(r=r.replace(qh,t),n.push(r))}return n}function zh(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Hh=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Bh(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case It.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Gh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case It.ShadowDom:return new Wh(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Uh(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(hs(Dh),hs(Fh),hs(sl))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Bh{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Vh[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,s){if(s){e=s+":"+e;const r=Vh[s];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const s=Vh[n];s?t.removeAttributeNS(s,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,s){s&(ar.DashCase|ar.Important)?t.style.setProperty(e,n,s&ar.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&ar.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,zh(n)):this.eventManager.addEventListener(t,e,zh(n))}}class Gh extends Bh{constructor(t,e,n,s){super(t),this.component=n;const r=Uh(s+"-"+n.id,n.styles,[]);e.addStyles(r),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(qh,t)}(s+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(qh,t)}(s+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Wh extends Bh{constructor(t,e,n,s){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=Uh(s.id,s.styles,[]);for(let i=0;i<r.length;i++){const t=document.createElement("style");t.textContent=r[i],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Zh=(()=>{class t extends Lh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(hs(tu))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Qh=["alt","control","meta","shift"],Jh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Kh={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Xh=(()=>{class t extends Lh{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,s){const r=t.parseEventName(n),i=t.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xl().onAndCancel(e,r.domEventName,i))}static parseEventName(e){const n=e.toLowerCase().split("."),s=n.shift();if(0===n.length||"keydown"!==s&&"keyup"!==s)return null;const r=t._normalizeKey(n.pop());let i="";if(Qh.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),i+=t+".")}),i+=r,0!=n.length||0===r.length)return null;const o={};return o.domEventName=s,o.fullKey=i,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Yh.hasOwnProperty(e)&&(e=Yh[e]))}return Jh[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Qh.forEach(s=>{s!=n&&Kh[s](t)&&(e+=s+".")}),e+=n,e}static eventCallback(e,n,s){return r=>{t.getEventFullKey(r)===e&&s.runGuarded(()=>n(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(hs(tu))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const td=Fl(Ql,"browser",[{provide:al,useValue:Sh},{provide:ol,useValue:function(){Th.makeCurrent(),Ph.init()},multi:!0},{provide:tu,useFactory:function(){return function(t){fe=t}(document),document},deps:[]}]),ed=[[],{provide:Wi,useValue:"root"},{provide:rr,useFactory:function(){return new rr},deps:[]},{provide:Nh,useClass:Zh,multi:!0,deps:[tu,Sl,al]},{provide:Nh,useClass:Xh,multi:!0,deps:[tu]},[],{provide:Hh,useClass:Hh,deps:[Dh,Fh,sl]},{provide:Aa,useExisting:Hh},{provide:jh,useExisting:Fh},{provide:Fh,useClass:Fh,deps:[tu]},{provide:Ol,useClass:Ol,deps:[Sl]},{provide:Dh,useClass:Dh,deps:[Nh,Sl]},{provide:kh,useClass:Rh,deps:[]},[]];let nd=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:sl,useValue:e.appId},{provide:Mh,useExisting:sl},Ah]}}}return t.\u0275fac=function(e){return new(e||t)(hs(t,12))},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({providers:ed,imports:[wh,Yl]}),t})();function sd(t,e){return new b(n=>{const s=t.length;if(0===s)return void n.complete();const r=new Array(s);let i=0,o=0;for(let a=0;a<s;a++){const c=L(t[a]);let l=!1;n.add(c.subscribe({next:t=>{l||(l=!0,o++),r[a]=t},error:t=>n.error(t),complete:()=>{i++,(i===s||!l)&&(o===s&&n.next(e?e.reduce((t,e,n)=>(t[e]=r[n],t),{}):r),n.complete())}}))}})}"undefined"!=typeof window&&window;let rd=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Pa),ko(Oa))},t.\u0275dir=Qt({type:t}),t})(),id=(()=>{class t extends rd{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=qn(t)))(n||t)}}(),t.\u0275dir=Qt({type:t,features:[co]}),t})();const od=new Bn("NgValueAccessor"),ad={provide:od,useExisting:it(()=>cd),multi:!0};let cd=(()=>{class t extends id{writeValue(t){this.setProperty("checked",t)}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=qn(t)))(n||t)}}(),t.\u0275dir=Qt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Fo("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[wa([ad]),co]}),t})();const ld={provide:od,useExisting:it(()=>hd),multi:!0},ud=new Bn("CompositionEventMode");let hd=(()=>{class t extends rd{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Xl()?Xl().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Pa),ko(Oa),ko(ud,8))},t.\u0275dir=Qt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Fo("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[wa([ld]),co]}),t})();const dd=new Bn("NgValidators"),pd=new Bn("NgAsyncValidators");function fd(t){return null!=t}function gd(t){const e=Do(t)?L(t):t;return jo(e),e}function md(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function yd(t,e){return e.map(e=>e(t))}function vd(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function bd(t){return null!=t?function(t){if(!t)return null;const e=t.filter(fd);return 0==e.length?null:function(t){return md(yd(t,e))}}(vd(t)):null}function _d(t){return null!=t?function(t){if(!t)return null;const e=t.filter(fd);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(c(e))return sd(e,null);if(l(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return sd(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return sd(t=1===t.length&&c(t[0])?t[0]:t,null).pipe(T(t=>e(...t)))}return sd(t,null)}(yd(t,e).map(gd)).pipe(T(md))}}(vd(t)):null}function wd(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Sd(t){return t?Array.isArray(t)?t:[t]:[]}function Cd(t,e){return Array.isArray(t)?t.includes(e):t===e}function xd(t,e){const n=Sd(e);return Sd(t).forEach(t=>{Cd(n,t)||n.push(t)}),n}function Ed(t,e){return Sd(e).filter(e=>!Cd(t,e))}let kd=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=bd(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=_d(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t}),t})(),Td=(()=>{class t extends kd{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=qn(t)))(n||t)}}(),t.\u0275dir=Qt({type:t,features:[co]}),t})();class Id extends kd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Od{constructor(t){this._cd=t}is(t){var e,n,s;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(s=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===s?void 0:s[t])}}let Md=(()=>{class t extends Od{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Id,2))},t.\u0275dir=Qt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&Qo("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[co]}),t})(),Ad=(()=>{class t extends Od{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Td,10))},t.\u0275dir=Qt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,e){2&t&&Qo("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))("ng-submitted",e.is("submitted"))},features:[co]}),t})();function Pd(t,e){Nd(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Dd(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Dd(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Rd(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Nd(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(wd(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const s=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(wd(s,e.asyncValidator)):"function"==typeof s&&t.setAsyncValidators([s]);const r=()=>t.updateValueAndValidity();Rd(e._rawValidators,r),Rd(e._rawAsyncValidators,r)}function Dd(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Ld(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const jd="VALID",Fd="INVALID",$d="PENDING",Vd="DISABLED";function qd(t){return(Bd(t)?t.validators:t)||null}function Ud(t){return Array.isArray(t)?bd(t):t||null}function zd(t,e){return(Bd(e)?e.asyncValidators:t)||null}function Hd(t){return Array.isArray(t)?_d(t):t||null}function Bd(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Gd{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Ud(this._rawValidators),this._composedAsyncValidatorFn=Hd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===jd}get invalid(){return this.status===Fd}get pending(){return this.status==$d}get disabled(){return this.status===Vd}get enabled(){return this.status!==Vd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Ud(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Hd(t)}addValidators(t){this.setValidators(xd(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(xd(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Ed(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Ed(t,this._rawAsyncValidators))}hasValidator(t){return Cd(this._rawValidators,t)}hasAsyncValidator(t){return Cd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=$d,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Vd,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=jd,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jd||this.status===$d)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vd:jd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=$d,this._hasOwnPendingAsyncValidator=!0;const e=gd(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let s=t;return e.forEach(t=>{s=s instanceof Zd?s.controls.hasOwnProperty(t)?s.controls[t]:null:s instanceof Qd&&s.at(t)||null}),s}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Fc,this.statusChanges=new Fc}_calculateStatus(){return this._allControlsDisabled()?Vd:this.errors?Fd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($d)?$d:this._anyControlsHaveStatus(Fd)?Fd:jd}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Bd(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Wd extends Gd{constructor(t=null,e,n){super(qd(e),zd(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Ld(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Ld(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Zd extends Gd{constructor(t,e,n){super(qd(e),zd(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,s)=>{n.reset(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Wd?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,s)=>{n=e(n,t,s)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Qd extends Gd{constructor(t,e,n){super(qd(e),zd(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,s)=>{n.reset(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Wd?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Jd={provide:Td,useExisting:it(()=>Kd)},Yd=(()=>Promise.resolve(null))();let Kd=(()=>{class t extends Td{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Fc,this.form=new Zd({},bd(t),_d(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Yd.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Pd(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Yd.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Ld(this._directives,t)})}addFormGroup(t){Yd.then(()=>{const e=this._findContainer(t.path),n=new Zd({});(function(t,e){Nd(t,e)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Yd.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Yd.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(ko(dd,10),ko(pd,10))},t.\u0275dir=Qt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Fo("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[wa([Jd]),co]}),t})();const Xd={provide:Id,useExisting:it(()=>ep)},tp=(()=>Promise.resolve(null))();let ep=(()=>{class t extends Id{constructor(t,e,n,s){super(),this.control=new Wd,this._registered=!1,this.update=new Fc,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,s,r;return Array.isArray(e),e.forEach(t=>{t.constructor===hd?n=t:function(t){return Object.getPrototypeOf(t.constructor)===id}(t)?s=t:r=t}),r||s||n||null}(0,s)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(t,e){return[...e.path,t]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Pd(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){tp.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;tp.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(ko(Td,9),ko(dd,10),ko(pd,10),ko(od,10))},t.\u0275dir=Qt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[wa([Xd]),co,ce]}),t})(),np=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),sp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({}),t})();const rp={provide:dd,useExisting:it(()=>ip),multi:!0};let ip=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(t){return function(t){return null==t||0===t.length}(t.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&So("required",e.required?"":null)},inputs:{required:"required"},features:[wa([rp])]}),t})(),op=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({imports:[[sp]]}),t})(),ap=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({imports:[op]}),t})();class cp{}const lp="*";function up(t,e){return{type:7,name:t,definitions:e,options:{}}}function hp(t,e=null){return{type:4,styles:e,timings:t}}function dp(t,e=null){return{type:2,steps:t,options:e}}function pp(t){return{type:6,styles:t,offset:null}}function fp(t,e,n){return{type:0,name:t,styles:e,options:n}}function gp(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function mp(t){Promise.resolve(null).then(t)}class yp{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){mp(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class vp{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,s=0;const r=this.players.length;0==r?mp(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==r&&this._onFinish()}),t.onDestroy(()=>{++n==r&&this._onDestroy()}),t.onStart(()=>{++s==r&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function bp(){return"undefined"!=typeof window&&void 0!==window.document}function _p(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function wp(t){switch(t.length){case 0:return new yp;case 1:return t[0];default:return new vp(t)}}function Sp(t,e,n,s,r={},i={}){const o=[],a=[];let c=-1,l=null;if(s.forEach(t=>{const n=t.offset,s=n==c,u=s&&l||{};Object.keys(t).forEach(n=>{let s=n,a=t[n];if("offset"!==n)switch(s=e.normalizePropertyName(s,o),a){case"!":a=r[n];break;case lp:a=i[n];break;default:a=e.normalizeStyleValue(n,s,a,o)}u[s]=a}),s||a.push(u),l=u,c=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function Cp(t,e,n,s){switch(e){case"start":t.onStart(()=>s(n&&xp(n,"start",t)));break;case"done":t.onDone(()=>s(n&&xp(n,"done",t)));break;case"destroy":t.onDestroy(()=>s(n&&xp(n,"destroy",t)))}}function xp(t,e,n){const s=n.totalTime,r=Ep(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==s?t.totalTime:s,!!n.disabled),i=t._data;return null!=i&&(r._data=i),r}function Ep(t,e,n,s,r="",i=0,o){return{element:t,triggerName:e,fromState:n,toState:s,phaseName:r,totalTime:i,disabled:!!o}}function kp(t,e,n){let s;return t instanceof Map?(s=t.get(e),s||t.set(e,s=n)):(s=t[e],s||(s=t[e]=n)),s}function Tp(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Ip=(t,e)=>!1,Op=(t,e)=>!1,Mp=(t,e,n)=>[];const Ap=_p();(Ap||"undefined"!=typeof Element)&&(Ip=bp()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),Op=(()=>{if(Ap||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Op}})(),Mp=(t,e,n)=>{let s=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)s.push(n[t])}else{const n=t.querySelector(e);n&&s.push(n)}return s});let Pp=null,Rp=!1;function Np(t){Pp||(Pp=("undefined"!=typeof document?document.body:null)||{},Rp=!!Pp.style&&"WebkitAppearance"in Pp.style);let e=!0;return Pp.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Pp.style,!e&&Rp&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Pp.style)),e}const Dp=Op,Lp=Ip,jp=Mp;function Fp(t){const e={};return Object.keys(t).forEach(n=>{const s=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[s]=t[n]}),e}let $p=(()=>{class t{validateStyleProperty(t){return Np(t)}matchesElement(t,e){return Dp(t,e)}containsElement(t,e){return Lp(t,e)}query(t,e,n){return jp(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,s,r,i=[],o){return new yp(n,s)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Vp=(()=>{class t{}return t.NOOP=new $p,t})();const qp="ng-enter",Up="ng-leave",zp="ng-trigger",Hp=".ng-trigger",Bp="ng-animating",Gp=".ng-animating";function Wp(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Zp(parseFloat(e[1]),e[2])}function Zp(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Qp(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let s,r=0,i="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};s=Zp(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(r=Zp(parseFloat(o),n[4]));const a=n[5];a&&(i=a)}else s=t;if(!n){let n=!1,i=e.length;s<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(i,0,`The provided timing value "${t}" is invalid.`)}return{duration:s,delay:r,easing:i}}(t,e,n)}function Jp(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Yp(t,e,n={}){if(e)for(let s in t)n[s]=t[s];else Jp(t,n);return n}function Kp(t,e,n){return n?e+":"+n+";":""}function Xp(t){let e="";for(let n=0;n<t.style.length;n++){const s=t.style.item(n);e+=Kp(0,s,t.style.getPropertyValue(s))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Kp(0,uf(n),t.style[n]));t.setAttribute("style",e)}function tf(t,e,n){t.style&&(Object.keys(e).forEach(s=>{const r=lf(s);n&&!n.hasOwnProperty(s)&&(n[s]=t.style[r]),t.style[r]=e[s]}),_p()&&Xp(t))}function ef(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=lf(e);t.style[n]=""}),_p()&&Xp(t))}function nf(t){return Array.isArray(t)?1==t.length?t[0]:dp(t):t}const sf=new RegExp("{{\\s*(.+?)\\s*}}","g");function rf(t){let e=[];if("string"==typeof t){let n;for(;n=sf.exec(t);)e.push(n[1]);sf.lastIndex=0}return e}function of(t,e,n){const s=t.toString(),r=s.replace(sf,(t,s)=>{let r=e[s];return e.hasOwnProperty(s)||(n.push(`Please provide a value for the animation param ${s}`),r=""),r.toString()});return r==s?t:r}function af(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const cf=/-+([a-z0-9])/g;function lf(t){return t.replace(cf,(...t)=>t[1].toUpperCase())}function uf(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function hf(t,e){return 0===t||0===e}function df(t,e,n){const s=Object.keys(n);if(s.length&&e.length){let i=e[0],o=[];if(s.forEach(t=>{i.hasOwnProperty(t)||o.push(t),i[t]=n[t]}),o.length)for(var r=1;r<e.length;r++){let n=e[r];o.forEach(function(e){n[e]=ff(t,e)})}}return e}function pf(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function ff(t,e){return window.getComputedStyle(t)[e]}function gf(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const s=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof s)return void e.push(s);t=s}const s=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const r=s[1],i=s[2],o=s[3];e.push(vf(r,o));"<"==i[0]&&!("*"==r&&"*"==o)&&e.push(vf(o,r))}(t,n,e)):n.push(t),n}const mf=new Set(["true","1"]),yf=new Set(["false","0"]);function vf(t,e){const n=mf.has(t)||yf.has(t),s=mf.has(e)||yf.has(e);return(r,i)=>{let o="*"==t||t==r,a="*"==e||e==i;return!o&&n&&"boolean"==typeof r&&(o=r?mf.has(t):yf.has(t)),!a&&s&&"boolean"==typeof i&&(a=i?mf.has(e):yf.has(e)),o&&a}}const bf=new RegExp("s*:selfs*,?","g");function _f(t,e,n){return new wf(t).build(e,n)}class wf{constructor(t){this._driver=t}build(t,e){const n=new Sf(e);return this._resetContextStyleTimingState(n),pf(this,nf(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,s=e.depCount=0;const r=[],i=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,s=n.name;s.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,r.push(this.visitState(n,e))}),n.name=s}else if(1==t.type){const r=this.visitTransition(t,e);n+=r.queryCount,s+=r.depCount,i.push(r)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:i,queryCount:n,depCount:s,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),s=t.options&&t.options.params||null;if(n.containsDynamicStyles){const r=new Set,i=s||{};if(n.styles.forEach(t=>{if(Cf(t)){const e=t;Object.keys(e).forEach(t=>{rf(e[t]).forEach(t=>{i.hasOwnProperty(t)||r.add(t)})})}}),r.size){const n=af(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:s?{params:s}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=pf(this,nf(t.animation),e);return{type:1,matchers:gf(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:xf(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>pf(this,t,e)),options:xf(t.options)}}visitGroup(t,e){const n=e.currentTime;let s=0;const r=t.steps.map(t=>{e.currentTime=n;const r=pf(this,t,e);return s=Math.max(s,e.currentTime),r});return e.currentTime=s,{type:3,steps:r,options:xf(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Ef(Qp(t,e).duration,0,"");const s=t;if(s.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Ef(0,0,"");return t.dynamic=!0,t.strValue=s,t}return n=n||Qp(s,e),Ef(n.duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let s,r=t.styles?t.styles:pp({});if(5==r.type)s=this.visitKeyframes(r,e);else{let r=t.styles,i=!1;if(!r){i=!0;const t={};n.easing&&(t.easing=n.easing),r=pp(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(r,e);o.isEmptyStep=i,s=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:s,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==lp?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let s=!1,r=null;return n.forEach(t=>{if(Cf(t)){const e=t,n=e.easing;if(n&&(r=n,delete e.easing),!s)for(let t in e)if(e[t].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let s=e.currentTime,r=e.currentTime;n&&r>0&&(r-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const i=e.collectedStyles[e.currentQuerySelector],o=i[n];let a=!0;o&&(r!=s&&r>=o.startTime&&s<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${s}ms"`),a=!1),r=o.startTime),a&&(i[n]={startTime:r,endTime:s}),e.options&&function(t,e,n){const s=e.params||{},r=rf(t);r.length&&r.forEach(t=>{s.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let s=0;const r=[];let i=!1,o=!1,a=0;const c=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let c=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Cf(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Cf(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),l=0;return null!=c&&(s++,l=n.offset=c),o=o||l<0||l>1,i=i||l<a,a=l,r.push(l),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),i&&e.errors.push("Please ensure that all keyframe offsets are in order");const l=t.steps.length;let u=0;s>0&&s<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(u=1/(l-1));const h=l-1,d=e.currentTime,p=e.currentAnimateTimings,f=p.duration;return c.forEach((t,s)=>{const i=u>0?s==h?1:u*s:r[s],o=i*f;e.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(t,e),t.offset=i,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:pf(this,nf(t.animation),e),options:xf(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:xf(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:xf(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,s=t.options||{};e.queryCount++,e.currentQuery=t;const[r,i]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(bf,"")),[t=t.replace(/@\*/g,Hp).replace(/@\w+/g,t=>Hp+"-"+t.substr(1)).replace(/:animating/g,Gp),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+r:r,kp(e.collectedStyles,e.currentQuerySelector,{});const o=pf(this,nf(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:r,limit:s.limit||0,optional:!!s.optional,includeSelf:i,animation:o,originalSelector:t.selector,options:xf(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Qp(t.timings,e.errors,!0);return{type:12,animation:pf(this,nf(t.animation),e),timings:n,options:null}}}class Sf{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Cf(t){return!Array.isArray(t)&&"object"==typeof t}function xf(t){return t?(t=Jp(t)).params&&(t.params=function(t){return t?Jp(t):null}(t.params)):t={},t}function Ef(t,e,n){return{duration:t,delay:e,easing:n}}function kf(t,e,n,s,r,i,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:s,duration:r,delay:i,totalTime:r+i,easing:o,subTimeline:a}}class Tf{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const If=new RegExp(":enter","g"),Of=new RegExp(":leave","g");function Mf(t,e,n,s,r,i={},o={},a,c,l=[]){return(new Af).buildKeyframes(t,e,n,s,r,i,o,a,c,l)}class Af{buildKeyframes(t,e,n,s,r,i,o,a,c,l=[]){c=c||new Tf;const u=new Rf(t,e,c,s,r,l,[]);u.options=a,u.currentTimeline.setStyles([i],null,u.errors,a),pf(this,n,u);const h=u.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,u.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[kf(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const s=e.createSubContext(t.options),r=e.currentTimeline.currentTime,i=this._visitSubInstructions(n,s,s.options);r!=i&&e.transformIntoNewTimeline(i)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const r=null!=n.duration?Wp(n.duration):null,i=null!=n.delay?Wp(n.delay):null;return 0!==r&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,r,i);s=Math.max(s,n.duration+n.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),pf(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let s=e;const r=t.options;if(r&&(r.params||r.delay)&&(s=e.createSubContext(r),s.transformIntoNewTimeline(),null!=r.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=Pf);const t=Wp(r.delay);s.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>pf(this,t,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>n&&s.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let s=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?Wp(t.options.delay):0;t.steps.forEach(i=>{const o=e.createSubContext(t.options);r&&o.delayNextStep(r),pf(this,i,o),s=Math.max(s,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(s),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Qp(e.params?of(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),s=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),s.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),s.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,s=e.currentAnimateTimings;!s&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=s&&s.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,s=e.currentTimeline.duration,r=n.duration,i=e.createSubContext().currentTimeline;i.easing=n.easing,t.styles.forEach(t=>{i.forwardTime((t.offset||0)*r),i.setStyles(t.styles,t.easing,e.errors,e.options),i.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(i),e.transformIntoNewTimeline(s+r),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,s=t.options||{},r=s.delay?Wp(s.delay):0;r&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Pf);let i=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!s.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,s)=>{e.currentQueryIndex=s;const o=e.createSubContext(t.options,n);r&&o.delayNextStep(r),n===e.element&&(a=o.currentTimeline),pf(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),i=Math.max(i,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(i),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,s=e.currentTimeline,r=t.timings,i=Math.abs(r.duration),o=i*(e.currentQueryTotal-1);let a=i*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const c=e.currentTimeline;a&&c.delayNextStep(a);const l=c.currentTime;pf(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=s.currentTime-l+(s.startTime-n.currentTimeline.startTime)}}const Pf={};class Rf{constructor(t,e,n,s,r,i,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=s,this._leaveClassName=r,this.errors=i,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Pf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Nf(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let s=this.options;null!=n.duration&&(s.duration=Wp(n.duration)),null!=n.delay&&(s.delay=Wp(n.delay));const r=n.params;if(r){let t=s.params;t||(t=this.options.params={}),Object.keys(r).forEach(n=>{(!e||!t.hasOwnProperty(n))&&(t[n]=of(r[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const s=e||this.element,r=new Rf(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=Pf,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const s={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new Df(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,s,t.stretchStartingKeyframe);return this.timelines.push(r),s}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,s,r,i){let o=[];if(s&&o.push(this.element),t.length>0){t=(t=t.replace(If,"."+this._enterClassName)).replace(Of,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return!r&&0==o.length&&i.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class Nf{constructor(t,e,n,s){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Nf(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||lp,this._currentKeyframe[t]=lp}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,s){e&&(this._previousKeyframe.easing=e);const r=s&&s.params||{},i=function(t,e){const n={};let s;return t.forEach(t=>{"*"===t?(s=s||Object.keys(e),s.forEach(t=>{n[t]=lp})):Yp(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(i).forEach(t=>{const e=of(i[t],r,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:lp),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],s=t._styleSummary[e];(!n||s.time>n.time)&&this._updateStyle(e,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((r,i)=>{const o=Yp(r,!0);Object.keys(o).forEach(n=>{const s=o[n];"!"==s?t.add(n):s==lp&&e.add(n)}),n||(o.offset=i/this.duration),s.push(o)});const r=t.size?af(t.values()):[],i=e.size?af(e.values()):[];if(n){const t=s[0],e=Jp(t);t.offset=0,e.offset=1,s=[t,e]}return kf(this.element,s,r,i,this.duration,this.startTime,this.easing,!1)}}class Df extends Nf{constructor(t,e,n,s,r,i,o=!1){super(t,e,i.delay),this.keyframes=n,this.preStyleProps=s,this.postStyleProps=r,this._stretchStartingKeyframe=o,this.timings={duration:i.duration,delay:i.delay,easing:i.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:s}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],i=n+e,o=e/i,a=Yp(t[0],!1);a.offset=0,r.push(a);const c=Yp(t[0],!1);c.offset=Lf(o),r.push(c);const l=t.length-1;for(let s=1;s<=l;s++){let o=Yp(t[s],!1);o.offset=Lf((e+o.offset*n)/i),r.push(o)}n=i,e=0,s="",t=r}return kf(this.element,t,this.preStyleProps,this.postStyleProps,n,e,s,!0)}}function Lf(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class jf{}class Ff extends jf{normalizePropertyName(t,e){return lf(t)}normalizeStyleValue(t,e,n,s){let r="";const i=n.toString().trim();if($f[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&s.push(`Please provide a CSS unit value for ${t}:${n}`)}return i+r}}const $f=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Vf(t,e,n,s,r,i,o,a,c,l,u,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:i,toState:s,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:h,errors:d}}const qf={};class Uf{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,s){return function(t,e,n,s,r){return t.some(t=>t(e,n,s,r))}(this.ast.matchers,t,e,n,s)}buildStyles(t,e,n){const s=this._stateStyles["*"],r=this._stateStyles[t],i=s?s.buildStyles(e,n):{};return r?r.buildStyles(e,n):i}build(t,e,n,s,r,i,o,a,c,l){const u=[],h=this.ast.options&&this.ast.options.params||qf,d=this.buildStyles(n,o&&o.params||qf,u),p=a&&a.params||qf,f=this.buildStyles(s,p,u),g=new Set,m=new Map,y=new Map,v="void"===s,b={params:Object.assign(Object.assign({},h),p)},_=l?[]:Mf(t,e,this.ast.animation,r,i,d,f,b,c,u);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),u.length)return Vf(e,this._triggerName,n,s,v,d,f,[],[],m,y,w,u);_.forEach(t=>{const n=t.element,s=kp(m,n,{});t.preStyleProps.forEach(t=>s[t]=!0);const r=kp(y,n,{});t.postStyleProps.forEach(t=>r[t]=!0),n!==e&&g.add(n)});const S=af(g.values());return Vf(e,this._triggerName,n,s,v,d,f,_,S,m,y,w)}}class zf{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},s=Jp(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(s[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const r=t;Object.keys(r).forEach(t=>{let i=r[t];i.length>1&&(i=of(i,s,e));const o=this.normalizer.normalizePropertyName(t,e);i=this.normalizer.normalizeStyleValue(t,o,i,e),n[o]=i})}}),n}}class Hf{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new zf(t.style,t.options&&t.options.params||{},n)}),Bf(this.states,"true","1"),Bf(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Uf(t,e,this.states))}),this.fallbackTransition=function(t,e,n){return new Uf(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},e)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,s){return this.transitionFactories.find(r=>r.match(t,e,n,s))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Bf(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Gf=new Tf;class Wf{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],s=_f(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=s}_buildPlayer(t,e,n){const s=t.element,r=Sp(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(s,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const s=[],r=this._animations[t];let i;const o=new Map;if(r?(i=Mf(this._driver,e,r,qp,Up,{},{},n,Gf,s),i.forEach(t=>{const e=kp(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(s.push("The requested animation doesn't exist or has already been destroyed"),i=[]),s.length)throw new Error(`Unable to create the animation due to the following errors: ${s.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,lp)})});const a=wp(i.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,s){const r=Ep(e,"","","");return Cp(this._getPlayer(t),n,r,s),()=>{}}command(t,e,n,s){if("register"==n)return void this.register(t,s[0]);if("create"==n)return void this.create(t,e,s[0]||{});const r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(t)}}}const Zf="ng-animate-queued",Qf="ng-animate-disabled",Jf=".ng-animate-disabled",Yf=[],Kf={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Xf={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},tg="__ng_removed";class eg{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){const e=Jp(t);delete e.value,this.options=e}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const ng="void",sg=new eg(ng);class rg{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,dg(e,this._hostClassName)}listen(t,e,n,s){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function(t){return"start"==t||"done"==t}(n))throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);const r=kp(this._elementListeners,t,[]),i={name:e,phase:n,callback:s};r.push(i);const o=kp(this._engine.statesByElement,t,{});return o.hasOwnProperty(e)||(dg(t,zp),dg(t,zp+"-"+e),o[e]=sg),()=>{this._engine.afterFlush(()=>{const t=r.indexOf(i);t>=0&&r.splice(t,1),this._triggers[e]||delete o[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,s=!0){const r=this._getTrigger(e),i=new og(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(dg(t,zp),dg(t,zp+"-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const c=new eg(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&c.absorbOptions(a.options),o[e]=c,a||(a=sg),c.value!==ng&&a.value===c.value){if(!function(t,e){const n=Object.keys(t),s=Object.keys(e);if(n.length!=s.length)return!1;for(let r=0;r<n.length;r++){const s=n[r];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}(a.params,c.params)){const e=[],n=r.matchStyles(a.value,a.params,e),s=r.matchStyles(c.value,c.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{ef(t,n),tf(t,s)})}return}const l=kp(this._engine.playersByElement,t,[]);l.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let u=r.matchTransition(a.value,c.value,t,c.params),h=!1;if(!u){if(!s)return;u=r.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:u,fromState:a,toState:c,player:i,isFallbackTransition:h}),h||(dg(t,Zf),i.onStart(()=>{pg(t,Zf)})),i.onDone(()=>{let e=this.players.indexOf(i);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(i);t>=0&&n.splice(t,1)}}),this.players.push(i),l.push(i),i}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Hp,!0);n.forEach(t=>{if(t[tg])return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,s){const r=this._engine.statesByElement.get(t);if(r){const i=[];if(Object.keys(r).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,ng,s);n&&i.push(n)}}),i.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&wp(i).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const s=new Set;e.forEach(e=>{const r=e.name;if(s.has(r))return;s.add(r);const i=this._triggers[r].fallbackTransition,o=n[r]||sg,a=new eg(ng),c=new og(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:a,player:c,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let s=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)s=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(t),s)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[tg];(!s||s===Kf)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){dg(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const s=n.player;if(s.destroyed)return;const r=n.element,i=this._elementListeners.get(r);i&&i.forEach(e=>{if(e.name==n.triggerName){const s=Ep(r,n.triggerName,n.fromState.value,n.toState.value);s._data=t,Cp(n.player,e.phase,s,e.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,s=e.transition.ast.depCount;return 0==n||0==s?n-s:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class ig{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new rg(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let s=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),s=!0;break}s||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let s=this._namespaceLookup[t];s&&s.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let s=0;s<t.length;s++){const r=n[t[s]].namespaceId;if(r){const t=this._fetchNamespace(r);t&&e.add(t)}}}return e}trigger(t,e,n,s){if(ag(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,n,s),!0}return!1}insertNode(t,e,n,s){if(!ag(e))return;const r=e[tg];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(e,n)}s&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),dg(t,Qf)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),pg(t,Qf))}removeNode(t,e,n,s){if(ag(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,s):this.markElementAsRemoved(t,e,!1,s),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,s)}}else this._onRemovalComplete(e,s)}markElementAsRemoved(t,e,n,s){this.collectedLeaveElements.push(e),e[tg]={namespaceId:t,setForRemoval:s,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,s,r){return ag(e)?this._fetchNamespace(t).listen(e,n,s,r):()=>{}}_buildInstruction(t,e,n,s,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,s,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,Hp,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Gp,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return wp(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[tg];if(e&&e.setForRemoval){if(t[tg]=Kf,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Jf)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Jf,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)dg(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?wp(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new Tf,s=[],r=new Map,i=[],o=new Map,a=new Map,c=new Map,l=new Set;this.disabledNodes.forEach(t=>{l.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)l.add(e[n])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=ug(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((t,e)=>{const n=qp+f++;p.set(e,n),t.forEach(t=>dg(t,n))});const g=[],m=new Set,y=new Set;for(let M=0;M<this.collectedLeaveElements.length;M++){const t=this.collectedLeaveElements[M],e=t[tg];e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=ug(h,Array.from(m));b.forEach((t,e)=>{const n=Up+f++;v.set(e,n),t.forEach(t=>dg(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=p.get(e);t.forEach(t=>pg(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>pg(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let M=this._namespaceList.length-1;M>=0;M--)this._namespaceList[M].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(_.push(e),this.collectedEnterElements.length){const t=r[tg];if(t&&t.setForMove)return void e.destroy()}const l=!u||!this.driver.containsElement(u,r),h=v.get(r),d=p.get(r),f=this._buildInstruction(t,n,d,h,l);if(f.errors&&f.errors.length)w.push(f);else{if(l)return e.onStart(()=>ef(r,f.fromStyles)),e.onDestroy(()=>tf(r,f.toStyles)),void s.push(e);if(t.isFallbackTransition)return e.onStart(()=>ef(r,f.fromStyles)),e.onDestroy(()=>tf(r,f.toStyles)),void s.push(e);f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(r,f.timelines),i.push({instruction:f,player:e,element:r}),f.queriedElements.forEach(t=>kp(o,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),f.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let s=c.get(e);s||c.set(e,s=new Set),n.forEach(t=>s.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,C=new Map;i.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),s.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{kp(S,e,[]).push(t),t.destroy()})});const x=g.filter(t=>mg(t,a,c)),E=new Map;lg(E,this.driver,y,c,lp).forEach(t=>{mg(t,a,c)&&x.push(t)});const k=new Map;d.forEach((t,e)=>{lg(k,this.driver,new Set(t),a,"!")}),x.forEach(t=>{const e=E.get(t),n=k.get(t);E.set(t,Object.assign(Object.assign({},e),n))});const T=[],I=[],O={};i.forEach(t=>{const{element:e,player:i,instruction:o}=t;if(n.has(e)){if(l.has(e))return i.onDestroy(()=>tf(e,o.toStyles)),i.disabled=!0,i.overrideTotalTime(o.totalTime),void s.push(i);let t=O;if(C.size>1){let n=e;const s=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}s.push(n)}s.forEach(e=>C.set(e,t))}const n=this._buildAnimation(i.namespaceId,o,S,r,k,E);if(i.setRealPlayer(n),t===O)T.push(i);else{const e=this.playersByElement.get(t);e&&e.length&&(i.parentPlayer=wp(e)),s.push(i)}}else ef(e,o.fromStyles),i.onDestroy(()=>tf(e,o.toStyles)),I.push(i),l.has(e)&&s.push(i)}),I.forEach(t=>{const e=r.get(t.element);if(e&&e.length){const n=wp(e);t.setRealPlayer(n)}}),s.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let M=0;M<g.length;M++){const t=g[M],e=t[tg];if(pg(t,Up),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let s=this.driver.query(t,Gp,!0);for(let t=0;t<s.length;t++){let e=o.get(s[t]);e&&e.length&&n.push(...e)}}const s=n.filter(t=>!t.destroyed);s.length?fg(this,t,s):this.processLeaveNode(t)}return g.length=0,T.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),T}elementContainsData(t,e){let n=!1;const s=e[tg];return s&&s.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,s,r){let i=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(i=e)}else{const e=this.playersByElement.get(t);if(e){const t=!r||r==ng;e.forEach(e=>{e.queued||!t&&e.triggerName!=s||i.push(e)})}}return(n||s)&&(i=i.filter(t=>!(n&&n!=t.namespaceId||s&&s!=t.triggerName))),i}_beforeAnimationBuild(t,e,n){const s=e.element,r=e.isRemovalTransition?void 0:t,i=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==s,c=kp(n,t,[]);this._getPreviousPlayers(t,a,r,i,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),c.push(t)})}ef(s,e.fromStyles)}_buildAnimation(t,e,n,s,r,i){const o=e.triggerName,a=e.element,c=[],l=new Set,u=new Set,h=e.timelines.map(e=>{const h=e.element;l.add(h);const d=h[tg];if(d&&d.removedBeforeQueried)return new yp(e.duration,e.delay);const p=h!==a,f=function(t){const e=[];return gg(t,e),e}((n.get(h)||Yf).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=r.get(h),m=i.get(h),y=Sp(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,f);if(e.subTimeline&&s&&u.add(h),p){const e=new og(t,o,h);e.setRealPlayer(v),c.push(e)}return v});c.forEach(t=>{kp(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let s;if(t instanceof Map){if(s=t.get(e),s){if(s.length){const t=s.indexOf(n);s.splice(t,1)}0==s.length&&t.delete(e)}}else if(s=t[e],s){if(s.length){const t=s.indexOf(n);s.splice(t,1)}0==s.length&&delete t[e]}return s}(this.playersByQueriedElement,t.element,t))}),l.forEach(t=>dg(t,Bp));const d=wp(h);return d.onDestroy(()=>{l.forEach(t=>pg(t,Bp)),tf(a,e.toStyles)}),u.forEach(t=>{kp(s,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new yp(t.duration,t.delay)}}class og{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new yp,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Cp(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){kp(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function ag(t){return t&&1===t.nodeType}function cg(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function lg(t,e,n,s,r){const i=[];n.forEach(t=>i.push(cg(t)));const o=[];s.forEach((n,s)=>{const i={};n.forEach(t=>{const n=i[t]=e.computeStyle(s,t,r);(!n||0==n.length)&&(s[tg]=Xf,o.push(s))}),t.set(s,i)});let a=0;return n.forEach(t=>cg(t,i[a++])),o}function ug(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const s=new Set(e),r=new Map;function i(t){if(!t)return 1;let e=r.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:s.has(o)?1:i(o),r.set(t,e),e}return e.forEach(t=>{const e=i(t);1!==e&&n.get(e).push(t)}),n}const hg="$$classes";function dg(t,e){if(t.classList)t.classList.add(e);else{let n=t[hg];n||(n=t[hg]={}),n[e]=!0}}function pg(t,e){if(t.classList)t.classList.remove(e);else{let n=t[hg];n&&delete n[e]}}function fg(t,e,n){wp(n).onDone(()=>t.processLeaveNode(e))}function gg(t,e){for(let n=0;n<t.length;n++){const s=t[n];s instanceof vp?gg(s.players,e):e.push(s)}}function mg(t,e,n){const s=n.get(t);if(!s)return!1;let r=e.get(t);return r?s.forEach(t=>r.add(t)):e.set(t,s),n.delete(t),!0}class yg{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new ig(t,e,n),this._timelineEngine=new Wf(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,s,r){const i=t+"-"+s;let o=this._triggerCache[i];if(!o){const t=[],e=_f(this._driver,r,t);if(t.length)throw new Error(`The animation trigger "${s}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e,n){return new Hf(t,e,n)}(s,e,this._normalizer),this._triggerCache[i]=o}this._transitionEngine.registerTrigger(e,s,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,s){this._transitionEngine.insertNode(t,e,n,s)}onRemove(t,e,n,s){this._transitionEngine.removeNode(t,e,s||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,s){if("@"==n.charAt(0)){const[t,r]=Tp(n);this._timelineEngine.command(t,e,r,s)}else this._transitionEngine.trigger(t,e,n,s)}listen(t,e,n,s,r){if("@"==n.charAt(0)){const[t,s]=Tp(n);return this._timelineEngine.listen(t,e,s,r)}return this._transitionEngine.listen(t,e,n,s,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function vg(t,e){let n=null,s=null;return Array.isArray(e)&&e.length?(n=_g(e[0]),e.length>1&&(s=_g(e[e.length-1]))):e&&(n=_g(e)),n||s?new bg(t,n,s):null}let bg=(()=>{class t{constructor(e,n,s){this._element=e,this._startStyles=n,this._endStyles=s,this._state=0;let r=t.initialStylesByElement.get(e);r||t.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&tf(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(tf(this._element,this._initialStyles),this._endStyles&&(tf(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(ef(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ef(this._element,this._endStyles),this._endStyles=null),tf(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function _g(t){let e=null;const n=Object.keys(t);for(let s=0;s<n.length;s++){const r=n[s];wg(r)&&(e=e||{},e[r]=t[r])}return e}function wg(t){return"display"===t||"position"===t}const Sg="animation",Cg="animationend";class xg{constructor(t,e,n,s,r,i,o){this._element=t,this._name=e,this._duration=n,this._delay=s,this._easing=r,this._fillMode=i,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){(function(t,e){const n=Mg(t,"").trim();let s=0;n.length&&(function(t,e){let n=0;for(let s=0;s<t.length;s++)","===t.charAt(s)&&n++;return n}(n)+1,e=`${n}, ${e}`),Og(t,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Ig(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Eg(this._element,this._name,"paused")}resume(){Eg(this._element,this._name,"running")}setPosition(t){const e=kg(this._element,this._name);this._position=t*this._duration,Og(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Ig(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Mg(t,"").split(","),s=Tg(n,e);s>=0&&(n.splice(s,1),Og(t,"",n.join(",")))}(this._element,this._name))}}function Eg(t,e,n){Og(t,"PlayState",n,kg(t,e))}function kg(t,e){const n=Mg(t,"");return n.indexOf(",")>0?Tg(n.split(","),e):Tg([n],e)}function Tg(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Ig(t,e,n){n?t.removeEventListener(Cg,e):t.addEventListener(Cg,e)}function Og(t,e,n,s){const r=Sg+e;if(null!=s){const e=t.style[r];if(e.length){const t=e.split(",");t[s]=n,n=t.join(",")}}t.style[r]=n}function Mg(t,e){return t.style[Sg+e]||""}class Ag{constructor(t,e,n,s,r,i,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=s,this._delay=r,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=i||"linear",this.totalTime=s+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new xg(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:ff(this.element,n))})}this.currentSnapshot=t}}class Pg extends yp{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Fp(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Rg{constructor(){this._count=0}validateStyleProperty(t){return Np(t)}matchesElement(t,e){return Dp(t,e)}containsElement(t,e){return Lp(t,e)}query(t,e,n){return jp(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Fp(t));let s=`@keyframes ${e} {\n`,r="";n.forEach(t=>{r=" ";const e=parseFloat(t.offset);s+=`${r}${100*e}% {\n`,r+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(s+=`${r}animation-timing-function: ${n};\n`));default:return void(s+=`${r}${e}: ${n};\n`)}}),s+=`${r}}\n`}),s+="}\n";const i=document.createElement("style");return i.textContent=s,i}animate(t,e,n,s,r,i=[],o){const a=i.filter(t=>t instanceof Ag),c={};hf(n,s)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>c[t]=e[t])});const l=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"==n||"easing"==n||(e[n]=t[n])})}),e}(e=df(t,e,c));if(0==n)return new Pg(t,l);const u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,u,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const d=vg(t,e),p=new Ag(t,e,u,n,s,r,l,d);return p.onDestroy(()=>function(t){t.parentNode.removeChild(t)}(h)),p}}class Ng{constructor(t,e,n,s){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:ff(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Dg{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Lg().toString()),this._cssKeyframesDriver=new Rg}validateStyleProperty(t){return Np(t)}matchesElement(t,e){return Dp(t,e)}containsElement(t,e){return Lp(t,e)}query(t,e,n){return jp(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,s,r,i=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,s,r,i);const a={duration:n,delay:s,fill:0==s?"both":"forwards"};r&&(a.easing=r);const c={},l=i.filter(t=>t instanceof Ng);hf(n,s)&&l.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>c[t]=e[t])});const u=vg(t,e=df(t,e=e.map(t=>Yp(t,!1)),c));return new Ng(t,e,a,u)}}function Lg(){return bp()&&Element.prototype.animate||{}}let jg=(()=>{class t extends cp{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:It.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?dp(t):t;return Vg(this._renderer,null,e,"register",[n]),new Fg(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(hs(Aa),hs(tu))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Fg extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new $g(this._id,t,e||{},this._renderer)}}class $g{constructor(t,e,n,s){this.id=t,this.element=e,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Vg(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Vg(t,e,n,s,r){return t.setProperty(e,`@@${n}:${s}`,r)}const qg="@.disabled";let Ug=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new zg("",n,this.engine),this._rendererCache.set(n,t)),t}const s=e.id,r=e.id+"-"+this._currentId;this._currentId++,this.engine.register(r,t);const i=e=>{Array.isArray(e)?e.forEach(i):this.engine.registerTrigger(s,r,t,e.name,e)};return e.data.animation.forEach(i),new Hg(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(hs(Aa),hs(yg),hs(Sl))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class zg{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,s=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,s)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,s){this.delegate.setAttribute(t,e,n,s)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,s){this.delegate.setStyle(t,e,n,s)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==qg?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Hg extends zg{constructor(t,e,n,s){super(e,n,s),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==qg?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const s=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let r=e.substr(1),i="";return"@"!=r.charAt(0)&&([r,i]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,s,r,i,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Bg=(()=>{class t extends yg{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(hs(tu),hs(Vp),hs(jf))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Gg=new Bn("AnimationModuleType"),Wg=[{provide:cp,useClass:jg},{provide:jf,useFactory:function(){return new Ff}},{provide:yg,useClass:Bg},{provide:Aa,useFactory:function(t,e,n){return new Ug(t,e,n)},deps:[Hh,yg,Sl]}],Zg=[{provide:Vp,useFactory:function(){return"function"==typeof Lg()?new Dg:new Rg}},{provide:Gg,useValue:"BrowserAnimations"},...Wg],Qg=[{provide:Vp,useClass:$p},{provide:Gg,useValue:"NoopAnimations"},...Wg];let Jg=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?Qg:Zg}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({providers:Zg,imports:[nd]}),t})();function Yg(t,e,n,s){return new(n||(n=Promise))(function(r,i){function o(t){try{c(s.next(t))}catch(e){i(e)}}function a(t){try{c(s.throw(t))}catch(e){i(e)}}function c(t){t.done?r(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(o,a)}c((s=s.apply(t,e||[])).next())})}class Kg extends x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new w;return this._value}next(t){super.next(this._value=t)}}class Xg extends g{notifyNext(t,e,n,s,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class tm extends g{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function em(t,e,n,s,r=new tm(t,n,s)){if(!r.closed)return e instanceof b?e.subscribe(r):N(e)(r)}const nm={};function sm(...t){let e,n;return k(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&c(t[0])&&(t=t[0]),H(t,n).lift(new rm(e))}class rm{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new im(t,this.resultSelector))}}class im extends Xg{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(nm),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(em(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const s=this.values,r=this.toRespond?s[n]===nm?--this.toRespond:this.toRespond:0;s[n]=e,0===r&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function om(...t){let e=t[t.length-1];return k(e)?(t.pop(),D(t,e)):H(t)}function am(t,e){return function(n){return n.lift(new cm(t,e))}}class cm{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new lm(t,this.predicate,this.thisArg))}}class lm extends g{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class um extends h{constructor(t,e){super()}schedule(t,e=0){return this}}let hm=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class dm extends hm{constructor(t,e=hm.now){super(t,()=>dm.delegate&&dm.delegate!==this?dm.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return dm.delegate&&dm.delegate!==this?dm.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const pm=new dm(class extends um{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,s=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(s,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,s=!1;try{this.work(t)}catch(r){s=!0,n=!!r&&r||new Error(r)}if(s)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,s=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&n.splice(s,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}});function fm(t,e=pm){return n=>n.lift(new gm(t,e))}class gm{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new mm(t,this.dueTime,this.scheduler))}}class mm extends g{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ym,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function ym(t){t.debouncedNext()}const vm=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),bm=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})(),_m=new b(t=>t.complete());function wm(t){return t?function(t){return new b(e=>t.schedule(()=>e.complete()))}(t):_m}function Sm(t){return e=>0===t?wm():e.lift(new Cm(t))}class Cm{constructor(t){if(this.total=t,this.total<0)throw new bm}call(t,e){return e.subscribe(new xm(t,this.total))}}class xm extends g{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Em(t=null){return e=>e.lift(new km(t))}class km{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Tm(t,this.defaultValue))}}class Tm extends g{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Im(t=Am){return e=>e.lift(new Om(t))}class Om{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Mm(t,this.errorFactory))}}class Mm extends g{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Am(){return new vm}function Pm(t,e){const n=arguments.length>=2;return s=>s.pipe(t?am((e,n)=>t(e,n,s)):v,Sm(1),n?Em(e):Im(()=>new vm))}function Rm(t){return e=>e.lift(new Nm(t))}class Nm{constructor(t){this.notifier=t}call(t,e){const n=new Dm(t),s=$(this.notifier,new j(n));return s&&!n.seenValue?(n.add(s),e.subscribe(n)):n}}class Dm extends F{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Lm(t){return t instanceof Date&&!isNaN(+t)}function jm(t,e){return new b(e?n=>e.schedule(Fm,0,{error:t,subscriber:n}):e=>e.error(t))}function Fm({error:t,subscriber:e}){e.error(t)}class $m{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return om(this.value);case"E":return jm(this.error);case"C":return wm()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new $m("N",t):$m.undefinedValueNotification}static createError(t){return new $m("E",void 0,t)}static createComplete(){return $m.completeNotification}}$m.completeNotification=new $m("C"),$m.undefinedValueNotification=new $m("N",void 0);class Vm{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new qm(t,this.delay,this.scheduler))}}class qm extends g{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,s=t.scheduler,r=t.destination;for(;n.length>0&&n[0].time-s.now()<=0;)n.shift().notification.observe(r);if(n.length>0){const e=Math.max(0,n[0].time-s.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(qm.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new Um(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification($m.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification($m.createComplete()),this.unsubscribe()}}class Um{constructor(t,e){this.time=t,this.notification=e}}function zm(t,e){return n=>n.lift(new Hm(t,e))}class Hm{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Bm(t,this.compare,this.keySelector))}}class Bm extends g{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(s){return this.destination.error(s)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(s){return this.destination.error(s)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}const Gm=(()=>{function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t})();class Wm{constructor(t,e,n,s){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=s}call(t,e){return e.subscribe(new Zm(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class Zm extends F{constructor(t,e,n,s,r){super(t),this.absoluteTimeout=e,this.waitFor=n,this.withObservable=s,this.scheduler=r,this.scheduleTimeout()}static dispatchTimeout(t){const{withObservable:e}=t;t._unsubscribeAndRecycle(),t.add($(e,new j(t)))}scheduleTimeout(){const{action:t}=this;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(Zm.dispatchTimeout,this.waitFor,this))}_next(t){this.absoluteTimeout||this.scheduleTimeout(),super._next(t)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}function Qm(t){return function(e){const n=new Jm(t),s=e.lift(n);return n.caught=s}}class Jm{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ym(t,this.selector,this.caught))}}class Ym extends F{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const s=new j(this);this.add(s);const r=$(n,s);r!==s&&this.add(r)}}}var Km=n(6023);let Xm;try{Xm="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(d){Xm=!1}let ty,ey=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function(t){return t===Sh}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Xm)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(hs(al))},t.\u0275prov=pt({factory:function(){return new t(hs(al))},token:t,providedIn:"root"}),t})(),ny=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({}),t})();function sy(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function ry(t,e,n,r){return s(n)&&(r=n,n=void 0),r?ry(t,e,n).pipe(T(t=>c(t)?r(...t):r(t))):new b(s=>{iy(t,e,function(t){s.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},s,n)})}function iy(t,e,n,s,r){let i;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const s=t;t.addEventListener(e,n,r),i=()=>s.removeEventListener(e,n,r)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const s=t;t.on(e,n),i=()=>s.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const s=t;t.addListener(e,n),i=()=>s.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let i=0,o=t.length;i<o;i++)iy(t[i],e,n,s,r)}s.add(i)}ty="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};class oy{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new ay(t,this.durationSelector))}}class ay extends F{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const s=$(n,new j(this));!s||s.closed?this.clearThrottle():this.add(this.throttled=s)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function cy(t){return!c(t)&&t-parseFloat(t)+1>=0}function ly(t){const{index:e,period:n,subscriber:s}=t;if(s.next(e),!s.closed){if(-1===n)return s.complete();t.index=e+1,this.schedule(t,n)}}let uy=(()=>{class t{constructor(t,e,n,s){this._elementRef=t,this._platform=e,this._ngZone=n,this._destroyed=new x,this._enabled=!0,this._previousMinRows=-1,this._isViewInited=!1,this._handleFocusEvent=t=>{this._hasFocus="focus"===t.type},this._document=s,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(t){this._minRows=sy(t),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(t){this._maxRows=sy(t),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(t){t=function(t){return null!=t&&"false"!=`${t}`}(t),this._enabled!==t&&((this._enabled=t)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(t){this._cachedPlaceholderHeight=void 0,this._textareaElement.placeholder=t,this._cacheTextareaPlaceholderHeight()}_setMinHeight(){const t=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.minHeight=t)}_setMaxHeight(){const t=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.maxHeight=t)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{ry(this._getWindow(),"resize").pipe(function(t,e=pm){return function(t){return function(e){return e.lift(new oy(t))}}(()=>function(t=0,e,n){let s=-1;return cy(e)?s=Number(e)<1?1:Number(e):k(e)&&(n=e),k(n)||(n=pm),new b(e=>{const r=cy(t)?t:+t-n.now();return n.schedule(ly,r,{index:0,period:s,subscriber:e})})}(t,e))}(16),Rm(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0)),this._textareaElement.addEventListener("focus",this._handleFocusEvent),this._textareaElement.addEventListener("blur",this._handleFocusEvent)}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._textareaElement.removeEventListener("focus",this._handleFocusEvent),this._textareaElement.removeEventListener("blur",this._handleFocusEvent),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let t=this._textareaElement.cloneNode(!1);t.rows=1,t.style.position="absolute",t.style.visibility="hidden",t.style.border="none",t.style.padding="0",t.style.height="",t.style.minHeight="",t.style.maxHeight="",t.style.overflow="hidden",this._textareaElement.parentNode.appendChild(t),this._cachedLineHeight=t.clientHeight,this._textareaElement.parentNode.removeChild(t),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){const t=this._textareaElement,e=t.style.marginBottom||"",n=this._platform.FIREFOX,s=n&&this._hasFocus,r=n?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";s&&(t.style.marginBottom=`${t.clientHeight}px`),t.classList.add(r);const i=t.scrollHeight-4;return t.classList.remove(r),s&&(t.style.marginBottom=e),i}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||null!=this._cachedPlaceholderHeight)return;if(!this.placeholder)return void(this._cachedPlaceholderHeight=0);const t=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=t}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(t=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;const e=this._elementRef.nativeElement,n=e.value;if(!t&&this._minRows===this._previousMinRows&&n===this._previousValue)return;const s=this._measureScrollHeight(),r=Math.max(s,this._cachedPlaceholderHeight||0);e.style.height=`${r}px`,this._ngZone.runOutsideAngular(()=>{"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(()=>this._scrollToCaretPosition(e)):setTimeout(()=>this._scrollToCaretPosition(e))}),this._previousValue=n,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(t){const{selectionStart:e,selectionEnd:n}=t;!this._destroyed.isStopped&&this._hasFocus&&t.setSelectionRange(e,n)}}return t.\u0275fac=function(e){return new(e||t)(ko(Oa),ko(ey),ko(Sl),ko(tu,8))},t.\u0275dir=Qt({type:t,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(t,e){1&t&&Fo("input",function(){return e._noopInputHandler()})},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]}),t})(),hy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({imports:[[ny]]}),t})();function dy(t,e){return V(t,e,1)}class py{}class fy{}class gy{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),s=n.toLowerCase(),r=t.slice(e+1).trim();this.maybeSetNormalizedName(n,s),this.headers.has(s)?this.headers.get(s).push(r):this.headers.set(s,[r])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const s=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(s,n),this.maybeSetNormalizedName(e,s))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof gy?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new gy;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof gy?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const s=("a"===t.op?this.headers.get(e):void 0)||[];s.push(...n),this.headers.set(e,s);break;case"d":const r=t.value;if(r){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===r.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class my{encodeKey(t){return by(t)}encodeValue(t){return by(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const yy=/%(\d[a-f0-9])/gi,vy={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function by(t){return encodeURIComponent(t).replace(yy,(t,e)=>{var n;return null!==(n=vy[e])&&void 0!==n?n:t})}function _y(t){return`${t}`}class wy{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new my,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const s=t.indexOf("="),[r,i]=-1==s?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,s)),e.decodeValue(t.slice(s+1))],o=n.get(r)||[];o.push(i),n.set(r,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const s=t[n];Array.isArray(s)?s.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:s,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new wy({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(_y(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(_y(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Sy{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function Cy(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function xy(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Ey(t){return"undefined"!=typeof FormData&&t instanceof FormData}class ky{constructor(t,e,n,s){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==n?n:null,r=s):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new gy),this.context||(this.context=new Sy),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new wy,this.urlWithParams=e}serializeBody(){return null===this.body?null:Cy(this.body)||xy(this.body)||Ey(this.body)||function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof wy?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ey(this.body)?null:xy(this.body)?this.body.type||null:Cy(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof wy?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,s=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let c=t.headers||this.headers,l=t.params||this.params;const u=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),c)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),l)),new ky(n,s,i,{params:l,headers:c,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var Ty=(()=>((Ty=Ty||{})[Ty.Sent=0]="Sent",Ty[Ty.UploadProgress=1]="UploadProgress",Ty[Ty.ResponseHeader=2]="ResponseHeader",Ty[Ty.DownloadProgress=3]="DownloadProgress",Ty[Ty.Response=4]="Response",Ty[Ty.User=5]="User",Ty))();class Iy{constructor(t,e=200,n="OK"){this.headers=t.headers||new gy,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Oy extends Iy{constructor(t={}){super(t),this.type=Ty.ResponseHeader}clone(t={}){return new Oy({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class My extends Iy{constructor(t={}){super(t),this.type=Ty.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new My({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ay extends Iy{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Py(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Ry=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let s;if(t instanceof ky)s=t;else{let r,i;r=n.headers instanceof gy?n.headers:new gy(n.headers),n.params&&(i=n.params instanceof wy?n.params:new wy({fromObject:n.params})),s=new ky(t,e,void 0!==n.body?n.body:null,{headers:r,context:n.context,params:i,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=om(s).pipe(dy(t=>this.handler.handle(t)));if(t instanceof ky||"events"===n.observe)return r;const i=r.pipe(am(t=>t instanceof My));switch(n.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return i.pipe(T(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return i.pipe(T(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return i.pipe(T(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return i.pipe(T(t=>t.body))}case"response":return i;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new wy).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Py(n,e))}post(t,e,n={}){return this.request("POST",t,Py(n,e))}put(t,e,n={}){return this.request("PUT",t,Py(n,e))}}return t.\u0275fac=function(e){return new(e||t)(hs(py))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Ny{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Dy=new Bn("HTTP_INTERCEPTORS");let Ly=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const jy=/^\)\]\}',?\n/;let Fy=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new b(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const s=t.serializeBody();let r=null;const i=()=>{if(null!==r)return r;const e=1223===n.status?204:n.status,s=n.statusText||"OK",i=new gy(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return r=new Oy({headers:i,status:e,statusText:s,url:o}),r},o=()=>{let{headers:s,status:r,statusText:o,url:a}=i(),c=null;204!==r&&(c=void 0===n.response?n.responseText:n.response),0===r&&(r=c?200:0);let l=r>=200&&r<300;if("json"===t.responseType&&"string"==typeof c){const t=c;c=c.replace(jy,"");try{c=""!==c?JSON.parse(c):null}catch(u){c=t,l&&(l=!1,c={error:u,text:c})}}l?(e.next(new My({body:c,headers:s,status:r,statusText:o,url:a||void 0})),e.complete()):e.error(new Ay({error:c,headers:s,status:r,statusText:o,url:a||void 0}))},a=t=>{const{url:s}=i(),r=new Ay({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:s||void 0});e.error(r)};let c=!1;const l=s=>{c||(e.next(i()),c=!0);let r={type:Ty.DownloadProgress,loaded:s.loaded};s.lengthComputable&&(r.total=s.total),"text"===t.responseType&&!!n.responseText&&(r.partialText=n.responseText),e.next(r)},u=t=>{let n={type:Ty.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",l),null!==s&&n.upload&&n.upload.addEventListener("progress",u)),n.send(s),e.next({type:Ty.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",l),null!==s&&n.upload&&n.upload.removeEventListener("progress",u)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(hs(kh))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const $y=new Bn("XSRF_COOKIE_NAME"),Vy=new Bn("XSRF_HEADER_NAME");class qy{}let Uy=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Xu(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(hs(tu),hs(al),hs($y))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),zy=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(hs(qy),hs(Vy))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Hy=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Dy,[]);this.chain=t.reduceRight((t,e)=>new Ny(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(hs(fy),hs(oo))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),By=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:zy,useClass:Ly}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:$y,useValue:e.cookieName}:[],e.headerName?{provide:Vy,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({providers:[zy,{provide:Dy,useExisting:zy,multi:!0},{provide:qy,useClass:Uy},{provide:$y,useValue:"XSRF-TOKEN"},{provide:Vy,useValue:"X-XSRF-TOKEN"}]}),t})(),Gy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({providers:[Ry,{provide:py,useClass:Hy},Fy,{provide:fy,useExisting:Fy}],imports:[[By.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();function Wy(...t){return z(1)(om(...t))}function Zy(t){return new b(e=>{let n;try{n=t()}catch(s){return void e.error(s)}return(n?L(n):wm()).subscribe(e)})}function Qy(t,e){return"function"==typeof e?n=>n.pipe(Qy((n,s)=>L(t(n,s)).pipe(T((t,r)=>e(n,t,s,r))))):e=>e.lift(new Jy(t))}class Jy{constructor(t){this.project=t}call(t,e){return e.subscribe(new Yy(t,this.project))}}class Yy extends F{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(s){return void this.destination.error(s)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new j(this),s=this.destination;s.add(n),this.innerSubscription=$(t,n),this.innerSubscription!==n&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function Ky(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(s){return s.lift(new Xy(t,e,n))}}class Xy{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new tv(t,this.accumulator,this.seed,this.hasSeed))}}class tv extends g{constructor(t,e,n,s){super(t),this.accumulator=e,this._seed=n,this.hasSeed=s,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(s){this.destination.error(s)}this.seed=n,this.destination.next(n)}}function ev(t){return function(e){return 0===t?wm():e.lift(new nv(t))}}class nv{constructor(t){if(this.total=t,this.total<0)throw new bm}call(t,e){return e.subscribe(new sv(t,this.total))}}class sv extends g{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,s=this.count++;e.length<n?e.push(t):e[s%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,s=this.ring;for(let r=0;r<n;r++){const r=e++%n;t.next(s[r])}}t.complete()}}function rv(){}function iv(t,e,n){return function(s){return s.lift(new ov(t,e,n))}}class ov{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new av(t,this.nextOrObserver,this.error,this.complete))}}class av extends g{constructor(t,e,n,r){super(t),this._tapNext=rv,this._tapError=rv,this._tapComplete=rv,this._tapError=n||rv,this._tapComplete=r||rv,s(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||rv,this._tapError=e.error||rv,this._tapComplete=e.complete||rv)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class cv{constructor(t){this.callback=t}call(t,e){return e.subscribe(new lv(t,this.callback))}}class lv extends g{constructor(t,e){super(t),this.add(new h(e))}}class uv{constructor(t,e){this.id=t,this.url=e}}class hv extends uv{constructor(t,e,n="imperative",s=null){super(t,e),this.navigationTrigger=n,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class dv extends uv{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pv extends uv{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fv extends uv{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gv extends uv{constructor(t,e,n,s){super(t,e),this.urlAfterRedirects=n,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mv extends uv{constructor(t,e,n,s){super(t,e),this.urlAfterRedirects=n,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yv extends uv{constructor(t,e,n,s,r){super(t,e),this.urlAfterRedirects=n,this.state=s,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vv extends uv{constructor(t,e,n,s){super(t,e),this.urlAfterRedirects=n,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bv extends uv{constructor(t,e,n,s){super(t,e),this.urlAfterRedirects=n,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _v{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wv{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sv{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cv{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xv{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ev{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kv{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Tv="primary";class Iv{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ov(t){return new Iv(t)}const Mv="ngNavigationCancelingError";function Av(t){const e=Error("NavigationCancelingError: "+t);return e[Mv]=!0,e}function Pv(t,e,n){const s=n.path.split("/");if(s.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||s.length<t.length))return null;const r={};for(let i=0;i<s.length;i++){const e=s[i],n=t[i];if(e.startsWith(":"))r[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,s.length),posParams:r}}function Rv(t,e){const n=t?Object.keys(t):void 0,s=e?Object.keys(e):void 0;if(!n||!s||n.length!=s.length)return!1;let r;for(let i=0;i<n.length;i++)if(r=n[i],!Nv(t[r],e[r]))return!1;return!0}function Nv(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),s=[...e].sort();return n.every((t,e)=>s[e]===t)}return t===e}function Dv(t){return Array.prototype.concat.apply([],t)}function Lv(t){return t.length>0?t[t.length-1]:null}function jv(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Fv(t){return jo(t)?t:Do(t)?L(Promise.resolve(t)):om(t)}const $v={exact:function t(e,n,s){if(!Zv(e.segments,n.segments)||!Hv(e.segments,n.segments,s)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!t(e.children[r],n.children[r],s))return!1;return!0},subset:Uv},Vv={exact:function(t,e){return Rv(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Nv(t[n],e[n]))},ignored:()=>!0};function qv(t,e,n){return $v[n.paths](t.root,e.root,n.matrixParams)&&Vv[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Uv(t,e,n){return zv(t,e,e.segments,n)}function zv(t,e,n,s){if(t.segments.length>n.length){const r=t.segments.slice(0,n.length);return!(!Zv(r,n)||e.hasChildren()||!Hv(r,n,s))}if(t.segments.length===n.length){if(!Zv(t.segments,n)||!Hv(t.segments,n,s))return!1;for(const n in e.children)if(!t.children[n]||!Uv(t.children[n],e.children[n],s))return!1;return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!(Zv(t.segments,r)&&Hv(t.segments,r,s)&&t.children[Tv])&&zv(t.children[Tv],e,i,s)}}function Hv(t,e,n){return e.every((e,s)=>Vv[n](t[s].parameters,e.parameters))}class Bv{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ov(this.queryParams)),this._queryParamMap}toString(){return Yv.serialize(this)}}class Gv{constructor(t,e){this.segments=t,this.children=e,this.parent=null,jv(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kv(this)}}class Wv{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ov(this.parameters)),this._parameterMap}toString(){return ib(this)}}function Zv(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Qv{}class Jv{parse(t){const e=new ub(t);return new Bv(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${`/${Xv(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${eb(e)}=${eb(t)}`).join("&"):`${eb(e)}=${eb(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${function(t){return encodeURI(t)}(t.fragment)}`:""}`}}const Yv=new Jv;function Kv(t){return t.segments.map(t=>ib(t)).join("/")}function Xv(t,e){if(!t.hasChildren())return Kv(t);if(e){const e=t.children[Tv]?Xv(t.children[Tv],!1):"",n=[];return jv(t.children,(t,e)=>{e!==Tv&&n.push(`${e}:${Xv(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return jv(t.children,(t,s)=>{s===Tv&&(n=n.concat(e(t,s)))}),jv(t.children,(t,s)=>{s!==Tv&&(n=n.concat(e(t,s)))}),n}(t,(e,n)=>n===Tv?[Xv(t.children[Tv],!1)]:[`${n}:${Xv(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Tv]?`${Kv(t)}/${e[0]}`:`${Kv(t)}/(${e.join("//")})`}}function tb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eb(t){return tb(t).replace(/%3B/gi,";")}function nb(t){return tb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sb(t){return decodeURIComponent(t)}function rb(t){return sb(t.replace(/\+/g,"%20"))}function ib(t){return`${nb(t.path)}${function(t){return Object.keys(t).map(e=>`;${nb(e)}=${nb(t[e])}`).join("")}(t.parameters)}`}const ob=/^[^\/()?;=#]+/;function ab(t){const e=t.match(ob);return e?e[0]:""}const cb=/^[^=?&#]+/,lb=/^[^?&#]+/;class ub{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gv([],{}):new Gv([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Tv]=new Gv(t,e)),n}parseSegment(){const t=ab(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Wv(sb(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ab(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=ab(this.remaining);t&&(n=t,this.capture(n))}t[sb(e)]=sb(n)}parseQueryParam(t){const e=function(t){const e=t.match(cb);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(lb);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const s=rb(e),r=rb(n);if(t.hasOwnProperty(s)){let e=t[s];Array.isArray(e)||(e=[e],t[s]=e),e.push(r)}else t[s]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ab(this.remaining),s=this.remaining[n.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let r;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=Tv);const i=this.parseChildren();e[r]=1===Object.keys(i).length?i[Tv]:new Gv([],i),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class hb{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=db(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=db(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=pb(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return pb(t,this._root).map(t=>t.value)}}function db(t,e){if(t===e.value)return e;for(const n of e.children){const e=db(t,n);if(e)return e}return null}function pb(t,e){if(t===e.value)return[e];for(const n of e.children){const s=pb(t,n);if(s.length)return s.unshift(e),s}return[]}class fb{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function gb(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class mb extends hb{constructor(t,e){super(t),this.snapshot=e,Sb(this,t)}toString(){return this.snapshot.toString()}}function yb(t,e){const n=function(t,e){const n=new _b([],{},{},"",{},Tv,e,null,t.root,-1,{});return new wb("",new fb(n,[]))}(t,e),s=new Kg([new Wv("",{})]),r=new Kg({}),i=new Kg({}),o=new Kg({}),a=new Kg(""),c=new vb(s,r,o,a,i,Tv,e,n.root);return c.snapshot=n.root,new mb(new fb(c,[]),n)}class vb{constructor(t,e,n,s,r,i,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=s,this.data=r,this.outlet=i,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(T(t=>Ov(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(T(t=>Ov(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bb(t,e="emptyOnly"){const n=t.pathFromRoot;let s=0;if("always"!==e)for(s=n.length-1;s>=1;){const t=n[s],e=n[s-1];if(t.routeConfig&&""===t.routeConfig.path)s--;else{if(e.component)break;s--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(s))}class _b{constructor(t,e,n,s,r,i,o,a,c,l,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=s,this.data=r,this.outlet=i,this.component=o,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ov(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ov(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wb extends hb{constructor(t,e){super(e),this.url=t,Sb(this,e)}toString(){return Cb(this._root)}}function Sb(t,e){e.value._routerState=t,e.children.forEach(e=>Sb(t,e))}function Cb(t){const e=t.children.length>0?` { ${t.children.map(Cb).join(", ")} } `:"";return`${t.value}${e}`}function xb(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Rv(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Rv(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Rv(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Rv(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Eb(t,e){return Rv(t.params,e.params)&&function(t,e){return Zv(t,e)&&t.every((t,n)=>Rv(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Eb(t.parent,e.parent))}function kb(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const s=n.value;s._futureSnapshot=e.value;const r=function(t,e,n){return e.children.map(e=>{for(const s of n.children)if(t.shouldReuseRoute(e.value,s.value.snapshot))return kb(t,e,s);return kb(t,e)})}(t,e,n);return new fb(s,r)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Tb(e,t),t}}const n=function(t){return new vb(new Kg(t.url),new Kg(t.params),new Kg(t.queryParams),new Kg(t.fragment),new Kg(t.data),t.outlet,t.component,t)}(e.value),s=e.children.map(e=>kb(t,e));return new fb(n,s)}}function Tb(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Tb(t.children[n],e.children[n])}function Ib(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ob(t){return"object"==typeof t&&null!=t&&t.outlets}function Mb(t,e,n,s,r){let i={};return s&&jv(s,(t,e)=>{i[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Bv(n.root===t?e:Ab(n.root,t,e),i,r)}function Ab(t,e,n){const s={};return jv(t.children,(t,r)=>{s[r]=t===e?n:Ab(t,e,n)}),new Gv(t.segments,s)}class Pb{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ib(n[0]))throw new Error("Root segment cannot have matrix parameters");const s=n.find(Ob);if(s&&s!==Lv(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Rb{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Nb(t,e,n){if(t||(t=new Gv([],{})),0===t.segments.length&&t.hasChildren())return Db(t,e,n);const s=function(t,e,n){let s=0,r=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(s>=n.length)return i;const e=t.segments[r],o=n[s];if(Ob(o))break;const a=`${o}`,c=s<n.length-1?n[s+1]:null;if(r>0&&void 0===a)break;if(a&&c&&"object"==typeof c&&void 0===c.outlets){if(!$b(a,c,e))return i;s+=2}else{if(!$b(a,{},e))return i;s++}r++}return{match:!0,pathIndex:r,commandIndex:s}}(t,e,n),r=n.slice(s.commandIndex);if(s.match&&s.pathIndex<t.segments.length){const e=new Gv(t.segments.slice(0,s.pathIndex),{});return e.children[Tv]=new Gv(t.segments.slice(s.pathIndex),t.children),Db(e,0,r)}return s.match&&0===r.length?new Gv(t.segments,{}):s.match&&!t.hasChildren()?Lb(t,e,n):s.match?Db(t,0,r):Lb(t,e,n)}function Db(t,e,n){if(0===n.length)return new Gv(t.segments,{});{const s=function(t){return Ob(t[0])?t[0].outlets:{[Tv]:t}}(n),r={};return jv(s,(n,s)=>{"string"==typeof n&&(n=[n]),null!==n&&(r[s]=Nb(t.children[s],e,n))}),jv(t.children,(t,e)=>{void 0===s[e]&&(r[e]=t)}),new Gv(t.segments,r)}}function Lb(t,e,n){const s=t.segments.slice(0,e);let r=0;for(;r<n.length;){const i=n[r];if(Ob(i)){const t=jb(i.outlets);return new Gv(s,t)}if(0===r&&Ib(n[0])){s.push(new Wv(t.segments[e].path,Fb(n[0]))),r++;continue}const o=Ob(i)?i.outlets[Tv]:`${i}`,a=r<n.length-1?n[r+1]:null;o&&a&&Ib(a)?(s.push(new Wv(o,Fb(a))),r+=2):(s.push(new Wv(o,{})),r++)}return new Gv(s,{})}function jb(t){const e={};return jv(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Lb(new Gv([],{}),0,t))}),e}function Fb(t){const e={};return jv(t,(t,n)=>e[n]=`${t}`),e}function $b(t,e,n){return t==n.path&&Rv(e,n.parameters)}class Vb{constructor(t,e,n,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=s}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),xb(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const s=gb(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,s[e],n),delete s[e]}),jv(s,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const s=t.value,r=e?e.value:null;if(s===r)if(s.component){const r=n.getContext(s.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),s=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:s})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),s=n&&t.value.component?n.children:e,r=gb(t);for(const i of Object.keys(r))this.deactivateRouteAndItsChildren(r[i],s);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const s=gb(e);t.children.forEach(t=>{this.activateRoutes(t,s[t.value.outlet],n),this.forwardEvent(new Ev(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Cv(t.value.snapshot))}activateRoutes(t,e,n){const s=t.value,r=e?e.value:null;if(xb(s),s===r)if(s.component){const r=n.getOrCreateContext(s.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,n);else if(s.component){const e=n.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const t=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),qb(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),r=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=s,e.resolver=r,e.outlet&&e.outlet.activateWith(s,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function qb(t){xb(t.value),t.children.forEach(qb)}class Ub{constructor(t,e){this.routes=t,this.module=e}}function zb(t){return"function"==typeof t}function Hb(t){return t instanceof Bv}const Bb=Symbol("INITIAL_VALUE");function Gb(){return Qy(t=>sm(t.map(t=>t.pipe(Sm(1),function(...t){const e=t[t.length-1];return k(e)?(t.pop(),n=>Wy(t,n,e)):e=>Wy(t,e)}(Bb)))).pipe(Ky((t,e)=>{let n=!1;return e.reduce((t,s,r)=>t!==Bb?t:(s===Bb&&(n=!0),n||!1!==s&&r!==e.length-1&&!Hb(s)?t:s),t)},Bb),am(t=>t!==Bb),T(t=>Hb(t)?t:!0===t),Sm(1)))}let Wb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Ao(0,"router-outlet")},directives:function(){return[H_]},encapsulation:2}),t})();function Zb(t,e=""){for(let n=0;n<t.length;n++){const s=t[n];Qb(s,Jb(e,s))}}function Qb(t,e){t.children&&Zb(t.children,e)}function Jb(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Yb(t){const e=t.children&&t.children.map(Yb),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Tv&&(n.component=Wb),n}function Kb(t){return t.outlet||Tv}function Xb(t,e){const n=t.filter(t=>Kb(t)===e);return n.push(...t.filter(t=>Kb(t)!==e)),n}const t_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function e_(t,e,n){var s;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},t_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Pv)(n,t,e);if(!r)return Object.assign({},t_);const i={};jv(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o,positionalParamSegments:null!==(s=r.posParams)&&void 0!==s?s:{}}}function n_(t,e,n,s,r="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>s_(t,e,n)&&Kb(n)!==Tv)}(t,n,s)){const r=new Gv(e,function(t,e,n,s){const r={};r[Tv]=s,s._sourceSegment=t,s._segmentIndexShift=e.length;for(const i of n)if(""===i.path&&Kb(i)!==Tv){const n=new Gv([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,r[Kb(i)]=n}return r}(t,e,s,new Gv(n,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>s_(t,e,n))}(t,n,s)){const i=new Gv(t.segments,function(t,e,n,s,r,i){const o={};for(const a of s)if(s_(t,n,a)&&!r[Kb(a)]){const n=new Gv([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===i?t.segments.length:e.length,o[Kb(a)]=n}return Object.assign(Object.assign({},r),o)}(t,e,n,s,t.children,r));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}const i=new Gv(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function s_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function r_(t,e,n,s){return!!(Kb(t)===s||s!==Tv&&s_(e,n,t))&&("**"===t.path||e_(e,t,n).matched)}function i_(t,e,n){return 0===e.length&&!t.children[n]}class o_{constructor(t){this.segmentGroup=t||null}}class a_{constructor(t){this.urlTree=t}}function c_(t){return new b(e=>e.error(new o_(t)))}function l_(t){return new b(e=>e.error(new a_(t)))}function u_(t){return new b(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class h_{constructor(t,e,n,s,r){this.configLoader=e,this.urlSerializer=n,this.urlTree=s,this.config=r,this.allowRedirects=!0,this.ngModule=t.get(uc)}apply(){const t=n_(this.urlTree.root,[],[],this.config).segmentGroup,e=new Gv(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Tv).pipe(T(t=>this.createUrlTree(d_(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qm(t=>{if(t instanceof a_)return this.allowRedirects=!1,this.match(t.urlTree);throw t instanceof o_?this.noMatchError(t):t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Tv).pipe(T(e=>this.createUrlTree(d_(e),t.queryParams,t.fragment))).pipe(Qm(t=>{throw t instanceof o_?this.noMatchError(t):t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const s=t.segments.length>0?new Gv([],{[Tv]:t}):t;return new Bv(s,e,n)}expandSegmentGroup(t,e,n,s){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(T(t=>new Gv([],t))):this.expandSegment(t,n,e,n.segments,s,!0)}expandChildren(t,e,n){const s=[];for(const r of Object.keys(n.children))"primary"===r?s.unshift(r):s.push(r);return L(s).pipe(dy(s=>{const r=n.children[s],i=Xb(e,s);return this.expandSegmentGroup(t,i,r,s).pipe(T(t=>({segment:t,outlet:s})))}),Ky((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return s=>s.pipe(t?am((e,n)=>t(e,n,s)):v,ev(1),n?Em(e):Im(()=>new vm))}())}expandSegment(t,e,n,s,r,i){return L(n).pipe(dy(o=>this.expandSegmentAgainstRoute(t,e,n,o,s,r,i).pipe(Qm(t=>{if(t instanceof o_)return om(null);throw t}))),Pm(t=>!!t),Qm((t,n)=>{if(t instanceof vm||"EmptyError"===t.name){if(i_(e,s,r))return om(new Gv([],{}));throw new o_(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,s,r,i,o){return r_(s,e,r,i)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(t,e,s,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,s,r,i):c_(e):c_(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,s,r,i){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,s,i):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,s,r,i)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,s){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?l_(r):this.lineralizeSegments(n,r).pipe(V(n=>{const r=new Gv(n,{});return this.expandSegment(t,r,e,n,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,s,r,i){const{matched:o,consumedSegments:a,lastChild:c,positionalParamSegments:l}=e_(e,s,r);if(!o)return c_(e);const u=this.applyRedirectCommands(a,s.redirectTo,l);return s.redirectTo.startsWith("/")?l_(u):this.lineralizeSegments(s,u).pipe(V(s=>this.expandSegment(t,e,n,s.concat(r.slice(c)),i,!1)))}matchSegmentAgainstRoute(t,e,n,s,r){if("**"===n.path)return n.loadChildren?(n._loadedConfig?om(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(T(t=>(n._loadedConfig=t,new Gv(s,{})))):om(new Gv(s,{}));const{matched:i,consumedSegments:o,lastChild:a}=e_(e,n,s);if(!i)return c_(e);const c=s.slice(a);return this.getChildConfig(t,n,s).pipe(V(t=>{const s=t.module,i=t.routes,{segmentGroup:a,slicedSegments:l}=n_(e,o,c,i),u=new Gv(a.segments,a.children);if(0===l.length&&u.hasChildren())return this.expandChildren(s,i,u).pipe(T(t=>new Gv(o,t)));if(0===i.length&&0===l.length)return om(new Gv(o,{}));const h=Kb(n)===r;return this.expandSegment(s,u,i,l,h?Tv:r,!0).pipe(T(t=>new Gv(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?om(new Ub(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?om(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(V(n=>n?this.configLoader.load(t.injector,e).pipe(T(t=>(e._loadedConfig=t,t))):function(t){return new b(e=>e.error(Av(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):om(new Ub([],t))}runCanLoadGuards(t,e,n){const s=e.canLoad;return s&&0!==s.length?om(s.map(s=>{const r=t.get(s);let i;if(function(t){return t&&zb(t.canLoad)}(r))i=r.canLoad(e,n);else{if(!zb(r))throw new Error("Invalid CanLoad guard");i=r(e,n)}return Fv(i)})).pipe(Gb(),iv(t=>{if(!Hb(t))return;const e=Av(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),T(t=>!0===t)):om(!0)}lineralizeSegments(t,e){let n=[],s=e.root;for(;;){if(n=n.concat(s.segments),0===s.numberOfChildren)return om(n);if(s.numberOfChildren>1||!s.children[Tv])return u_(t.redirectTo);s=s.children[Tv]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,s){const r=this.createSegmentGroup(t,e.root,n,s);return new Bv(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return jv(t,(t,s)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);n[s]=e[r]}else n[s]=t}),n}createSegmentGroup(t,e,n,s){const r=this.createSegments(t,e.segments,n,s);let i={};return jv(e.children,(e,r)=>{i[r]=this.createSegmentGroup(t,e,n,s)}),new Gv(r,i)}createSegments(t,e,n,s){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,s):this.findOrReturn(e,n))}findPosParam(t,e,n){const s=n[e.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return s}findOrReturn(t,e){let n=0;for(const s of e){if(s.path===t.path)return e.splice(n),s;n++}return t}}function d_(t){const e={};for(const n of Object.keys(t.children)){const s=d_(t.children[n]);(s.segments.length>0||s.hasChildren())&&(e[n]=s)}return function(t){if(1===t.numberOfChildren&&t.children[Tv]){const e=t.children[Tv];return new Gv(t.segments.concat(e.segments),e.children)}return t}(new Gv(t.segments,e))}class p_{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class f_{constructor(t,e){this.component=t,this.route=e}}function g_(t,e,n){const s=t._root;return y_(s,e?e._root:null,n,[s.value])}function m_(t,e,n){const s=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(s?s.module.injector:n).get(t)}function y_(t,e,n,s,r={canDeactivateChecks:[],canActivateChecks:[]}){const i=gb(e);return t.children.forEach(t=>{(function(t,e,n,s,r={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Zv(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Zv(t.url,e.url)||!Rv(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eb(t,e)||!Rv(t.queryParams,e.queryParams);case"paramsChange":default:return!Eb(t,e)}}(o,i,i.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new p_(s)):(i.data=o.data,i._resolvedData=o._resolvedData),y_(t,e,i.component?a?a.children:null:n,s,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new f_(a.outlet.component,o))}else o&&v_(e,a,r),r.canActivateChecks.push(new p_(s)),y_(t,null,i.component?a?a.children:null:n,s,r)})(t,i[t.value.outlet],n,s.concat([t.value]),r),delete i[t.value.outlet]}),jv(i,(t,e)=>v_(t,n.getContext(e),r)),r}function v_(t,e,n){const s=gb(t),r=t.value;jv(s,(t,s)=>{v_(t,r.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new f_(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class b_{}function __(t){return new b(e=>e.error(t))}class w_{constructor(t,e,n,s,r,i){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=s,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=i}recognize(){const t=n_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Tv);if(null===e)return null;const n=new _b([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Tv,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new fb(n,e),r=new wb(this.url,s);return this.inheritParamsAndData(r._root),r}inheritParamsAndData(t){const e=t.value,n=bb(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const r of Object.keys(e.children)){const s=e.children[r],i=Xb(t,r),o=this.processSegmentGroup(i,s,r);if(null===o)return null;n.push(...o)}const s=C_(n);return function(t){t.sort((t,e)=>t.value.outlet===Tv?-1:e.value.outlet===Tv?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}processSegment(t,e,n,s){for(const r of t){const t=this.processSegmentAgainstRoute(r,e,n,s);if(null!==t)return t}return i_(e,n,s)?[]:null}processSegmentAgainstRoute(t,e,n,s){if(t.redirectTo||!r_(t,e,n,s))return null;let r,i=[],o=[];if("**"===t.path){const s=n.length>0?Lv(n).parameters:{};r=new _b(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,k_(t),Kb(t),t.component,t,x_(e),E_(e)+n.length,T_(t))}else{const s=e_(e,t,n);if(!s.matched)return null;i=s.consumedSegments,o=n.slice(s.lastChild),r=new _b(i,s.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,k_(t),Kb(t),t.component,t,x_(e),E_(e)+i.length,T_(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:l}=n_(e,i,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===l.length&&c.hasChildren()){const t=this.processChildren(a,c);return null===t?null:[new fb(r,t)]}if(0===a.length&&0===l.length)return[new fb(r,[])];const u=Kb(t)===s,h=this.processSegment(a,c,l,u?Tv:s);return null===h?null:[new fb(r,h)]}}function S_(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function C_(t){const e=[],n=new Set;for(const s of t){if(!S_(s)){e.push(s);continue}const t=e.find(t=>s.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...s.children),n.add(t)):e.push(s)}for(const s of n){const t=C_(s.children);e.push(new fb(s.value,t))}return e.filter(t=>!n.has(t))}function x_(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function E_(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function k_(t){return t.data||{}}function T_(t){return t.resolve||{}}function I_(t){return Qy(e=>{const n=t(e);return n?L(n).pipe(T(()=>e)):om(e)})}class O_ extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const M_=new Bn("ROUTES");class A_{constructor(t,e,n,s){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=s}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(T(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const s=n.create(t);return new Ub(Dv(s.injector.get(M_,void 0,St.Self|St.Optional)).map(Yb),s)}),Qm(t=>{throw e._loader$=void 0,t}));return e._loader$=new Q(n,()=>new x).pipe(G()),e._loader$}loadModuleFactory(t){return"string"==typeof t?L(this.loader.load(t)):Fv(t()).pipe(V(t=>t instanceof hc?om(t):L(this.compiler.compileModuleAsync(t))))}}class P_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new R_,this.attachRef=null}}class R_{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new P_,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class N_{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function D_(t){throw t}function L_(t,e,n){return e.parse("/")}function j_(t,e){return om(null)}const F_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let V_=(()=>{class t{constructor(t,e,n,s,r,i,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=s,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new x,this.errorHandler=D_,this.malformedUriErrorHandler=L_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:j_,afterPreactivation:j_},this.urlHandlingStrategy=new N_,this.routeReuseStrategy=new O_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=r.get(uc),this.console=r.get(ll);const c=r.get(Sl);this.isNgZoneEnabled=c instanceof Sl&&Sl.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new Bv(new Gv([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new A_(i,o,t=>this.triggerEvent(new _v(t)),t=>this.triggerEvent(new wv(t))),this.routerState=yb(this.currentUrlTree,this.rootComponentType),this.transitions=new Kg({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const e=this.events;return t.pipe(am(t=>0!==t.id),T(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Qy(t=>{let n=!1,s=!1;return om(t).pipe(iv(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Qy(t=>{const n=this.browserUrlTree.toString(),r=!this.navigated||t.extractedUrl.toString()!==n||n!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||r)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return q_(t.source)&&(this.browserUrlTree=t.extractedUrl),om(t).pipe(Qy(t=>{const n=this.transitions.getValue();return e.next(new hv(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?_m:Promise.resolve(t)}),function(t,e,n,s){return Qy(r=>function(t,e,n,s,r){return new h_(t,e,n,s,r).apply()}(t,e,n,r.extractedUrl,s).pipe(T(t=>Object.assign(Object.assign({},r),{urlAfterRedirects:t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),iv(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return V(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new w_(t,e,n,r,i,o).recognize();return null===s?__(new b_):om(s)}catch(s){return __(s)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(T(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),iv(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new gv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(r&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:s,source:r,restoredState:i,extras:o}=t,a=new hv(n,this.serializeUrl(s),r,i);e.next(a);const c=yb(s,this.rootComponentType).snapshot;return om(Object.assign(Object.assign({},t),{targetSnapshot:c,urlAfterRedirects:s,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),_m}),I_(t=>{const{targetSnapshot:e,id:n,extractedUrl:s,rawUrl:r,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:s,rawUrlTree:r,skipLocationChange:!!i,replaceUrl:!!o})}),iv(t=>{const e=new mv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),T(t=>Object.assign(Object.assign({},t),{guards:g_(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return V(n=>{const{targetSnapshot:s,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return 0===o.length&&0===i.length?om(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,s){return L(t).pipe(V(t=>function(t,e,n,s,r){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?om(i.map(i=>{const o=m_(i,e,r);let a;if(function(t){return t&&zb(t.canDeactivate)}(o))a=Fv(o.canDeactivate(t,e,n,s));else{if(!zb(o))throw new Error("Invalid CanDeactivate guard");a=Fv(o(t,e,n,s))}return a.pipe(Pm())})).pipe(Gb()):om(!0)}(t.component,t.route,n,e,s)),Pm(t=>!0!==t,!0))}(o,s,r,t).pipe(V(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,s){return L(e).pipe(dy(e=>Wy(function(t,e){return null!==t&&e&&e(new Sv(t)),om(!0)}(e.route.parent,s),function(t,e){return null!==t&&e&&e(new xv(t)),om(!0)}(e.route,s),function(t,e,n){const s=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Zy(()=>om(e.guards.map(r=>{const i=m_(r,e.node,n);let o;if(function(t){return t&&zb(t.canActivateChild)}(i))o=Fv(i.canActivateChild(s,t));else{if(!zb(i))throw new Error("Invalid CanActivateChild guard");o=Fv(i(s,t))}return o.pipe(Pm())})).pipe(Gb())));return om(r).pipe(Gb())}(t,e.path,n),function(t,e,n){const s=e.routeConfig?e.routeConfig.canActivate:null;return s&&0!==s.length?om(s.map(s=>Zy(()=>{const r=m_(s,e,n);let i;if(function(t){return t&&zb(t.canActivate)}(r))i=Fv(r.canActivate(e,t));else{if(!zb(r))throw new Error("Invalid CanActivate guard");i=Fv(r(e,t))}return i.pipe(Pm())}))).pipe(Gb()):om(!0)}(t,e.route,n))),Pm(t=>!0!==t,!0))}(s,i,t,e):om(n)),T(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),iv(t=>{if(Hb(t.guardsResult)){const e=Av(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new yv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),am(t=>!!t.guardsResult||(this.restoreHistory(t),this.cancelNavigationTransition(t,""),!1)),I_(t=>{if(t.guards.canActivateChecks.length)return om(t).pipe(iv(t=>{const e=new vv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Qy(t=>{let e=!1;return om(t).pipe(function(t,e){return V(n=>{const{targetSnapshot:s,guards:{canActivateChecks:r}}=n;if(!r.length)return om(n);let i=0;return L(r).pipe(dy(n=>function(t,e,n,s){return function(t,e,n,s){const r=Object.keys(t);if(0===r.length)return om({});const i={};return L(r).pipe(V(r=>function(t,e,n,s){const r=m_(t,e,s);return Fv(r.resolve?r.resolve(e,n):r(e,n))}(t[r],e,n,s).pipe(iv(t=>{i[r]=t}))),ev(1),V(()=>Object.keys(i).length===r.length?om(i):_m))}(t._resolve,t,e,s).pipe(T(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),bb(t,n).resolve),null)))}(n.route,s,t,e)),iv(()=>i++),ev(1),V(t=>i===r.length?om(n):_m))})}(this.paramsInheritanceStrategy,this.ngModule.injector),iv({next:()=>e=!0,complete:()=>{e||(this.restoreHistory(t),this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value."))}}))}),iv(t=>{const e=new bv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),I_(t=>{const{targetSnapshot:e,id:n,extractedUrl:s,rawUrl:r,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:s,rawUrlTree:r,skipLocationChange:!!i,replaceUrl:!!o})}),T(t=>{const e=function(t,e,n){const s=kb(t,e._root,n?n._root:void 0);return new mb(s,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),iv(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(t.urlAfterRedirects,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),((t,e,n)=>T(s=>(new Vb(e,s.targetRouterState,s.currentRouterState,n).activate(t),s)))(this.rootContexts,this.routeReuseStrategy,t=>this.triggerEvent(t)),iv({next(){n=!0},complete(){n=!0}}),function(t){return e=>e.lift(new cv(t))}(()=>{var e;if(!n&&!s){const e=`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(t),this.cancelNavigationTransition(t,e)):this.cancelNavigationTransition(t,e)}(null===(e=this.currentNavigation)||void 0===e?void 0:e.id)===t.id&&(this.currentNavigation=null)}),Qm(n=>{if(s=!0,function(t){return t&&t[Mv]}(n)){const s=Hb(n.url);s||(this.navigated=!0,this.restoreHistory(t,!0));const r=new pv(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(r),s?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree),s={skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||q_(t.source)};this.scheduleNavigation(e,"imperative",null,s,{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.restoreHistory(t,!0);const s=new fv(t.id,this.serializeUrl(t.extractedUrl),n);e.next(s);try{t.resolve(this.errorHandler(n))}catch(r){t.reject(r)}}return _m}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:s}=e,r={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(r.state=t)}this.scheduleNavigation(s,t,n,r)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return e.transitionId!==t.transitionId||!n||!("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Zb(t),this.config=t.map(Yb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:s,fragment:r,queryParamsHandling:i,preserveFragment:o}=e,a=n||this.routerState.root,c=o?this.currentUrlTree.fragment:r;let l=null;switch(i){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}return null!==l&&(l=this.removeEmptyProps(l)),function(t,e,n,s,r){if(0===n.length)return Mb(e.root,e.root,e,s,r);const i=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Pb(!0,0,t);let e=0,n=!1;const s=t.reduce((t,s,r)=>{if("object"==typeof s&&null!=s){if(s.outlets){const e={};return jv(s.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(s.segmentPath)return[...t,s.segmentPath]}return"string"!=typeof s?[...t,s]:0===r?(s.split("/").forEach((s,r)=>{0==r&&"."===s||(0==r&&""===s?n=!0:".."===s?e++:""!=s&&t.push(s))}),t):[...t,s]},[]);return new Pb(n,e,s)}(n);if(i.toRoot())return Mb(e.root,new Gv([],{}),e,s,r);const o=function(t,e,n){if(t.isAbsolute)return new Rb(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Rb(t,t===e.root,0)}const s=Ib(t.commands[0])?0:1;return function(t,e,n){let s=t,r=e,i=n;for(;i>r;){if(i-=r,s=s.parent,!s)throw new Error("Invalid number of '../'");r=s.segments.length}return new Rb(s,!1,r-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+s,t.numberOfDoubleDots)}(i,e,t),a=o.processChildren?Db(o.segmentGroup,o.index,i.commands):Nb(o.segmentGroup,o.index,i.commands);return Mb(o.segmentGroup,a,e,s,r)}(a,this.currentUrlTree,t,l,null!=c?c:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Hb(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},F_):!1===e?Object.assign({},$_):e,Hb(t))return qv(this.currentUrlTree,t,n);const s=this.parseUrl(t);return qv(this.currentUrlTree,s,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const s=t[n];return null!=s&&(e[n]=s),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new dv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,e,n,s,r){var i,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),c=q_(e)&&a&&!q_(a.source),l=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(c&&l)return Promise.resolve(!0);let u,h,d;r?(u=r.resolve,h=r.reject,d=r.promise):d=new Promise((t,e)=>{u=t,h=e});const p=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),f=n&&n.\u0275routerPageId?n.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(i=this.browserPageId)&&void 0!==i?i:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):f=0,this.setTransition({id:p,targetPageId:f,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:u,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",s):this.location.go(n,"",s)}restoreHistory(t,e=!1){var n,s;if("computed"===this.canceledNavigationResolution){const e=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===e?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===e&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(e)}else"replace"===this.canceledNavigationResolution&&(e&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){const n=new pv(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(hs(Wn),hs(Qv),hs(R_),hs(gu),hs(oo),hs(Hl),hs(bl),hs(void 0))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function q_(t){return"imperative"!==t}let U_=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new x,this.subscription=t.events.subscribe(t=>{t instanceof dv&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,s,r){if(0!==t||e||n||s||r||"string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:z_(this.skipLocationChange),replaceUrl:z_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:z_(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(ko(V_),ko(vb),ko(uu))},t.\u0275dir=Qt({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Fo("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(ra("href",e.href,Ys),So("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[ce]}),t})();function z_(t){return""===t||!!t}let H_=(()=>{class t{constructor(t,e,n,s,r){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new Fc,this.deactivateEvents=new Fc,this.name=s||Tv,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),s=this.parentContexts.getOrCreateContext(this.name).children,r=new B_(t,s,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(ko(R_),ko(pc),ko(Ea),function(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let s=0;for(;s<t;){const r=n[s];if(gn(r))break;if(0===r)s+=2;else if("number"==typeof r)for(s++;s<t&&"string"==typeof n[s];)s++;else{if(r===e)return n[s+1];s+=2}}}return null}(Ne(),t)}("name"),ko(ec))},t.\u0275dir=Qt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class B_{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===vb?this.route:t===R_?this.childContexts:this.parent.get(t,e)}}class G_{}class W_{preload(t,e){return om(null)}}let Z_=(()=>{class t{constructor(t,e,n,s,r){this.router=t,this.injector=s,this.preloadingStrategy=r,this.loader=new A_(e,n,e=>t.triggerEvent(new _v(e)),e=>t.triggerEvent(new wv(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(am(t=>t instanceof dv),dy(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(uc);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const s of e)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const t=s._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else s.loadChildren&&!s.canLoad?n.push(this.preloadConfig(t,s)):s.children&&n.push(this.processRoutes(t,s.children));return L(n).pipe(z(),T(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?om(e._loadedConfig):this.loader.load(t.injector,e)).pipe(V(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(hs(V_),hs(Hl),hs(bl),hs(oo),hs(G_))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Q_=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof hv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof dv&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof kv&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new kv(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(hs(V_),hs(Ch),hs(void 0))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const J_=new Bn("ROUTER_CONFIGURATION"),Y_=new Bn("ROUTER_FORROOT_GUARD"),K_=[gu,{provide:Qv,useClass:Jv},{provide:V_,useFactory:function(t,e,n,s,r,i,o,a={},c,l){const u=new V_(null,t,e,n,s,r,i,Dv(o));return c&&(u.urlHandlingStrategy=c),l&&(u.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,u),a.enableTracing&&u.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),u},deps:[Qv,R_,gu,oo,Hl,bl,M_,J_,[class{},new ys],[class{},new ys]]},R_,{provide:vb,useFactory:function(t){return t.routerState.root},deps:[V_]},{provide:Hl,useClass:Wl},Z_,W_,class{preload(t,e){return e().pipe(Qm(()=>om(null)))}},{provide:J_,useValue:{enableTracing:!1}}];function X_(){return new jl("Router",V_)}let tw=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[K_,rw(e),{provide:Y_,useFactory:sw,deps:[[V_,new ys,new vs]]},{provide:J_,useValue:n||{}},{provide:uu,useFactory:nw,deps:[eu,[new ms(du),new ys],J_]},{provide:Q_,useFactory:ew,deps:[V_,Ch,J_]},{provide:G_,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:W_},{provide:jl,multi:!0,useFactory:X_},[iw,{provide:el,multi:!0,useFactory:ow,deps:[iw]},{provide:cw,useFactory:aw,deps:[iw]},{provide:cl,multi:!0,useExisting:cw}]]}}static forChild(e){return{ngModule:t,providers:[rw(e)]}}}return t.\u0275fac=function(e){return new(e||t)(hs(Y_,8),hs(V_,8))},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({}),t})();function ew(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Q_(t,e,n)}function nw(t,e,n={}){return n.useHash?new fu(t,e):new pu(t,e)}function sw(t){return"guarded"}function rw(t){return[{provide:Gn,multi:!0,useValue:t},{provide:M_,multi:!0,useValue:t}]}let iw=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new x}appInitializer(){return this.injector.get(su,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(V_),s=this.injector.get(J_);return"disabled"===s.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?om(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(J_),n=this.injector.get(Z_),s=this.injector.get(Q_),r=this.injector.get(V_),i=this.injector.get(Ul);t===i.components[0]&&(("enabledNonBlocking"===e.initialNavigation||void 0===e.initialNavigation)&&r.initialNavigation(),n.setUpPreloading(),s.init(),r.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(hs(oo))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function ow(t){return t.appInitializer.bind(t)}function aw(t){return t.bootstrapListener.bind(t)}const cw=new Bn("Router Initializer");n(8310);const lw=["*"],uw=["chatInput"],hw=["messageArea"];function dw(t,e){if(1&t&&Ao(0,"ngx-chat-message",9),2&t){const t=e.$implicit,n=qo(2);Qo("chat-message--in",t.direction===n.Direction.in)("chat-message--out",t.direction===n.Direction.out),To("id","message-"+t.id)("contact",n.getOrCreateContactWithFullJid(t))("nick",t.direction===n.Direction.in?n.getOrCreateContactWithFullJid(t).name:"")("avatar",n.getOrCreateContactWithFullJid(t).avatar)("message",t)("showAvatars",n.showAvatars)}}function pw(t,e){if(1&t&&(Po(0),Oo(1,"div",7),ta(2),Pc(3,"date"),Mo(),xo(4,dw,1,10,"ngx-chat-message",8),Ro()),2&t){const t=e.$implicit,n=qo();Zr(2),ea(function(t,e,n,s,r,i){const o=t+20,a=Ae(),c=Se(a,o);return Lc(a,Dc(a,o)?Ac(a,qe(),e,c.transform,n,s,r,i,c):c.transform(n,s,r,i))}(3,2,t.date,n.chatService.translations.dateFormat,void 0,n.chatService.translations.locale)),Zr(2),To("ngForOf",t.messages)}}function fw(t,e){if(1&t&&(Oo(0,"div",10),ta(1),Mo()),2&t){const t=qo();Zr(1),na(" ",t.chatService.translations.noMessages," ")}}function gw(t,e){if(1&t&&(Oo(0,"span",16),ta(1),Mo()),2&t){const t=qo(2);Zr(1),ea(t.chatService.translations.acceptSubscriptionRequest)}}function mw(t,e){if(1&t){const t=No();Oo(0,"a",17),Fo("click",function(e){return Re(t),qo(2).acceptSubscriptionRequest(e)}),ta(1),Mo()}if(2&t){const t=qo(2);Zr(1),ea(t.chatService.translations.acceptSubscriptionRequest)}}function yw(t,e){if(1&t&&(Oo(0,"span",16),ta(1),Mo()),2&t){const t=qo(2);Zr(1),ea(t.chatService.translations.denySubscriptionRequest)}}function vw(t,e){if(1&t){const t=No();Oo(0,"a",17),Fo("click",function(e){return Re(t),qo(2).denySubscriptionRequest(e)}),ta(1),Mo()}if(2&t){const t=qo(2);Zr(1),ea(t.chatService.translations.denySubscriptionRequest)}}function bw(t,e){if(1&t){const t=No();Oo(0,"li"),Oo(1,"a",17),Fo("click",function(e){return Re(t),qo(3).blockContactAndReport(e)}),ta(2),Mo(),Mo()}if(2&t){const t=qo(3);Zr(2),ea(t.chatService.translations.blockAndReport)}}function _w(t,e){if(1&t){const t=No();Oo(0,"ul",18),Oo(1,"li"),Oo(2,"a",17),Fo("click",function(e){return Re(t),qo(2).blockContact(e)}),ta(3),Mo(),Mo(),xo(4,bw,3,1,"li",19),Oo(5,"li"),Oo(6,"a",17),Fo("click",function(e){return Re(t),qo(2).dismissBlockOptions(e)}),ta(7),Mo(),Mo(),Mo()}if(2&t){const t=qo(2);Zr(3),ea(t.chatService.translations.block),Zr(1),To("ngIf",t.reportUserService),Zr(3),ea(t.chatService.translations.dismiss)}}function ww(t,e){if(1&t&&(Oo(0,"ngx-chat-message-simple",11),Oo(1,"span"),ta(2),Mo(),Oo(3,"ul",12),Oo(4,"li"),xo(5,gw,2,1,"span",13),xo(6,mw,2,1,"a",14),Mo(),Oo(7,"li"),xo(8,yw,2,1,"span",13),xo(9,vw,2,1,"a",14),Mo(),Mo(),xo(10,_w,8,3,"ul",15),Pc(11,"async"),Mo()),2&t){const t=qo();To("direction",t.Direction.in)("avatar",t.showAvatars?t.recipient.avatar:void 0)("footerHidden",!0),Zr(2),na(" ",t.chatService.translations.subscriptionRequestMessage," "),Zr(3),To("ngIf",t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS),Zr(1),To("ngIf",t.subscriptionAction===t.SubscriptionAction.PENDING_REQUEST),Zr(2),To("ngIf",t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS),Zr(1),To("ngIf",t.subscriptionAction===t.SubscriptionAction.PENDING_REQUEST),Zr(1),To("ngIf",!0===Rc(11,9,t.blockPlugin.supportsBlock$)&&t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS)}}function Sw(t,e){if(1&t){const t=No();Oo(0,"div",6),Oo(1,"ngx-chat-avatar",7),Fo("click",function(){return Re(t),qo().avatarClickHandler.emit()}),Mo(),Mo()}if(2&t){const t=qo();Zr(1),Qo("has-click-handler",t.avatarInteractive),To("imageUrl",t.avatar)}}function Cw(t,e){if(1&t){const t=No();Oo(0,"div",8),Oo(1,"img",9),Fo("load",function(){return Re(t),qo().showImagePlaceholder=!1}),Mo(),Mo()}if(2&t){const t=qo();Qo("chat-message-image-wrapper--placeholder",t.showImagePlaceholder),Zr(1),To("src",t.imageLink,Ys)}}function xw(t,e){1&t&&(Po(0),ta(1,"\u2713"),Ro())}function Ew(t,e){1&t&&(Po(0),ta(1,"\u2713\u2713"),Ro())}function kw(t,e){1&t&&(Po(0),Oo(1,"span",16),ta(2,"\u2713\u2713"),Mo(),Ro())}function Tw(t,e){if(1&t&&(Po(0,14),xo(1,xw,2,0,"ng-container",15),xo(2,Ew,2,0,"ng-container",15),xo(3,kw,3,0,"ng-container",15),Ro()),2&t){const t=qo(2);To("ngSwitch",t.messageState),Zr(1),To("ngSwitchCase",t.MessageState.SENT),Zr(1),To("ngSwitchCase",t.MessageState.RECIPIENT_RECEIVED),Zr(1),To("ngSwitchCase",t.MessageState.RECIPIENT_SEEN)}}function Iw(t,e){if(1&t&&(Oo(0,"div",10),Oo(1,"small",11),ta(2),xo(3,Tw,4,4,"ng-container",12),Mo(),Oo(4,"small",13),ta(5),Mo(),Mo()),2&t){const t=qo();Zr(1),Bo("title",t.nick),Zr(1),na(" ",t.nick," "),Zr(1),To("ngIf","out"===t.direction),Zr(2),ea(t.formattedDate)}}function Ow(t,e){if(1&t&&(Oo(0,"div",9),Oo(1,"span",10),ta(2),Pc(3,"async"),Mo(),Mo()),2&t){const t=qo();Zr(2),na(" ",t.chatService.translations.presence[Rc(3,1,t.chatWindowState.recipient.presence$)]," ")}}function Mw(t,e){if(1&t){const t=No();Oo(0,"div",17),Fo("click",function(){const e=Re(t).$implicit;return qo(2).onActionClick(e)}),Mo()}if(2&t){const t=e.$implicit;To("ngClass",t.cssClass)("innerHTML",t.html,Js)}}function Aw(t,e){if(1&t){const t=No();Oo(0,"ngx-chat-filedrop",11),Fo("fileUpload",function(e){return Re(t),qo().uploadFile(e)}),Oo(1,"div",12),Fo("click",function(){return Re(t),qo().onFocus()}),Ao(2,"ngx-chat-message-list",13),Oo(3,"div",14),Oo(4,"ngx-chat-message-input",15),Fo("messageSent",function(){return Re(t),qo().afterSendMessage()}),Mo(),xo(5,Mw,1,2,"div",16),Mo(),Mo(),Mo()}if(2&t){const t=qo();To("enabled",t.httpFileUploadPlugin.fileUploadSupported)("dropMessage",t.chatService.translations.dropMessage),Zr(2),To("recipient",t.chatWindowState.recipient)("showAvatars",!1),Zr(2),To("recipient",t.chatWindowState.recipient),Zr(1),To("ngForOf",t.chatService.chatActions)}}const Pw=function(t){return{"has-click-handler":t}};function Rw(t,e){1&t&&Ao(0,"ngx-chat-window-list",2),2&t&&To("rosterState",qo().rosterState)}function Nw(t,e){if(1&t){const t=No();Oo(0,"ngx-chat-roster-list",3),Fo("rosterStateChanged",function(e){return Re(t),qo().onRosterStateChanged(e)}),Mo()}if(2&t){const t=qo();To("rosterState",t.rosterState)("contacts",t.contacts)("contactRequestsReceived$",t.contactRequestsReceived$)("contactRequestsSent$",t.contactRequestsSent$)("contactsUnaffiliated$",t.contactsUnaffiliated$)}}const Dw=function(t){return{backgroundImage:t}},Lw=["video"];function jw(t,e){if(1&t){const t=No();Oo(0,"div",3),Fo("click",function(){return Re(t),qo().closeClick.emit()}),ta(1," \xd7 "),Mo()}}const Fw=[[["",8,"window-header-content"]],[["",8,"window-content"]]],$w=[".window-header-content",".window-content"];function Vw(t,e){1&t&&Ao(0,"ngx-chat-video-window",3),2&t&&To("track",e.$implicit)}function qw(t,e){1&t&&Ao(0,"ngx-chat-window",4),2&t&&To("chatWindowState",e.$implicit)}function Uw(t,e){1&t&&(Oo(0,"div",6),ta(1,"\xbb"),Mo())}function zw(t,e){1&t&&(Oo(0,"div",6),ta(1,"\xab"),Mo())}function Hw(t,e){if(1&t){const t=No();Oo(0,"ngx-chat-roster-recipient",10),Fo("click",function(){const e=Re(t).$implicit;return qo(3).onClickRecipient(e)}),Mo()}2&t&&To("recipient",e.$implicit)}function Bw(t,e){if(1&t&&(Po(0),Oo(1,"div",7),ta(2),Mo(),Oo(3,"div",8),xo(4,Hw,1,1,"ngx-chat-roster-recipient",9),Mo(),Ro()),2&t){const t=qo().ngIf,e=qo();Zr(2),ea(e.chatService.translations.rooms),Zr(2),To("ngForOf",t)}}function Gw(t,e){if(1&t&&(Po(0),xo(1,Bw,5,2,"ng-container",4),Ro()),2&t){const t=e.ngIf;Zr(1),To("ngIf",t.length>0)}}function Ww(t,e){if(1&t){const t=No();Oo(0,"ngx-chat-roster-recipient",10),Fo("click",function(){const e=Re(t).$implicit;return qo(2).onClickRecipient(e)}),Mo()}2&t&&To("recipient",e.$implicit)}function Zw(t,e){if(1&t&&(Po(0),Oo(1,"div",7),ta(2),Mo(),Oo(3,"div",8),xo(4,Ww,1,1,"ngx-chat-roster-recipient",9),Pc(5,"async"),Mo(),Ro()),2&t){const t=qo();Zr(2),ea(t.chatService.translations.contacts),Zr(2),To("ngForOf",Rc(5,2,t.contacts))}}function Qw(t,e){if(1&t){const t=No();Oo(0,"ngx-chat-roster-recipient",10),Fo("click",function(){const e=Re(t).$implicit;return qo(2).onClickRecipient(e)}),Mo()}2&t&&To("recipient",e.$implicit)}function Jw(t,e){if(1&t&&(Po(0),Oo(1,"div",7),ta(2),Mo(),Oo(3,"div",8),xo(4,Qw,1,1,"ngx-chat-roster-recipient",9),Pc(5,"async"),Mo(),Ro()),2&t){const t=qo();Zr(2),ea(t.chatService.translations.contactRequestIn),Zr(2),To("ngForOf",Rc(5,2,t.contactRequestsReceived$))}}function Yw(t,e){if(1&t){const t=No();Oo(0,"ngx-chat-roster-recipient",10),Fo("click",function(){const e=Re(t).$implicit;return qo(2).onClickRecipient(e)}),Mo()}2&t&&To("recipient",e.$implicit)}function Kw(t,e){if(1&t&&(Po(0),Oo(1,"div",7),ta(2),Mo(),Oo(3,"div",8),xo(4,Yw,1,1,"ngx-chat-roster-recipient",9),Pc(5,"async"),Mo(),Ro()),2&t){const t=qo();Zr(2),ea(t.chatService.translations.contactRequestOut),Zr(2),To("ngForOf",Rc(5,2,t.contactRequestsSent$))}}function Xw(t,e){if(1&t){const t=No();Oo(0,"ngx-chat-roster-recipient",10),Fo("click",function(){Re(t);const e=qo().$implicit;return qo(2).onClickRecipient(e)}),Mo()}2&t&&To("recipient",qo().$implicit)}function tS(t,e){if(1&t&&(Po(0),xo(1,Xw,1,1,"ngx-chat-roster-recipient",12),Ro()),2&t){const t=e.$implicit;Zr(1),To("ngIf",t.messages.length>0)}}function eS(t,e){if(1&t&&(Po(0),Oo(1,"div",7),ta(2),Mo(),Oo(3,"div",8),xo(4,tS,2,1,"ng-container",11),Pc(5,"async"),Mo(),Ro()),2&t){const t=qo();Zr(2),ea(t.chatService.translations.contactsUnaffiliated),Zr(2),To("ngForOf",Rc(5,2,t.contactsUnaffiliated$))}}function nS(t,e){if(1&t&&(Oo(0,"div",13),ta(1),Mo()),2&t){const t=qo();Zr(1),na(" ",t.chatService.translations.noContacts," ")}}function sS(t,e){if(1&t&&(Oo(0,"div",20),ta(1),Mo()),2&t){const t=e.$implicit;Zr(1),na(" ",t.name," ")}}function rS(t,e){if(1&t&&(Oo(0,"div",21),ta(1),Mo()),2&t){const t=e.$implicit;Zr(1),na(" ",t.name," ")}}function iS(t,e){if(1&t&&(Oo(0,"p",22),Oo(1,"em"),ta(2),Mo(),Ao(3,"br"),ta(4),Pc(5,"async"),Ao(6,"br"),ta(7),Pc(8,"async"),Ao(9,"br"),ta(10),Pc(11,"async"),Ao(12,"br"),ta(13),Pc(14,"async"),Mo()),2&t){const t=e.$implicit;Zr(2),na("",t.name,":"),Zr(2),na(" subscription=",Rc(5,5,t.subscription$),""),Zr(3),na(" presence=",Rc(8,7,t.presence$),""),Zr(3),na(" pendingIn=",Rc(11,9,t.pendingIn$),""),Zr(3),na(" pendingOut=",Rc(14,11,t.pendingOut$)," ")}}function oS(t,e){if(1&t&&(Po(0),Ao(1,"hr"),Oo(2,"div",14),ta(3," debug contact requests in: "),xo(4,sS,2,1,"div",15),Pc(5,"async"),Mo(),Ao(6,"hr"),Oo(7,"div",16),ta(8," debug contact requests out: "),xo(9,rS,2,1,"div",17),Pc(10,"async"),Mo(),Ao(11,"hr"),Oo(12,"p"),ta(13),Pc(14,"async"),Ao(15,"br"),Mo(),xo(16,iS,15,13,"p",18),Pc(17,"async"),Oo(18,"p",19),ta(19),Pc(20,"async"),Mo(),Ro()),2&t){const t=qo();Zr(4),To("ngForOf",Rc(5,5,t.chatService.contactRequestsReceived$)),Zr(5),To("ngForOf",Rc(10,7,t.chatService.contactRequestsSent$)),Zr(4),na(" debug contacts (count: ",Rc(14,9,t.chatService.contacts$).length,")"),Zr(3),To("ngForOf",Rc(17,11,t.chatService.contacts$)),Zr(3),na("state: ",Rc(20,13,t.chatService.state$),"")}}function aS(t,e){if(1&t&&(Oo(0,"div",7),ta(1),Pc(2,"async"),Mo()),2&t){const t=qo();Zr(1),ea(Rc(2,1,t.unreadCount$))}}function cS(t,e){1&t&&(Oo(0,"div",9),ta(1,"\u25cf "),Mo()),2&t&&To("ngClass","roster-presence--"+qo().ngIf)}function lS(t,e){if(1&t&&(Po(0),xo(1,cS,2,1,"div",8),Ro()),2&t){const t=e.ngIf,n=qo();Zr(1),To("ngIf",t!==n.Presence.unavailable)}}let uS=(()=>{class t{constructor(){this.fileUpload=new Fc,this.enabled=!0,this.isDropTarget=!1}onDragOver(t){this.enabled&&(t.preventDefault(),t.stopPropagation(),this.isDropTarget=!0)}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDropTarget=!1}onDrop(t){return Yg(this,void 0,void 0,function*(){if(this.enabled){t.preventDefault(),t.stopPropagation(),this.isDropTarget=!1;for(let e=0;e<t.dataTransfer.items.length;e++){const n=t.dataTransfer.items[e];"file"===n.kind&&this.fileUpload.emit(n.getAsFile())}}})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-filedrop"]],hostBindings:function(t,e){1&t&&Fo("dragover",function(t){return e.onDragOver(t)})("dragenter",function(t){return e.onDragOver(t)})("dragleave",function(t){return e.onDragLeave(t)})("dragexit",function(t){return e.onDragLeave(t)})("drop",function(t){return e.onDrop(t)})},inputs:{enabled:"enabled",dropMessage:"dropMessage"},outputs:{fileUpload:"fileUpload"},ngContentSelectors:lw,decls:5,vars:3,consts:[[1,"drop-message"]],template:function(t,e){1&t&&(zo(),Oo(0,"div"),Oo(1,"div",0),ta(2),Mo(),Oo(3,"div"),Ho(4),Mo(),Mo()),2&t&&(Zr(1),Qo("drop-message--visible",e.isDropTarget),Zr(1),na(" ",e.dropMessage," "))},styles:[".drop-message[_ngcontent-%COMP%]{pointer-events:none;display:none}.drop-message--visible[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;justify-content:center;align-content:center;flex-direction:column;text-align:center;font-size:1.5em;z-index:999;background-color:rgba(255,255,255,.6);padding:1em}"]}),t})();const hS=new Bn("ngxChatService");let dS=(()=>{class t{constructor(t){this.chatService=t,this.messageSent=new Fc,this.message=""}ngOnInit(){}onSendMessage(t){t&&t.preventDefault(),this.chatService.sendMessage(this.recipient,this.message),this.message="",this.messageSent.emit()}focus(){this.chatInput.nativeElement.focus()}}return t.\u0275fac=function(e){return new(e||t)(ko(hS))},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-message-input"]],viewQuery:function(t,e){if(1&t&&Yc(uw,5),2&t){let t;Jc(t=Kc())&&(e.chatInput=t.first)}},inputs:{recipient:"recipient"},outputs:{messageSent:"messageSent"},decls:2,vars:2,consts:[["cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",1,"chat-input",3,"ngModel","placeholder","ngModelChange","keydown.enter"],["chatInput",""]],template:function(t,e){1&t&&(Oo(0,"textarea",0,1),Fo("ngModelChange",function(t){return e.message=t})("keydown.enter",function(t){return e.onSendMessage(t)}),Mo()),2&t&&(Bo("placeholder",e.chatService.translations.placeholder),To("ngModel",e.message))},directives:[uy,hd,Md,ep],styles:['@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.chat-input[_ngcontent-%COMP%]{border:none;width:100%;font-size:1em;padding:0;display:block;resize:none;overflow-x:hidden;outline:none}']}),t})();var pS=(()=>(function(t){t.SENDING="sending",t.SENT="sent",t.RECIPIENT_RECEIVED="recipientReceived",t.RECIPIENT_SEEN="recipientSeen"}(pS||(pS={})),pS))(),fS=(()=>(function(t){t.in="in",t.out="out"}(fS||(fS={})),fS))();class gS{onBeforeOnline(){return Promise.resolve()}onOffline(){}afterSendMessage(t,e){}beforeSendMessage(t,e){}handleStanza(t){return!1}afterReceiveMessage(t,e,n){}}class mS extends gS{constructor(t,e){super(),this.xmppChatAdapter=t,this.serviceDiscoveryPlugin=e,this.supportsBlock$=new Kg("unknown")}onBeforeOnline(){return Yg(this,void 0,void 0,function*(){const t=yield this.determineSupportForBlock();this.supportsBlock$.next(t),t&&(yield this.requestBlockedJids())})}determineSupportForBlock(){return Yg(this,void 0,void 0,function*(){try{return yield this.serviceDiscoveryPlugin.supportsFeature(this.xmppChatAdapter.chatConnectionService.userJid.domain,"urn:xmpp:blocking")}catch(t){return!1}})}onOffline(){this.supportsBlock$.next("unknown"),this.xmppChatAdapter.blockedContactIds$.next(new Set)}blockJid(t){return this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("block",{xmlns:"urn:xmpp:blocking"},(0,Km.Ls)("item",{jid:t}))))}unblockJid(t){return this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("unblock",{xmlns:"urn:xmpp:blocking"},(0,Km.Ls)("item",{jid:t}))))}requestBlockedJids(){return Yg(this,void 0,void 0,function*(){const t=(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"get"},(0,Km.Ls)("blocklist",{xmlns:"urn:xmpp:blocking"})))).getChild("blocklist").getChildren("item").map(t=>t.attrs.jid);this.xmppChatAdapter.blockedContactIds$.next(new Set(t))})}handleStanza(t){var e;const{from:n}=t.attrs;if(n&&n===(null===(e=this.xmppChatAdapter.chatConnectionService.userJid)||void 0===e?void 0:e.bare().toString())){const e=t.getChild("block","urn:xmpp:blocking"),n=t.getChild("unblock","urn:xmpp:blocking"),s=this.xmppChatAdapter.blockedContactIds$.getValue();if(e)return e.getChildren("item").map(t=>t.attrs.jid).forEach(t=>s.add(t)),this.xmppChatAdapter.blockedContactIds$.next(s),!0;if(n){const t=n.getChildren("item").map(t=>t.attrs.jid);return 0===t.length?s.clear():t.forEach(t=>s.delete(t)),this.xmppChatAdapter.blockedContactIds$.next(s),!0}}return!1}}class yS{}let vS=(()=>{class t extends Error{constructor(e){super(t.extractErrorTextFromErrorResponse(e,t.extractErrorDataFromErrorResponse(e))),this.errorStanza=e;const{code:n,type:s,condition:r}=t.extractErrorDataFromErrorResponse(e);this.errorCode=n,this.errorType=s,this.errorCondition=r}static extractErrorDataFromErrorResponse(e){var n;const s=e.getChild("error");return{code:Number(null==s?void 0:s.attrs.code)||void 0,type:null==s?void 0:s.attrs.type,condition:null===(n=null==s?void 0:s.children.filter(e=>"text"!==e.getName()&&e.attrs.xmlns===t.ERROR_ELEMENT_NS)[0])||void 0===n?void 0:n.getName()}}static extractErrorTextFromErrorResponse(e,{code:n,type:s,condition:r}){var i;const o=[`errorCode: ${null!=n?n:"[unknown]"}`,`errorType: ${null!=s?s:"[unknown]"}`,`errorCondition: ${null!=r?r:"[unknown]"}`].join(", ");return`IqResponseError: ${(null===(i=e.getChild("error"))||void 0===i?void 0:i.getChildText("text",t.ERROR_ELEMENT_NS))||"Unknown error"}${o?` (${o})`:""}`}}return t.ERROR_ELEMENT_NS="urn:ietf:params:xml:ns:xmpp-stanzas",t})();const bS="http://jabber.org/protocol/pubsub#event";class _S extends yS{constructor(t){super(),this.publishOptions={persistItems:!1},t&&(this.publishOptions=Object.assign(Object.assign({},this.publishOptions),t))}toStanza(){const{node:t,id:e,persistItems:n}=this.publishOptions,s=this.publishOptions.data||(0,Km.Ls)("data");return(0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"},(0,Km.Ls)("publish",{node:t},(0,Km.Ls)("item",{id:e},s)),(0,Km.Ls)("publish-options",{},(0,Km.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,Km.Ls)("field",{var:"FORM_TYPE",type:"hidden"},(0,Km.Ls)("value",{},"http://jabber.org/protocol/pubsub#publish-options")),(0,Km.Ls)("field",{var:"pubsub#persist_items"},(0,Km.Ls)("value",{},n?1:0)),(0,Km.Ls)("field",{var:"pubsub#access_model"},(0,Km.Ls)("value",{},"whitelist"))))))}}class wS extends yS{constructor(t){super(),this.node=t}toStanza(){return(0,Km.Ls)("iq",{type:"get"},(0,Km.Ls)("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"},(0,Km.Ls)("items",{node:this.node})))}}class SS extends gS{constructor(t,e){super(),this.xmppChatAdapter=t,this.serviceDiscoveryPlugin=e,this.publish$=new x,this.supportsPrivatePublish=new Kg("unknown")}onBeforeOnline(){return this.determineSupportForPrivatePublish()}onOffline(){this.supportsPrivatePublish.next("unknown")}storePrivatePayloadPersistent(t,e,n){return new Promise((s,r)=>{this.supportsPrivatePublish.pipe(am(t=>"unknown"!==t)).subscribe(i=>{i?s(this.xmppChatAdapter.chatConnectionService.sendIq(new _S({node:t,id:e,data:n,persistItems:!0}).toStanza())):r(new Error("does not support private publish subscribe"))})})}privateNotify(t,e,n){return new Promise((s,r)=>{this.supportsPrivatePublish.pipe(am(t=>"unknown"!==t)).subscribe(i=>{i?s(this.xmppChatAdapter.chatConnectionService.sendIq(new _S({node:t,id:n,data:e,persistItems:!1}).toStanza())):r(new Error("does not support private publish subscribe"))})})}handleStanza(t){const e=t.getChild("event",bS);return!(!t.is("message")||!e||(this.publish$.next(e),0))}retrieveNodeItems(t){return Yg(this,void 0,void 0,function*(){try{return(yield this.xmppChatAdapter.chatConnectionService.sendIq(new wS(t).toStanza())).getChild("pubsub").getChild("items").getChildren("item")}catch(e){if(e instanceof vS&&("item-not-found"===e.errorCondition||404===e.errorCode))return[];throw e}})}determineSupportForPrivatePublish(){return Yg(this,void 0,void 0,function*(){let t;try{t=(yield this.serviceDiscoveryPlugin.findService("pubsub","pep")).features.includes("http://jabber.org/protocol/pubsub#publish-options")}catch(e){t=!1}this.supportsPrivatePublish.next(t)})}}const CS="urn:xmpp:mucsub:0";var xS=(()=>(function(t){t.presence="urn:xmpp:mucsub:nodes:presence",t.messages="urn:xmpp:mucsub:nodes:messages",t.affiliations="urn:xmpp:mucsub:nodes:affiliations",t.subscribers="urn:xmpp:mucsub:nodes:subscribers",t.config="urn:xmpp:mucsub:nodes:config",t.subject="urn:xmpp:mucsub:nodes:subject",t.system="urn:xmpp:mucsub:nodes:system"}(xS||(xS={})),xS))();class ES extends gS{constructor(t,e){super(),this.xmppChatAdapter=t,this.serviceDiscoveryPlugin=e,this.supportsMucSub$=new Kg("unknown")}onBeforeOnline(){return this.determineSupportForMucSub()}determineSupportForMucSub(){return Yg(this,void 0,void 0,function*(){let t;try{t=(yield this.serviceDiscoveryPlugin.findService("conference","text")).features.includes(CS)}catch(e){t=!1}this.supportsMucSub$.next(t)})}onOffline(){this.supportsMucSub$.next("unknown")}subscribeRoom(t,e=[]){return Yg(this,void 0,void 0,function*(){const n=this.xmppChatAdapter.chatConnectionService.userJid.local;yield this.xmppChatAdapter.chatConnectionService.sendIq(function(t,e,n){return(0,Km.Ls)("iq",{type:"set",to:t},(0,Km.Ls)("subscribe",{xmlns:CS,nick:e},n.map(t=>(0,Km.Ls)("event",{node:t}))))}(t,n,e))})}unsubscribeRoom(t){return Yg(this,void 0,void 0,function*(){yield this.xmppChatAdapter.chatConnectionService.sendIq(function(t){return(0,Km.Ls)("iq",{type:"set",to:t},(0,Km.Ls)("unsubscribe",{xmlns:CS}))}(t))})}unsubscribeJidFromRoom(t,e){this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set",to:t},(0,Km.Ls)("unsubscribe",{xmlns:"urn:xmpp:mucsub:0",jid:e})))}getSubscribedRooms(){return Yg(this,void 0,void 0,function*(){const{local:t,domain:e}=this.xmppChatAdapter.chatConnectionService.userJid,n=`${t}@${e}`;return(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"get",from:n,to:"muc."+e},(0,Km.Ls)("subscriptions",{xmlns:"urn:xmpp:mucsub:0"})))).getChildren("subscription").map(t=>t.getAttr("jid"))})}getSubscribers(t){this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"get",to:t},(0,Km.Ls)("subscriptions",{xmlns:"urn:xmpp:mucsub:0"})))}retrieveSubscriptions(){var t,e;return Yg(this,void 0,void 0,function*(){const n=yield this.serviceDiscoveryPlugin.findService("conference","text"),s=null===(e=null===(t=(yield this.xmppChatAdapter.chatConnectionService.sendIq(function(t){return(0,Km.Ls)("iq",{type:"get",to:t},(0,Km.Ls)("subscriptions",{xmlns:CS}))}(n.jid))).getChild("subscriptions",CS))||void 0===t?void 0:t.getChildren("subscription"))||void 0===e?void 0:e.map(t=>{var e,n;const s=null!==(n=null===(e=t.getChildren("event"))||void 0===e?void 0:e.map(t=>t.attrs.node))&&void 0!==n?n:[];return[t.attrs.jid,s]});return new Map(s)})}}class kS extends gS{constructor(t,e,n,s,r){super(),this.chatService=t,this.serviceDiscoveryPlugin=e,this.multiUserChatPlugin=n,this.logService=s,this.messagePlugin=r,this.mamMessageReceived$=new x,this.chatService.state$.pipe(am(t=>"online"===t)).subscribe(()=>Yg(this,void 0,void 0,function*(){(yield this.supportsMessageArchiveManagement())&&(yield this.requestNewestMessages())})),this.mamMessageReceived$.pipe(fm(10)).subscribe(()=>this.chatService.contacts$.next(this.chatService.contacts$.getValue()))}requestNewestMessages(){return Yg(this,void 0,void 0,function*(){yield this.chatService.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,Km.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,Km.Ls)("max",{},250),(0,Km.Ls)("before")))))})}loadMostRecentUnloadedMessages(t){return Yg(this,void 0,void 0,function*(){const e="room"===t.recipientType?t.roomJid.toString():void 0,n=(0,Km.Ls)("iq",{type:"set",to:e},(0,Km.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,Km.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,Km.Ls)("field",{var:"FORM_TYPE",type:"hidden"},(0,Km.Ls)("value",{},"urn:xmpp:mam:2")),"contact"===t.recipientType?(0,Km.Ls)("field",{var:"with"},(0,Km.Ls)("value",{},t.jidBare)):void 0,t.oldestMessage?(0,Km.Ls)("field",{var:"end"},(0,Km.Ls)("value",{},t.oldestMessage.datetime.toISOString())):void 0),(0,Km.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,Km.Ls)("max",{},100),(0,Km.Ls)("before"))));yield this.chatService.chatConnectionService.sendIq(n)})}loadAllMessages(){return Yg(this,void 0,void 0,function*(){if(!(yield this.supportsMessageArchiveManagement()))throw new Error("message archive management not suppported");let t=yield this.chatService.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("query",{xmlns:"urn:xmpp:mam:2"})));for(;"true"!==t.getChild("fin").attrs.complete;){const e=t.getChild("fin").getChild("set").getChildText("last");t=yield this.chatService.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,Km.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,Km.Ls)("max",{},250),(0,Km.Ls)("after",{},e)))))}})}supportsMessageArchiveManagement(){return Yg(this,void 0,void 0,function*(){const t=yield this.serviceDiscoveryPlugin.supportsFeature(this.chatService.chatConnectionService.userJid.bare().toString(),"urn:xmpp:mam:2");return t||this.logService.info("server doesnt support MAM"),t})}handleStanza(t){return!!this.isMamMessageStanza(t)&&(this.handleMamMessageStanza(t),!0)}isMamMessageStanza(t){const e=t.getChild("result");return"message"===t.name&&"urn:xmpp:mam:2"===(null==e?void 0:e.attrs.xmlns)}handleMamMessageStanza(t){const e=t.getChild("result").getChild("forwarded"),n=e.getChild("message"),s=e.getChild("delay"),r=n.getChild("event",bS);null==n.getAttr("type")&&null!=r?this.handlePubSubEvent(r,s):this.handleArchivedMessage(n,s)}handleArchivedMessage(t,e){const n=t.getAttr("type");if("chat"===n)this.messagePlugin.handleStanza(t,e)&&this.mamMessageReceived$.next();else{if("groupchat"!==n)throw new Error(`unknown archived message type: ${n}`);this.multiUserChatPlugin.handleStanza(t,e)}}handlePubSubEvent(t,e){const n=t.getChild("items");(null==n?void 0:n.attrs.node)===xS.messages?n.getChildren("item").forEach(t=>this.handleArchivedMessage(t.getChild("message"),e)):this.logService.warn(`Handling of MUC/Sub message types other than ${xS.messages} isn't implemented yet!`)}}class TS{constructor(t,e){this.recipient=t,this.isCollapsed=e}}let IS=(()=>{class t{constructor(t){this.chatService=t,this.openChats$=new Kg([]),this.openTracks$=new Kg([]),this.chatService.state$.pipe(am(t=>"disconnected"===t)).subscribe(()=>{this.openChats$.next([])}),this.chatService.contactRequestsReceived$.subscribe(t=>{for(const e of t)this.openChat(e)})}openChatCollapsed(t){if(!this.isChatWithRecipientOpen(t)){const e=this.openChats$.getValue(),n=[new TS(t,!0)].concat(e);this.openChats$.next(n)}}openChat(t){this.openChatCollapsed(t),this.findChatWindowStateByRecipient(t).isCollapsed=!1}closeChat(t){const e=this.openChats$.getValue(),n=this.findChatWindowStateIndexByRecipient(t);if(n>=0){const t=e.slice();t.splice(n,1),this.openChats$.next(t)}}openTrack(t){this.openTracks$.next(this.openTracks$.getValue().concat([t]))}closeTrack(t){this.openTracks$.next(this.openTracks$.getValue().filter(e=>e!==t))}isChatWithRecipientOpen(t){return void 0!==this.findChatWindowStateByRecipient(t)}findChatWindowStateIndexByRecipient(t){return this.openChats$.getValue().findIndex(e=>e.recipient.equalsBareJid(t))}findChatWindowStateByRecipient(t){return this.openChats$.getValue().find(e=>e.recipient.equalsBareJid(t))}}return t.\u0275fac=function(e){return new(e||t)(hs(hS))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),OS=(()=>{class t{constructor(){this.openChats$=new Kg(new Set),this.chatOpened$=new x,this.recipientToOpenMessageListCount=new Map}isChatOpen(t){return this.getOrDefault(t,0)>0}incrementOpenWindowCount(t){const e=this.isChatOpen(t);this.recipientToOpenMessageListCount.set(t,this.getOrDefault(t,0)+1);const n=this.openChats$.getValue();n.add(t),this.openChats$.next(n),e||this.chatOpened$.next(t)}decrementOpenWindowCount(t){const e=this.getOrDefault(t,0)-1;if(e<=0){this.recipientToOpenMessageListCount.set(t,0);const e=this.openChats$.getValue();e.delete(t),this.openChats$.next(e)}else this.recipientToOpenMessageListCount.set(t,e)}getOrDefault(t,e){return this.recipientToOpenMessageListCount.get(t)||e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const MS="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDYwMCA2MDAiPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwLV8xIj4KICAgICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgogIDxnIGlkPSJfMSIgZGF0YS1uYW1lPSIxIiBjbGlwLXBhdGg9InVybCgjY2xpcC1fMSkiPgogICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9IiNmZmYiLz4KICAgIDxnIGlkPSJHcnVwcGVfNzcxNyIgZGF0YS1uYW1lPSJHcnVwcGUgNzcxNyI+CiAgICAgIDxyZWN0IGlkPSJSZWNodGVja18xMzk3IiBkYXRhLW5hbWU9IlJlY2h0ZWNrIDEzOTciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIiBmaWxsPSIjZTVlNmU4Ii8+CiAgICAgIDxlbGxpcHNlIGlkPSJFbGxpcHNlXzI4MyIgZGF0YS1uYW1lPSJFbGxpcHNlIDI4MyIgY3g9IjExNi4yMzEiIGN5PSIxMjUuNjcxIiByeD0iMTE2LjIzMSIgcnk9IjEyNS42NzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4NS4yMzEgMTExLjQ4NSkiIGZpbGw9IiNhZmI0YjgiLz4KICAgICAgPHBhdGggaWQ9IlBmYWRfMjQ5NjIiIGRhdGEtbmFtZT0iUGZhZCAyNDk2MiIgZD0iTTU0Ni4zNTksNTk1LjI3NnMwLTIxNy41NjMtMjQ0LjkwOS0yMTcuNTYzaC0xLjQ1N2MtMjQ0LjkwOSwwLTI0NC45MDksMjE3LjU2My0yNDQuOTA5LDIxNy41NjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgNC43MjQpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K",AS=t=>t.toString();function PS(t,e,n=AS){e.splice(RS(n(t),e,n),0,t)}function RS(t,e,n=AS){let s=0,r=e.length;for(;s!==r;){const i=Math.floor(s+(r-s)/2);t<n(e[i])?r=i:s=i+1}return s}function NS(t,e){return t[function(t,e){for(let n=t.length-1;n>=0;n--)if(e(t[n]))return n;return-1}(t,e)]}function DS(t){const e=t.toISOString();return e.slice(0,e.indexOf("T"))}class LS{constructor(t){this.logService=t,this.messages=[],this.dateMessageGroups=[],this.messageIdToMessage=new Map,this.messages$=new x}addMessage(t){return t.id&&this.messageIdToMessage.has(t.id)?(this.logService&&this.logService.warn(`message with id ${t.id} already exists`),!1):(PS(t,this.messages,t=>t.datetime),this.addToDateMessageGroups(t),this.messageIdToMessage.set(t.id,t),this.messages$.next(t),!0)}get oldestMessage(){return this.messages[0]}get mostRecentMessage(){return this.messages[this.messages.length-1]}get mostRecentMessageReceived(){return NS(this.messages,t=>t.direction===fS.in)}get mostRecentMessageSent(){return NS(this.messages,t=>t.direction===fS.out)}addToDateMessageGroups(t){const e=DS(t.datetime),n=function(t,e,n=AS){let s=0,r=e.length;for(;s!==r;){const i=Math.floor(s+(r-s)/2),o=n(e[i]);if(t<o)r=i;else{if(!(t>o))return i;s=i+1}}return-1}(e,this.dateMessageGroups,t=>DS(t.date));if(-1!==n)PS(t,this.dateMessageGroups[n].messages,t=>t.datetime);else{const n={date:t.datetime,messages:[t]},s=RS(e,this.dateMessageGroups,t=>DS(t.date));this.dateMessageGroups.splice(s,0,n)}}}var jS=(()=>(function(t){t.present="present",t.unavailable="unavailable",t.away="away"}(jS||(jS={})),jS))();function FS(t){return!!t.bare}var $S=(()=>(function(t){t.to="to",t.from="from",t.both="both",t.none="none"}($S||($S={})),$S))();class VS{constructor(t,e,n,s){this.name=e,this.recipientType="contact",this.avatar=MS,this.metadata={},this.presence$=new Kg(jS.unavailable),this.subscription$=new Kg($S.none),this.pendingOut$=new Kg(!1),this.pendingIn$=new Kg(!1),this.resources$=new Kg(new Map),s&&(this.avatar=s);const r=(0,Km.kO)(t);this.jidFull=r,this.jidBare=r.bare(),this.messageStore=new LS(n)}get messages$(){return this.messageStore.messages$}get messages(){return this.messageStore.messages}get dateMessagesGroups(){return this.messageStore.dateMessageGroups}get oldestMessage(){return this.messageStore.oldestMessage}get mostRecentMessage(){return this.messageStore.mostRecentMessage}get mostRecentMessageReceived(){return this.messageStore.mostRecentMessageReceived}get mostRecentMessageSent(){return this.messageStore.mostRecentMessageSent}addMessage(t){this.messageStore.addMessage(t)}equalsBareJid(t){if(t instanceof VS||FS(t)){const e=t instanceof VS?t.jidBare:t.bare();return this.jidBare.equals(e)}return!1}isSubscribed(){const t=this.subscription$.getValue();return t===$S.both||t===$S.to}isUnaffiliated(){return!this.isSubscribed()&&!this.pendingIn$.getValue()&&!this.pendingOut$.getValue()}updateResourcePresence(t,e){const n=this.resources$.getValue();n.set(t,e),this.presence$.next(this.determineOverallPresence(n)),this.resources$.next(n)}getMessageById(t){return this.messageStore.messageIdToMessage.get(t)}determineOverallPresence(t){let e=jS.unavailable;return[...t.values()].some(t=>t===jS.present?(e=t,!0):(t===jS.away&&(e=jS.away),!1)),e}}var qS=(()=>(function(t){t[t.Disabled=0]="Disabled",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"}(qS||(qS={})),qS))();let US=(()=>{class t{constructor(){this.logLevel=qS.Info,this.writer=console,this.messagePrefix=()=>"ChatService:"}error(...t){this.logLevel>=qS.Error&&this.writer.error(this.messagePrefix(),...t)}warn(...t){this.logLevel>=qS.Warn&&this.writer.warn(this.messagePrefix(),...t)}info(...t){this.logLevel>=qS.Info&&this.writer.info(this.messagePrefix(),...t)}debug(...t){this.logLevel>=qS.Debug&&this.writer.debug(this.messagePrefix(),...t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),zS=(()=>{class t{constructor(t){this.logService=t}createContact(t,e,n){return e||(e=t),new VS(t,e,this.logService,n)}}return t.\u0275fac=function(e){return new(e||t)(hs(US))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const HS=new Bn("ngxChatReportUserService"),BS=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;function GS(t){return t.match(BS)||[]}class WS extends gS{static extractIdFromStanza(t){const e=t.getChild("origin-id"),n=t.getChild("stanza-id");return t.attrs.id||e&&e.attrs.id||n&&n.attrs.id}beforeSendMessage(t,e){const n=function(){let t;for(;!t;)t=Math.random().toString(36).substr(2,12);return t}();t.children.push((0,Km.Ls)("origin-id",{xmlns:"urn:xmpp:sid:0",id:n})),e&&(e.id=n)}afterSendMessage(t,e){t.id=WS.extractIdFromStanza(e)}afterReceiveMessage(t,e){t.id=WS.extractIdFromStanza(e)}}const ZS="ngxchat:contactmessagestates",QS="entries",JS="contact-message-state";class YS extends gS{constructor(t,e,n,s,r){super(),this.publishSubscribePlugin=t,this.xmppChatAdapter=e,this.chatMessageListRegistry=n,this.logService=s,this.entityTimePlugin=r,this.jidToMessageStateDate=Object.create(null),this.chatMessageListRegistry.openChats$.pipe(am(()=>"online"===e.state$.getValue())).subscribe(t=>{t.forEach(t=>Yg(this,void 0,void 0,function*(){t.mostRecentMessageReceived&&(yield this.sendMessageStateNotification(t.jidBare,t.mostRecentMessageReceived.id,pS.RECIPIENT_SEEN))}))}),this.publishSubscribePlugin.publish$.subscribe(t=>this.handlePubSubEvent(t))}onBeforeOnline(){return Yg(this,void 0,void 0,function*(){this.parseContactMessageStates().catch(t=>this.logService.error("error parsing contact message states",t))})}parseContactMessageStates(){return Yg(this,void 0,void 0,function*(){const t=yield this.publishSubscribePlugin.retrieveNodeItems(ZS);this.processPubSub(t)})}processPubSub(t){let e=[];1===t.length&&(e=t[0].getChild(QS).getChildren(JS).map(t=>{const{lastRecipientReceived:e,lastRecipientSeen:n,lastSent:s,jid:r}=t.attrs;return[r,{lastRecipientSeen:new Date(+n||0),lastRecipientReceived:new Date(+e||0),lastSent:new Date(+s||0)}]})),this.jidToMessageStateDate=new Map(e)}persistContactMessageStates(){return Yg(this,void 0,void 0,function*(){const t=[...this.jidToMessageStateDate.entries()].map(([t,e])=>(0,Km.Ls)(JS,{jid:t,lastRecipientReceived:String(e.lastRecipientReceived.getTime()),lastRecipientSeen:String(e.lastRecipientSeen.getTime()),lastSent:String(e.lastSent.getTime())}));yield this.publishSubscribePlugin.storePrivatePayloadPersistent(ZS,"current",(0,Km.Ls)(QS,{},t))})}onOffline(){this.jidToMessageStateDate.clear()}beforeSendMessage(t,e){const{type:n}=t.attrs;"chat"===n&&e&&(e.state=pS.SENDING)}afterSendMessage(t,e){return Yg(this,void 0,void 0,function*(){const{type:n,to:s}=e.attrs;"chat"===n&&(this.updateContactMessageState((0,Km.kO)(s).bare().toString(),pS.SENT,new Date(yield this.entityTimePlugin.getNow())),delete t.state)})}afterReceiveMessage(t,e,n){e.getChild("message-state",ZS)?n.discard=!0:t.direction===fS.in&&!t.fromArchive&&"groupchat"!==e.attrs.type&&this.acknowledgeReceivedMessage(e)}acknowledgeReceivedMessage(t){const{from:e}=t.attrs,n=this.chatMessageListRegistry.isChatOpen(this.xmppChatAdapter.getOrCreateContactById(e))?pS.RECIPIENT_SEEN:pS.RECIPIENT_RECEIVED,s=WS.extractIdFromStanza(t);this.sendMessageStateNotification((0,Km.kO)(e),s,n).catch(t=>this.logService.error("error sending state notification",t))}sendMessageStateNotification(t,e,n){return Yg(this,void 0,void 0,function*(){const s=(0,Km.Ls)("message",{to:t.bare().toString(),from:this.xmppChatAdapter.chatConnectionService.userJid.toString(),type:"chat"},(0,Km.Ls)("message-state",{xmlns:ZS,messageId:e,date:new Date(yield this.entityTimePlugin.getNow()).toISOString(),state:n}));yield this.xmppChatAdapter.chatConnectionService.send(s)})}handleStanza(t){const{type:e,from:n}=t.attrs,s=t.getChild("message-state",ZS);return!("chat"!==e||!s||(this.handleStateNotificationStanza(s,n),0))}handleStateNotificationStanza(t,e){const{state:n,date:s}=t.attrs,r=this.xmppChatAdapter.getOrCreateContactById(e),i=new Date(s);this.updateContactMessageState(r.jidBare.toString(),n,i)}updateContactMessageState(t,e,n){const s=this.getContactMessageState(t);let r=!1;e===pS.RECIPIENT_RECEIVED&&s.lastRecipientReceived<n?(s.lastRecipientReceived=n,r=!0):e===pS.RECIPIENT_SEEN&&s.lastRecipientSeen<n?(s.lastRecipientReceived=n,s.lastRecipientSeen=n,r=!0):e===pS.SENT&&s.lastSent<n&&(s.lastSent=n,r=!0),r&&this.persistContactMessageStates().catch(t=>this.logService.error("error persisting contact message states",t))}getContactMessageState(t){return this.jidToMessageStateDate.has(t)||this.jidToMessageStateDate.set(t,{lastRecipientReceived:new Date(0),lastRecipientSeen:new Date(0),lastSent:new Date(0)}),this.jidToMessageStateDate.get(t)}handlePubSubEvent(t){const e=t.getChild("items"),n=null==e?void 0:e.attrs.node,s=null==e?void 0:e.getChildren("item");n===ZS&&s&&this.processPubSub(s)}}function KS(){return{acceptSubscriptionRequest:"Accept",block:"Block",blockAndReport:"Block & report",chat:"Chat",contactRequestIn:"Incoming contact requests",contactRequestOut:"Outgoing contact requests",contacts:"Contacts",contactsUnaffiliated:"Unknown",dateFormat:"EEEE, MM/dd/yyyy",denySubscriptionRequest:"Deny",dismiss:"Dismiss",dropMessage:"Drop your file to send it",locale:void 0,noContacts:"No contacts yet.",noMessages:"No messages yet.",placeholder:"Enter your message!",presence:{[jS.away]:"Away",[jS.present]:"Online",[jS.unavailable]:"Offline"},rooms:"Rooms",subscriptionRequestMessage:"I want to add you as a contact.",timeFormat:"shortTime"}}class XS{constructor(){this.discard=!1}}class tC extends gS{constructor(t,e){super(),this.xmppChatAdapter=t,this.logService=e}handleStanza(t,e){return!!this.isMessageStanza(t)&&(this.handleMessageStanza(t,e),!0)}isMessageStanza(t){var e;return"message"===t.name&&"groupchat"!==t.attrs.type&&"error"!==t.attrs.type&&!!(null===(e=t.getChildText("body"))||void 0===e?void 0:e.trim())}handleMessageStanza(t,e){const n=this.xmppChatAdapter.chatConnectionService.userJid.bare().equals((0,Km.kO)(t.attrs.to).bare()),s=n?fS.in:fS.out,r=null!=e,i=null!=e?e:t.getChild("delay"),o=(null==i?void 0:i.attrs.stamp)?new Date(i.attrs.stamp):new Date;s===fS.in&&!r&&this.logService.debug("message received <=",t.getChildText("body"));const a={body:t.getChildText("body").trim(),direction:s,datetime:o,delayed:!!i,fromArchive:r},c=new XS;if(this.xmppChatAdapter.plugins.forEach(e=>e.afterReceiveMessage(a,t,c)),c.discard)return;const l=this.xmppChatAdapter.getOrCreateContactById(n?t.attrs.from:t.attrs.to);l.addMessage(a),s===fS.in&&!r&&this.xmppChatAdapter.message$.next(l)}sendMessage(t,e){const n=(0,Km.Ls)("message",{to:t.jidBare.toString(),from:this.xmppChatAdapter.chatConnectionService.userJid.toString(),type:"chat"},(0,Km.Ls)("body",{},e)),s={direction:fS.out,body:e,datetime:new Date,delayed:!1,fromArchive:!1};this.xmppChatAdapter.plugins.forEach(t=>t.beforeSendMessage(n,s)),t.addMessage(s),this.xmppChatAdapter.chatConnectionService.send(n).then(()=>{this.xmppChatAdapter.plugins.forEach(t=>t.afterSendMessage(s,n))},t=>{this.logService.error("rejected message "+s.id,t)})}}class eC{static buildRoomMessage(t,e,n=[]){return(0,Km.Ls)("message",{from:t,to:e,type:"groupchat"},...n)}static buildRoomMessageWithBody(t,e,n,s=[]){return eC.buildRoomMessage(t,e,[(0,Km.Ls)("body",{},n),...s])}static buildRoomMessageWithThread(t,e,n,s){return eC.buildRoomMessageWithBody(t,e,n,[(0,Km.Ls)("thread",{},s)])}}class nC extends yS{constructor(t,e){super(),this.xmlns=t,this.to=e}toStanza(){return(0,Km.Ls)("iq",Object.assign({type:"get"},this.to?{to:this.to}:{}),(0,Km.Ls)("query",{xmlns:this.xmlns}))}}let sC=(()=>{class t extends gS{constructor(t){super(),this.chatAdapter=t,this.servicesInitialized$=new Kg(!1),this.hostedServices=[],this.resourceCache=new Map}onBeforeOnline(){return Yg(this,void 0,void 0,function*(){yield this.discoverServices(this.chatAdapter.chatConnectionService.userJid.domain),this.servicesInitialized$.next(!0)})}onOffline(){this.servicesInitialized$.next(!1),this.hostedServices=[],this.resourceCache.clear()}supportsFeature(t,e){return new Promise((n,s)=>{this.servicesInitialized$.pipe(Pm(t=>!!t)).subscribe(()=>Yg(this,void 0,void 0,function*(){try{const r=this.resourceCache.get(t)||(yield this.discoverServiceInformation(t));r||s(new Error("no service found for jid "+t)),n(r.features.includes(e))}catch(r){s(r)}}))})}findService(t,e){return new Promise((n,s)=>{this.servicesInitialized$.pipe(Pm(t=>!!t)).subscribe(()=>{const r=this.hostedServices.filter(n=>n.identities.filter(n=>n.category===t&&n.type===e).length>0);if(0===r.length)s(new Error(`no service matching category ${t} and type ${e} found!`));else{if(!(r.length>1))return n(r[0]);s(new Error(`multiple services matching category ${t} and type ${e} found! ${JSON.stringify(r)}`))}})})}discoverServices(e){return Yg(this,void 0,void 0,function*(){const n=yield this.chatAdapter.chatConnectionService.sendIq(new nC(t.DISCO_ITEMS,this.chatAdapter.chatConnectionService.userJid.domain).toStanza()),s=new Set(n.getChild("query").getChildren("item").map(t=>t.attrs.jid));s.add(e);const r=yield Promise.all([...s.keys()].map(t=>this.discoverServiceInformation(t)));this.hostedServices.push(...r)})}discoverServiceInformation(e){return Yg(this,void 0,void 0,function*(){const n=yield this.chatAdapter.chatConnectionService.sendIq(new nC(t.DISCO_INFO,e).toStanza()),s=n.getChild("query"),r=s.getChildren("feature").map(t=>t.attrs.var),i={identities:s.getChildren("identity").map(t=>t.attrs),features:r,jid:n.attrs.from};return this.resourceCache.set(n.attrs.from,i),i})}}return t.DISCO_INFO="http://jabber.org/protocol/disco#info",t.DISCO_ITEMS="http://jabber.org/protocol/disco#items",t})();class rC{constructor(t,e,n){this.recipientType="room",this.avatar="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDYwMCA2MDAiPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwLV8zIj4KICAgICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgogIDxnIGlkPSJfMyIgZGF0YS1uYW1lPSIzIiBjbGlwLXBhdGg9InVybCgjY2xpcC1fMykiPgogICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9IiNmZmYiLz4KICAgIDxnIGlkPSJHcnVwcGVfNzcxOCIgZGF0YS1uYW1lPSJHcnVwcGUgNzcxOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTc4MC42OTcgODgxLjUpIj4KICAgICAgPHJlY3QgaWQ9IlJlY2h0ZWNrXzEzOTgiIGRhdGEtbmFtZT0iUmVjaHRlY2sgMTM5OCIgd2lkdGg9IjYwMCIgaGVpZ2h0PSI1OTkuOTk1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3ODAuNjk3IC04ODEuNSkiIGZpbGw9IiNlNWU2ZTgiLz4KICAgICAgPGVsbGlwc2UgaWQ9IkVsbGlwc2VfMjg0IiBkYXRhLW5hbWU9IkVsbGlwc2UgMjg0IiBjeD0iMTE2LjIzMSIgY3k9IjEyNS42NzEiIHJ4PSIxMTYuMjMxIiByeT0iMTI1LjY3MSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTY1LjkyNiAtNzY5LjA5MykiIGZpbGw9IiNhZmI0YjgiLz4KICAgICAgPGVsbGlwc2UgaWQ9IkVsbGlwc2VfMjg1IiBkYXRhLW5hbWU9IkVsbGlwc2UgMjg1IiBjeD0iNjcuOTk4IiBjeT0iNzMuNTIxIiByeD0iNjcuOTk4IiByeT0iNzMuNTIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MTYuMjEgLTY2NS40OTYpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxlbGxpcHNlIGlkPSJFbGxpcHNlXzI4OSIgZGF0YS1uYW1lPSJFbGxpcHNlIDI4OSIgY3g9IjY3Ljk5OCIgY3k9IjczLjUyMSIgcng9IjY3Ljk5OCIgcnk9IjczLjUyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIxMi4xMDcgLTY2NS40OTYpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxwYXRoIGlkPSJQZmFkXzI0OTYzIiBkYXRhLW5hbWU9IlBmYWQgMjQ5NjMiIGQ9Ik0xMzI3LjA1Mi0yODYuMjI1czAtMjE3LjU2My0yNDQuOTA3LTIxNy41NjNoLTEuNDU3Yy0yNDQuOTA3LDAtMjQ0LjkwNywyMTcuNTYzLTI0NC45MDcsMjE3LjU2M1oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgNC43MjUpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxwYXRoIGlkPSJQZmFkXzI0OTY0IiBkYXRhLW5hbWU9IlBmYWQgMjQ5NjQiIGQ9Ik05MzMuOTc3LTQ4My44Yy0xLjA1LjYtMi4xLDEuMjItMy4xNCwxLjg0LTMyLjM0LDE5LjM0LTU4LjI5LDQ2LjI3LTc3LjEyLDgwLjA1LTMxLjcsNTYuODgtMzQuMzU1LDExOC43MjgtMzQuMzU1LDEyMS4yNDhoLTQwLjkxTDc4MC43LTQ3MS4zMmMyMy4yOC0xOC44Miw1Ny4wNS0zMi40NywxMDYuMDQtMzIuNDdoLjk0YTIxNy43NTMsMjE3Ljc1MywwLDAsMSw0My44Myw0LjE4QTguNTQ5LDguNTQ5LDAsMCwxLDkzMy45NzctNDgzLjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAgLTAuNzI1KSIgZmlsbD0iI2FmYjRiOCIvPgogICAgICA8cGF0aCBpZD0iUGZhZF8yNDk2OCIgZGF0YS1uYW1lPSJQZmFkIDI0OTY4IiBkPSJNNzgyLjc5LTQ4My44YzEuMDUuNiwyLjEsMS4yMiwzLjE0LDEuODQsMzIuMzQsMTkuMzQsNTguMjksNDYuMjcsNzcuMTIsODAuMDUsMzEuNyw1Ni44OCwzNC4zNTUsMTE4LjcyOCwzNC4zNTUsMTIxLjI0OGg0MC45MUw5MzYuMDctNDcxLjMyYy0yMy4yOC0xOC44Mi01Ny4wNS0zMi40Ny0xMDYuMDQtMzIuNDdoLS45NGEyMTcuNzUzLDIxNy43NTMsMCwwLDAtNDMuODMsNC4xOEE4LjU0OSw4LjU0OSwwLDAsMCw3ODIuNzktNDgzLjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NTcuNTQ3IC0wLjcyNikiIGZpbGw9IiNhZmI0YjgiLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=",this.metadata={},this.roomJid=t.bare(),this.name=null!=n?n:t.bare().toString(),this.occupantJid=t,this.messageStore=new LS(e)}get jidBare(){return this.roomJid}get messages$(){return this.messageStore.messages$}get messages(){return this.messageStore.messages}get dateMessagesGroups(){return this.messageStore.dateMessageGroups}get oldestMessage(){return this.messageStore.oldestMessage}get mostRecentMessage(){return this.messageStore.mostRecentMessage}get mostRecentMessageReceived(){return this.messageStore.mostRecentMessageReceived}get mostRecentMessageSent(){return this.messageStore.mostRecentMessageSent}addMessage(t){this.messageStore.addMessage(t)}equalsBareJid(t){if(t instanceof rC||FS(t)){const e=t instanceof rC?t.roomJid:t.bare();return this.roomJid.bare().equals(e)}return!1}}var iC=(()=>(function(t){t[t.none=0]="none",t[t.member=1]="member",t[t.admin=2]="admin",t[t.owner=3]="owner",t[t.outcast=4]="outcast"}(iC||(iC={})),iC))();class oC extends yS{constructor(t,e){super(),this.roomJid=t,this.affiliation=e}static build(t,e){return new oC(t,e).toStanza()}toStanza(){return(0,Km.Ls)("iq",{type:"get",to:this.roomJid},(0,Km.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#admin"},(0,Km.Ls)("item",{affiliation:this.affiliation})))}}class aC extends yS{constructor(t,e){super(),this.roomJid=t,this.modifications=e}static build(t,e){return new aC(t,e).toStanza()}toStanza(){return(0,Km.Ls)("iq",{to:this.roomJid,type:"set"},(0,Km.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#admin"},...this.modifications.map(t=>this.buildItem(t))))}buildItem({nick:t,jid:e,affiliation:n}){const s=(0,Km.Ls)("item",{jid:e,affiliation:iC[n]});return t&&(s.attrs.nick=t),s}}class cC extends gS{constructor(t,e,n){super(),this.xmppChatAdapter=t,this.logService=e,this.serviceDiscoveryPlugin=n,this.rooms$=new Kg([]),this.message$=new x,this.roomJoinResponseHandlers=new Map}onOffline(){this.roomJoinResponseHandlers.clear(),this.rooms$.next([])}handleStanza(t,e){return this.isRoomPresenceStanza(t)?this.handleRoomPresenceStanza(t):!!this.isRoomMessageStanza(t)&&this.handleRoomMessageStanza(t,e)}isRoomPresenceStanza(t){return"presence"===t.name&&null!=(t.getChild("x","http://jabber.org/protocol/muc")||t.getChild("x","http://jabber.org/protocol/muc#user"))}handleRoomPresenceStanza(t){const e=this.roomJoinResponseHandlers.get(t.attrs.from);return!!e&&(this.roomJoinResponseHandlers.delete(t.attrs.from),e(t),!0)}createRoom(t){return Yg(this,void 0,void 0,function*(){const{roomId:e,nick:n,name:s}=t,r=yield this.serviceDiscoveryPlugin.findService("conference","text"),i=(0,Km.kO)(e,r.jid,n),{presenceResponse:o,room:a}=yield this.joinRoomInternal(i,s);if("owner"!==o.getChild("x").getChild("item").attrs.affiliation)throw new Error("error creating room, user is not owner: "+o.toString());const c=(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"get",to:a.roomJid.toString()},(0,Km.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"})))).getChild("query").getChild("x");if(!c)throw new Error("room not configurable");const l=this.applyRoomCreationRequestOptions(this.extractDefaultConfiguration(c.getChildren("field")),t);try{return yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set",to:a.roomJid.toString()},(0,Km.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"},(0,Km.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,Km.Ls)("field",{var:"FORM_TYPE"},(0,Km.Ls)("value",{},"http://jabber.org/protocol/muc#roomconfig")),...this.configurationToElements(l))))),a}catch(u){throw this.logService.error("room configuration rejected",u),u}})}destroyRoom(t){return Yg(this,void 0,void 0,function*(){let e;try{e=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set",to:t.toString()},(0,Km.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"},(0,Km.Ls)("destroy"))))}catch(s){throw this.logService.error("error destroying room"),s}const n=this.rooms$.getValue().filter(e=>!e.roomJid.equals(t));return this.rooms$.next(n),e})}joinRoomInternal(t,e){return Yg(this,void 0,void 0,function*(){if(this.getRoomByJid(t.bare()))throw new Error("can not join room more than once: "+t.bare().toString());const n=this.xmppChatAdapter.chatConnectionService.userJid,s=(0,Km.kO)(t.local,t.domain,t.resource||n.local),r=new Promise(t=>this.roomJoinResponseHandlers.set(s.toString(),t));try{yield this.xmppChatAdapter.chatConnectionService.send((0,Km.Ls)("presence",{from:n.toString(),to:s.toString()},(0,Km.Ls)("x",{xmlns:"http://jabber.org/protocol/muc"})))}catch(a){throw this.logService.error("error sending presence stanza to join a room",a),this.roomJoinResponseHandlers.delete(s.toString()),a}const i=yield r;if(i.getChild("error"))throw new Error("error joining room: "+i.toString());let o=this.getRoomByJid(t);return o||(o=new rC(s,this.logService,e),this.rooms$.next([o].concat(this.rooms$.getValue()))),{presenceResponse:i,room:o}})}joinRoom(t){return Yg(this,void 0,void 0,function*(){return(yield this.joinRoomInternal(t)).room})}queryAllRooms(){return Yg(this,void 0,void 0,function*(){const t=yield this.serviceDiscoveryPlugin.findService("conference","text"),e=(t.jid.toString(),[]);let n=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"get",to:t.jid.toString()},(0,Km.Ls)("query",{xmlns:sC.DISCO_ITEMS})));e.push(...this.extractRoomSummariesFromResponse(n));let s=this.extractResultSetFromResponse(n);for(;s&&s.getChild("last");){const r=s.getChildText("last");n=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"get",to:t.jid.toString()},(0,Km.Ls)("query",{xmlns:sC.DISCO_ITEMS},(0,Km.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,Km.Ls)("max",{},250),(0,Km.Ls)("after",{},r))))),e.push(...this.extractRoomSummariesFromResponse(n)),s=this.extractResultSetFromResponse(n)}return e})}extractRoomSummariesFromResponse(t){var e,n;return(null===(n=null===(e=t.getChild("query",sC.DISCO_ITEMS))||void 0===e?void 0:e.getChildren("item"))||void 0===n?void 0:n.map(t=>t.attrs))||[]}extractResultSetFromResponse(t){var e;return null===(e=t.getChild("query",sC.DISCO_ITEMS))||void 0===e?void 0:e.getChild("set","http://jabber.org/protocol/rsm")}queryMemberList(t){return Yg(this,void 0,void 0,function*(){const e=yield Promise.all([this.xmppChatAdapter.chatConnectionService.sendIq(oC.build(t,"admin")),this.xmppChatAdapter.chatConnectionService.sendIq(oC.build(t,"member")),this.xmppChatAdapter.chatConnectionService.sendIq(oC.build(t,"owner")),this.xmppChatAdapter.chatConnectionService.sendIq(oC.build(t,"outcast"))]);let n=[];for(const t of e){const e=t.getChild("query").getChildren("item").map(t=>({jid:t.attrs.jid,nick:t.attrs.nick,affiliation:this.reverseMapAffiliation(t.attrs.affiliation)}));n=n.concat(e)}return n})}reverseMapAffiliation(t){if(!t||"none"===t)return iC.none;if("member"===t)return iC.member;if("admin"===t)return iC.admin;if("owner"===t)return iC.owner;if("outcast"===t)return iC.outcast;{const e="unexpected affilation: "+t;throw this.logService.error(e),new Error(e)}}modifyMemberList(t,e,n,s){return Yg(this,void 0,void 0,function*(){return yield this.xmppChatAdapter.chatConnectionService.sendIq(aC.build(t,[{jid:e,affiliation:n,nick:s}]))})}sendMessage(t,e,n){return Yg(this,void 0,void 0,function*(){const s=this.xmppChatAdapter.chatConnectionService.userJid.toString(),r=t.roomJid.toString(),i=n?eC.buildRoomMessageWithThread(s,r,e,n):eC.buildRoomMessageWithBody(s,r,e);for(const t of this.xmppChatAdapter.plugins)t.beforeSendMessage(i);return yield this.xmppChatAdapter.chatConnectionService.send(i)})}configurationToElements(t){return[...t.entries()].map(([t,e])=>(0,Km.Ls)("field",{var:t},...e.map(t=>(0,Km.Ls)("value",{},t))))}extractDefaultConfiguration(t){const e=t.filter(t=>"hidden"!==t.attrs.type).map(t=>[t.attrs.var,t.getChildren("value").map(t=>t.getText())]);return new Map(e)}applyRoomCreationRequestOptions(t,e){const n=new Map(t);return n.set("muc#roomconfig_whois",[e.nonAnonymous?"anyone":"moderators"]).set("muc#roomconfig_publicroom",[e.public?"1":"0"]).set("muc#roomconfig_membersonly",[e.membersOnly?"1":"0"]).set("muc#roomconfig_persistentroom",[e.persistentRoom?"1":"0"]),void 0!==e.allowSubscription&&n.set("allow_subscription",[!0===e.allowSubscription?"1":"0"]),n}isRoomMessageStanza(t){var e;return"message"===t.name&&"groupchat"===t.attrs.type&&!!(null===(e=t.getChildText("body"))||void 0===e?void 0:e.trim())}handleRoomMessageStanza(t,e){const n=null!=e?e:t.getChild("delay"),s=(null==n?void 0:n.attrs.stamp)?new Date(n.attrs.stamp):new Date,r=(0,Km.kO)(t.attrs.from),i=this.getRoomByJid(r.bare());if(!i)return this.logService.warn(`received stanza for unknown room: ${r.bare().toString()}`),!1;const o={body:t.getChildText("body").trim(),datetime:s,id:t.attrs.id,from:r,direction:r.equals(i.occupantJid)?fS.out:fS.in,delayed:!!n,fromArchive:null!=e},a=new XS;for(const c of this.xmppChatAdapter.plugins)c.afterReceiveMessage(o,t,a);return a.discard||i.addMessage(o),o.delayed||this.message$.next(i),!0}getRoomByJid(t){return this.rooms$.getValue().find(e=>e.roomJid.equals(t))}ban(){throw new Error("moderation not implemented")}invite(){throw new Error("moderation not implemented")}join(){throw new Error("moderation not implemented")}kick(){throw new Error("moderation not implemented")}nick(){throw new Error("moderation not implemented")}part(){this.leave()}leave(){throw new Error("moderation not implemented")}topic(){throw new Error("moderation not implemented")}}class lC extends gS{constructor(t,e){super(),this.chatService=t,this.logService=e}handleStanza(t){return!this.isCapabilitiesStanza(t)&&(this.isRosterPushStanza(t)?this.handleRosterPushStanza(t):!!this.isPresenceStanza(t)&&this.handlePresenceStanza(t))}isRosterPushStanza(t){return"iq"===t.name&&"set"===t.attrs.type&&t.getChild("query","jabber:iq:roster")}isPresenceStanza(t){return"presence"===t.name&&!t.getChild("x","http://jabber.org/protocol/muc#user")}isCapabilitiesStanza(t){return!!t.getChild("c","http://jabber.org/protocol/caps")}handleRosterPushStanza(t){const e=t.getChild("query").getChild("item"),n=this.chatService.getOrCreateContactById(e.attrs.jid,e.attrs.name||e.attrs.jid);n.pendingOut$.next("subscribe"===e.attrs.ask);const s=e.attrs.subscription||"none";this.chatService.chatConnectionService.sendIqAckResult(t.attrs.id);let r=!1;if("remove"===s?(n.pendingOut$.next(!1),n.subscription$.next($S.none),r=!0):"none"===s?(n.subscription$.next($S.none),r=!0):"to"===s?(n.subscription$.next($S.to),r=!0):"from"===s?(n.subscription$.next($S.from),r=!0):"both"===s&&(n.subscription$.next($S.both),r=!0),r){const t=this.chatService.contacts$.getValue();this.chatService.contacts$.next(t)}return r}handlePresenceStanza(t){const e=this.chatService.getOrCreateContactById(t.attrs.from);if(this.chatService.chatConnectionService.userJid.bare().equals((0,Km.kO)(t.attrs.to).bare())){if(!t.attrs.type){const n=t.getChildText("show"),s={chat:jS.present,null:jS.present,away:jS.away,dnd:jS.away,xa:jS.away}[n];return s?e.updateResourcePresence(t.attrs.from,s):this.logService.error("illegal presence:",t.attrs.from,n),!0}if("unavailable"===t.attrs.type)return e.updateResourcePresence(t.attrs.from,jS.unavailable),!0;if("subscribe"===t.attrs.type){if(e.isSubscribed()||e.pendingOut$.getValue())return e.pendingIn$.next(!1),this.sendAcceptPresenceSubscriptionRequest(t.attrs.from),e.subscription$.next(this.transitionSubscriptionRequestReceivedAccepted(e.subscription$.getValue())),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0;if(e)return e.pendingIn$.next(!0),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0}else if("subscribed"===t.attrs.type)return e.pendingOut$.next(!1),e.subscription$.next(this.transitionSubscriptionRequestSentAccepted(e.subscription$.getValue())),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0}return!1}transitionSubscriptionRequestReceivedAccepted(t){switch(t){case $S.none:return $S.from;case $S.to:return $S.both;default:return t}}transitionSubscriptionRequestSentAccepted(t){switch(t){case $S.none:return $S.to;case $S.from:return $S.both;default:return t}}sendAcceptPresenceSubscriptionRequest(t){this.chatService.getOrCreateContactById(t).pendingIn$.next(!1),this.chatService.chatConnectionService.send((0,Km.Ls)("presence",{to:t,type:"subscribed",id:this.chatService.chatConnectionService.getNextIqId()}))}onBeforeOnline(){return this.refreshRosterContacts()}getRosterContacts(){return new Promise(t=>this.chatService.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"get"},(0,Km.Ls)("query",{xmlns:"jabber:iq:roster"}))).then(e=>t(this.convertToContacts(e)),e=>{this.logService.error("error converting roster contact push",e.toString()),t([])}))}convertToContacts(t){return t.getChild("query").getChildElements().map(t=>{const e=this.chatService.getOrCreateContactById(t.attrs.jid,t.attrs.name||t.attrs.jid);return e.subscription$.next(this.parseSubscription(t.attrs.subscription)),e.pendingOut$.next("subscribe"===t.attrs.ask),e})}parseSubscription(t){switch(t){case"to":return $S.to;case"from":return $S.from;case"both":return $S.both;case"none":default:return $S.none}}addRosterContact(t){this.sendAcceptPresenceSubscriptionRequest(t),this.sendAddToRoster(t),this.sendSubscribeToPresence(t)}sendAddToRoster(t){return this.chatService.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("query",{xmlns:"jabber:iq:roster"},(0,Km.Ls)("item",{jid:t}))))}sendSubscribeToPresence(t){this.chatService.chatConnectionService.send((0,Km.Ls)("presence",{id:this.chatService.chatConnectionService.getNextIqId(),to:t,type:"subscribe"}))}removeRosterContact(t){const e=this.chatService.getContactById(t);e&&(e.subscription$.next($S.none),e.pendingOut$.next(!1),e.pendingIn$.next(!1),this.sendRemoveFromRoster(t),this.sendWithdrawPresenceSubscription(t))}sendRemoveFromRoster(t){this.chatService.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("query",{xmlns:"jabber:iq:roster"},(0,Km.Ls)("item",{jid:t,subscription:"remove"}))))}sendWithdrawPresenceSubscription(t){this.chatService.chatConnectionService.send((0,Km.Ls)("presence",{id:this.chatService.chatConnectionService.getNextIqId(),to:t,type:"unsubscribed"}))}refreshRosterContacts(){return this.getRosterContacts()}}let uC=(()=>{class t{client(t){return(0,Km.Lp)(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),hC=(()=>{class t{constructor(t,e,n){this.logService=t,this.ngZone=e,this.xmppClientFactoryService=n,this.state$=new Kg("disconnected"),this.stanzaUnknown$=new x,this.iqId=(new Date).getTime(),this.iqStanzaResponseHandlers=new Map}onOnline(t){this.logService.info("online =","online as",t.toString()),this.userJid=t,this.state$.next("online")}sendPresence(){return Yg(this,void 0,void 0,function*(){yield this.send((0,Km.Ls)("presence"))})}send(t){return Yg(this,void 0,void 0,function*(){this.logService.debug(">>>",t),yield this.client.send(t)})}sendIq(t){return new Promise((e,n)=>{t.attrs=Object.assign({id:this.getNextIqId(),from:this.userJid.toString()},t.attrs);const{id:s}=t.attrs;if(!t.attrs.type){const e="iq stanza without type: "+t.toString();throw this.logService.error(e),new Error(e)}this.iqStanzaResponseHandlers.set(s,t=>{"result"===t.attrs.type?e(t):n(new vS(t))}),this.send(t).catch(t=>{this.logService.error("error sending iq",t),this.iqStanzaResponseHandlers.delete(s),n(t)})})}sendIqAckResult(t){return Yg(this,void 0,void 0,function*(){yield this.send((0,Km.Ls)("iq",{from:this.userJid.toString(),id:t,type:"result"}))})}onStanzaReceived(t){let e=!1;if(this.isIqStanzaResponse(t)){const n=this.iqStanzaResponseHandlers.get(t.attrs.id);n&&(this.logService.debug("<<<",t.toString(),"handled by callback",n),this.iqStanzaResponseHandlers.delete(t.attrs.id),n(t),e=!0)}e||this.stanzaUnknown$.next(t)}isIqStanzaResponse(t){const e=t.attrs.type;return"iq"===t.name&&("result"===e||"error"===e)}logIn(t){return Yg(this,void 0,void 0,function*(){yield this.ngZone.runOutsideAngular(()=>Yg(this,void 0,void 0,function*(){t.username.indexOf("@")>=0&&this.logService.warn("username should not contain domain, only local part, this can lead to errors!"),this.client=this.xmppClientFactoryService.client(t),this.client.on("error",t=>{this.ngZone.run(()=>{this.logService.error("chat service error =>",t.toString(),t)})}),this.client.on("status",(t,e)=>{this.ngZone.run(()=>{this.logService.info("status update =",t,e?JSON.stringify(e):""),"offline"===t&&this.state$.next("disconnected")})}),this.client.on("online",t=>this.ngZone.run(()=>this.onOnline(t))),this.client.on("stanza",t=>{this.ngZone.run(()=>{this.onStanzaReceived(t)})}),this.client.on("disconnect",()=>{this.ngZone.run(()=>{this.state$.next("reconnecting")})}),yield this.client.start()}))})}logOut(){return Yg(this,void 0,void 0,function*(){if(this.logService.debug("logging out"),this.client){this.client.reconnect.stop();try{yield this.send((0,Km.Ls)("presence",{type:"unavailable"}))}catch(t){this.logService.error("error sending presence unavailable")}finally{this.client.stop()}}})}getNextIqId(){return String(this.iqId++)}reconnectSilently(){this.logService.warn("hard reconnect..."),this.state$.next("disconnected")}}return t.\u0275fac=function(e){return new(e||t)(hs(US),hs(Sl),hs(uC))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),dC=(()=>{class t{constructor(t,e,n){this.chatConnectionService=t,this.logService=e,this.contactFactory=n,this.message$=new x,this.messageSent$=new x,this.contacts$=new Kg([]),this.contactCreated$=new x,this.blockedContactIds$=new Kg(new Set),this.blockedContacts$=sm([this.contacts$,this.blockedContactIds$]).pipe(T(([t,e])=>t.filter(t=>e.has(t.jidBare.toString())))),this.notBlockedContacts$=sm([this.contacts$,this.blockedContactIds$]).pipe(T(([t,e])=>t.filter(t=>!e.has(t.jidBare.toString())))),this.contactsSubscribed$=this.notBlockedContacts$.pipe(T(t=>t.filter(t=>t.isSubscribed()))),this.contactRequestsReceived$=this.notBlockedContacts$.pipe(T(t=>t.filter(t=>t.pendingIn$.getValue()))),this.contactRequestsSent$=this.notBlockedContacts$.pipe(T(t=>t.filter(t=>t.pendingOut$.getValue()))),this.contactsUnaffiliated$=this.notBlockedContacts$.pipe(T(t=>t.filter(t=>t.isUnaffiliated()&&t.messages.length>0))),this.state$=new Kg("disconnected"),this.plugins=[],this.enableDebugging=!1,this.userAvatar$=new Kg(MS),this.translations=KS(),this.chatActions=[{id:"sendMessage",cssClass:"chat-window-send",html:"&raquo;",onClick:t=>{t.chatWindow.sendMessage()}}],this.state$.subscribe(t=>this.logService.info("state changed to:",t)),t.state$.pipe(am(t=>t!==this.state$.getValue())).subscribe(t=>{this.handleInternalStateChange(t)}),this.chatConnectionService.stanzaUnknown$.subscribe(t=>this.onUnknownStanza(t)),B(this.messageSent$,this.message$).subscribe(()=>{this.contacts$.next(this.contacts$.getValue())})}handleInternalStateChange(t){"online"===t?(this.state$.next("connecting"),Promise.all(this.plugins.map(t=>t.onBeforeOnline())).then(()=>this.announceAvailability(),t=>{this.logService.error("error while connecting",t),this.announceAvailability()})):("online"===this.state$.getValue()&&this.onOffline(),this.state$.next("disconnected"))}onOffline(){this.contacts$.next([]),this.plugins.forEach(t=>{try{t.onOffline()}catch(e){this.logService.error("error while handling offline in ",t)}})}announceAvailability(){this.logService.info("announcing availability"),this.chatConnectionService.sendPresence(),this.state$.next("online")}addPlugins(t){t.forEach(t=>{this.plugins.push(t)})}reloadContacts(){this.getPlugin(lC).refreshRosterContacts()}getContactById(t){const e=(0,Km.kO)(t).bare();return this.contacts$.getValue().find(t=>t.jidBare.equals(e))}getOrCreateContactById(t,e){let n=this.getContactById(t);return n||(n=this.contactFactory.createContact((0,Km.kO)(t).bare().toString(),e),this.contacts$.next([n,...this.contacts$.getValue()]),this.contactCreated$.next(n)),n}addContact(t){this.getPlugin(lC).addRosterContact(t)}removeContact(t){this.getPlugin(lC).removeRosterContact(t)}logIn(t){return Yg(this,void 0,void 0,function*(){this.lastLogInRequest=t,"disconnected"===this.state$.getValue()&&(yield this.chatConnectionService.logIn(t))})}logOut(){return this.chatConnectionService.logOut()}sendMessage(t,e){var n;return Yg(this,void 0,void 0,function*(){const s=e.trim();if(0!==s.length)switch(t.recipientType){case"room":yield this.getPlugin(cC).sendMessage(t,s);break;case"contact":this.getPlugin(tC).sendMessage(t,s),this.messageSent$.next(t);break;default:throw new Error("invalid recipient type: "+(null===(n=t)||void 0===n?void 0:n.recipientType))}})}loadCompleteHistory(){return this.getPlugin(kS).loadAllMessages()}getPlugin(t){for(const e of this.plugins)if(e.constructor===t)return e;throw new Error("plugin not found: "+t)}onUnknownStanza(t){let e=!1;for(const s of this.plugins)try{s.handleStanza(t)&&(this.logService.debug(s.constructor.name,"handled",t.toString()),e=!0)}catch(n){this.logService.error("error handling stanza in ",s.constructor.name,n)}e||this.logService.warn("unknown stanza <=",t.toString())}reconnectSilently(){this.chatConnectionService.reconnectSilently()}reconnect(){return this.logIn(this.lastLogInRequest)}}return t.\u0275fac=function(e){return new(e||t)(hs(hC),hs(US),hs(zS))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const pC=new Bn("ngxChatContactClickHandler");let fC=(()=>{class t{constructor(t,e,n){this.chatService=t,this.httpClient=e,this.contactClickHandler=n,this.showMessageReadState=!0,this.showImagePlaceholder=!0,this.Direction=fS,this.messageStatePlugin=this.chatService.getPlugin(YS)}ngOnInit(){this.tryFindImageLink()}tryFindImageLink(){if(this.chatService instanceof dC){const t=GS(this.message.body);if(0===t.length)return void(this.showImagePlaceholder=!1);this.tryFindEmbedImageUrls(t)}}tryFindEmbedImageUrls(t){return Yg(this,void 0,void 0,function*(){for(const n of t)try{const t=yield this.httpClient.head(n,{observe:"response"}).toPromise(),e=t.headers.get("Content-Type"),s=e&&e.startsWith("image"),r=t.headers.get("Content-Length");if(s&&parseInt(r,10)<256e3){this.imageLink=n;break}}catch(e){}this.imageLink||(this.showImagePlaceholder=!1)})}getMessageState(){if(this.showMessageReadState){if(this.message.state)return this.message.state;if(this.messageStatePlugin&&this.contact){const t=this.message.datetime,e=this.messageStatePlugin.getContactMessageState(this.contact.jidBare.toString());return this.getStateForDate(t,e)}}}getStateForDate(t,e){return t<=e.lastRecipientSeen?pS.RECIPIENT_SEEN:t<=e.lastRecipientReceived?pS.RECIPIENT_RECEIVED:t<=e.lastSent?pS.SENT:void 0}onContactClick(){this.contactClickHandler&&this.contactClickHandler.onClick(this.contact)}getAvatar(){if(this.showAvatars)return this.message.direction===fS.in?this.avatar:this.chatService.userAvatar$.getValue()}}return t.\u0275fac=function(e){return new(e||t)(ko(hS),ko(Ry),ko(pC,8))},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-message"]],inputs:{showMessageReadState:"showMessageReadState",showAvatars:"showAvatars",avatar:"avatar",message:"message",nick:"nick",contact:"contact"},decls:3,vars:12,consts:[[3,"imageLink","showImagePlaceholder","avatar","avatarInteractive","direction","messageState","formattedDate","nick","avatarClickHandler"],[3,"ngxChatLinks"]],template:function(t,e){1&t&&(Oo(0,"ngx-chat-message-simple",0),Fo("avatarClickHandler",function(){return e.onContactClick()}),Pc(1,"date"),Ao(2,"span",1),Mo()),2&t&&(To("imageLink",e.imageLink)("showImagePlaceholder",e.showImagePlaceholder)("avatar",e.getAvatar())("avatarInteractive",e.message.direction===e.Direction.in)("direction",e.message.direction)("messageState",e.getMessageState())("formattedDate",Nc(1,9,e.message.datetime,e.chatService.translations.timeFormat))("nick",e.nick),Zr(2),To("ngxChatLinks",e.message.body))},directives:function(){return[yC,EC]},pipes:function(){return[yh]},styles:[".chat-message--out[_nghost-%COMP%]{align-self:flex-end}.chat-message--in[_nghost-%COMP%]{align-self:flex-start}"]}),t})();var gC=(()=>(function(t){t[t.PENDING_REQUEST=0]="PENDING_REQUEST",t[t.SHOW_BLOCK_ACTIONS=1]="SHOW_BLOCK_ACTIONS",t[t.NO_PENDING_REQUEST=2]="NO_PENDING_REQUEST"}(gC||(gC={})),gC))();let mC=(()=>{class t{constructor(t,e,n,s,r,i){this.chatListService=t,this.chatService=e,this.chatMessageListRegistry=n,this.reportUserService=s,this.changeDetectorRef=r,this.contactFactory=i,this.Direction=fS,this.SubscriptionAction=gC,this.subscriptionAction=gC.NO_PENDING_REQUEST,this.onTop$=new x,this.ngDestroy=new x,this.isAtBottom=!0,this.bottomLeftAt=0,this.oldestVisibleMessageBeforeLoading=null,this.blockPlugin=this.chatService.getPlugin(mS)}ngOnInit(){return Yg(this,void 0,void 0,function*(){this.onTop$.pipe(am(t=>t.isIntersecting),fm(1e3)).subscribe(()=>this.loadOlderMessagesBeforeViewport()),"contact"===this.recipient.recipientType&&this.recipient.pendingIn$.pipe(am(t=>!0===t),Rm(this.ngDestroy)).subscribe(()=>{this.subscriptionAction=gC.PENDING_REQUEST,this.scheduleScrollToLastMessage()}),this.chatMessageListRegistry.incrementOpenWindowCount(this.recipient)})}ngAfterViewInit(){return Yg(this,void 0,void 0,function*(){this.chatMessageViewChildrenList.changes.subscribe(()=>{this.oldestVisibleMessageBeforeLoading&&this.scrollToMessage(this.oldestVisibleMessageBeforeLoading),this.oldestVisibleMessageBeforeLoading=null}),this.recipient.messages$.pipe(fm(10),am(()=>this.isNearBottom()),Rm(this.ngDestroy)).subscribe(t=>this.scheduleScrollToLastMessage()),this.recipient.messages.length<10&&(yield this.loadMessages()),this.scheduleScrollToLastMessage()})}ngOnChanges(t){const e=t.contact;e&&e.previousValue&&e.currentValue&&(this.chatMessageListRegistry.decrementOpenWindowCount(e.previousValue),this.chatMessageListRegistry.incrementOpenWindowCount(e.currentValue)),e&&e.currentValue&&this.scheduleScrollToLastMessage()}ngOnDestroy(){this.ngDestroy.next(),this.chatMessageListRegistry.decrementOpenWindowCount(this.recipient)}acceptSubscriptionRequest(t){t.preventDefault(),this.subscriptionAction===gC.PENDING_REQUEST&&(this.chatService.addContact(this.recipient.jidBare.toString()),this.subscriptionAction=gC.NO_PENDING_REQUEST,this.scheduleScrollToLastMessage())}denySubscriptionRequest(t){t.preventDefault(),this.subscriptionAction===gC.PENDING_REQUEST&&(this.chatService.removeContact(this.recipient.jidBare.toString()),this.subscriptionAction=gC.SHOW_BLOCK_ACTIONS,this.scheduleScrollToLastMessage())}scheduleScrollToLastMessage(){setTimeout(()=>this.scrollToLastMessage(),0)}scrollToLastMessage(){this.chatMessageAreaElement&&(this.chatMessageAreaElement.nativeElement.scrollTop=this.chatMessageAreaElement.nativeElement.scrollHeight,this.isAtBottom=!0)}scrollToMessage(t){this.chatMessageAreaElement&&document.getElementById("message-"+t.id).scrollIntoView(!1)}blockContact(t){t.preventDefault(),this.blockPlugin.blockJid(this.recipient.jidBare.toString()),this.chatListService.closeChat(this.recipient),this.subscriptionAction=gC.NO_PENDING_REQUEST}blockContactAndReport(t){"contact"===this.recipient.recipientType&&(t.preventDefault(),this.reportUserService.reportUser(this.recipient),this.blockContact(t))}dismissBlockOptions(t){t.preventDefault(),this.subscriptionAction=gC.NO_PENDING_REQUEST}subscriptionActionShown(){return"contact"===this.recipient.recipientType&&(this.subscriptionAction===gC.PENDING_REQUEST||!0===this.blockPlugin.supportsBlock$.getValue()&&this.subscriptionAction===gC.SHOW_BLOCK_ACTIONS)}loadOlderMessagesBeforeViewport(){return Yg(this,void 0,void 0,function*(){if(!this.isLoadingHistory()&&!this.isNearBottom())try{this.oldestVisibleMessageBeforeLoading=this.recipient.oldestMessage,yield this.loadMessages()}catch(t){this.oldestVisibleMessageBeforeLoading=null}})}loadMessages(){return Yg(this,void 0,void 0,function*(){try{this.changeDetectorRef.detach(),yield this.chatService.getPlugin(kS).loadMostRecentUnloadedMessages(this.recipient)}finally{this.changeDetectorRef.reattach()}})}onBottom(t){this.isAtBottom=t.isIntersecting,t.isIntersecting?this.isAtBottom=!0:(this.isAtBottom=!1,this.bottomLeftAt=Date.now())}isNearBottom(){return this.isAtBottom||Date.now()-this.bottomLeftAt<1e3}isLoadingHistory(){return!!this.oldestVisibleMessageBeforeLoading}getOrCreateContactWithFullJid(t){if("contact"===this.recipient.recipientType)return this.recipient;const e=t;let n=this.chatService.contacts$.getValue().find(t=>t.jidFull.equals(e.from));return n||(n=this.contactFactory.createContact(e.from.toString(),e.from.resource),this.chatService.contacts$.next([n].concat(this.chatService.contacts$.getValue()))),n}}return t.\u0275fac=function(e){return new(e||t)(ko(IS),ko(hS),ko(OS),ko(HS,8),ko(ec),ko(zS))},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-message-list"]],viewQuery:function(t,e){if(1&t&&(Yc(hw,5),Yc(fC,5)),2&t){let t;Jc(t=Kc())&&(e.chatMessageAreaElement=t.first),Jc(t=Kc())&&(e.chatMessageViewChildrenList=t)}},inputs:{recipient:"recipient",showAvatars:"showAvatars"},features:[ce],decls:7,vars:3,consts:[[1,"chat-messages"],["messageArea",""],[1,"chat-messages-start",3,"ngxChatIntersectionObserver"],[4,"ngFor","ngForOf"],["class","chat-messages-empty",4,"ngIf"],[3,"direction","avatar","footerHidden",4,"ngIf"],[1,"chat-messages-end",3,"ngxChatIntersectionObserver"],[1,"chat-messages-date-group"],[3,"id","chat-message--in","chat-message--out","contact","nick","avatar","message","showAvatars",4,"ngFor","ngForOf"],[3,"id","contact","nick","avatar","message","showAvatars"],[1,"chat-messages-empty"],[3,"direction","avatar","footerHidden"],[1,"chat-presence-subscription-actions"],["class","action-disabled",4,"ngIf"],["href","#",3,"click",4,"ngIf"],["class","deny-actions",4,"ngIf"],[1,"action-disabled"],["href","#",3,"click"],[1,"deny-actions"],[4,"ngIf"]],template:function(t,e){1&t&&(Oo(0,"div",0,1),Oo(2,"div",2),Fo("ngxChatIntersectionObserver",function(t){return e.onTop$.next(t)}),Mo(),xo(3,pw,5,7,"ng-container",3),xo(4,fw,2,1,"div",4),xo(5,ww,12,11,"ngx-chat-message-simple",5),Oo(6,"div",6),Fo("ngxChatIntersectionObserver",function(t){return e.onBottom(t)}),Mo(),Mo()),2&t&&(Zr(3),To("ngForOf",e.recipient.dateMessagesGroups),Zr(1),To("ngIf",0===e.recipient.messages.length),Zr(1),To("ngIf",e.subscriptionActionShown()))},directives:function(){return[jC,nh,rh,fC,yC]},pipes:function(){return[yh,mh]},styles:[".chat-message--out[_nghost-%COMP%]{align-self:flex-end}.chat-message--in[_nghost-%COMP%]{align-self:flex-start}.chat-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:10em;max-height:20em;overflow-y:scroll}.chat-messages-date-group[_ngcontent-%COMP%]{font-size:.7em;font-style:italic;margin:.5em 0;text-align:center}ngx-chat-message[_ngcontent-%COMP%], ngx-chat-message-simple[_ngcontent-%COMP%]{max-width:76%;align-self:flex-start;-webkit-animation-duration:1.5s;animation-duration:1.5s;-webkit-animation-timing-function:cubic-bezier(.16,1,.3,1);animation-timing-function:cubic-bezier(.16,1,.3,1)}ngx-chat-message.chat-message--in[_ngcontent-%COMP%], ngx-chat-message-simple.chat-message--in[_ngcontent-%COMP%]{-webkit-animation-name:ngx-chat-message-in;animation-name:ngx-chat-message-in}ngx-chat-message.chat-message--out[_ngcontent-%COMP%], ngx-chat-message-simple.chat-message--out[_ngcontent-%COMP%]{-webkit-animation-name:ngx-chat-message-out;animation-name:ngx-chat-message-out}.chat-messages-empty[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;color:#999;margin-top:1em;margin-bottom:1em}.chat-presence-subscription-actions[_ngcontent-%COMP%], .deny-actions[_ngcontent-%COMP%]{list-style:none;padding:0;margin:1em 0 0}.chat-presence-subscription-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .deny-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .chat-presence-subscription-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited, .deny-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#198cff}.deny-actions[_ngcontent-%COMP%]{margin-top:1em}.action-disabled[_ngcontent-%COMP%]{color:#999}.chat-messages-start[_ngcontent-%COMP%]{min-height:5px;height:5px;margin-top:5px}.chat-messages-end[_ngcontent-%COMP%]{min-height:5px;height:5px;margin-bottom:5px}"]}),t})(),yC=(()=>{class t{constructor(){this.avatarClickHandler=new Fc,this.footerHidden=!1,this.MessageState=pS}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-message-simple"]],inputs:{footerHidden:"footerHidden",avatar:"avatar",avatarInteractive:"avatarInteractive",direction:"direction",formattedDate:"formattedDate",imageLink:"imageLink",showImagePlaceholder:"showImagePlaceholder",messageState:"messageState",nick:"nick"},outputs:{avatarClickHandler:"avatarClickHandler"},ngContentSelectors:lw,decls:7,vars:7,consts:[[1,"chat-message"],[1,"chat-message-text-wrapper"],["class","chat-message-avatar",4,"ngIf"],[1,"chat-message-text"],["class","chat-message-image-wrapper",3,"chat-message-image-wrapper--placeholder",4,"ngIf"],["class","chat-message-footer",4,"ngIf"],[1,"chat-message-avatar"],[3,"imageUrl","click"],[1,"chat-message-image-wrapper"],[1,"chat-message-image",3,"src","load"],[1,"chat-message-footer"],[1,"chat-message-name",3,"title"],[3,"ngSwitch",4,"ngIf"],[1,"chat-message-datetime"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"state--seen"]],template:function(t,e){1&t&&(zo(),Oo(0,"div",0),Oo(1,"div",1),xo(2,Sw,2,3,"div",2),Oo(3,"div",3),Ho(4),Mo(),Mo(),xo(5,Cw,2,3,"div",4),xo(6,Iw,6,4,"div",5),Mo()),2&t&&(Qo("chat-message--in","in"===e.direction)("chat-message--out","out"===e.direction),Zr(2),To("ngIf",e.avatar),Zr(3),To("ngIf",e.imageLink||e.showImagePlaceholder),Zr(1),To("ngIf",!e.footerHidden))},directives:function(){return[rh,kC,ch,lh]},styles:[".chat-message-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:2em;height:2em;padding:.5em}.chat-message--in[_ngcontent-%COMP%]   .chat-message-avatar[_ngcontent-%COMP%]{padding-right:0}.chat-message--out[_ngcontent-%COMP%]   .chat-message-avatar[_ngcontent-%COMP%]{padding-left:0}.has-click-handler[_ngcontent-%COMP%]:hover{cursor:pointer}.chat-message-text[_ngcontent-%COMP%]{min-width:0;padding:.5em;word-break:break-word}.chat-message[_ngcontent-%COMP%]{border-radius:.5em;margin:calc(.5em / 2)}.chat-message--out[_ngcontent-%COMP%]{background-color:#e6ffd1}.chat-message--in[_ngcontent-%COMP%]{background-color:#dbedff}.chat-message-text-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}.chat-message--out[_ngcontent-%COMP%]   .chat-message-text-wrapper[_ngcontent-%COMP%]{flex-direction:row-reverse}.chat-message-image-wrapper[_ngcontent-%COMP%]{max-width:100%;max-height:150px;overflow:hidden;height:auto;margin:0 .5em;display:flex;justify-content:center}.chat-message-image-wrapper.chat-message-image-wrapper--placeholder[_ngcontent-%COMP%]{height:150px}.chat-message-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain;min-width:0}.chat-message-footer[_ngcontent-%COMP%]{font-size:.75em;text-align:right;color:#999;padding:0 .5em .5em;clear:both}.chat-message-datetime[_ngcontent-%COMP%]{display:inline-block;vertical-align:bottom}.chat-message-name[_ngcontent-%COMP%]{display:inline-block;max-width:9em;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;vertical-align:bottom;margin-right:.5em}.state--seen[_ngcontent-%COMP%]{color:#00c5d2}"],changeDetection:0}),t})();class vC extends gS{constructor(t,e,n,s){super(),this.httpClient=t,this.serviceDiscoveryPlugin=e,this.xmppChatAdapter=n,this.logService=s}onBeforeOnline(){return this.uploadService=this.serviceDiscoveryPlugin.findService("store","file"),this.uploadService.then(()=>{this.fileUploadSupported=!0},()=>{this.fileUploadSupported=!1,this.logService.info("http file upload not supported")}),Promise.resolve()}onOffline(){this.uploadService=null,this.fileUploadSupported=!1}upload(t){return Yg(this,void 0,void 0,function*(){yield this.uploadService;const{name:e,size:n,type:s}=t,r=yield this.requestSlot(e,n.toString(),s);return yield this.uploadToSlot(r,t)})}requestSlot(t,e,n){return Yg(this,void 0,void 0,function*(){const s=(yield this.uploadService).jid;return(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{to:s,type:"get"},(0,Km.Ls)("request",{xmlns:"urn:xmpp:http:upload:0",filename:t,size:e,"content-type":n})))).getChild("slot").getChild("put").attrs.url})}uploadToSlot(t,e){return Yg(this,void 0,void 0,function*(){return yield this.httpClient.put(t,e,{responseType:"blob"}).toPromise(),t})}}let bC=(()=>{class t{constructor(t,e,n){this.chatService=t,this.chatListService=e,this.contactClickHandler=n,this.ngDestroy=new x,this.httpFileUploadPlugin=this.chatService.getPlugin(vC)}ngOnInit(){this.chatWindowState.recipient.messages$.pipe(am(t=>t.direction===fS.in),Rm(this.ngDestroy)).subscribe(()=>{this.chatWindowState.isCollapsed=!1})}ngOnDestroy(){this.ngDestroy.next(),this.ngDestroy.complete()}onClickHeader(){this.chatWindowState.isCollapsed=!this.chatWindowState.isCollapsed}onClickClose(){this.chatListService.closeChat(this.chatWindowState.recipient)}sendMessage(){this.messageInput.onSendMessage()}afterSendMessage(){this.contactMessageList.scheduleScrollToLastMessage()}uploadFile(t){return Yg(this,void 0,void 0,function*(){const e=yield this.httpFileUploadPlugin.upload(t);this.chatService.sendMessage(this.chatWindowState.recipient,e)})}onFocus(){this.messageInput.focus()}onActionClick(t){t.onClick({contact:this.chatWindowState.recipient.jidBare.toString(),chatWindow:this})}onContactClick(t){this.contactClickHandler&&!this.chatWindowState.isCollapsed&&(t.stopPropagation(),this.contactClickHandler.onClick(this.chatWindowState.recipient))}}return t.\u0275fac=function(e){return new(e||t)(ko(hS),ko(IS),ko(pC,8))},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-window"]],viewQuery:function(t,e){if(1&t&&(Yc(dS,5),Yc(mC,5)),2&t){let t;Jc(t=Kc())&&(e.messageInput=t.first),Jc(t=Kc())&&(e.contactMessageList=t.first)}},inputs:{chatWindowState:"chatWindowState"},decls:10,vars:8,consts:[[3,"headerClick","closeClick"],[1,"window-header-content"],[1,"chat-contact-avatar-wrapper",3,"click"],[3,"imageUrl"],[1,"header-middle"],[1,"chat-contact-name-wrapper",3,"title"],[3,"ngClass","click"],["class","chat-contact-status-wrapper",4,"ngIf"],["class","window-content",3,"enabled","dropMessage","fileUpload",4,"ngIf"],[1,"chat-contact-status-wrapper"],[1,"chat-contact-status"],[1,"window-content",3,"enabled","dropMessage","fileUpload"],[3,"click"],[3,"recipient","showAvatars"],[1,"chat-input-container"],[3,"recipient","messageSent"],["class","chat-action",3,"ngClass","innerHTML","click",4,"ngFor","ngForOf"],[1,"chat-action",3,"ngClass","innerHTML","click"]],template:function(t,e){1&t&&(Oo(0,"ngx-chat-window-frame",0),Fo("headerClick",function(){return e.onClickHeader()})("closeClick",function(){return e.onClickClose()}),Po(1,1),Oo(2,"div",2),Fo("click",function(t){return e.onContactClick(t)}),Ao(3,"ngx-chat-avatar",3),Mo(),Oo(4,"div",4),Oo(5,"div",5),Oo(6,"span",6),Fo("click",function(t){return e.onContactClick(t)}),ta(7),Mo(),Mo(),xo(8,Ow,4,3,"div",7),Mo(),Ro(),xo(9,Aw,6,6,"ngx-chat-filedrop",8),Mo()),2&t&&(Zr(3),To("imageUrl",e.chatWindowState.recipient.avatar),Zr(2),To("title",e.chatWindowState.recipient.name),Zr(1),To("ngClass",Ic(6,Pw,!e.chatWindowState.isCollapsed&&!!e.contactClickHandler)),Zr(1),na(" ",e.chatWindowState.recipient.name," "),Zr(1),To("ngIf",!e.chatWindowState.isCollapsed&&"contact"===e.chatWindowState.recipient.recipientType),Zr(1),To("ngIf",!e.chatWindowState.isCollapsed))},directives:function(){return[IC,kC,th,rh,uS,mC,dS,nh]},pipes:function(){return[mh]},styles:['@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.chat-contact-avatar-wrapper[_ngcontent-%COMP%]{min-width:2em;width:2em;min-height:2em;height:2em}.header-middle[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:1;padding:0 .5em;white-space:nowrap;overflow:hidden;font-size:.8em;line-height:1.2;height:100%;display:flex;flex-direction:column;justify-content:space-around}.chat-contact-name-wrapper[_ngcontent-%COMP%], .chat-contact-status-wrapper[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:block}.has-click-handler[_ngcontent-%COMP%]:hover{text-decoration:underline}.chat-contact-status[_ngcontent-%COMP%]{color:#999}.window-content[_ngcontent-%COMP%]{text-align:left;padding:0;min-height:5em;display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto}.chat-input-container[_ngcontent-%COMP%]{display:flex;padding:.5em;border-top:1px solid #e1e1e1;background:#fff;cursor:text}.chat-action[_ngcontent-%COMP%]{cursor:pointer;align-self:center;text-align:center}.chat-window-send[_ngcontent-%COMP%]{background-color:#fff;border-color:#fff;color:#000;width:1.5em}.chat-window-send[_ngcontent-%COMP%]:active{border:none}ngx-chat-message-input[_ngcontent-%COMP%]{flex-grow:1}']}),t})(),_C=(()=>{class t{constructor(t){this.chatService=t,this.showChatComponent=!1}set translations(t){const e=KS();t&&(this.chatService.translations=Object.assign(Object.assign(Object.assign({},e),t),{presence:Object.assign(Object.assign({},e.presence),t.presence)}))}ngOnInit(){this.chatService.state$.subscribe(t=>this.onChatStateChange(t)),this.onRosterStateChanged(this.rosterState),this.userAvatar$&&this.userAvatar$.subscribe(t=>this.chatService.userAvatar$.next(t))}ngOnChanges(t){t.rosterState&&this.onRosterStateChanged(t.rosterState.currentValue)}onChatStateChange(t){this.showChatComponent="online"===t,this.updateBodyClass()}onRosterStateChanged(t){this.rosterState=t,this.updateBodyClass()}updateBodyClass(){const t="has-roster";this.showChatComponent&&"hidden"!==this.rosterState?document.body.classList.add(t):document.body.classList.remove(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(hS))},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat"]],inputs:{translations:"translations",rosterState:"rosterState",contacts:"contacts",contactRequestsReceived$:"contactRequestsReceived$",contactRequestsSent$:"contactRequestsSent$",contactsUnaffiliated$:"contactsUnaffiliated$",userAvatar$:"userAvatar$"},features:[ce],decls:2,vars:2,consts:[[3,"rosterState",4,"ngIf"],[3,"rosterState","contacts","contactRequestsReceived$","contactRequestsSent$","contactsUnaffiliated$","rosterStateChanged",4,"ngIf"],[3,"rosterState"],[3,"rosterState","contacts","contactRequestsReceived$","contactRequestsSent$","contactsUnaffiliated$","rosterStateChanged"]],template:function(t,e){1&t&&(xo(0,Rw,1,1,"ngx-chat-window-list",0),xo(1,Nw,1,5,"ngx-chat-roster-list",1)),2&t&&(To("ngIf",e.showChatComponent),Zr(1),To("ngIf",e.showChatComponent))},directives:function(){return[rh,OC,MC]},styles:[""]}),t})();function wC(t){return(t.split("://")[1]||t).split(":")[0].split("/")[0]}const SC=new Bn("ngxChatLinkOpener");let CC=(()=>{class t{constructor(t,e,n){this.router=t,this.platformLocation=e,this.linkOpener=n}onClick(t){if(this.linkOpener)t.preventDefault(),this.linkOpener.openLink(this.link);else if(this.isInApp()){t.preventDefault();const e=document.createElement("a");e.href=this.link,this.router.navigateByUrl(e.pathname)}}isInApp(){return this.link.startsWith(this.appUrl())}appUrl(){return window.location.protocol+"//"+window.location.host+this.platformLocation.getBaseHrefFromDOM()}}return t.\u0275fac=function(e){return new(e||t)(ko(V_),ko(eu),ko(SC,8))},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-message-link"]],decls:2,vars:2,consts:[["target","_blank","rel","noopener",3,"href","click"]],template:function(t,e){1&t&&(Oo(0,"a",0),Fo("click",function(t){return e.onClick(t)}),ta(1),Mo()),2&t&&(Bo("href",e.link,Ys),Zr(1),ea(e.text))},styles:["a[_ngcontent-%COMP%]{color:#198cff;cursor:pointer}a[_ngcontent-%COMP%]:visited{color:#9a46e8}"]}),t})(),xC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-message-text"]],inputs:{text:"text"},decls:1,vars:1,template:function(t,e){1&t&&ta(0),2&t&&ea(e.text)},styles:["[_nghost-%COMP%] {\n                white-space: pre-wrap;\n            }"]}),t})(),EC=(()=>{class t{constructor(t,e){this.resolver=t,this.viewContainerRef=e}ngOnChanges(){this.transform()}transform(){const t=this.ngxChatLinks;if(!t)return;const e=GS(t),n=this.resolver.resolveComponentFactory(xC),s=this.resolver.resolveComponentFactory(CC);let r=0;for(const o of e){const e=t.indexOf(o,r),i=t.substring(r,e);i&&(this.viewContainerRef.createComponent(n).instance.text=i);const a=this.viewContainerRef.createComponent(s);a.instance.link=o,a.instance.text=this.shorten(o),r=e+o.length}const i=t.substring(r);i&&(this.viewContainerRef.createComponent(n).instance.text=i)}shorten(t){const e=document.createElement("a");e.href=t;let n=e.pathname;return n.length>17&&(n=n.substring(0,5)+"..."+n.substring(n.length-10)),e.protocol+"//"+e.host+n}}return t.\u0275fac=function(e){return new(e||t)(ko(Ea),ko(pc))},t.\u0275dir=Qt({type:t,selectors:[["","ngxChatLinks",""]],inputs:{ngxChatLinks:"ngxChatLinks"},features:[ce]}),t})(),kC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-avatar"]],inputs:{imageUrl:"imageUrl"},decls:1,vars:3,consts:[[1,"chat-avatar",3,"ngStyle"]],template:function(t,e){1&t&&Ao(0,"div",0),2&t&&To("ngStyle",Ic(1,Dw,"url("+e.imageUrl+")"))},directives:[uh],styles:[".chat-avatar[_ngcontent-%COMP%]{border-radius:50%;background-size:cover;background-position:50%;background-repeat:no-repeat;width:100%;height:100%}"]}),t})(),TC=(()=>{class t{constructor(){}ngAfterViewInit(){this.track.attach(this.video.nativeElement)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-video-window"]],viewQuery:function(t,e){if(1&t&&Yc(Lw,5),2&t){let t;Jc(t=Kc())&&(e.video=t.first)}},inputs:{track:"track"},decls:3,vars:0,consts:[["autoplay","1"],["video",""]],template:function(t,e){1&t&&(Oo(0,"ngx-chat-window-frame"),Ao(1,"video",0,1),Mo())},directives:function(){return[IC]},styles:["video[_ngcontent-%COMP%]{width:100%}"]}),t})(),IC=(()=>{class t{constructor(){this.closeClick=new Fc,this.headerClick=new Fc}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-window-frame"]],outputs:{closeClick:"closeClick",headerClick:"headerClick"},ngContentSelectors:$w,decls:5,vars:1,consts:[[1,"window"],[1,"window-header",3,"click"],["class","window-close",3,"click",4,"ngIf"],[1,"window-close",3,"click"]],template:function(t,e){1&t&&(zo(Fw),Oo(0,"div",0),Oo(1,"div",1),Fo("click",function(){return e.headerClick.emit()}),Ho(2),xo(3,jw,2,0,"div",2),Mo(),Ho(4,1),Mo()),2&t&&(Zr(3),To("ngIf",e.closeClick.observers.length>0))},directives:[rh],styles:['@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.window[_ngcontent-%COMP%]{border:1px solid #e1e1e1;border-bottom:none;background:#f5f5f5;margin-left:1em;width:17em;bottom:0;pointer-events:auto;position:relative}.window-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid #e1e1e1;cursor:pointer;height:2.5em;align-items:center;padding:.25em}.window-header[_ngcontent-%COMP%]:hover{background-color:#efefef}.window-close[_ngcontent-%COMP%]{padding:.5em;text-align:right;color:#777}.window-close[_ngcontent-%COMP%]:hover{color:#000}']}),t})(),OC=(()=>{class t{constructor(t){this.chatListService=t}}return t.\u0275fac=function(e){return new(e||t)(ko(IS))},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-window-list"]],inputs:{rosterState:"rosterState"},decls:5,vars:7,consts:[[1,"chat-list"],[3,"track",4,"ngFor","ngForOf"],[3,"chatWindowState",4,"ngFor","ngForOf"],[3,"track"],[3,"chatWindowState"]],template:function(t,e){1&t&&(Oo(0,"div",0),xo(1,Vw,1,1,"ngx-chat-video-window",1),Pc(2,"async"),xo(3,qw,1,1,"ngx-chat-window",2),Pc(4,"async"),Mo()),2&t&&(To("@rosterVisibility",e.rosterState),Zr(1),To("ngForOf",Rc(2,3,e.chatListService.openTracks$)),Zr(2),To("ngForOf",Rc(4,5,e.chatListService.openChats$)))},directives:[nh,TC,bC],pipes:[mh],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.chat-list[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:flex-end;position:fixed;bottom:0;right:16em;z-index:5;pointer-events:none}'],data:{animation:[up("rosterVisibility",[fp("hidden",pp({right:"1em"})),fp("shown",pp({right:"15em"})),gp("hidden => shown",hp("400ms ease")),gp("shown => hidden",hp("400ms ease"))])]}}),t})(),MC=(()=>{class t{constructor(t,e){this.chatService=t,this.chatListService=e,this.rosterStateChanged=new Fc,this.multiUserChatPlugin=this.chatService.getPlugin(cC)}ngOnInit(){this.contacts||(this.contacts=this.chatService.contactsSubscribed$),this.contactRequestsReceived$||(this.contactRequestsReceived$=this.chatService.contactRequestsReceived$),this.contactRequestsSent$||(this.contactRequestsSent$=this.chatService.contactRequestsSent$),this.contactsUnaffiliated$||(this.contactsUnaffiliated$=this.chatService.contactsUnaffiliated$),this.hasNoContacts$=sm([this.contacts,this.contactRequestsReceived$,this.contactRequestsSent$,this.contactsUnaffiliated$]).pipe(T(([t,e,n,s])=>t.length+e.length+n.length+s.length===0))}onClickRecipient(t){this.chatListService.openChat(t)}toggleVisibility(){this.rosterStateChanged.emit("shown"===this.rosterState?"hidden":"shown")}}return t.\u0275fac=function(e){return new(e||t)(ko(hS),ko(IS))},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-roster-list"]],inputs:{contacts:"contacts",contactRequestsReceived$:"contactRequestsReceived$",contactRequestsSent$:"contactRequestsSent$",contactsUnaffiliated$:"contactsUnaffiliated$",rosterState:"rosterState"},outputs:{rosterStateChanged:"rosterStateChanged"},decls:20,vars:27,consts:[[1,"roster-drawer",3,"click"],["class","roster-drawer__button",4,"ngIf"],[1,"roster-list"],[1,"roster-header"],[4,"ngIf"],["class","roster-list__empty",4,"ngIf"],[1,"roster-drawer__button"],[1,"roster-group-header"],[1,"contact-list-wrapper"],[3,"recipient","click",4,"ngFor","ngForOf"],[3,"recipient","click"],[4,"ngFor","ngForOf"],[3,"recipient","click",4,"ngIf"],[1,"roster-list__empty"],[1,"contact-pending-request-received-wrapper"],["class","contact-pending-request-received",4,"ngFor","ngForOf"],[1,"contact-pending-request-sent-wrapper"],["class","contact-pending-request-sent",4,"ngFor","ngForOf"],["style","margin-bottom: 1em",4,"ngFor","ngForOf"],[1,"roster-debug-state"],[1,"contact-pending-request-received"],[1,"contact-pending-request-sent"],[2,"margin-bottom","1em"]],template:function(t,e){1&t&&(Oo(0,"div",0),Fo("click",function(){return e.toggleVisibility()}),xo(1,Uw,2,0,"div",1),xo(2,zw,2,0,"div",1),Mo(),Oo(3,"div",2),Pc(4,"async"),Oo(5,"div",3),ta(6),Mo(),xo(7,Gw,2,1,"ng-container",4),Pc(8,"async"),xo(9,Zw,6,4,"ng-container",4),Pc(10,"async"),xo(11,Jw,6,4,"ng-container",4),Pc(12,"async"),xo(13,Kw,6,4,"ng-container",4),Pc(14,"async"),xo(15,eS,6,4,"ng-container",4),Pc(16,"async"),xo(17,nS,2,1,"div",5),Pc(18,"async"),xo(19,oS,21,15,"ng-container",4),Mo()),2&t&&(To("@drawerVisibility",e.rosterState),Zr(1),To("ngIf","shown"===e.rosterState),Zr(1),To("ngIf","hidden"===e.rosterState),Zr(1),To("@rosterVisibility",e.rosterState),So("data-ngx-chat-state",Rc(4,13,e.chatService.state$)),Zr(3),na(" ",e.chatService.translations.chat," "),Zr(1),To("ngIf",Rc(8,15,e.multiUserChatPlugin.rooms$)),Zr(2),To("ngIf",Rc(10,17,e.contacts).length>0),Zr(2),To("ngIf",Rc(12,19,e.contactRequestsReceived$).length>0),Zr(2),To("ngIf",Rc(14,21,e.contactRequestsSent$).length>0),Zr(2),To("ngIf",Rc(16,23,e.contactsUnaffiliated$).length>0),Zr(2),To("ngIf",Rc(18,25,e.hasNoContacts$)),Zr(2),To("ngIf",e.chatService.enableDebugging))},directives:function(){return[rh,nh,LC]},pipes:function(){return[mh]},styles:['@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.roster-list[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;right:0;width:14em;overflow-y:auto;border-left:1px solid #e1e1e1;z-index:80;margin-left:10px;background-color:#f5f5f5;text-align:left;padding:.5em .5em 0;display:flex;flex-direction:column}.roster-list[_ngcontent-%COMP%]   .roster-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1em}.roster-list[_ngcontent-%COMP%]   .roster-group-header[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1;padding-bottom:.5em}.roster-list[_ngcontent-%COMP%]   .roster-footer[_ngcontent-%COMP%]{border-top:1px solid #e1e1e1;width:14em;padding-top:.5em}.roster-list[_ngcontent-%COMP%]   .contact-list-wrapper[_ngcontent-%COMP%]{margin-bottom:1em}.roster-list[_ngcontent-%COMP%]   ngx-chat-roster-recipient[_ngcontent-%COMP%]{display:block;padding:.5em}.roster-list[_ngcontent-%COMP%]   ngx-chat-roster-recipient[_ngcontent-%COMP%]:hover{background-color:#e8e8e8;cursor:pointer}.roster-list__empty[_ngcontent-%COMP%]{color:#999;text-align:center;margin-top:.5em;font-size:1.5em}.roster-drawer[_ngcontent-%COMP%]{top:0;bottom:0;right:14em;width:1em;position:fixed;z-index:80;cursor:pointer}.roster-drawer[_ngcontent-%COMP%]:hover{background-color:rgba(30,30,30,.2)}.roster-drawer__button[_ngcontent-%COMP%]{top:50%;color:transparent;background-color:transparent;position:fixed;margin-left:.4rem}.roster-drawer[_ngcontent-%COMP%]:hover   .roster-drawer__button[_ngcontent-%COMP%]{color:#fff}'],data:{animation:[up("rosterVisibility",[fp("hidden",pp({right:"-14em"})),fp("shown",pp({right:"0em"})),gp("hidden => shown",hp("400ms ease")),gp("shown => hidden",hp("400ms ease"))]),up("drawerVisibility",[fp("hidden",pp({right:"0em"})),fp("shown",pp({right:"14em"})),gp("hidden => shown",hp("400ms ease")),gp("shown => hidden",hp("400ms ease"))])]}}),t})();const AC="ngxchat:unreadmessagedate",PC="entries",RC="last-read";class NC extends yS{constructor(){super(...arguments),this.lastReadNodes=[]}addLastReadNode(t,e){this.lastReadNodes.push((0,Km.Ls)(RC,{jid:t,date:e}))}toStanza(){return(0,Km.Ls)(PC,{},this.lastReadNodes)}}class DC extends gS{constructor(t,e,n,s,r){super(),this.chatService=t,this.chatMessageListRegistry=e,this.publishSubscribePlugin=n,this.entityTimePlugin=s,this.multiUserChatPlugin=r,this.jidToUnreadCount$=new Kg(new Map),this.jidToLastReadTimestamp=new Map,this.recipientIdToMessageSubscription=new Map,this.chatMessageListRegistry.chatOpened$.pipe(function(t,e=pm){const n=Lm(t)?+t-e.now():Math.abs(t);return t=>t.lift(new Vm(n,e))}(0)).subscribe(t=>this.checkForUnreadCountChange(t)),B(r.rooms$,this.chatService.contactCreated$.pipe(T(t=>[t]))).subscribe(t=>{for(const e of t){const t=e.jidBare.toString();if(!this.recipientIdToMessageSubscription.has(t)){const n=e.messages$.pipe(fm(20)).subscribe(()=>this.checkForUnreadCountChange(e));this.recipientIdToMessageSubscription.set(t,n)}}}),this.publishSubscribePlugin.publish$.subscribe(t=>this.handlePubSubEvent(t)),this.unreadMessageCountSum$=sm([this.jidToUnreadCount$,this.chatService.blockedContactIds$]).pipe(fm(20),T(([t,e])=>{let n=0;for(const[s,r]of t)e.has(s)||(n+=r);return n}),zm(),X())}checkForUnreadCountChange(t){return Yg(this,void 0,void 0,function*(){this.chatMessageListRegistry.isChatOpen(t)&&(this.jidToLastReadTimestamp.set(t.jidBare.toString(),yield this.entityTimePlugin.getNow()),yield this.persistLastSeenDates()),this.updateContactUnreadMessageState(t)})}onBeforeOnline(){return Yg(this,void 0,void 0,function*(){const t=yield this.fetchLastSeenDates();this.mergeJidToDates(t)})}onOffline(){for(const t of this.recipientIdToMessageSubscription.values())t.unsubscribe();this.recipientIdToMessageSubscription.clear(),this.jidToLastReadTimestamp.clear(),this.jidToUnreadCount$.next(new Map)}fetchLastSeenDates(){return Yg(this,void 0,void 0,function*(){const t=yield this.publishSubscribePlugin.retrieveNodeItems(AC);return this.parseLastSeenDates(t)})}parseLastSeenDates(t){const e=new Map;if(1===t.length){const[n]=t;for(const t of n.getChild(PC).getChildren(RC)){const{jid:n,date:s}=t.attrs;isNaN(s)||e.set(n,s)}}return e}updateContactUnreadMessageState(t){const e=t.jidBare.toString(),n=this.jidToLastReadTimestamp.get(e)||0,s=this.calculateUnreadMessageCount(t,n),r=this.jidToUnreadCount$.getValue();r.get(e)!==s&&this.jidToUnreadCount$.next(r.set(e,s))}calculateUnreadMessageCount(t,e){const n=RS(e,t.messages,t=>t.datetime.getTime());return t.messages.slice(n).filter(t=>t.direction===fS.in).length}persistLastSeenDates(){return Yg(this,void 0,void 0,function*(){const t=new NC;for(const[e,n]of this.jidToLastReadTimestamp)t.addLastReadNode(e,n.toString());yield this.publishSubscribePlugin.storePrivatePayloadPersistent(AC,"current",t.toStanza())})}handlePubSubEvent(t){const e=t.getChild("items"),n=e&&e.attrs.node,s=e&&e.getChildren("item");if(n===AC&&s){const t=this.parseLastSeenDates(s);this.mergeJidToDates(t)}}mergeJidToDates(t){for(const[e,n]of t){const t=this.jidToLastReadTimestamp.get(e);(!t||t<n)&&this.jidToLastReadTimestamp.set(e,n)}}}let LC=(()=>{class t{constructor(t){this.chatService=t,this.Presence=jS}ngOnInit(){this.unreadCount$=this.chatService.getPlugin(DC).jidToUnreadCount$.pipe(T(t=>t.get(this.recipient.jidBare.toString())||0),zm(),fm(20)),this.presence$="contact"===this.recipient.recipientType?this.recipient.presence$:om(jS.unavailable)}}return t.\u0275fac=function(e){return new(e||t)(ko(hS))},t.\u0275cmp=zt({type:t,selectors:[["ngx-chat-roster-recipient"]],inputs:{recipient:"recipient"},decls:10,vars:9,consts:[[1,"roster-recipient",3,"title"],[1,"roster-recipient-avatar"],[3,"imageUrl"],[1,"roster-recipient-name"],[1,"roster-recipient-status"],["class","unread-message-badge",4,"ngIf"],[4,"ngIf"],[1,"unread-message-badge"],["class","roster-presence",3,"ngClass",4,"ngIf"],[1,"roster-presence",3,"ngClass"]],template:function(t,e){1&t&&(Oo(0,"div",0),Oo(1,"div",1),Ao(2,"ngx-chat-avatar",2),Mo(),Oo(3,"div",3),ta(4),Mo(),Oo(5,"div",4),xo(6,aS,3,3,"div",5),Pc(7,"async"),xo(8,lS,2,1,"ng-container",6),Pc(9,"async"),Mo(),Mo()),2&t&&(To("title",e.recipient.name),Zr(2),To("imageUrl",e.recipient.avatar),Zr(2),na(" ",e.recipient.name," "),Zr(2),To("ngIf",Rc(7,5,e.unreadCount$)>0),Zr(2),To("ngIf",Rc(9,7,e.presence$)))},directives:[kC,rh,th],pipes:[mh],styles:['@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.roster-recipient[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.roster-recipient-avatar[_ngcontent-%COMP%]{min-width:2em;width:2em;min-height:2em;height:2em}.roster-recipient-name[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;flex-grow:1}.roster-recipient-status[_ngcontent-%COMP%]{white-space:nowrap}.roster-presence[_ngcontent-%COMP%]{display:inline-block;padding-top:.5em;margin-left:.3em}.roster-presence.roster-presence--present[_ngcontent-%COMP%]{color:#69ca48}.roster-presence.roster-presence--away[_ngcontent-%COMP%]{color:#ffbe00}.roster-presence.roster-presence--unavailable[_ngcontent-%COMP%]{color:transparent}.unread-message-badge[_ngcontent-%COMP%]{display:inline-block;padding-top:.2em;background-color:#ff5940;color:#fff;border-radius:50%;align-self:center;margin-top:.25em;width:1.5em;height:1.5em;text-align:center}']}),t})(),jC=(()=>{class t{constructor(t){this.el=t,this.ngxChatIntersectionObserver=new Fc,this.intersectionObserver=new IntersectionObserver(t=>{this.ngxChatIntersectionObserver.emit(t[0])},{rootMargin:"150px 0px 150px 0px"}),this.intersectionObserver.observe(t.nativeElement)}ngOnDestroy(){this.intersectionObserver.disconnect()}}return t.\u0275fac=function(e){return new(e||t)(ko(Oa))},t.\u0275dir=Qt({type:t,selectors:[["","ngxChatIntersectionObserver",""]],outputs:{ngxChatIntersectionObserver:"ngxChatIntersectionObserver"}}),t})();const FC="storage:bookmarks";class $C extends gS{constructor(t){super(),this.publishSubscribePlugin=t,this.pendingAddConference=null}onOffline(){this.pendingAddConference=null}retrieveMultiUserChatRooms(){return Yg(this,void 0,void 0,function*(){const t=yield this.publishSubscribePlugin.retrieveNodeItems(FC),e=t&&t[0]&&t[0].getChild("storage",FC),n=t&&e.getChildren("conference");return n?n.map(t=>this.convertElementToSavedConference(t)):[]})}convertElementToSavedConference(t){return{name:t.attrs.name,jid:t.attrs.jid,autojoin:"true"===t.attrs.autojoin}}saveConferences(t){const e=function(t,e=((t,e)=>t===e)){const n=[];for(const s of t){let t=!1;for(const r of n)if(e(s,r)){t=!0;break}t||n.push(s)}return n}(t,(t,e)=>t.jid===e.jid);return this.publishSubscribePlugin.storePrivatePayloadPersistent(FC,null,(0,Km.Ls)("storage",{xmlns:FC},e.map(t=>this.convertSavedConferenceToElement(t))))}addConference(t){return Yg(this,void 0,void 0,function*(){for(;this.pendingAddConference;)try{yield this.pendingAddConference}catch(e){}this.pendingAddConference=this.addConferenceInternal(t);try{return yield this.pendingAddConference}finally{this.pendingAddConference=null}})}addConferenceInternal(t){return Yg(this,void 0,void 0,function*(){const e=[...yield this.retrieveMultiUserChatRooms(),t];return yield this.saveConferences(e)})}convertSavedConferenceToElement({name:t,autojoin:e,jid:n}){return(0,Km.Ls)("conference",{name:t,jid:n,autojoin:e.toString()})}}class VC extends gS{constructor(t,e,n){super(),this.xmppChatAdapter=t,this.serviceDiscoveryPlugin=e,this.logService=n,this.serverSupportsTime$=new Kg("unknown"),this.serverTime$=new Kg(null)}onBeforeOnline(){return Yg(this,void 0,void 0,function*(){if(yield this.serviceDiscoveryPlugin.supportsFeature(this.xmppChatAdapter.chatConnectionService.userJid.domain,"urn:xmpp:time")){const t=yield this.requestTime(this.xmppChatAdapter.chatConnectionService.userJid.domain);this.serverTime$.next(t),this.serverSupportsTime$.next(!0)}else this.serverSupportsTime$.next(!1)})}onOffline(){this.serverSupportsTime$.next("unknown"),this.serverTime$.next(null)}getNow(){return Yg(this,void 0,void 0,function*(){const t=this.serverTime$.pipe(T(t=>this.calculateNow(t)),Pm());return yield this.serverSupportsTime$.pipe(function(t,e=pm){return function(t,e,n=pm){return s=>{let r=Lm(t),i=r?+t-n.now():Math.abs(t);return s.lift(new Wm(i,r,e,n))}}(t,jm(new Gm),e)}(5e3),Pm(t=>"unknown"!==t),V(e=>e?t:om(Date.now())),Qm(()=>om(Date.now()))).toPromise()})}calculateNow(t){return t.utcTimestamp+(performance.now()-t.localReference)}requestTime(t){var e;return Yg(this,void 0,void 0,function*(){const n=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"get",to:t},(0,Km.Ls)("time",{xmlns:"urn:xmpp:time"}))),s=null===(e=n.getChild("time","urn:xmpp:time"))||void 0===e?void 0:e.getChildText("utc");if(!s){const t="invalid time response";throw this.logService.error(t,n.toString()),new Error(t)}return{utcTimestamp:Date.parse(s),localReference:performance.now()}})}}class qC extends gS{constructor(t){super(),this.xmppChatAdapter=t}onBeforeOnline(){return Yg(this,void 0,void 0,function*(){return yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("enable",{xmlns:"urn:xmpp:carbons:2"})))})}handleStanza(t){const e=t.getChildByAttr("xmlns","urn:xmpp:carbons:2"),n=e&&e.getChild("forwarded","urn:xmpp:forward:0"),s=n&&n.getChild("message","jabber:client"),r=t.attrs.from,i=this.xmppChatAdapter.chatConnectionService.userJid;return!!(t.is("message")&&e&&n&&s&&i&&i.bare().toString()===r)&&this.handleCarbonMessageStanza(s,e)}handleCarbonMessageStanza(t,e){const n=e.is("received")?fS.in:fS.out,s={body:t.getChildText("body").trim(),direction:n,datetime:new Date,delayed:!1,fromArchive:!1},r=new XS;if(this.xmppChatAdapter.plugins.forEach(e=>e.afterReceiveMessage(s,t,r)),!r.discard){const{from:e,to:r}=t.attrs,i=this.xmppChatAdapter.getOrCreateContactById(n===fS.in?e:r);i.addMessage(s),n===fS.in&&this.xmppChatAdapter.message$.next(i)}return!0}}class UC extends Error{constructor(t){super(t),this.name="TimeoutError"}}function zC(t,e){const n=function(t){let e;const n=new Promise(n=>{e=setTimeout(n,t)});return n.timeout=e,n}(e);return Promise.race([t.finally(function(){clearTimeout(n.timeout)}),n.then(()=>{throw new UC})])}class HC extends gS{constructor(t,e,n){super(),this.xmppChatAdapter=t,this.logService=e,this.ngZone=n,this.pingInterval=6e4,this.xmppChatAdapter.state$.pipe(am(t=>"online"===t)).subscribe(()=>this.schedulePings()),this.xmppChatAdapter.state$.pipe(am(t=>"disconnected"===t)).subscribe(()=>this.unschedulePings())}schedulePings(){this.unschedulePings(),this.ngZone.runOutsideAngular(()=>{this.timeoutHandle=window.setInterval(()=>this.ping(),this.pingInterval)})}ping(){return Yg(this,void 0,void 0,function*(){this.logService.debug("ping...");try{yield zC(this.sendPing(),1e4),this.logService.debug("... pong")}catch(t){"online"===this.xmppChatAdapter.state$.getValue()&&"online"===this.xmppChatAdapter.chatConnectionService.state$.getValue()&&this.logService.error("... pong errored,  connection should be online, waiting for browser websocket timeout")}})}sendPing(){return Yg(this,void 0,void 0,function*(){return yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"get"},(0,Km.Ls)("ping",{xmlns:"urn:xmpp:ping"})))})}unschedulePings(){window.clearInterval(this.timeoutHandle)}}class BC extends gS{constructor(t,e){super(),this.xmppChatAdapter=t,this.serviceDiscoveryPlugin=e}register(t,e){return Yg(this,void 0,void 0,function*(){return e||(e=(yield this.getPushServiceComponent()).jid),yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("enable",{xmlns:"urn:xmpp:push:0",jid:e,node:t})))})}getPushServiceComponent(){return Yg(this,void 0,void 0,function*(){return yield this.serviceDiscoveryPlugin.findService("pubsub","push")})}unregister(t,e){return Yg(this,void 0,void 0,function*(){return e||(e=(yield this.getPushServiceComponent()).jid),yield this.xmppChatAdapter.chatConnectionService.sendIq((0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("disable",{xmlns:"urn:xmpp:push:0",jid:e,node:t})))})}}class GC extends gS{constructor(t,e){super(),this.logService=t,this.ngZone=e,this.registered$=new x,this.cleanUp=new x,this.loggedIn$=new x,this.registrationTimeout=5e3}register(t,e,n,s){return Yg(this,void 0,void 0,function*(){yield this.ngZone.runOutsideAngular(()=>Yg(this,void 0,void 0,function*(){try{yield zC((()=>Yg(this,void 0,void 0,function*(){s=s||wC(n),this.logService.debug("registration plugin","connecting..."),yield this.connect(t,e,n,s),this.logService.debug("registration plugin","connection established, starting registration"),yield this.client.iqCaller.request((0,Km.Ls)("iq",{type:"get",to:s},(0,Km.Ls)("query",{xmlns:"jabber:iq:register"}))),this.logService.debug("registration plugin","server acknowledged registration request, sending credentials"),yield this.client.iqCaller.request((0,Km.Ls)("iq",{type:"set"},(0,Km.Ls)("query",{xmlns:"jabber:iq:register"},(0,Km.Ls)("username",{},t),(0,Km.Ls)("password",{},e)))),this.registered$.next(),yield this.loggedIn$.pipe(Rm(this.cleanUp),Pm()).toPromise(),this.logService.debug("registration plugin","registration successful")}))(),this.registrationTimeout)}catch(r){throw this.logService.warn("error registering",r),r}finally{this.cleanUp.next(),this.logService.debug("registration plugin","cleaning up"),yield this.client.stop()}}))})}connect(t,e,n,s){return new Promise(r=>(this.client=(0,Km.Lp)({domain:s||wC(n),service:n,credentials:n=>Yg(this,void 0,void 0,function*(){r(),yield this.registered$.pipe(Rm(this.cleanUp),Pm()).toPromise(),yield n({username:t,password:e})})}),this.client.reconnect.stop(),this.client.timeout=this.registrationTimeout,this.client.on("online",()=>{this.logService.debug("registration plugin","online event"),this.loggedIn$.next()}),this.client.on("error",t=>{this.logService.error("registration plugin",t)}),this.client.on("offline",()=>{this.logService.debug("registration plugin","offline event")}),this.client.start()))}}let WC=(()=>{class t{constructor(t){this.chatService=t,this.enabled=!1,t.message$.subscribe(t=>{this.receivedDirectMessage(t)}),t.getPlugin(cC).message$.subscribe(t=>Yg(this,void 0,void 0,function*(){yield this.receivedGroupMessage(t)}))}enable(){this.supportsNotification()&&(this.requestNotificationPermission(),this.enabled=!0)}disable(){this.enabled=!1}requestNotificationPermission(){Notification.requestPermission()}receivedDirectMessage(t){if(this.shouldDisplayNotification()){const e=new Notification(t.name,{body:t.mostRecentMessage.body,icon:t.avatar});e.addEventListener("click",()=>{window.focus(),e.close()})}}receivedGroupMessage(t){return Yg(this,void 0,void 0,function*(){if(this.shouldDisplayNotification()){const e=t.mostRecentMessage.body,n=t.mostRecentMessage.from,s=yield this.customizeGroupMessage(n,e),r=new Notification(t.name,s);r.addEventListener("click",()=>{window.focus(),r.close()})}})}customizeGroupMessage(t,e){return Yg(this,void 0,void 0,function*(){return{body:`${t}: ${e}`}})}shouldDisplayNotification(){const t=Notification;return this.enabled&&"hidden"===document.visibilityState&&this.supportsNotification()&&"granted"===t.permission}supportsNotification(){return"Notification"in window}}return t.\u0275fac=function(e){return new(e||t)(hs(hS))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),ZC=(()=>{class t{static forRoot(){return{ngModule:t,providers:[WC,IS,OS,zS,US,hC,uC,{provide:hS,deps:[hC,OS,zS,Ry,US,Sl],useFactory:t.xmppChatAdapter}]}}static xmppChatAdapter(t,e,n,s,r,i){const o=new dC(t,r,n),a=new sC(o),c=new SS(o,a),l=new VC(o,a,r),u=new cC(o,r,a),h=new DC(o,e,c,l,u),d=new tC(o,r);return o.addPlugins([new $C(c),new kS(o,a,u,r,d),d,new WS,u,c,new lC(o,r),a,new BC(o,a),new HC(o,r,i),new GC(r,i),new qC(o),h,new vC(s,a,o,r),new YS(c,o,e,r,l),new ES(o,a),new mS(o,a),l]),o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({imports:[[wh,ap,Gy,hy]]}),t})();var QC=n(4115);let JC=(()=>{class t{constructor(t){this.chatService=t}sendIq(){return Yg(this,void 0,void 0,function*(){const t=(0,QC.parse)(this.iqRequest);if(t){const e=yield this.chatService.chatConnectionService.sendIq(t);this.iqResponse=(0,QC.stringify)(e,4,1)}})}}return t.\u0275fac=function(e){return new(e||t)(ko(hS))},t.\u0275cmp=zt({type:t,selectors:[["app-iq"]],decls:9,vars:2,consts:[["rows","10",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,e){1&t&&(Oo(0,"div"),Oo(1,"h2"),ta(2,"Send custom IQ packets:"),Mo(),Oo(3,"textarea",0),Fo("ngModelChange",function(t){return e.iqRequest=t}),Mo(),Oo(4,"button",1),Fo("click",function(){return e.sendIq()}),ta(5,"Send IQ"),Mo(),Oo(6,"pre"),Oo(7,"code"),ta(8),Mo(),Mo(),Mo()),2&t&&(Zr(3),To("ngModel",e.iqRequest),Zr(5),ea(e.iqResponse))},directives:[hd,Md,ep],styles:[""]}),t})(),YC=(()=>{class t{constructor(t){this.chatService=t}sendStanza(){return Yg(this,void 0,void 0,function*(){const t=(0,QC.parse)(this.stanza);t&&(yield this.chatService.chatConnectionService.send(t))})}}return t.\u0275fac=function(e){return new(e||t)(ko(hS))},t.\u0275cmp=zt({type:t,selectors:[["app-send-stanza"]],decls:8,vars:1,consts:[["rows","10",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,e){1&t&&(Oo(0,"div"),Oo(1,"h2"),ta(2,"Send custom stanza:"),Mo(),Oo(3,"textarea",0),Fo("ngModelChange",function(t){return e.stanza=t}),Mo(),Oo(4,"button",1),Fo("click",function(){return e.sendStanza()}),ta(5,"Send stanza"),Mo(),Oo(6,"div"),ta(7,"Note: responses will not be displayed!"),Mo(),Mo()),2&t&&(Zr(3),To("ngModel",e.stanza))},directives:[hd,Md,ep],styles:[""]}),t})();function KC(t,e){if(1&t){const t=No();Oo(0,"div"),Oo(1,"button",5),Fo("click",function(){const e=Re(t).$implicit;return qo(2).selectedRoom=e}),ta(2),Mo(),Mo()}if(2&t){const t=e.$implicit;Zr(2),na(" ",t.roomJid.bare().toString()," ")}}function XC(t,e){if(1&t&&(Po(0),Ao(1,"ngx-chat-message-list",8),Ao(2,"ngx-chat-message-input",8),Ro()),2&t){const t=qo(2);Zr(1),To("recipient",t.selectedRoom),Zr(1),To("recipient",t.selectedRoom)}}function tx(t,e){1&t&&(Oo(0,"span"),ta(1,"(no room joined yet)"),Mo())}function ex(t,e){if(1&t&&(Oo(0,"li"),ta(1),Mo()),2&t){const t=e.$implicit;Zr(1),na(" ",t," ")}}function nx(t,e){if(1&t&&(Oo(0,"li"),ta(1),Oo(2,"ul"),xo(3,ex,2,1,"li",2),Mo(),Mo()),2&t){const t=e.$implicit;Zr(1),na(" ",t.key,": "),Zr(2),To("ngForOf",t.value)}}function sx(t,e){if(1&t&&(Oo(0,"li"),ta(1),Mo()),2&t){const t=e.$implicit;Zr(1),na(" ",t.jid," ")}}function rx(t,e){if(1&t){const t=No();Oo(0,"div"),ta(1),Oo(2,"button",5),Fo("click",function(){const e=Re(t).$implicit;return qo(2).joinRoom(e.jid)}),ta(3,"join"),Mo(),Oo(4,"button",5),Fo("click",function(){const e=Re(t).$implicit;return qo(2).subscribeWithMucSub(e.jid)}),ta(5,"subscribe with MUC/Sub"),Mo(),Oo(6,"button",5),Fo("click",function(){const e=Re(t).$implicit;return qo(2).unsubscribeFromMucSub(e.jid)}),ta(7,"unsubscribe from MUC/Sub"),Mo(),Oo(8,"button",5),Fo("click",function(){const e=Re(t).$implicit;return qo(2).destroyRoom(e.jid)}),ta(9,"destroy"),Mo(),Mo()}if(2&t){const t=e.$implicit;Zr(1),sa(" ",t.name,": ",t.jid," ")}}function ix(t,e){if(1&t){const t=No();Oo(0,"button",5),Fo("click",function(){return Re(t),qo(2).createNewRoom()}),ta(1,"Create new room"),Mo()}}function ox(t,e){if(1&t){const t=No();Oo(0,"form",9),Fo("submit",function(){return Re(t),qo(2).createRoomOnServer()}),Oo(1,"div",10),Oo(2,"input",11,12),Fo("ngModelChange",function(e){return Re(t),qo(2).newRoom.roomId=e}),Mo(),Oo(4,"div",13),ta(5," Room id is required "),Mo(),Mo(),Oo(6,"label"),Oo(7,"input",14),Fo("ngModelChange",function(e){return Re(t),qo(2).newRoom.membersOnly=e}),Mo(),ta(8," members only "),Mo(),Ao(9,"br"),Oo(10,"label"),Oo(11,"input",15),Fo("ngModelChange",function(e){return Re(t),qo(2).newRoom.nonAnonymous=e}),Mo(),ta(12," non-anonymous "),Mo(),Ao(13,"br"),Oo(14,"label"),Oo(15,"input",16),Fo("ngModelChange",function(e){return Re(t),qo(2).newRoom.persistentRoom=e}),Mo(),ta(16," persistent "),Mo(),Ao(17,"br"),Oo(18,"label"),Oo(19,"input",17),Fo("ngModelChange",function(e){return Re(t),qo(2).newRoom.public=e}),Mo(),ta(20," public "),Mo(),Ao(21,"br"),Oo(22,"label"),Oo(23,"input",18),Fo("ngModelChange",function(e){return Re(t),qo(2).newRoom.allowSubscription=e}),Mo(),ta(24," allow subscription "),Mo(),Ao(25,"br"),Oo(26,"button",19),ta(27,"Create room"),Mo(),Oo(28,"button",5),Fo("click",function(){return Re(t),qo(2).cancelRoomCreation()}),ta(29,"Cancel room creation"),Mo(),Mo()}if(2&t){const t=Eo(3),e=qo(2);Zr(2),To("ngModel",e.newRoom.roomId),Zr(2),To("hidden",t.valid||t.pristine),Zr(3),To("ngModel",e.newRoom.membersOnly),Zr(4),To("ngModel",e.newRoom.nonAnonymous),Zr(4),To("ngModel",e.newRoom.persistentRoom),Zr(4),To("ngModel",e.newRoom.public),Zr(4),To("ngModel",e.newRoom.allowSubscription)}}function ax(t,e){if(1&t){const t=No();Oo(0,"div"),xo(1,KC,3,1,"div",2),Pc(2,"async"),xo(3,XC,3,2,"ng-container",3),xo(4,tx,2,0,"span",3),Pc(5,"async"),Ao(6,"hr"),Oo(7,"input",4),Fo("ngModelChange",function(e){return Re(t),qo().roomJid=e}),Mo(),Oo(8,"button",5),Fo("click",function(){Re(t);const e=qo();return e.joinRoom(e.roomJid)}),ta(9,"Join room"),Mo(),Oo(10,"button",5),Fo("click",function(){Re(t);const e=qo();return e.subscribeWithMucSub(e.roomJid)}),ta(11,"subscribe with MUC/Sub"),Mo(),Oo(12,"button",5),Fo("click",function(){Re(t);const e=qo();return e.unsubscribeFromMucSub(e.roomJid)}),ta(13,"unsubscribe from MUC/Sub"),Mo(),Oo(14,"button",5),Fo("click",function(){return Re(t),qo().getSubscriptions()}),ta(15,"get MUC/Sub subscriptions"),Mo(),Oo(16,"div"),ta(17),Mo(),Oo(18,"ul"),xo(19,nx,4,2,"li",2),Pc(20,"keyvalue"),Mo(),Ao(21,"br"),Oo(22,"div"),ta(23),Mo(),Oo(24,"ul"),xo(25,sx,2,1,"li",2),Mo(),Ao(26,"hr"),Oo(27,"button",5),Fo("click",function(){return Re(t),qo().queryAllRooms()}),ta(28,"List all rooms"),Mo(),xo(29,rx,10,2,"div",2),Ao(30,"hr"),xo(31,ix,2,0,"button",6),xo(32,ox,30,7,"form",7),Mo()}if(2&t){const t=qo();Zr(1),To("ngForOf",Rc(2,11,t.multiUserChatPlugin.rooms$)),Zr(2),To("ngIf",t.selectedRoom),Zr(1),To("ngIf",0===Rc(5,13,t.multiUserChatPlugin.rooms$).length),Zr(3),To("ngModel",t.roomJid),Zr(10),na("Current MUC subscriptions to room: ",t.roomJid,""),Zr(2),To("ngForOf",Rc(20,15,t.mucSubSubscriptions)),Zr(4),na("Members of room: ",t.roomJid,""),Zr(2),To("ngForOf",t.roomMemberList),Zr(4),To("ngForOf",t.allRooms),Zr(2),To("ngIf",null==t.newRoom),Zr(1),To("ngIf",null!=t.newRoom)}}function cx(t,e){1&t&&(Oo(0,"span"),ta(1,"You need to be online."),Mo())}function lx(t,e){1&t&&(xo(0,cx,2,0,"span",3),Pc(1,"async")),2&t&&To("ngIf","online"!==Rc(1,1,qo().chatService.state$))}let ux=(()=>{class t{constructor(t){this.chatService=t,this.allRooms=[],this.roomMemberList=[],this.mucSubSubscriptions=new Map,this.multiUserChatPlugin=t.getPlugin(cC),this.mucSubPlugin=t.getPlugin(ES)}joinRoom(t){return Yg(this,void 0,void 0,function*(){const e=(0,Km.kO)(t);this.selectedRoom=yield this.multiUserChatPlugin.joinRoom(e)})}subscribeWithMucSub(t){return Yg(this,void 0,void 0,function*(){yield this.mucSubPlugin.subscribeRoom(t,[xS.messages])})}unsubscribeFromMucSub(t){return Yg(this,void 0,void 0,function*(){yield this.mucSubPlugin.unsubscribeRoom(t)})}getSubscriptions(){return Yg(this,void 0,void 0,function*(){this.mucSubSubscriptions=yield this.mucSubPlugin.retrieveSubscriptions()})}queryMemberList(t){return Yg(this,void 0,void 0,function*(){const e=new rC((0,Km.kO)(t),null).toString();this.roomMemberList=yield this.multiUserChatPlugin.queryMemberList(e)})}destroyRoom(t){return Yg(this,void 0,void 0,function*(){const e=(0,Km.kO)(t);yield this.multiUserChatPlugin.destroyRoom(e),yield this.queryAllRooms()})}queryAllRooms(){return Yg(this,void 0,void 0,function*(){this.allRooms=yield this.multiUserChatPlugin.queryAllRooms()})}createNewRoom(){this.newRoom={roomId:"",membersOnly:!0,nonAnonymous:!1,persistentRoom:!0,public:!1,allowSubscription:!0}}cancelRoomCreation(){this.newRoom=null}createRoomOnServer(){var t;return Yg(this,void 0,void 0,function*(){!(null===(t=this.newRoom)||void 0===t?void 0:t.roomId)||""===this.newRoom.roomId||(yield this.multiUserChatPlugin.createRoom(this.newRoom),this.newRoom=void 0)})}}return t.\u0275fac=function(e){return new(e||t)(ko(hS))},t.\u0275cmp=zt({type:t,selectors:[["app-multi-user-chat"]],decls:8,vars:4,consts:[[4,"ngIf","ngIfElse"],["offline",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","text","placeholder","room",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[3,"click",4,"ngIf"],[3,"submit",4,"ngIf"],[3,"recipient"],[3,"submit"],[1,"form-group"],["name","roomId","type","text","placeholder","Room id","required","required",1,"form-control",3,"ngModel","ngModelChange"],["roomId","ngModel"],[1,"alert","alert-danger",3,"hidden"],["name","membersOnly","type","checkbox",3,"ngModel","ngModelChange"],["name","nonAnonymous","type","checkbox",3,"ngModel","ngModelChange"],["name","persistentRoom","type","checkbox",3,"ngModel","ngModelChange"],["name","public","type","checkbox",3,"ngModel","ngModelChange"],["name","allowSubscription","type","checkbox",3,"ngModel","ngModelChange"],["type","submit"]],template:function(t,e){if(1&t&&(Oo(0,"div"),Oo(1,"h2"),ta(2,"Chat rooms:"),Mo(),xo(3,ax,33,17,"div",0),Pc(4,"async"),Ao(5,"hr"),xo(6,lx,2,3,"ng-template",null,1,tl),Mo()),2&t){const t=Eo(7);Zr(3),To("ngIf","online"===Rc(4,2,e.chatService.state$))("ngIfElse",t)}},directives:[rh,nh,hd,Md,ep,mC,dS,np,Ad,Kd,ip,cd],pipes:[mh,bh],styles:["ngx-chat-message-input[_ngcontent-%COMP%]{display:block;border:1px solid #dadada;width:100%;padding:.5em}"]}),t})();function hx(t,e){if(1&t&&(Oo(0,"div"),Oo(1,"p"),ta(2),Mo(),Mo()),2&t){const t=qo();Zr(2),ea(t.registrationMessage)}}function dx(t,e){if(1&t&&(Po(0),Ao(1,"ngx-chat-message-list",17),Pc(2,"async"),Ao(3,"ngx-chat-message-input",18),Pc(4,"async"),Ro()),2&t){const t=qo();Zr(1),To("recipient",Rc(2,3,t.chatService.contactsSubscribed$)[0])("showAvatars",!0),Zr(2),To("recipient",Rc(4,5,t.chatService.contactsSubscribed$)[0])}}function px(t,e){1&t&&ta(0,"You need to be logged in and have contacts to see this component")}let fx=(()=>{class t{constructor(t,e,n,s,r){this.chatService=t,this.contactFactory=e,this.logService=n,this.chatListStateService=s;const i=JSON.parse(localStorage.getItem("data"))||{};this.logService.logLevel=qS.Debug,this.domain=i.domain,this.service=i.service,this.password=i.password,this.username=i.username,this.chatService.state$.subscribe(t=>this.stateChanged(t)),this.multiUserChatPlugin=this.chatService.getPlugin(cC),this.unreadMessageCountPlugin=this.chatService.getPlugin(DC),r.enable(),window.chatService=t}onLogin(){const t={domain:this.domain,service:this.service,password:this.password,username:this.username};localStorage.setItem("data",JSON.stringify(t)),this.chatService.logIn(t)}onLogout(){this.chatService.logOut()}onRegister(){return Yg(this,void 0,void 0,function*(){this.registrationMessage="registering ...";try{yield this.chatService.getPlugin(GC).register(this.username,this.password,this.service,this.domain),this.registrationMessage="registration successful"}catch(t){throw this.registrationMessage="registration failed: "+t.toString(),t}})}onAddContact(){this.chatService.addContact(this.otherJid)}onRemoveContact(){this.chatService.removeContact(this.otherJid)}onOpenChat(){this.chatListStateService.openChat(this.chatService.getOrCreateContactById(this.otherJid))}stateChanged(t){return Yg(this,void 0,void 0,function*(){console.log("state changed!",t)})}onReconnect(){this.chatService.reconnect()}}return t.\u0275fac=function(e){return new(e||t)(ko(hS),ko(zS),ko(US),ko(IS),ko(WC))},t.\u0275cmp=zt({type:t,selectors:[["app-index"]],decls:80,vars:25,consts:[[1,"container"],[1,"form-group"],["name","domain","type","text","placeholder","jabber.example.com",1,"form-control",3,"ngModel","ngModelChange"],["name","service","type","text","placeholder","wss://jabber.example.com:5280/websocket",1,"form-control",3,"ngModel","ngModelChange"],["name","username","type","text","placeholder","test",1,"form-control",3,"ngModel","ngModelChange"],["name","password","type","password","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["name","login",3,"click"],["name","logout",3,"click"],["name","register",3,"click"],["name","reconnect",3,"click"],[4,"ngIf"],["type","text","placeholder","JID",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngIf","ngIfElse"],["messagesComponentInformation",""],["routerLink","/ui"],["rosterState","shown"],[3,"recipient","showAvatars"],[3,"recipient"]],template:function(t,e){if(1&t&&(Oo(0,"div",0),Oo(1,"div",1),Oo(2,"div"),ta(3," XMPP domain "),Oo(4,"small"),ta(5,"(e.g. jabber.example.com)"),Mo(),Mo(),Oo(6,"div"),Oo(7,"input",2),Fo("ngModelChange",function(t){return e.domain=t}),Mo(),Mo(),Mo(),Oo(8,"div",1),Oo(9,"div"),ta(10," Host Websocket endpoint "),Oo(11,"small"),ta(12,"(e.g. wss://jabber.example.com:5280/websocket)"),Mo(),Mo(),Oo(13,"div"),Oo(14,"input",3),Fo("ngModelChange",function(t){return e.service=t}),Mo(),Mo(),Mo(),Oo(15,"div",1),Oo(16,"div"),ta(17," Username "),Oo(18,"small"),ta(19,"(e.g. test if test@jabber.example.com is your full JID)"),Mo(),Mo(),Oo(20,"div"),Oo(21,"input",4),Fo("ngModelChange",function(t){return e.username=t}),Mo(),Mo(),Mo(),Oo(22,"div",1),Oo(23,"div"),ta(24," Password "),Mo(),Oo(25,"div"),Oo(26,"input",5),Fo("ngModelChange",function(t){return e.password=t}),Mo(),Mo(),Mo(),Oo(27,"div"),Oo(28,"button",6),Fo("click",function(){return e.onLogin()}),ta(29,"Log in"),Mo(),Oo(30,"button",7),Fo("click",function(){return e.onLogout()}),ta(31,"Log out"),Mo(),Oo(32,"button",8),Fo("click",function(){return e.onRegister()}),ta(33,"Register"),Mo(),Oo(34,"button",9),Fo("click",function(){return e.onReconnect()}),ta(35,"Reconnect"),Mo(),Mo(),Oo(36,"div"),ta(37),Pc(38,"async"),Mo(),xo(39,hx,3,1,"div",10),Ao(40,"hr"),Oo(41,"div",1),Oo(42,"div"),ta(43," Contact Management "),Mo(),Oo(44,"div"),Oo(45,"input",11),Fo("ngModelChange",function(t){return e.otherJid=t}),Mo(),Mo(),Mo(),Oo(46,"button",12),Fo("click",function(){return e.onAddContact()}),ta(47,"Add contact"),Mo(),Oo(48,"button",12),Fo("click",function(){return e.onRemoveContact()}),ta(49,"Remove contact"),Mo(),Oo(50,"button",12),Fo("click",function(){return e.onOpenChat()}),ta(51,"Open chat"),Mo(),Ao(52,"hr"),Oo(53,"button",12),Fo("click",function(){return e.chatService.enableDebugging=!e.chatService.enableDebugging}),ta(54,"Enable debugging"),Mo(),Oo(55,"div"),Oo(56,"h2"),ta(57,"Custom component for a chat session"),Mo(),xo(58,dx,5,7,"ng-container",13),Pc(59,"async"),Pc(60,"async"),xo(61,px,1,0,"ng-template",null,14,tl),Mo(),Ao(63,"hr"),Ao(64,"app-iq"),Ao(65,"app-send-stanza"),Ao(66,"app-multi-user-chat"),Oo(67,"div"),Oo(68,"h2"),ta(69,"Unread messages count:"),Mo(),ta(70),Pc(71,"async"),Oo(72,"pre"),ta(73),Pc(74,"json"),Pc(75,"keyvalue"),Pc(76,"async"),Mo(),Mo(),Oo(77,"a",15),ta(78,"Show mock chats"),Mo(),Mo(),Ao(79,"ngx-chat",16)),2&t){const t=Eo(62);Zr(7),To("ngModel",e.domain),Zr(7),To("ngModel",e.service),Zr(7),To("ngModel",e.username),Zr(5),To("ngModel",e.password),Zr(11),na("State: ",Rc(38,11,e.chatService.state$),""),Zr(2),To("ngIf",e.registrationMessage),Zr(6),To("ngModel",e.otherJid),Zr(13),To("ngIf","online"===Rc(59,13,e.chatService.state$)&&Rc(60,15,e.chatService.contactsSubscribed$).length>0)("ngIfElse",t),Zr(12),na(" Sum unread messages: ",Rc(71,17,e.unreadMessageCountPlugin.unreadMessageCountSum$)," "),Zr(3),ea(Rc(74,19,Rc(75,21,Rc(76,23,e.unreadMessageCountPlugin.jidToUnreadCount$))))}},directives:[hd,Md,ep,rh,JC,YC,ux,U_,_C,mC,dS],pipes:[mh,vh,bh],styles:[""]}),t})(),gx=(()=>{class t{constructor(){this.Direction=fS,this.MessageState=pS,this.dummyAvatarContact=MS,this.myJid=(0,Km.kO)("me@example.com"),this.otherContactJid=(0,Km.kO)("other@example.com")}ngOnInit(){this.contact=new VS(this.otherContactJid.toString(),"chat partner name"),this.room=new rC(this.myJid,null),this.add({body:"This is an incoming example message",datetime:new Date("2019-12-22T14:00:00"),direction:fS.in}),this.add({body:"This is an incoming example message on another day",datetime:new Date("2019-12-24T14:00:00"),direction:fS.in}),this.add({body:"This is an incoming example message with a really long link https://forum.golem.de/kommentare/wissenschaft/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/oneweb-ist-doch-bald-pleite/137396,5739317,5739317,read.html#msg-5739317 which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:fS.in}),this.add({body:"This is an incoming example message with a really long link https://forum.golem.de/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/ which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:fS.in}),this.add({body:"This is an outgoing example message with a really long link https://forum.golem.de/kommentare/wissenschaft/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/oneweb-ist-doch-bald-pleite/137396,5739317,5739317,read.html#msg-5739317 which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:fS.out}),this.add({body:"This is an outgoing example message with a really long link https://forum.golem.de/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/ which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:fS.out}),this.add({body:"This is an outgoing example message",datetime:new Date("2019-12-24T14:05:01"),direction:fS.out}),this.add({body:"123",datetime:new Date("2019-12-24T14:05:01"),direction:fS.out}),this.add({body:"This is an outgoing message with a link to an image https://dummyimage.com/600x400/000/fff and some text after the link",datetime:new Date("2019-12-24T14:05:01"),direction:fS.out}),this.add({body:"This is an incoming message with a link to an image https://dummyimage.com/600x400/000/fff and some text after the link",datetime:new Date("2019-12-24T14:05:01"),direction:fS.in}),this.add({body:"Really tall image https://dummyimage.com/600x4000/000/fff",datetime:new Date("2019-12-24T14:05:01"),direction:fS.in}),this.add({body:"Really wide image https://dummyimage.com/6000x400/000/fff",datetime:new Date("2019-12-24T14:05:01"),direction:fS.in}),this.add({body:"Rinderkennzeichnungs- und Rindfleischetikettierungs\xfcberwachungsaufgaben\xfcbertragungsgesetz",datetime:new Date("2019-12-24T14:05:01"),direction:fS.in})}add(t){this.contact.addMessage(Object.assign(Object.assign({},t),{delayed:!1,fromArchive:!1,id:null})),this.room.addMessage(Object.assign(Object.assign({},t),{delayed:!1,fromArchive:!1,from:t.direction===fS.in?this.otherContactJid:this.myJid}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zt({type:t,selectors:[["app-ui"]],decls:34,vars:21,consts:[[1,"container"],["routerLink","/"],[1,"example"],[1,"chat-message-list-wrapper"],[3,"recipient","showAvatars"],[1,"chat-message-list-wrapper","simple-message-list"],["formattedDate","2020-06-04 18:35","nick","chat partner",1,"chat-message--out",3,"avatar","direction","messageState"],["formattedDate","2020-06-04 18:36","nick","chat partner",1,"chat-message--out",3,"avatar","direction","messageState"],["formattedDate","2020-06-04 18:37","imageLink","https://dummyimage.com/600x400/000/fff","nick","chat partner",1,"chat-message--out",3,"direction"],[3,"recipient"]],template:function(t,e){1&t&&(Oo(0,"div",0),Oo(1,"a",1),ta(2,"Back to ngx-chat sample component"),Mo(),Oo(3,"div",2),Oo(4,"p"),ta(5,"Default theme (avatars)"),Mo(),Oo(6,"div",3),Ao(7,"ngx-chat-message-list",4),Mo(),Mo(),Oo(8,"div",2),Oo(9,"p"),ta(10,"Default theme (no avatars)"),Mo(),Oo(11,"div",3),Ao(12,"ngx-chat-message-list",4),Mo(),Mo(),Oo(13,"div",2),Oo(14,"p"),ta(15,"Simple chat message component used directly"),Mo(),Oo(16,"div",5),Oo(17,"ngx-chat-message-simple",6),ta(18," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),Mo(),Oo(19,"ngx-chat-message-simple",6),ta(20," sending "),Mo(),Oo(21,"ngx-chat-message-simple",6),ta(22," sent "),Mo(),Oo(23,"ngx-chat-message-simple",6),ta(24," recipient received "),Mo(),Oo(25,"ngx-chat-message-simple",7),ta(26," recipient seen "),Mo(),Oo(27,"ngx-chat-message-simple",8),ta(28," content goes here "),Mo(),Mo(),Mo(),Oo(29,"div",2),Oo(30,"p"),ta(31,"Mock for multi user chat room"),Mo(),Oo(32,"div",3),Ao(33,"ngx-chat-message-list",9),Mo(),Mo(),Mo()),2&t&&(Zr(7),To("recipient",e.contact)("showAvatars",!0),Zr(5),To("recipient",e.contact)("showAvatars",!1),Zr(5),To("avatar",e.dummyAvatarContact)("direction",e.Direction.out)("messageState",e.MessageState.SENDING),Zr(2),To("avatar",e.dummyAvatarContact)("direction",e.Direction.out)("messageState",e.MessageState.SENDING),Zr(2),To("avatar",e.dummyAvatarContact)("direction",e.Direction.out)("messageState",e.MessageState.SENT),Zr(2),To("avatar",e.dummyAvatarContact)("direction",e.Direction.out)("messageState",e.MessageState.RECIPIENT_RECEIVED),Zr(2),To("avatar",e.dummyAvatarContact)("direction",e.Direction.out)("messageState",e.MessageState.RECIPIENT_SEEN),Zr(2),To("direction",e.Direction.out),Zr(6),To("recipient",e.room))},directives:[U_,mC,yC],styles:[".chat-message-list-wrapper[_ngcontent-%COMP%]{border:1px solid #e3e3e3}.example[_ngcontent-%COMP%]{margin-bottom:2em}.simple-message-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple[_ngcontent-%COMP%]{max-width:76%}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple.chat-message--in[_ngcontent-%COMP%]{align-self:flex-start}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple.chat-message--out[_ngcontent-%COMP%]{align-self:flex-end}"]}),t})(),mx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=ft({imports:[[tw.forRoot([{path:"",component:fx},{path:"ui",component:gx},{path:"**",redirectTo:"/"}],{relativeLinkResolution:"legacy"})],tw]}),t})(),yx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zt({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&Ao(0,"router-outlet")},directives:[H_],styles:[""]}),t})(),vx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t,bootstrap:[yx]}),t.\u0275inj=ft({providers:[],imports:[[nd,Jg,ZC.forRoot(),ap,mx]]}),t})();(function(){if(Nl)throw new Error("Cannot enable prod mode after platform setup.");Rl=!1})(),td().bootstrapModule(vx).catch(t=>console.log(t))},1325:function(t){function e(t,e,n,s,r,i,o){try{var a=t[i](o),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(s,r)}t.exports=function(t){return function(){var n=this,s=arguments;return new Promise(function(r,i){var o=t.apply(n,s);function a(t){e(o,r,i,a,c,"next",t)}function c(t){e(o,r,i,a,c,"throw",t)}a(void 0)})}},t.exports.default=t.exports,t.exports.__esModule=!0},2754:function(){},6739:function(){},2993:function(){}},function(t){t(t.s=776)}]);