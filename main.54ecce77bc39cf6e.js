(self.webpackChunkngx_chat_xmpp_shell=self.webpackChunkngx_chat_xmpp_shell||[]).push([[179],{5935:(E,I,g)=>{"use strict";function _(n){return"function"==typeof n}let b=!1;const C={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else b&&console.log("RxJS: Back to a better error behavior. Thank you. <3");b=n},get useDeprecatedSynchronousErrorHandling(){return b}};function f(n){setTimeout(()=>{throw n},0)}const m={closed:!0,next(n){},error(n){if(C.useDeprecatedSynchronousErrorHandling)throw n;f(n)},complete(){}},S=Array.isArray||(n=>n&&"number"==typeof n.length);function L(n){return null!==n&&"object"==typeof n}const R=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,r)=>`${r+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class M{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:r,_unsubscribe:s,_subscriptions:i}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof M)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(_(s)){r&&(this._unsubscribe=void 0);try{s.call(this)}catch(o){e=o instanceof R?D(o.errors):[o]}}if(S(i)){let o=-1,a=i.length;for(;++o<a;){const c=i[o];if(L(c))try{c.unsubscribe()}catch(l){e=e||[],l instanceof R?e=e.concat(D(l.errors)):e.push(l)}}}if(e)throw new R(e)}add(e){let t=e;if(!e)return M.EMPTY;switch(typeof e){case"function":t=new M(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof M)){const i=t;t=new M,t._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=t;if(null===r)t._parentOrParents=this;else if(r instanceof M){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[t]:s.push(t),t}remove(e){const t=this._subscriptions;if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}}var n;function D(n){return n.reduce((e,t)=>e.concat(t instanceof R?t.errors:t),[])}M.EMPTY=((n=new M).closed=!0,n);const v="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class F extends M{constructor(e,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=m;break;case 1:if(!e){this.destination=m;break}if("object"==typeof e){e instanceof F?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new Q(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new Q(this,e,t,r)}}[v](){return this}static create(e,t,r){const s=new F(e,t,r);return s.syncErrorThrowable=!1,s}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class Q extends F{constructor(e,t,r,s){super(),this._parentSubscriber=e;let i,o=this;_(t)?i=t:t&&(i=t.next,r=t.error,s=t.complete,t!==m&&(o=Object.create(t),_(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=r,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;C.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=C;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):f(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;f(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);C.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),C.useDeprecatedSynchronousErrorHandling)throw r;f(r)}}__tryOrSetError(e,t,r){if(!C.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(s){return C.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=s,e.syncErrorThrown=!0,!0):(f(s),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const We="function"==typeof Symbol&&Symbol.observable||"@@observable";function z(n){return n}let W=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,s){const{operator:i}=this,o=function le(n,e,t){if(n){if(n instanceof F)return n;if(n[v])return n[v]()}return n||e||t?new F(n,e,t):new F(m)}(t,r,s);if(o.add(i?i.call(o,this.source):this.source||C.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),C.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){C.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),function ge(n){for(;n;){const{closed:e,destination:t,isStopped:r}=n;if(e||r)return!1;n=t&&t instanceof F?t:null}return!0}(t)?t.error(r):console.warn(r)}}forEach(t,r){return new(r=ue(r))((s,i)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(c){i(c),o&&o.unsubscribe()}},i,s)})}_subscribe(t){const{source:r}=this;return r&&r.subscribe(t)}[We](){return this}pipe(...t){return 0===t.length?this:function G(n){return 0===n.length?z:1===n.length?n[0]:function(t){return n.reduce((r,s)=>s(r),t)}}(t)(this)}toPromise(t){return new(t=ue(t))((r,s)=>{let i;this.subscribe(o=>i=o,o=>s(o),()=>r(i))})}}return n.create=e=>new n(e),n})();function ue(n){if(n||(n=C.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const ie=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class Ze extends M{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}class $e extends F{constructor(e){super(e),this.destination=e}}let se=(()=>{class n extends W{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[v](){return new $e(this)}lift(t){const r=new Ft(this,this);return r.operator=t,r}next(t){if(this.closed)throw new ie;if(!this.isStopped){const{observers:r}=this,s=r.length,i=r.slice();for(let o=0;o<s;o++)i[o].next(t)}}error(t){if(this.closed)throw new ie;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:r}=this,s=r.length,i=r.slice();for(let o=0;o<s;o++)i[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new ie;this.isStopped=!0;const{observers:t}=this,r=t.length,s=t.slice();for(let i=0;i<r;i++)s[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new ie;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new ie;return this.hasError?(t.error(this.thrownError),M.EMPTY):this.isStopped?(t.complete(),M.EMPTY):(this.observers.push(t),new Ze(this,t))}asObservable(){const t=new W;return t.source=this,t}}return n.create=(e,t)=>new Ft(e,t),n})();class Ft extends se{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):M.EMPTY}}function Jt(n){return n&&"function"==typeof n.schedule}function pe(n,e){return function(r){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Bs(n,e))}}class Bs{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new $s(e,this.project,this.thisArg))}}class $s extends F{constructor(e,t,r){super(e),this.project=t,this.count=0,this.thisArg=r||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Qe=n=>e=>{for(let t=0,r=n.length;t<r&&!e.closed;t++)e.next(n[t]);e.complete()},vr=function Hs(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Ua=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function og(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const lu=n=>{if(n&&"function"==typeof n[We])return(n=>e=>{const t=n[We]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Ua(n))return Qe(n);if(og(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,f),e))(n);if(n&&"function"==typeof n[vr])return(n=>e=>{const t=n[vr]();for(;;){let r;try{r=t.next()}catch(s){return e.error(s),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${L(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function uu(n,e){return new W(t=>{const r=new M;let s=0;return r.add(e.schedule(function(){s!==n.length?(t.next(n[s++]),t.closed||r.add(this.schedule())):t.complete()})),r})}function jt(n,e){return e?function xE(n,e){if(null!=n){if(function ME(n){return n&&"function"==typeof n[We]}(n))return function DE(n,e){return new W(t=>{const r=new M;return r.add(e.schedule(()=>{const s=n[We]();r.add(s.subscribe({next(i){r.add(e.schedule(()=>t.next(i)))},error(i){r.add(e.schedule(()=>t.error(i)))},complete(){r.add(e.schedule(()=>t.complete()))}}))})),r})}(n,e);if(og(n))return function SE(n,e){return new W(t=>{const r=new M;return r.add(e.schedule(()=>n.then(s=>{r.add(e.schedule(()=>{t.next(s),r.add(e.schedule(()=>t.complete()))}))},s=>{r.add(e.schedule(()=>t.error(s)))}))),r})}(n,e);if(Ua(n))return uu(n,e);if(function TE(n){return n&&"function"==typeof n[vr]}(n)||"string"==typeof n)return function EE(n,e){if(!n)throw new Error("Iterable cannot be null");return new W(t=>{const r=new M;let s;return r.add(()=>{s&&"function"==typeof s.return&&s.return()}),r.add(e.schedule(()=>{s=n[vr](),r.add(e.schedule(function(){if(t.closed)return;let i,o;try{const a=s.next();i=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(i),this.schedule())}))})),r})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof W?n:new W(lu(n))}class qs extends F{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class zs extends F{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Gs(n,e){if(e.closed)return;if(n instanceof W)return n.subscribe(e);let t;try{t=lu(n)(e)}catch(r){e.error(r)}return t}function Pt(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(Pt((s,i)=>jt(n(s,i)).pipe(pe((o,a)=>e(s,o,i,a))),t)):("number"==typeof e&&(t=e),r=>r.lift(new IE(n,t)))}class IE{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new AE(e,this.project,this.concurrent))}}class AE extends zs{constructor(e,t,r=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(s){return void this.destination.error(s)}this.active++,this._innerSub(t)}_innerSub(e){const t=new qs(this),r=this.destination;r.add(t);const s=Gs(e,t);s!==t&&r.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function fo(n=Number.POSITIVE_INFINITY){return Pt(z,n)}function du(n,e){return e?uu(n,e):new W(Qe(n))}function hu(...n){let e=Number.POSITIVE_INFINITY,t=null,r=n[n.length-1];return Jt(r)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof r&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof W?n[0]:fo(e)(du(n,t))}function fu(){return function(e){return e.lift(new RE(e))}}class RE{constructor(e){this.connectable=e}call(e,t){const{connectable:r}=this;r._refCount++;const s=new PE(e,r),i=t.subscribe(s);return s.closed||(s.connection=r.connect()),i}}class PE extends F{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:r}=this,s=e._connection;this.connection=null,s&&(!r||s===r)&&s.unsubscribe()}}class ag extends W{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new M,e.add(this.source.subscribe(new OE(this.getSubject(),this))),e.closed&&(this._connection=null,e=M.EMPTY)),e}refCount(){return fu()(this)}}const NE=(()=>{const n=ag.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class OE extends $e{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class LE{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:r}=this,s=this.subjectFactory(),i=r(s).subscribe(e);return i.add(t.subscribe(s)),i}}function VE(){return new se}function cg(){return n=>fu()(function FE(n,e){return function(r){let s;if(s="function"==typeof n?n:function(){return n},"function"==typeof e)return r.lift(new LE(s,e));const i=Object.create(r,NE);return i.source=r,i.subjectFactory=s,i}}(VE)(n))}function Je(n){for(let e in n)if(n[e]===Je)return e;throw Error("Could not find renamed property on target object.")}function pu(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function He(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(He).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function gu(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const jE=Je({__forward_ref__:Je});function Xe(n){return n.__forward_ref__=Xe,n.toString=function(){return He(this())},n}function Me(n){return lg(n)?n():n}function lg(n){return"function"==typeof n&&n.hasOwnProperty(jE)&&n.__forward_ref__===Xe}class ne extends Error{constructor(e,t){super(function mu(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function we(n){return"string"==typeof n?n:null==n?"":String(n)}function Lt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():we(n)}function Ha(n,e){const t=e?` in ${e}`:"";throw new ne(-201,`No provider for ${Lt(n)} found${t}`)}function gn(n,e){null==n&&function Ke(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function ce(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Bt(n){return{providers:n.providers||[],imports:n.imports||[]}}function yu(n){return ug(n,qa)||ug(n,hg)}function ug(n,e){return n.hasOwnProperty(e)?n[e]:null}function dg(n){return n&&(n.hasOwnProperty(vu)||n.hasOwnProperty(GE))?n[vu]:null}const qa=Je({\u0275prov:Je}),vu=Je({\u0275inj:Je}),hg=Je({ngInjectableDef:Je}),GE=Je({ngInjectorDef:Je});var Ce=(()=>((Ce=Ce||{})[Ce.Default=0]="Default",Ce[Ce.Host=1]="Host",Ce[Ce.Self=2]="Self",Ce[Ce.SkipSelf=4]="SkipSelf",Ce[Ce.Optional=8]="Optional",Ce))();let _u;function Br(n){const e=_u;return _u=n,e}function fg(n,e,t){const r=yu(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ce.Optional?null:void 0!==e?e:void Ha(He(n),"Injector")}function $r(n){return{toString:n}.toString()}var $n=(()=>(($n=$n||{})[$n.OnPush=0]="OnPush",$n[$n.Default=1]="Default",$n))(),Un=(()=>(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(Un||(Un={})),Un))();const QE=typeof globalThis<"u"&&globalThis,JE=typeof window<"u"&&window,KE=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,Ge=QE||typeof global<"u"&&global||JE||KE,Ws={},Ye=[],za=Je({\u0275cmp:Je}),Cu=Je({\u0275dir:Je}),wu=Je({\u0275pipe:Je}),pg=Je({\u0275mod:Je}),Cr=Je({\u0275fac:Je}),po=Je({__NG_ELEMENT_ID__:Je});let YE=0;function rt(n){return $r(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===$n.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Ye,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Un.Emulated,id:"c",styles:n.styles||Ye,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.directives,i=n.features,o=n.pipes;return r.id+=YE++,r.inputs=vg(n.inputs,t),r.outputs=vg(n.outputs),i&&i.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(gg):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(mg):null,r})}function gg(n){return $t(n)||function Ur(n){return n[Cu]||null}(n)}function mg(n){return function gs(n){return n[wu]||null}(n)}const yg={};function Kt(n){return $r(()=>{const e={type:n.type,bootstrap:n.bootstrap||Ye,declarations:n.declarations||Ye,imports:n.imports||Ye,exports:n.exports||Ye,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(yg[n.id]=n.type),e})}function vg(n,e){if(null==n)return Ws;const t={};for(const r in n)if(n.hasOwnProperty(r)){let s=n[r],i=s;Array.isArray(s)&&(i=s[1],s=s[0]),t[s]=r,e&&(e[s]=i)}return t}const he=rt;function cn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function $t(n){return n[za]||null}function xn(n,e){const t=n[pg]||null;if(!t&&!0===e)throw new Error(`Type ${He(n)} does not have '\u0275mod' property.`);return t}function nr(n){return Array.isArray(n)&&"object"==typeof n[1]}function qn(n){return Array.isArray(n)&&!0===n[1]}function Su(n){return 0!=(8&n.flags)}function Ja(n){return 2==(2&n.flags)}function Ka(n){return 1==(1&n.flags)}function zn(n){return null!==n.template}function r0(n){return 0!=(512&n[2])}function _s(n,e){return n.hasOwnProperty(Cr)?n[Cr]:null}class a0{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Yt(){return Cg}function Cg(n){return n.type.prototype.ngOnChanges&&(n.setInput=l0),c0}function c0(){const n=bg(this),e=n?.current;if(e){const t=n.previous;if(t===Ws)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function l0(n,e,t,r){const s=bg(n)||function u0(n,e){return n[wg]=e}(n,{previous:Ws,current:null}),i=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[t],c=o[a];i[a]=new a0(c&&c.currentValue,e,o===Ws),n[r]=e}Yt.ngInherit=!0;const wg="__ngSimpleChanges__";function bg(n){return n[wg]||null}let Iu;function Au(){return void 0!==Iu?Iu:typeof document<"u"?document:void 0}function dt(n){return!!n.listen}const Dg={createRenderer:(n,e)=>Au()};function _t(n){for(;Array.isArray(n);)n=n[0];return n}function Ya(n,e){return _t(e[n])}function Rn(n,e){return _t(e[n.index])}function Ru(n,e){return n.data[e]}function Zs(n,e){return n[e]}function yn(n,e){const t=e[n];return nr(t)?t:t[0]}function Sg(n){return 4==(4&n[2])}function Pu(n){return 128==(128&n[2])}function Hr(n,e){return null==e?null:n[e]}function Eg(n){n[18]=0}function Nu(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const be={lFrame:Og(null),bindingsEnabled:!0};function Tg(){return be.bindingsEnabled}function q(){return be.lFrame.lView}function Ve(){return be.lFrame.tView}function Re(n){return be.lFrame.contextLView=n,n[8]}function Mt(){let n=xg();for(;null!==n&&64===n.type;)n=n.parent;return n}function xg(){return be.lFrame.currentTNode}function rr(n,e){const t=be.lFrame;t.currentTNode=n,t.isParent=e}function Ou(){return be.lFrame.isParent}function ku(){be.lFrame.isParent=!1}function Zt(){const n=be.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Xs(){return be.lFrame.bindingIndex++}function br(n){const e=be.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function T0(n,e){const t=be.lFrame;t.bindingIndex=t.bindingRootIndex=n,Fu(e)}function Fu(n){be.lFrame.currentDirectiveIndex=n}function Rg(){return be.lFrame.currentQueryIndex}function Vu(n){be.lFrame.currentQueryIndex=n}function I0(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Pg(n,e,t){if(t&Ce.SkipSelf){let s=e,i=n;for(;!(s=s.parent,null!==s||t&Ce.Host||(s=I0(i),null===s||(i=i[15],10&s.type))););if(null===s)return!1;e=s,n=i}const r=be.lFrame=Ng();return r.currentTNode=e,r.lView=n,!0}function Xa(n){const e=Ng(),t=n[1];be.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ng(){const n=be.lFrame,e=null===n?null:n.child;return null===e?Og(n):e}function Og(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function kg(){const n=be.lFrame;return be.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Fg=kg;function ec(){const n=kg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Xt(){return be.lFrame.selectedIndex}function qr(n){be.lFrame.selectedIndex=n}function ht(){const n=be.lFrame;return Ru(n.tView,n.selectedIndex)}function tc(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const i=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function nc(n,e,t){Lg(n,e,3,t)}function rc(n,e,t,r){(3&n[2])===t&&Lg(n,e,t,r)}function ju(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Lg(n,e,t,r){const i=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[18]+=65536),(a<i||-1==i)&&(V0(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function V0(n,e,t,r){const s=t[r]<0,i=t[r+1],a=n[s?-t[r]:t[r]];if(s){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{i.call(a)}finally{}}}else try{i.call(a)}finally{}}class _o{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function sc(n,e,t){const r=dt(n);let s=0;for(;s<t.length;){const i=t[s];if("number"==typeof i){if(0!==i)break;s++;const o=t[s++],a=t[s++],c=t[s++];r?n.setAttribute(e,a,c,o):e.setAttributeNS(o,a,c)}else{const o=i,a=t[++s];$u(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),s++}}return s}function Vg(n){return 3===n||4===n||6===n}function $u(n){return 64===n.charCodeAt(0)}function ic(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const s=e[r];"number"==typeof s?t=s:0===t||jg(n,t,s,null,-1===t||2===t?e[++r]:null)}}return n}function jg(n,e,t,r,s){let i=0,o=n.length;if(-1===e)o=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==s&&(n[i+1]=s));if(r===n[i+1])return void(n[i+2]=s)}i++,null!==r&&i++,null!==s&&i++}-1!==o&&(n.splice(o,0,e),i=o+1),n.splice(i++,0,t),null!==r&&n.splice(i++,0,r),null!==s&&n.splice(i++,0,s)}function Bg(n){return-1!==n}function ei(n){return 32767&n}function ti(n,e){let t=function H0(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Uu=!0;function oc(n){const e=Uu;return Uu=n,e}let q0=0;function wo(n,e){const t=qu(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Hu(r.data,n),Hu(e,null),Hu(r.blueprint,null));const s=ac(n,e),i=n.injectorIndex;if(Bg(s)){const o=ei(s),a=ti(s,e),c=a[1].data;for(let l=0;l<8;l++)e[i+l]=a[o+l]|c[o+l]}return e[i+8]=s,i}function Hu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function qu(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function ac(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,s=e;for(;null!==s;){const i=s[1],o=i.type;if(r=2===o?i.declTNode:1===o?s[6]:null,null===r)return-1;if(t++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function cc(n,e,t){!function z0(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(po)&&(r=t[po]),null==r&&(r=t[po]=q0++);const s=255&r;e.data[n+(s>>5)]|=1<<s}(n,e,t)}function Hg(n,e,t){if(t&Ce.Optional)return n;Ha(e,"NodeInjector")}function qg(n,e,t,r){if(t&Ce.Optional&&void 0===r&&(r=null),0==(t&(Ce.Self|Ce.Host))){const s=n[9],i=Br(void 0);try{return s?s.get(e,r,t&Ce.Optional):fg(e,r,t&Ce.Optional)}finally{Br(i)}}return Hg(r,e,t)}function zg(n,e,t,r=Ce.Default,s){if(null!==n){const i=function J0(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(po)?n[po]:void 0;return"number"==typeof e?e>=0?255&e:W0:e}(t);if("function"==typeof i){if(!Pg(e,n,r))return r&Ce.Host?Hg(s,t,r):qg(e,t,r,s);try{const o=i(r);if(null!=o||r&Ce.Optional)return o;Ha(t)}finally{Fg()}}else if("number"==typeof i){let o=null,a=qu(n,e),c=-1,l=r&Ce.Host?e[16][6]:null;for((-1===a||r&Ce.SkipSelf)&&(c=-1===a?ac(n,e):e[a+8],-1!==c&&Qg(r,!1)?(o=e[1],a=ei(c),e=ti(c,e)):a=-1);-1!==a;){const u=e[1];if(Wg(i,a,u.data)){const d=Q0(a,e,t,o,r,l);if(d!==Gg)return d}c=e[a+8],-1!==c&&Qg(r,e[1].data[a+8]===l)&&Wg(i,a,e)?(o=u,a=ei(c),e=ti(c,e)):a=-1}}}return qg(e,t,r,s)}const Gg={};function W0(){return new ni(Mt(),q())}function Q0(n,e,t,r,s,i){const o=e[1],a=o.data[n+8],u=lc(a,o,t,null==r?Ja(a)&&Uu:r!=o&&0!=(3&a.type),s&Ce.Host&&i===a);return null!==u?bo(e,o,u,a):Gg}function lc(n,e,t,r,s){const i=n.providerIndexes,o=e.data,a=1048575&i,c=n.directiveStart,u=i>>20,h=s?a+u:n.directiveEnd;for(let p=r?a:a+u;p<h;p++){const y=o[p];if(p<c&&t===y||p>=c&&y.type===t)return p}if(s){const p=o[c];if(p&&zn(p)&&p.type===t)return c}return null}function bo(n,e,t,r){let s=n[t];const i=e.data;if(function j0(n){return n instanceof _o}(s)){const o=s;o.resolving&&function BE(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ne(-200,`Circular dependency in DI detected for ${n}${t}`)}(Lt(i[t]));const a=oc(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Br(o.injectImpl):null;Pg(n,r,Ce.Default);try{s=n[t]=o.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&function L0(n,e,t){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=e.type.prototype;if(r){const o=Cg(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}s&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,s),i&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,i),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,i))}(t,i[t],e)}finally{null!==c&&Br(c),oc(a),o.resolving=!1,Fg()}}return s}function Wg(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Qg(n,e){return!(n&Ce.Self||n&Ce.Host&&e)}class ni{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return zg(this._tNode,this._lView,e,r,t)}}function Ht(n){return $r(()=>{const e=n.prototype.constructor,t=e[Cr]||zu(e),r=Object.prototype;let s=Object.getPrototypeOf(n.prototype).constructor;for(;s&&s!==r;){const i=s[Cr]||zu(s);if(i&&i!==t)return i;s=Object.getPrototypeOf(s)}return i=>new i})}function zu(n){return lg(n)?()=>{const e=zu(Me(n));return e&&e()}:_s(n)}const si="__parameters__";function oi(n,e,t){return $r(()=>{const r=function Gu(n){return function(...t){if(n){const r=n(...t);for(const s in r)this[s]=r[s]}}}(e);function s(...i){if(this instanceof s)return r.apply(this,i),this;const o=new s(...i);return a.annotation=o,a;function a(c,l,u){const d=c.hasOwnProperty(si)?c[si]:Object.defineProperty(c,si,{value:[]})[si];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}class _e{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ce({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Y0=new _e("AnalyzeForEntryComponents");function Pn(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),Pn(r,e)):e!==n&&e.push(r)}return e}function sr(n,e){n.forEach(t=>Array.isArray(t)?sr(t,e):e(t))}function Kg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function uc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Mo(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function vn(n,e,t){let r=ai(n,e);return r>=0?n[1|r]=t:(r=~r,function eM(n,e,t,r){let s=n.length;if(s==e)n.push(t,r);else if(1===s)n.push(r,n[0]),n[0]=t;else{for(s--,n.push(n[s-1],n[s]);s>e;)n[s]=n[s-2],s--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Qu(n,e){const t=ai(n,e);if(t>=0)return n[1|t]}function ai(n,e){return function Xg(n,e,t){let r=0,s=n.length>>t;for(;s!==r;){const i=r+(s-r>>1),o=n[i<<t];if(e===o)return i<<t;o>e?s=i:r=i+1}return~(s<<t)}(n,e,1)}const To={},Ku="__NG_DI_FLAG__",hc="ngTempTokenPath",aM=/\n/gm,tm="__source",lM=Je({provide:String,useValue:Je});let xo;function nm(n){const e=xo;return xo=n,e}function uM(n,e=Ce.Default){if(void 0===xo)throw new ne(203,"");return null===xo?fg(n,void 0,e):xo.get(n,e&Ce.Optional?null:void 0,e)}function X(n,e=Ce.Default){return(function WE(){return _u}()||uM)(Me(n),e)}const dM=X;function Yu(n){const e=[];for(let t=0;t<n.length;t++){const r=Me(n[t]);if(Array.isArray(r)){if(0===r.length)throw new ne(900,"");let s,i=Ce.Default;for(let o=0;o<r.length;o++){const a=r[o],c=hM(a);"number"==typeof c?-1===c?s=a.token:i|=c:s=a}e.push(X(s,i))}else e.push(X(r))}return e}function Io(n,e){return n[Ku]=e,n.prototype[Ku]=e,n}function hM(n){return n[Ku]}const fc=Io(oi("Inject",n=>({token:n})),-1),Gr=Io(oi("Optional"),8),Ao=Io(oi("SkipSelf"),4);let gc,mc;function li(n){return function Xu(){if(void 0===gc&&(gc=null,Ge.trustedTypes))try{gc=Ge.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gc}()?.createHTML(n)||n}function cm(n){return function ed(){if(void 0===mc&&(mc=null,Ge.trustedTypes))try{mc=Ge.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return mc}()?.createHTML(n)||n}class dm{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Wr(n){return n instanceof dm?n.changingThisBreaksApplicationSecurity:n}function Po(n,e){const t=function AM(n){return n instanceof dm&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class RM{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(li(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class PM{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=li(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=li(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let s=t.length-1;0<s;s--){const o=t.item(s).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const OM=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kM=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function yc(n){return(n=String(n)).match(OM)||n.match(kM)?n:"unsafe:"+n}function fm(n){return(n=String(n)).split(",").map(e=>yc(e.trim())).join(", ")}function ir(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function No(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const pm=ir("area,br,col,hr,img,wbr"),gm=ir("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mm=ir("rp,rt"),td=No(pm,No(gm,ir("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),No(mm,ir("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),No(mm,gm)),nd=ir("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rd=ir("srcset"),ym=No(nd,rd,ir("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ir("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),FM=ir("script,style,template");class LM{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=this.checkClobberedElement(t,t.nextSibling);if(s){t=s;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!td.hasOwnProperty(t))return this.sanitizedSomething=!0,!FM.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let s=0;s<r.length;s++){const i=r.item(s),o=i.name,a=o.toLowerCase();if(!ym.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=i.value;nd[a]&&(c=yc(c)),rd[a]&&(c=fm(c)),this.buf.push(" ",o,'="',vm(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();td.hasOwnProperty(t)&&!pm.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(vm(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const VM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jM=/([^\#-~ |!])/g;function vm(n){return n.replace(/&/g,"&amp;").replace(VM,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(jM,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vc;function sd(n){return"content"in n&&function $M(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ct=(()=>((Ct=Ct||{})[Ct.NONE=0]="NONE",Ct[Ct.HTML=1]="HTML",Ct[Ct.STYLE=2]="STYLE",Ct[Ct.SCRIPT=3]="SCRIPT",Ct[Ct.URL=4]="URL",Ct[Ct.RESOURCE_URL=5]="RESOURCE_URL",Ct))();function _m(n){const e=ko();return e?cm(e.sanitize(Ct.HTML,n)||""):Po(n,"HTML")?cm(Wr(n)):function BM(n,e){let t=null;try{vc=vc||function hm(n){const e=new PM(n);return function NM(){try{return!!(new window.DOMParser).parseFromString(li(""),"text/html")}catch{return!1}}()?new RM(e):e}(n);let r=e?String(e):"";t=vc.getInertBodyElement(r);let s=5,i=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=i,i=t.innerHTML,t=vc.getInertBodyElement(r)}while(r!==i);return li((new LM).sanitizeChildren(sd(t)||t))}finally{if(t){const r=sd(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}(Au(),we(n))}function Oo(n){const e=ko();return e?e.sanitize(Ct.URL,n)||"":Po(n,"URL")?Wr(n):yc(we(n))}function ko(){const n=q();return n&&n[12]}const bm="__ngContext__";function qt(n,e){n[bm]=e}function od(n){const e=function Fo(n){return n[bm]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function cd(n){return n.ngOriginalError}function rT(n,...e){n.error(...e)}class Lo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=function nT(n){return n&&n.ngErrorLogger||rT}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&cd(e);for(;t&&cd(t);)t=cd(t);return t||null}}const fT=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Ge))();function or(n){return n instanceof Function?n():n}var _n=(()=>((_n=_n||{})[_n.Important=1]="Important",_n[_n.DashCase=2]="DashCase",_n))();function ud(n,e){return undefined(n,e)}function Vo(n){const e=n[3];return qn(e)?e[3]:e}function dd(n){return Rm(n[13])}function hd(n){return Rm(n[4])}function Rm(n){for(;null!==n&&!qn(n);)n=n[4];return n}function di(n,e,t,r,s){if(null!=r){let i,o=!1;qn(r)?i=r:nr(r)&&(o=!0,r=r[0]);const a=_t(r);0===n&&null!==t?null==s?Lm(e,t,a):Cs(e,t,a,s||null,!0):1===n&&null!==t?Cs(e,t,a,s||null,!0):2===n?function qm(n,e,t){const r=_c(n,e);r&&function TT(n,e,t,r){dt(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=i&&function AT(n,e,t,r,s){const i=t[7];i!==_t(t)&&di(e,n,r,i,s);for(let a=10;a<t.length;a++){const c=t[a];jo(c[1],c,n,e,r,i)}}(e,n,i,t,s)}}function pd(n,e,t){if(dt(n))return n.createElement(e,t);{const r=null!==t?function p0(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?n.createElement(e):n.createElementNS(r,e)}}function Nm(n,e){const t=n[9],r=t.indexOf(e),s=e[3];1024&e[2]&&(e[2]&=-1025,Nu(s,-1)),t.splice(r,1)}function gd(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const s=r[17];null!==s&&s!==n&&Nm(s,r),e>0&&(n[t-1][4]=r[4]);const i=uc(n,10+e);!function _T(n,e){jo(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=i[19];null!==o&&o.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Om(n,e){if(!(256&e[2])){const t=e[11];dt(t)&&t.destroyNode&&jo(n,e,t,3,null,null),function bT(n){let e=n[13];if(!e)return md(n[1],n);for(;e;){let t=null;if(nr(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)nr(e)&&md(e[1],e),e=e[3];null===e&&(e=n),nr(e)&&md(e[1],e),t=e&&e[4]}e=t}}(e)}}function md(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function MT(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const s=e[t[r]];if(!(s instanceof _o)){const i=t[r+1];if(Array.isArray(i))for(let o=0;o<i.length;o+=2){const a=s[i[o]],c=i[o+1];try{c.call(a)}finally{}}else try{i.call(s)}finally{}}}}(n,e),function ET(n,e){const t=n.cleanup,r=e[7];let s=-1;if(null!==t)for(let i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){const o=t[i+1],a="function"==typeof o?o(e):_t(e[o]),c=r[s=t[i+2]],l=t[i+3];"boolean"==typeof l?a.removeEventListener(t[i],c,l):l>=0?r[s=l]():r[s=-l].unsubscribe(),i+=2}else{const o=r[s=t[i+1]];t[i].call(o)}if(null!==r){for(let i=s+1;i<r.length;i++)r[i]();e[7]=null}}(n,e),1===e[1].type&&dt(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&qn(e[3])){t!==e[3]&&Nm(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function km(n,e,t){return function Fm(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const s=n.data[r.directiveStart].encapsulation;if(s===Un.None||s===Un.Emulated)return null}return Rn(r,t)}(n,e.parent,t)}function Cs(n,e,t,r,s){dt(n)?n.insertBefore(e,t,r,s):e.insertBefore(t,r,s)}function Lm(n,e,t){dt(n)?n.appendChild(e,t):e.appendChild(t)}function Vm(n,e,t,r,s){null!==r?Cs(n,e,t,r,s):Lm(n,e,t)}function _c(n,e){return dt(n)?n.parentNode(e):e.parentNode}function jm(n,e,t){return $m(n,e,t)}let $m=function Bm(n,e,t){return 40&n.type?Rn(n,t):null};function Cc(n,e,t,r){const s=km(n,r,e),i=e[11],a=jm(r.parent||e[6],r,e);if(null!=s)if(Array.isArray(t))for(let c=0;c<t.length;c++)Vm(i,s,t[c],a,!1);else Vm(i,s,t,a,!1)}function wc(n,e){if(null!==e){const t=e.type;if(3&t)return Rn(e,n);if(4&t)return vd(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return wc(n,r);{const s=n[e.index];return qn(s)?vd(-1,s):_t(s)}}if(32&t)return ud(e,n)()||_t(n[e.index]);{const r=Hm(n,e);return null!==r?Array.isArray(r)?r[0]:wc(Vo(n[16]),r):wc(n,e.next)}}return null}function Hm(n,e){return null!==e?n[16][6].projection[e.projection]:null}function vd(n,e){const t=10+n+1;if(t<e.length){const r=e[t],s=r[1].firstChild;if(null!==s)return wc(r,s)}return e[7]}function _d(n,e,t,r,s,i,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&qt(_t(a),r),t.flags|=4),64!=(64&t.flags))if(8&c)_d(n,e,t.child,r,s,i,!1),di(e,n,s,a,i);else if(32&c){const l=ud(t,r);let u;for(;u=l();)di(e,n,s,u,i);di(e,n,s,a,i)}else 16&c?zm(n,e,r,t,s,i):di(e,n,s,a,i);t=o?t.projectionNext:t.next}}function jo(n,e,t,r,s,i){_d(t,r,n.firstChild,e,s,i,!1)}function zm(n,e,t,r,s,i){const o=t[16],c=o[6].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)di(e,n,s,c[l],i);else _d(n,e,c,o[3],s,i,!0)}function Gm(n,e,t){dt(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Cd(n,e,t){dt(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Wm(n,e,t){let r=n.length;for(;;){const s=n.indexOf(e,t);if(-1===s)return s;if(0===s||n.charCodeAt(s-1)<=32){const i=e.length;if(s+i===r||n.charCodeAt(s+i)<=32)return s}t=s+1}}const Qm="ng-template";function PT(n,e,t){let r=0;for(;r<n.length;){let s=n[r++];if(t&&"class"===s){if(s=n[r],-1!==Wm(s.toLowerCase(),e,0))return!0}else if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}}return!1}function Jm(n){return 4===n.type&&n.value!==Qm}function NT(n,e,t){return e===(4!==n.type||t?n.value:Qm)}function OT(n,e,t){let r=4;const s=n.attrs||[],i=function LT(n){for(let e=0;e<n.length;e++)if(Vg(n[e]))return e;return n.length}(s);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!NT(n,c,t)||""===c&&1===e.length){if(Gn(r))return!1;o=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!PT(n.attrs,l,t)){if(Gn(r))return!1;o=!0}continue}const d=kT(8&r?"class":c,s,Jm(n),t);if(-1===d){if(Gn(r))return!1;o=!0;continue}if(""!==l){let h;h=d>i?"":s[d+1].toLowerCase();const p=8&r?h:null;if(p&&-1!==Wm(p,l,0)||2&r&&l!==h){if(Gn(r))return!1;o=!0}}}}else{if(!o&&!Gn(r)&&!Gn(c))return!1;if(o&&Gn(c))continue;o=!1,r=c|1&r}}return Gn(r)||o}function Gn(n){return 0==(1&n)}function kT(n,e,t,r){if(null===e)return-1;let s=0;if(r||!t){let i=!1;for(;s<e.length;){const o=e[s];if(o===n)return s;if(3===o||6===o)i=!0;else{if(1===o||2===o){let a=e[++s];for(;"string"==typeof a;)a=e[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=i?1:2}return-1}return function VT(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Km(n,e,t=!1){for(let r=0;r<e.length;r++)if(OT(n,e[r],t))return!0;return!1}function jT(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let s=0;s<n.length;s++)if(n[s]!==r[s])continue e;return!0}}return!1}function Ym(n,e){return n?":not("+e.trim()+")":e}function BT(n){let e=n[0],t=1,r=2,s="",i=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?s+="."+o:4&r&&(s+=" "+o);else""!==s&&!Gn(o)&&(e+=Ym(i,s),s=""),r=o,i=i||!Gn(r);t++}return""!==s&&(e+=Ym(i,s)),e}const De={};function O(n){Zm(Ve(),q(),Xt()+n,!1)}function Zm(n,e,t,r){if(!r)if(3==(3&e[2])){const i=n.preOrderCheckHooks;null!==i&&nc(e,i,t)}else{const i=n.preOrderHooks;null!==i&&rc(e,i,0,t)}qr(t)}function bc(n,e){return n<<17|e<<2}function Wn(n){return n>>17&32767}function wd(n){return 2|n}function Dr(n){return(131068&n)>>2}function bd(n,e){return-131069&n|e<<2}function Dd(n){return 1|n}function ly(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r],i=t[r+1];if(-1!==i){const o=n.data[i];Vu(s),o.contentQueries(2,e[i],i)}}}function Bo(n,e,t,r,s,i,o,a,c,l){const u=e.blueprint.slice();return u[0]=s,u[2]=140|r,Eg(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=c||n&&n[12]||null,u[9]=l||n&&n[9]||null,u[6]=i,u[16]=2==e.type?n[16]:u,u}function hi(n,e,t,r,s){let i=n.data[e];if(null===i)i=function Pd(n,e,t,r,s){const i=xg(),o=Ou(),c=n.data[e]=function sx(n,e,t,r,s,i){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,t,e,r,s);return null===n.firstChild&&(n.firstChild=c),null!==i&&(o?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c)),c}(n,e,t,r,s),function M0(){return be.lFrame.inI18n}()&&(i.flags|=64);else if(64&i.type){i.type=t,i.value=r,i.attrs=s;const o=function vo(){const n=be.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();i.injectorIndex=null===o?-1:o.injectorIndex}return rr(i,!0),i}function fi(n,e,t,r){if(0===t)return-1;const s=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return s}function $o(n,e,t){Xa(e);try{const r=n.viewQuery;null!==r&&$d(1,r,t);const s=n.template;null!==s&&uy(n,e,s,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ly(n,e),n.staticViewQueries&&$d(2,n.viewQuery,t);const i=n.components;null!==i&&function tx(n,e){for(let t=0;t<e.length;t++)bx(n,e[t])}(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,ec()}}function pi(n,e,t,r){const s=e[2];if(256!=(256&s)){Xa(e);try{Eg(e),function Ig(n){return be.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&uy(n,e,t,2,r);const o=3==(3&s);if(o){const l=n.preOrderCheckHooks;null!==l&&nc(e,l,null)}else{const l=n.preOrderHooks;null!==l&&rc(e,l,0,null),ju(e,0)}if(function Cx(n){for(let e=dd(n);null!==e;e=hd(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const s=t[r],i=s[3];0==(1024&s[2])&&Nu(i,1),s[2]|=1024}}}(e),function _x(n){for(let e=dd(n);null!==e;e=hd(e))for(let t=10;t<e.length;t++){const r=e[t],s=r[1];Pu(r)&&pi(s,r,s.template,r[8])}}(e),null!==n.contentQueries&&ly(n,e),o){const l=n.contentCheckHooks;null!==l&&nc(e,l)}else{const l=n.contentHooks;null!==l&&rc(e,l,1),ju(e,1)}!function XT(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)qr(~s);else{const i=s,o=t[++r],a=t[++r];T0(o,i),a(2,e[i])}}}finally{qr(-1)}}(n,e);const a=n.components;null!==a&&function ex(n,e){for(let t=0;t<e.length;t++)wx(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&$d(2,c,r),o){const l=n.viewCheckHooks;null!==l&&nc(e,l)}else{const l=n.viewHooks;null!==l&&rc(e,l,2),ju(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-73,1024&e[2]&&(e[2]&=-1025,Nu(e[3],-1))}finally{ec()}}}function nx(n,e,t,r){const s=e[10],o=Sg(e);try{!o&&s.begin&&s.begin(),o&&$o(n,e,r),pi(n,e,t,r)}finally{!o&&s.end&&s.end()}}function uy(n,e,t,r,s){const i=Xt(),o=2&r;try{qr(-1),o&&e.length>20&&Zm(n,e,20,!1),t(r,s)}finally{qr(i)}}function dy(n,e,t){if(Su(e)){const s=e.directiveEnd;for(let i=e.directiveStart;i<s;i++){const o=n.data[i];o.contentQueries&&o.contentQueries(1,t[i],i)}}}function Nd(n,e,t){!Tg()||(function dx(n,e,t,r){const s=t.directiveStart,i=t.directiveEnd;n.firstCreatePass||wo(t,e),qt(r,e);const o=t.initialInputs;for(let a=s;a<i;a++){const c=n.data[a],l=zn(c);l&&mx(e,t,c);const u=bo(e,n,a,t);qt(u,e),null!==o&&yx(0,a-s,u,c,0,o),l&&(yn(t.index,e)[8]=u)}}(n,e,t,Rn(t,e)),128==(128&t.flags)&&function hx(n,e,t){const r=t.directiveStart,s=t.directiveEnd,o=t.index,a=function x0(){return be.lFrame.currentDirectiveIndex}();try{qr(o);for(let c=r;c<s;c++){const l=n.data[c],u=e[c];Fu(c),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&_y(l,u)}}finally{qr(-1),Fu(a)}}(n,e,t))}function Od(n,e,t=Rn){const r=e.localNames;if(null!==r){let s=e.index+1;for(let i=0;i<r.length;i+=2){const o=r[i+1],a=-1===o?t(e,n):n[o];n[s++]=a}}}function hy(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Ec(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Ec(n,e,t,r,s,i,o,a,c,l){const u=20+r,d=u+s,h=function rx(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:De);return t}(u,d),p="function"==typeof l?l():l;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1}}function gy(n,e,t,r){const s=Ey(e);null===t?s.push(r):(s.push(t),n.firstCreatePass&&My(n).push(r,s.length-1))}function my(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const s=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,s):t[r]=[e,s]}return t}function Cn(n,e,t,r,s,i,o,a){const c=Rn(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(Iy(n,t,u,r,s),Ja(e)&&function ax(n,e){const t=yn(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function ox(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),s=null!=o?o(s,e.value||"",r):s,dt(i)?i.setProperty(c,r,s):$u(r)||(c.setProperty?c.setProperty(r,s):c[r]=s))}function kd(n,e,t,r){let s=!1;if(Tg()){const i=function fx(n,e,t){const r=n.directiveRegistry;let s=null;if(r)for(let i=0;i<r.length;i++){const o=r[i];Km(t,o.selectors,!1)&&(s||(s=[]),cc(wo(t,e),n,o.type),zn(o)?(Cy(n,t),s.unshift(o)):s.push(o))}return s}(n,e,t),o=null===r?null:{"":-1};if(null!==i){s=!0,wy(t,n.data.length,i.length);for(let u=0;u<i.length;u++){const d=i[u];d.providersResolver&&d.providersResolver(d)}let a=!1,c=!1,l=fi(n,e,i.length,null);for(let u=0;u<i.length;u++){const d=i[u];t.mergedAttrs=ic(t.mergedAttrs,d.hostAttrs),by(n,t,e,l,d),gx(l,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),l++}!function ix(n,e){const r=e.directiveEnd,s=n.data,i=e.attrs,o=[];let a=null,c=null;for(let l=e.directiveStart;l<r;l++){const u=s[l],d=u.inputs,h=null===i||Jm(e)?null:vx(d,i);o.push(h),a=my(d,l,a),c=my(u.outputs,l,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}(n,t)}o&&function px(n,e,t){if(e){const r=n.localNames=[];for(let s=0;s<e.length;s+=2){const i=t[e[s+1]];if(null==i)throw new ne(-301,!1);r.push(e[s],i)}}}(t,r,o)}return t.mergedAttrs=ic(t.mergedAttrs,t.attrs),s}function vy(n,e,t,r,s,i){const o=i.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function ux(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(r,s,o)}}function _y(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Cy(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function gx(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;zn(e)&&(t[""]=n)}}function wy(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function by(n,e,t,r,s){n.data[r]=s;const i=s.factory||(s.factory=_s(s.type)),o=new _o(i,zn(s),null);n.blueprint[r]=o,t[r]=o,vy(n,e,0,r,fi(n,t,s.hostVars,De),s)}function mx(n,e,t){const r=Rn(e,n),s=hy(t),i=n[10],o=Mc(n,Bo(n,s,null,t.onPush?64:16,r,e,i,i.createRenderer(r,t),null,null));n[e.index]=o}function ar(n,e,t,r,s,i){const o=Rn(n,e);!function Fd(n,e,t,r,s,i,o){if(null==i)dt(n)?n.removeAttribute(e,s,t):e.removeAttribute(s);else{const a=null==o?we(i):o(i,r||"",s);dt(n)?n.setAttribute(e,s,a,t):t?e.setAttributeNS(t,s,a):e.setAttribute(s,a)}}(e[11],o,i,n.value,t,r,s)}function yx(n,e,t,r,s,i){const o=i[e];if(null!==o){const a=r.setInput;for(let c=0;c<o.length;){const l=o[c++],u=o[c++],d=o[c++];null!==a?r.setInput(t,d,l,u):t[u]=d}}}function vx(n,e){let t=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;n.hasOwnProperty(s)&&(null===t&&(t=[]),t.push(s,n[s],e[r+1])),r+=2}else r+=2;else r+=4}return t}function Dy(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function wx(n,e){const t=yn(e,n);if(Pu(t)){const r=t[1];80&t[2]?pi(r,t,r.template,t[8]):t[5]>0&&Ld(t)}}function Ld(n){for(let r=dd(n);null!==r;r=hd(r))for(let s=10;s<r.length;s++){const i=r[s];if(1024&i[2]){const o=i[1];pi(o,i,o.template,i[8])}else i[5]>0&&Ld(i)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const s=yn(t[r],n);Pu(s)&&s[5]>0&&Ld(s)}}function bx(n,e){const t=yn(e,n),r=t[1];(function Dx(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),$o(r,t,t[8])}function Mc(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Vd(n){for(;n;){n[2]|=64;const e=Vo(n);if(r0(n)&&!e)return n;n=e}return null}function Sy(n){!function jd(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=od(t),s=r[1];nx(s,r,s.template,t)}}(n[8])}function $d(n,e,t){Vu(0),e(n,t)}const Ex=(()=>Promise.resolve(null))();function Ey(n){return n[7]||(n[7]=[])}function My(n){return n.cleanup||(n.cleanup=[])}function xy(n,e){const t=n[9],r=t?t.get(Lo,null):null;r&&r.handleError(e)}function Iy(n,e,t,r,s){for(let i=0;i<t.length;){const o=t[i++],a=t[i++],c=e[o],l=n.data[o];null!==l.setInput?l.setInput(c,s,r,a):c[a]=s}}function Sr(n,e,t){const r=Ya(e,n);!function Pm(n,e,t){dt(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function Tc(n,e,t){let r=t?n.styles:null,s=t?n.classes:null,i=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?i=a:1==i?s=gu(s,a):2==i&&(r=gu(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=s:n.classesWithoutHost=s}const Ud=new _e("INJECTOR",-1);class Ay{get(e,t=To){if(t===To){const r=new Error(`NullInjectorError: No provider for ${He(e)}!`);throw r.name="NullInjectorError",r}return t}}const Hd=new _e("Set Injector scope."),Uo={},xx={};let qd;function Ry(){return void 0===qd&&(qd=new Ay),qd}function Py(n,e=null,t=null,r){const s=Ny(n,e,t,r);return s._resolveInjectorDefTypes(),s}function Ny(n,e=null,t=null,r){return new Ix(n,t,e||Ry(),r)}class Ix{constructor(e,t,r,s=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&sr(t,a=>this.processProvider(a,e,t)),sr([e],a=>this.processInjectorType(a,[],i)),this.records.set(Ud,gi(void 0,this));const o=this.records.get(Hd);this.scope=null!=o?o.value:null,this.source=s||("object"==typeof e?null:He(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=To,r=Ce.Default){this.assertNotDestroyed();const s=nm(this),i=Br(void 0);try{if(!(r&Ce.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function Lx(n){return"function"==typeof n||"object"==typeof n&&n instanceof _e}(e)&&yu(e);a=c&&this.injectableDefInScope(c)?gi(zd(e),Uo):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Ce.Self?Ry():this.parent).get(e,t=r&Ce.Optional&&t===To?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[hc]=o[hc]||[]).unshift(He(e)),s)throw o;return function fM(n,e,t,r){const s=n[hc];throw e[tm]&&s.unshift(e[tm]),n.message=function pM(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let s=He(e);if(Array.isArray(e))s=e.map(He).join(" -> ");else if("object"==typeof e){let i=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):He(a)))}s=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${s}]: ${n.replace(aM,"\n  ")}`}("\n"+n.message,s,t,r),n.ngTokenPath=s,n[hc]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Br(i),nm(s)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,s)=>e.push(He(s))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processInjectorType(e,t,r){if(!(e=Me(e)))return!1;let s=dg(e);const i=null==s&&e.ngModule||void 0,o=void 0===i?e:i,a=-1!==r.indexOf(o);if(void 0!==i&&(s=dg(i)),null==s)return!1;if(null!=s.imports&&!a){let u;r.push(o);try{sr(s.imports,d=>{this.processInjectorType(d,t,r)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:p}=u[d];sr(p,y=>this.processProvider(y,h,p||Ye))}}this.injectorDefTypes.add(o);const c=_s(o)||(()=>new o);this.records.set(o,gi(c,Uo));const l=s.providers;if(null!=l&&!a){const u=e;sr(l,d=>this.processProvider(d,u,l))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,r){let s=mi(e=Me(e))?e:Me(e&&e.provide);const i=function Rx(n,e,t){return ky(n)?gi(void 0,n.useValue):gi(Oy(n),Uo)}(e);if(mi(e)||!0!==e.multi)this.records.get(s);else{let o=this.records.get(s);o||(o=gi(void 0,Uo,!0),o.factory=()=>Yu(o.multi),this.records.set(s,o)),s=e,o.multi.push(e)}this.records.set(s,i)}hydrate(e,t){return t.value===Uo&&(t.value=xx,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Fx(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Me(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function zd(n){const e=yu(n),t=null!==e?e.factory:_s(n);if(null!==t)return t;if(n instanceof _e)throw new ne(204,!1);if(n instanceof Function)return function Ax(n){const e=n.length;if(e>0)throw Mo(e,"?"),new ne(204,!1);const t=function qE(n){const e=n&&(n[qa]||n[hg]);if(e){const t=function zE(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ne(204,!1)}function Oy(n,e,t){let r;if(mi(n)){const s=Me(n);return _s(s)||zd(s)}if(ky(n))r=()=>Me(n.useValue);else if(function Nx(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Yu(n.deps||[]));else if(function Px(n){return!(!n||!n.useExisting)}(n))r=()=>X(Me(n.useExisting));else{const s=Me(n&&(n.useClass||n.provide));if(!function kx(n){return!!n.deps}(n))return _s(s)||zd(s);r=()=>new s(...Yu(n.deps))}return r}function gi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ky(n){return null!==n&&"object"==typeof n&&lM in n}function mi(n){return"function"==typeof n}let tn=(()=>{class n{static create(t,r){if(Array.isArray(t))return Py({name:""},r,t,"");{const s=t.name??"";return Py({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=To,n.NULL=new Ay,n.\u0275prov=ce({token:n,providedIn:"any",factory:()=>X(Ud)}),n.__NG_ELEMENT_ID__=-1,n})();function zx(n,e){tc(od(n)[1],Mt())}function qe(n){let e=function Wy(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let s;if(zn(n))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,"");s=e.\u0275dir}if(s){if(t){r.push(s);const o=n;o.inputs=Qd(n.inputs),o.declaredInputs=Qd(n.declaredInputs),o.outputs=Qd(n.outputs);const a=s.hostBindings;a&&Jx(n,a);const c=s.viewQuery,l=s.contentQueries;if(c&&Wx(n,c),l&&Qx(n,l),pu(n.inputs,s.inputs),pu(n.declaredInputs,s.declaredInputs),pu(n.outputs,s.outputs),zn(s)&&s.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(s.data.animation)}}const i=s.features;if(i)for(let o=0;o<i.length;o++){const a=i[o];a&&a.ngInherit&&a(n),a===qe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Gx(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const s=n[r];s.hostVars=e+=s.hostVars,s.hostAttrs=ic(s.hostAttrs,t=ic(t,s.hostAttrs))}}(r)}function Qd(n){return n===Ws?{}:n===Ye?[]:n}function Wx(n,e){const t=n.viewQuery;n.viewQuery=t?(r,s)=>{e(r,s),t(r,s)}:e}function Qx(n,e){const t=n.contentQueries;n.contentQueries=t?(r,s,i)=>{e(r,s,i),t(r,s,i)}:e}function Jx(n,e){const t=n.hostBindings;n.hostBindings=t?(r,s)=>{e(r,s),t(r,s)}:e}let xc=null;function yi(){if(!xc){const n=Ge.Symbol;if(n&&n.iterator)xc=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(xc=r)}}}return xc}function Ho(n){return!!Jd(n)&&(Array.isArray(n)||!(n instanceof Map)&&yi()in n)}function Jd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function cr(n,e,t){return n[e]=t}function zt(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ws(n,e,t,r){const s=zt(n,e,t);return zt(n,e+1,r)||s}function Jn(n,e,t,r){const s=q();return zt(s,Xs(),e)&&(Ve(),ar(ht(),s,n,e,t,r)),Jn}function _i(n,e,t,r){return zt(n,Xs(),t)?e+we(t)+r:De}function Ci(n,e,t,r,s,i){const a=ws(n,function wr(){return be.lFrame.bindingIndex}(),t,s);return br(2),a?e+we(t)+r+we(s)+i:De}function oe(n,e,t,r,s,i,o,a){const c=q(),l=Ve(),u=n+20,d=l.firstCreatePass?function nI(n,e,t,r,s,i,o,a,c){const l=e.consts,u=hi(e,n,4,o||null,Hr(l,a));kd(e,t,u,Hr(l,c)),tc(e,u);const d=u.tViews=Ec(2,u,r,s,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,r,s,i,o):l.data[u];rr(d,!1);const h=c[11].createComment("");Cc(l,c,h,d),qt(h,c),Mc(c,c[u]=Dy(h,c,h,d)),Ka(d)&&Nd(l,c,d),null!=o&&Od(c,d,a)}function Ac(n){return Zs(function E0(){return be.lFrame.contextLView}(),20+n)}function V(n,e=Ce.Default){const t=q();return null===t?X(n,e):zg(Mt(),t,Me(n),e)}function eh(){throw new Error("invalid")}function B(n,e,t){const r=q();return zt(r,Xs(),e)&&Cn(Ve(),ht(),r,n,e,r[11],t,!1),B}function th(n,e,t,r,s){const o=s?"class":"style";Iy(n,t,e.inputs[o],o,r)}function x(n,e,t,r){const s=q(),i=Ve(),o=20+n,a=s[11],c=s[o]=pd(a,e,function F0(){return be.lFrame.currentNamespace}()),l=i.firstCreatePass?function DI(n,e,t,r,s,i,o){const a=e.consts,l=hi(e,n,2,s,Hr(a,i));return kd(e,t,l,Hr(a,o)),null!==l.attrs&&Tc(l,l.attrs,!1),null!==l.mergedAttrs&&Tc(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,i,s,0,e,t,r):i.data[o];rr(l,!0);const u=l.mergedAttrs;null!==u&&sc(a,c,u);const d=l.classes;null!==d&&Cd(a,c,d);const h=l.styles;return null!==h&&Gm(a,c,h),64!=(64&l.flags)&&Cc(i,s,c,l),0===function C0(){return be.lFrame.elementDepthCount}()&&qt(c,s),function w0(){be.lFrame.elementDepthCount++}(),Ka(l)&&(Nd(i,s,l),dy(i,l,s)),null!==r&&Od(s,l),x}function T(){let n=Mt();Ou()?ku():(n=n.parent,rr(n,!1));const e=n;!function b0(){be.lFrame.elementDepthCount--}();const t=Ve();return t.firstCreatePass&&(tc(t,n),Su(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function $0(n){return 0!=(16&n.flags)}(e)&&th(t,e,q(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function U0(n){return 0!=(32&n.flags)}(e)&&th(t,e,q(),e.stylesWithoutHost,!1),T}function xe(n,e,t,r){return x(n,e,t,r),T(),xe}function wt(n,e,t){const r=q(),s=Ve(),i=n+20,o=s.firstCreatePass?function SI(n,e,t,r,s){const i=e.consts,o=Hr(i,r),a=hi(e,n,8,"ng-container",o);return null!==o&&Tc(a,o,!0),kd(e,t,a,Hr(i,s)),null!==e.queries&&e.queries.elementStart(e,a),a}(i,s,r,e,t):s.data[i];rr(o,!0);const a=r[i]=r[11].createComment("");return Cc(s,r,a,o),qt(a,r),Ka(o)&&(Nd(s,r,o),dy(s,o,r)),null!=t&&Od(r,o),wt}function bt(){let n=Mt();const e=Ve();return Ou()?ku():(n=n.parent,rr(n,!1)),e.firstCreatePass&&(tc(e,n),Su(n)&&e.queries.elementEnd(n)),bt}function yt(){return q()}function zo(n){return!!n&&"function"==typeof n.then}function pv(n){return!!n&&"function"==typeof n.subscribe}const nh=pv;function K(n,e,t,r){const s=q(),i=Ve(),o=Mt();return function mv(n,e,t,r,s,i,o,a){const c=Ka(r),u=n.firstCreatePass&&My(n),d=e[8],h=Ey(e);let p=!0;if(3&r.type||a){const j=Rn(r,e),U=a?a(j):j,P=h.length,Y=a?ae=>a(_t(ae[r.index])):r.index;if(dt(t)){let ae=null;if(!a&&c&&(ae=function EI(n,e,t,r){const s=n.cleanup;if(null!=s)for(let i=0;i<s.length-1;i+=2){const o=s[i];if(o===t&&s[i+1]===r){const a=e[7],c=s[i+2];return a.length>c?a[c]:null}"string"==typeof o&&(i+=2)}return null}(n,e,s,r.index)),null!==ae)(ae.__ngLastListenerFn__||ae).__ngNextListenerFn__=i,ae.__ngLastListenerFn__=i,p=!1;else{i=rh(r,e,d,i,!1);const Ae=t.listen(U,s,i);h.push(i,Ae),u&&u.push(s,Y,P,P+1)}}else i=rh(r,e,d,i,!0),U.addEventListener(s,i,o),h.push(i),u&&u.push(s,Y,P,o)}else i=rh(r,e,d,i,!1);const y=r.outputs;let A;if(p&&null!==y&&(A=y[s])){const j=A.length;if(j)for(let U=0;U<j;U+=2){const at=e[A[U]][A[U+1]].subscribe(i),lt=h.length;h.push(i,at),u&&u.push(s,r.index,lt,-(lt+1))}}}(i,s,s[11],o,n,e,!!t,r),K}function yv(n,e,t,r){try{return!1!==t(r)}catch(s){return xy(n,s),!1}}function rh(n,e,t,r,s){return function i(o){if(o===Function)return r;const a=2&n.flags?yn(n.index,e):e;0==(32&e[2])&&Vd(a);let c=yv(e,0,r,o),l=i.__ngNextListenerFn__;for(;l;)c=yv(e,0,l,o)&&c,l=l.__ngNextListenerFn__;return s&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Z(n=1){return function A0(n){return(be.lFrame.contextLView=function R0(n,e){for(;n>0;)e=e[15],n--;return e}(n,be.lFrame.contextLView))[8]}(n)}function MI(n,e){let t=null;const r=function FT(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let s=0;s<e.length;s++){const i=e[s];if("*"!==i){if(null===r?Km(n,i,!0):jT(r,i))return s}else t=s}return t}function Pc(n){const e=q()[16][6];if(!e.projection){const r=e.projection=Mo(n?n.length:1,null),s=r.slice();let i=e.child;for(;null!==i;){const o=n?MI(i,n):0;null!==o&&(s[o]?s[o].projectionNext=i:r[o]=i,s[o]=i),i=i.next}}}function Go(n,e=0,t){const r=q(),s=Ve(),i=hi(s,20+n,16,null,t||null);null===i.projection&&(i.projection=e),ku(),64!=(64&i.flags)&&function IT(n,e,t){zm(e[11],0,e,t,km(n,t,e),jm(t.parent||e[6],t,e))}(s,r,i)}function Wo(n,e,t){return sh(n,"",e,"",t),Wo}function sh(n,e,t,r,s){const i=q(),o=_i(i,e,t,r);return o!==De&&Cn(Ve(),ht(),i,n,o,i[11],s,!1),sh}function Mv(n,e,t,r,s){const i=n[t+1],o=null===e;let a=r?Wn(i):Dr(i),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];II(n[a],e)&&(c=!0,n[a+1]=r?Dd(u):wd(u)),a=r?Wn(u):Dr(u)}c&&(n[t+1]=r?wd(i):Dd(i))}function II(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ai(n,e)>=0}function Er(n,e){return function Kn(n,e,t,r){const s=q(),i=Ve(),o=br(2);i.firstUpdatePass&&function kv(n,e,t,r){const s=n.data;if(null===s[t+1]){const i=s[Xt()],o=function Ov(n,e){return e>=n.expandoStartIndex}(n,t);(function jv(n,e){return 0!=(n.flags&(e?16:32))})(i,r)&&null===e&&!o&&(e=!1),e=function VI(n,e,t,r){const s=function Lu(n){const e=be.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let i=r?e.residualClasses:e.residualStyles;if(null===s)0===(r?e.classBindings:e.styleBindings)&&(t=Qo(t=ih(null,n,e,t,r),e.attrs,r),i=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==s)if(t=ih(s,n,e,t,r),null===i){let c=function jI(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Dr(r))return n[Wn(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=ih(null,n,e,c[1],r),c=Qo(c,e.attrs,r),function BI(n,e,t,r){n[Wn(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else i=function $I(n,e,t){let r;const s=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<s;i++)r=Qo(r,n[i].hostAttrs,t);return Qo(r,e.attrs,t)}(n,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),t}(s,i,e,r),function TI(n,e,t,r,s,i){let o=i?e.classBindings:e.styleBindings,a=Wn(o),c=Dr(o);n[r]=t;let u,l=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||ai(d,u)>0)&&(l=!0)}else u=t;if(s)if(0!==c){const h=Wn(n[a+1]);n[r+1]=bc(h,a),0!==h&&(n[h+1]=bd(n[h+1],r)),n[a+1]=function HT(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=bc(a,0),0!==a&&(n[a+1]=bd(n[a+1],r)),a=r;else n[r+1]=bc(c,0),0===a?a=r:n[c+1]=bd(n[c+1],r),c=r;l&&(n[r+1]=wd(n[r+1])),Mv(n,u,r,!0),Mv(n,u,r,!1),function xI(n,e,t,r,s){const i=s?n.residualClasses:n.residualStyles;null!=i&&"string"==typeof e&&ai(i,e)>=0&&(t[r+1]=Dd(t[r+1]))}(e,u,n,r,i),o=bc(a,c),i?e.classBindings=o:e.styleBindings=o}(s,i,e,t,o,r)}}(i,n,o,r),e!==De&&zt(s,o,e)&&function Lv(n,e,t,r,s,i,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1];Nc(function ty(n){return 1==(1&n)}(l)?Vv(c,e,t,s,Dr(l),o):void 0)||(Nc(i)||function ey(n){return 2==(2&n)}(l)&&(i=Vv(c,null,t,s,a,o)),function RT(n,e,t,r,s){const i=dt(n);if(e)s?i?n.addClass(t,r):t.classList.add(r):i?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:_n.DashCase;if(null==s)i?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof s&&s.endsWith("!important");a&&(s=s.slice(0,-10),o|=_n.Important),i?n.setStyle(t,r,s,o):t.style.setProperty(r,s,a?"important":"")}}}(r,o,Ya(Xt(),t),s,i))}(i,i.data[Xt()],s,s[11],n,s[o+1]=function qI(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=He(Wr(n)))),n}(e,t),r,o)}(n,e,null,!0),Er}function ih(n,e,t,r,s){let i=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(i=e[a],r=Qo(r,i.hostAttrs,s),i!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Qo(n,e,t){const r=t?1:2;let s=-1;if(null!==e)for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?s=o:s===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),vn(n,o,!!t||e[++i]))}return void 0===n?null:n}function Vv(n,e,t,r,s,i){const o=null===e;let a;for(;s>0;){const c=n[s],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let h=t[s+1];h===De&&(h=d?Ye:void 0);let p=d?Qu(h,r):u===r?h:void 0;if(l&&!Nc(p)&&(p=Qu(c,r)),Nc(p)&&(a=p,o))return a;const y=n[s+1];s=o?Wn(y):Dr(y)}if(null!==e){let c=i?e.residualClasses:e.residualStyles;null!=c&&(a=Qu(c,r))}return a}function Nc(n){return void 0!==n}function $(n,e=""){const t=q(),r=Ve(),s=n+20,i=r.firstCreatePass?hi(r,s,1,e,null):r.data[s],o=t[s]=function fd(n,e){return dt(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Cc(r,t,o,i),rr(i,!1)}function ft(n){return tt("",n,""),ft}function tt(n,e,t){const r=q(),s=_i(r,n,e,t);return s!==De&&Sr(r,Xt(),s),tt}function oh(n,e,t,r,s){const i=q(),o=Ci(i,n,e,t,r,s);return o!==De&&Sr(i,Xt(),o),oh}const bs=void 0;var uA=["en",[["a","p"],["AM","PM"],bs],[["AM","PM"],bs,bs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bs,"{1} 'at' {0}",bs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lA(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Ii={};function nn(n){const e=function dA(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=i_(e);if(t)return t;const r=e.split("-")[0];if(t=i_(r),t)return t;if("en"===r)return uA;throw new Error(`Missing locale data for the locale "${n}".`)}function i_(n){return n in Ii||(Ii[n]=Ge.ng&&Ge.ng.common&&Ge.ng.common.locales&&Ge.ng.common.locales[n]),Ii[n]}var te=(()=>((te=te||{})[te.LocaleId=0]="LocaleId",te[te.DayPeriodsFormat=1]="DayPeriodsFormat",te[te.DayPeriodsStandalone=2]="DayPeriodsStandalone",te[te.DaysFormat=3]="DaysFormat",te[te.DaysStandalone=4]="DaysStandalone",te[te.MonthsFormat=5]="MonthsFormat",te[te.MonthsStandalone=6]="MonthsStandalone",te[te.Eras=7]="Eras",te[te.FirstDayOfWeek=8]="FirstDayOfWeek",te[te.WeekendRange=9]="WeekendRange",te[te.DateFormat=10]="DateFormat",te[te.TimeFormat=11]="TimeFormat",te[te.DateTimeFormat=12]="DateTimeFormat",te[te.NumberSymbols=13]="NumberSymbols",te[te.NumberFormats=14]="NumberFormats",te[te.CurrencyCode=15]="CurrencyCode",te[te.CurrencySymbol=16]="CurrencySymbol",te[te.CurrencyName=17]="CurrencyName",te[te.Currencies=18]="Currencies",te[te.Directionality=19]="Directionality",te[te.PluralCase=20]="PluralCase",te[te.ExtraData=21]="ExtraData",te))();const Oc="en-US";let o_=Oc;function lh(n,e,t,r,s){if(n=Me(n),Array.isArray(n))for(let i=0;i<n.length;i++)lh(n[i],e,t,r,s);else{const i=Ve(),o=q();let a=mi(n)?n:Me(n.provide),c=Oy(n);const l=Mt(),u=1048575&l.providerIndexes,d=l.directiveStart,h=l.providerIndexes>>20;if(mi(n)||!n.multi){const p=new _o(c,s,V),y=dh(a,e,s?u:u+h,d);-1===y?(cc(wo(l,o),i,a),uh(i,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,s&&(l.providerIndexes+=1048576),t.push(p),o.push(p)):(t[y]=p,o[y]=p)}else{const p=dh(a,e,u+h,d),y=dh(a,e,u,u+h),A=p>=0&&t[p],j=y>=0&&t[y];if(s&&!j||!s&&!A){cc(wo(l,o),i,a);const U=function u1(n,e,t,r,s){const i=new _o(n,t,V);return i.multi=[],i.index=e,i.componentProviders=0,A_(i,s,r&&!t),i}(s?l1:c1,t.length,s,r,c);!s&&j&&(t[y].providerFactory=U),uh(i,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,s&&(l.providerIndexes+=1048576),t.push(U),o.push(U)}else uh(i,n,p>-1?p:y,A_(t[s?y:p],c,!s&&r));!s&&r&&j&&t[y].componentProviders++}}}function uh(n,e,t,r){const s=mi(e),i=function Ox(n){return!!n.useClass}(e);if(s||i){const c=(i?Me(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!s&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function A_(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function dh(n,e,t,r){for(let s=t;s<r;s++)if(e[s]===n)return s;return-1}function c1(n,e,t,r){return hh(this.multi,[])}function l1(n,e,t,r){const s=this.multi;let i;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=bo(t,t[1],this.providerFactory.index,r);i=a.slice(0,o),hh(s,i);for(let c=o;c<a.length;c++)i.push(a[c])}else i=[],hh(s,i);return i}function hh(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function it(n,e=[]){return t=>{t.providersResolver=(r,s)=>function a1(n,e,t){const r=Ve();if(r.firstCreatePass){const s=zn(n);lh(t,r.data,r.blueprint,s,!0),lh(e,r.data,r.blueprint,s,!1)}}(r,s?s(n):n,e)}}class R_{}class f1{resolveComponentFactory(e){throw function h1(n){const e=Error(`No component factory found for ${He(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ri=(()=>{class n{}return n.NULL=new f1,n})();function p1(){return Pi(Mt(),q())}function Pi(n,e){return new rn(Rn(n,e))}let rn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=p1,n})();function g1(n){return n instanceof rn?n.nativeElement:n}class Xo{}let Mr=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function y1(){const n=q(),t=yn(Mt().index,n);return function m1(n){return n[11]}(nr(t)?t:n)}(),n})(),v1=(()=>{class n{}return n.\u0275prov=ce({token:n,providedIn:"root",factory:()=>null}),n})();class ea{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const _1=new ea("13.3.11"),fh={};function jc(n,e,t,r,s=!1){for(;null!==t;){const i=e[t.index];if(null!==i&&r.push(_t(i)),qn(i))for(let a=10;a<i.length;a++){const c=i[a],l=c[1].firstChild;null!==l&&jc(c[1],c,l,r)}const o=t.type;if(8&o)jc(n,e,t.child,r);else if(32&o){const a=ud(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=Hm(e,t);if(Array.isArray(a))r.push(...a);else{const c=Vo(e[16]);jc(c[1],c,a,r,!0)}}t=s?t.projectionNext:t.next}return r}class ta{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return jc(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(qn(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(gd(e,r),uc(t,r))}this._attachedToViewContainer=!1}Om(this._lView[1],this._lView)}onDestroy(e){gy(this._lView[1],this._lView,null,e)}markForCheck(){Vd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Bd(n,e,t){const r=e[10];r.begin&&r.begin();try{pi(n,e,n.template,t)}catch(s){throw xy(e,s),s}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function wT(n,e){jo(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,"");this._appRef=e}}class C1 extends ta{constructor(e){super(e),this._view=e}detectChanges(){Sy(this._view)}checkNoChanges(){}get context(){return null}}class N_ extends Ri{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=$t(e);return new ph(t,this.ngModule)}}function O_(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class ph extends R_{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function $T(n){return n.map(BT).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return O_(this.componentDef.inputs)}get outputs(){return O_(this.componentDef.outputs)}create(e,t,r,s){const i=(s=s||this.ngModule)?function b1(n,e){return{get:(t,r,s)=>{const i=n.get(t,fh,s);return i!==fh||r===fh?i:e.get(t,r,s)}}}(e,s.injector):e,o=i.get(Xo,Dg),a=i.get(v1,null),c=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=r?function py(n,e,t){if(dt(n))return n.selectRootElement(e,t===Un.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(c,r,this.componentDef.encapsulation):pd(o.createRenderer(null,this.componentDef),l,function w1(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(l)),d=this.componentDef.onPush?576:528,h=function Gy(n,e){return{components:[],scheduler:n||fT,clean:Ex,playerHandler:e||null,flags:0}}(),p=Ec(0,null,null,1,0,null,null,null,null,null),y=Bo(null,p,h,d,null,null,o,c,a,i);let A,j;Xa(y);try{const U=function qy(n,e,t,r,s,i){const o=t[1];t[20]=n;const c=hi(o,20,2,"#host",null),l=c.mergedAttrs=e.hostAttrs;null!==l&&(Tc(c,l,!0),null!==n&&(sc(s,n,l),null!==c.classes&&Cd(s,n,c.classes),null!==c.styles&&Gm(s,n,c.styles)));const u=r.createRenderer(n,e),d=Bo(t,hy(e),null,e.onPush?64:16,t[20],c,r,u,i||null,null);return o.firstCreatePass&&(cc(wo(c,t),o,e.type),Cy(o,c),wy(c,t.length,1)),Mc(t,d),t[20]=d}(u,this.componentDef,y,o,c);if(u)if(r)sc(c,u,["ng-version",_1.full]);else{const{attrs:P,classes:Y}=function UT(n){const e=[],t=[];let r=1,s=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===s?""!==i&&e.push(i,n[++r]):8===s&&t.push(i);else{if(!Gn(s))break;s=i}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);P&&sc(c,u,P),Y&&Y.length>0&&Cd(c,u,Y.join(" "))}if(j=Ru(p,20),void 0!==t){const P=j.projection=[];for(let Y=0;Y<this.ngContentSelectors.length;Y++){const ae=t[Y];P.push(null!=ae?Array.from(ae):null)}}A=function zy(n,e,t,r,s){const i=t[1],o=function lx(n,e,t){const r=Mt();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),by(n,r,e,fi(n,e,1,null),t));const s=bo(e,n,r.directiveStart,r);qt(s,e);const i=Rn(r,e);return i&&qt(i,e),s}(i,t,e);if(r.components.push(o),n[8]=o,s&&s.forEach(c=>c(o,e)),e.contentQueries){const c=Mt();e.contentQueries(1,o,c.directiveStart)}const a=Mt();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(qr(a.index),vy(t[1],a,0,a.directiveStart,a.directiveEnd,e),_y(e,o)),o}(U,this.componentDef,y,h,[zx]),$o(p,y,null)}finally{ec()}return new S1(this.componentType,A,Pi(j,y),y,j)}}class S1 extends class d1{}{constructor(e,t,r,s,i){super(),this.location=r,this._rootLView=s,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new C1(s),this.componentType=e}get injector(){return new ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Tr{}class k_{}const Ni=new Map;class V_ extends Tr{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new N_(this);const r=xn(e);this._bootstrapComponents=or(r.bootstrap),this._r3Injector=Ny(e,t,[{provide:Tr,useValue:this},{provide:Ri,useValue:this.componentFactoryResolver}],He(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=tn.THROW_IF_NOT_FOUND,r=Ce.Default){return e===tn||e===Tr||e===Ud?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class gh extends k_{constructor(e){super(),this.moduleType=e,null!==xn(e)&&function M1(n){const e=new Set;!function t(r){const s=xn(r,!0),i=s.id;null!==i&&(function F_(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${He(e)} vs ${He(e.name)}`)}(i,Ni.get(i),r),Ni.set(i,r));const o=or(s.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new V_(this.moduleType,e)}}function mh(n,e,t,r){return j_(q(),Zt(),n,e,t,r)}function na(n,e){const t=n[e];return t===De?void 0:t}function j_(n,e,t,r,s,i){const o=e+t;return zt(n,o,s)?cr(n,o+1,i?r.call(i,s):r(s)):na(n,o+1)}function U_(n,e,t,r,s,i,o,a,c){const l=e+t;return function Nn(n,e,t,r,s,i){const o=ws(n,e,t,r);return ws(n,e+2,s,i)||o}(n,l,s,i,o,a)?cr(n,l+4,c?r.call(c,s,i,o,a):r(s,i,o,a)):na(n,l+4)}function Se(n,e){const t=Ve();let r;const s=n+20;t.firstCreatePass?(r=function F1(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[s]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(s,r.onDestroy)):r=t.data[s];const i=r.factory||(r.factory=_s(r.type)),o=Br(V);try{const a=oc(!1),c=i();return oc(a),function rI(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,q(),s,c),c}finally{Br(o)}}function Ee(n,e,t){const r=n+20,s=q(),i=Zs(s,r);return ra(s,r)?j_(s,Zt(),e,i.transform,t,i):i.transform(t)}function q_(n,e,t,r){const s=n+20,i=q(),o=Zs(i,s);return ra(i,s)?function B_(n,e,t,r,s,i,o){const a=e+t;return ws(n,a,s,i)?cr(n,a+2,o?r.call(o,s,i):r(s,i)):na(n,a+2)}(i,Zt(),e,o.transform,t,r,o):o.transform(t,r)}function ra(n,e){return n[1].data[e].pure}function yh(n){return e=>{setTimeout(n,void 0,e)}}const ze=class j1 extends se{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let s=e,i=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;s=c.next?.bind(c),i=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(i=yh(i),s&&(s=yh(s)),o&&(o=yh(o)));const a=super.subscribe({next:s,error:i,complete:o});return e instanceof M&&e.add(a),a}};function B1(){return this._results[yi()]()}class vh{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=yi(),r=vh.prototype;r[t]||(r[t]=B1)}get changes(){return this._changes||(this._changes=new ze)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const s=Pn(e);(this._changesDetected=!function Z0(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let s=n[r],i=e[r];if(t&&(s=t(s),i=t(i)),i!==s)return!1}return!0}(r._results,s,t))&&(r._results=s,r.length=s.length,r.last=s[this.length-1],r.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let xr=(()=>{class n{}return n.__NG_ELEMENT_ID__=H1,n})();const $1=xr,U1=class extends $1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=Bo(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const i=this._declarationLView[19];return null!==i&&(r[19]=i.createEmbeddedView(t)),$o(t,r,e),new ta(r)}};function H1(){return Bc(Mt(),q())}function Bc(n,e){return 4&n.type?new U1(e,n,Pi(n,e)):null}let On=(()=>{class n{}return n.__NG_ELEMENT_ID__=q1,n})();function q1(){return Q_(Mt(),q())}const z1=On,G_=class extends z1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Pi(this._hostTNode,this._hostLView)}get injector(){return new ni(this._hostTNode,this._hostLView)}get parentInjector(){const e=ac(this._hostTNode,this._hostLView);if(Bg(e)){const t=ti(e,this._hostLView),r=ei(e);return new ni(t[1].data[r+8],t)}return new ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=W_(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const s=e.createEmbeddedView(t||{});return this.insert(s,r),s}createComponent(e,t,r,s,i){const o=e&&!function Eo(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,r=d.injector,s=d.projectableNodes,i=d.ngModuleRef}const c=o?e:new ph($t(e)),l=r||this.parentInjector;if(!i&&null==c.ngModule){const h=(o?l:this.parentInjector).get(Tr,null);h&&(i=h)}const u=c.create(l,s,void 0,i);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,s=r[1];if(function _0(n){return qn(n[3])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[3],h=new G_(d,d[6],d[3]);h.detach(h.indexOf(e))}}const i=this._adjustIndex(t),o=this._lContainer;!function DT(n,e,t,r){const s=10+r,i=t.length;r>0&&(t[s-1][4]=e),r<i-10?(e[4]=t[s],Kg(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function ST(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(s,r,o,i);const a=vd(i,o),c=r[11],l=_c(c,o[7]);return null!==l&&function CT(n,e,t,r,s,i){r[0]=s,r[6]=e,jo(n,r,t,1,s,i)}(s,o[6],c,r,l,a),e.attachToViewContainerRef(),Kg(_h(o),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=W_(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=gd(this._lContainer,t);r&&(uc(_h(this._lContainer),t),Om(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=gd(this._lContainer,t);return r&&null!=uc(_h(this._lContainer),t)?new ta(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function W_(n){return n[8]}function _h(n){return n[8]||(n[8]=[])}function Q_(n,e){let t;const r=e[n.index];if(qn(r))t=r;else{let s;if(8&n.type)s=_t(r);else{const i=e[11];s=i.createComment("");const o=Rn(n,e);Cs(i,_c(i,o),s,function xT(n,e){return dt(n)?n.nextSibling(e):e.nextSibling}(i,o),!1)}e[n.index]=t=Dy(r,e,s,n),Mc(e,t)}return new G_(t,n,e)}class Ch{constructor(e){this.queryList=e,this.matches=null}clone(){return new Ch(this.queryList)}setDirty(){this.queryList.setDirty()}}class wh{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,s=[];for(let i=0;i<r;i++){const o=t.getByIndex(i);s.push(this.queries[o.indexInDeclarationView].clone())}return new wh(s)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==X_(e,t).matches&&this.queries[t].setDirty()}}class J_{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class bh{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const s=null!==t?t.length:0,i=this.getByIndex(r).embeddedTView(e,s);i&&(i.indexInDeclarationView=r,null!==t?t.push(i):t=[i])}return null!==t?new bh(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Dh{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Dh(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){const i=r[s];this.matchTNodeWithReadOption(e,t,Q1(t,i)),this.matchTNodeWithReadOption(e,t,lc(t,e,i,!1,!1))}else r===xr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,lc(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const s=this.metadata.read;if(null!==s)if(s===rn||s===On||s===xr&&4&t.type)this.addMatch(t.index,-2);else{const i=lc(t,e,s,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Q1(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function K1(n,e,t,r){return-1===t?function J1(n,e){return 11&n.type?Pi(n,e):4&n.type?Bc(n,e):null}(e,n):-2===t?function Y1(n,e,t){return t===rn?Pi(e,n):t===xr?Bc(e,n):t===On?Q_(e,n):void 0}(n,e,r):bo(n,n[1],t,e)}function K_(n,e,t,r){const s=e[19].queries[r];if(null===s.matches){const i=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:K1(e,i[l],o[c+1],t.metadata.read))}s.matches=a}return s.matches}function Sh(n,e,t,r){const s=n.queries.getByIndex(t),i=s.matches;if(null!==i){const o=K_(n,e,s,t);for(let a=0;a<i.length;a+=2){const c=i[a];if(c>0)r.push(o[a/2]);else{const l=i[a+1],u=e[-c];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&Sh(h[1],h,l,r)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const p=d[h];Sh(p[1],p,l,r)}}}}}return r}function Ir(n){const e=q(),t=Ve(),r=Rg();Vu(r+1);const s=X_(t,r);if(n.dirty&&Sg(e)===(2==(2&s.metadata.flags))){if(null===s.matches)n.reset([]);else{const i=s.crossesNgTemplate?Sh(t,e,r,[]):K_(t,e,s,r);n.reset(i,g1),n.notifyOnChanges()}return!0}return!1}function Ds(n,e,t){const r=Ve();r.firstCreatePass&&(function Z_(n,e,t){null===n.queries&&(n.queries=new bh),n.queries.track(new Dh(e,t))}(r,new J_(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function Y_(n,e,t){const r=new vh(4==(4&t));gy(n,e,r,r.destroy),null===e[19]&&(e[19]=new wh),e[19].queries.push(new Ch(r))}(r,q(),e)}function Ar(){return function Z1(n,e){return n[19].queries[e].queryList}(q(),Rg())}function X_(n,e){return n.queries.getByIndex(e)}function Mh(n,e){return Bc(n,e)}function Hc(...n){}const Ph=new _e("Application Initializer");let Nh=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Hc,this.reject=Hc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,s)=>{this.resolve=r,this.reject=s})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const i=this.appInits[s]();if(zo(i))t.push(i);else if(nh(i)){const o=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(s=>{this.reject(s)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(X(Ph,8))},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ia=new _e("AppId",{providedIn:"root",factory:function mC(){return`${Oh()}${Oh()}${Oh()}`}});function Oh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yC=new _e("Platform Initializer"),qc=new _e("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vC=new _e("appBootstrapListener");let mR=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Kr=new _e("LocaleId",{providedIn:"root",factory:()=>dM(Kr,Ce.Optional|Ce.SkipSelf)||function yR(){return typeof $localize<"u"&&$localize.locale||Oc}()});class _R{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let _C=(()=>{class n{compileModuleSync(t){return new gh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),i=or(xn(t).declarations).reduce((o,a)=>{const c=$t(a);return c&&o.push(new ph(c)),o},[]);return new _R(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wR=(()=>Promise.resolve(0))();function kh(n){typeof Zone>"u"?wR.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class gt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ze(!1),this.onMicrotaskEmpty=new ze(!1),this.onStable=new ze(!1),this.onError=new ze(!1),typeof Zone>"u")throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&t,s.shouldCoalesceRunChangeDetection=r,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function bR(){let n=Ge.requestAnimationFrame,e=Ge.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function ER(n){const e=()=>{!function SR(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ge,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Lh(n),n.isCheckStableRunning=!0,Fh(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Lh(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,s,i,o,a)=>{try{return CC(n),t.invokeTask(s,i,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&e(),wC(n)}},onInvoke:(t,r,s,i,o,a,c)=>{try{return CC(n),t.invoke(s,i,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),wC(n)}},onHasTask:(t,r,s,i)=>{t.hasTask(s,i),r===s&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,Lh(n),Fh(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,s,i)=>(t.handleError(s,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,s){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+s,e,DR,Hc,Hc);try{return i.runTask(o,t,r)}finally{i.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const DR={};function Fh(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Lh(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function CC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function wC(n){n._nesting--,Fh(n)}class MR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ze,this.onMicrotaskEmpty=new ze,this.onStable=new ze,this.onError=new ze}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,s){return e.apply(t,r)}}let Vh=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gt.assertNotInAngularZone(),kh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())kh(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,s){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==i),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:s})}whenStable(t,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,s){return[]}}return n.\u0275fac=function(t){return new(t||n)(X(gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),TR=(()=>{class n{constructor(){this._applications=new Map,jh.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return jh.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class xR{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let jh=new xR,oa=null;const bC=new _e("AllowMultipleToken"),DC=new _e("PlatformOnDestroy");class SC{constructor(e,t){this.name=e,this.token=t}}function EC(n,e,t=[]){const r=`Platform: ${e}`,s=new _e(r);return(i=[])=>{let o=Bh();if(!o||o.injector.get(bC,!1)){const a=[...t,...i,{provide:s,useValue:!0}];n?n(a):function PR(n){if(oa&&!oa.get(bC,!1))throw new ne(400,"");oa=n;const e=n.get(MC),t=n.get(yC,null);t&&t.forEach(r=>r())}(function OR(n=[],e){return tn.create({name:e,providers:[{provide:Hd,useValue:"platform"},{provide:DC,useValue:()=>oa=null},...n]})}(a,r))}return function NR(n){const e=Bh();if(!e)throw new ne(401,"");return e}()}}function Bh(){return oa?.get(MC)??null}let MC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function kR(n,e){let t;return t="noop"===n?new MR:("zone.js"===n?void 0:n)||new gt({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!e?.ngZoneEventCoalescing,shouldCoalesceRunChangeDetection:!!e?.ngZoneRunCoalescing}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),c=[{provide:gt,useValue:a}];return a.run(()=>{const l=tn.create({providers:c,parent:this.injector,name:t.moduleType.name}),u=t.create(l),d=u.injector.get(Lo,null);if(!d)throw new ne(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:p=>{d.handleError(p)}});u.onDestroy(()=>{Uh(this._modules,u),h.unsubscribe()})}),function FR(n,e,t){try{const r=t();return zo(r)?r.catch(s=>{throw e.runOutsideAngular(()=>n.handleError(s)),s}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(d,a,()=>{const h=u.injector.get(Nh);return h.runInitializers(),h.donePromise.then(()=>(function gA(n){gn(n,"Expected localeId to be defined"),"string"==typeof n&&(o_=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Kr,Oc)||Oc),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,r=[]){const s=TC({},r);return function AR(n,e,t){const r=new gh(t);return Promise.resolve(r)}(0,0,t).then(i=>this.bootstrapModuleFactory(i,s))}_moduleDoBootstrap(t){const r=t.injector.get($h);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!t.instance.ngDoBootstrap)throw new ne(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._injector.get(DC,null)?.(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(X(tn))},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function TC(n,e){return Array.isArray(e)?e.reduce(TC,n):{...n,...e}}let $h=(()=>{class n{constructor(t,r,s,i){this._zone=t,this._injector=r,this._exceptionHandler=s,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new W(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),a=new W(c=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{gt.assertNotInAngularZone(),kh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{gt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{l.unsubscribe(),u.unsubscribe()}});this.isStable=hu(o,a.pipe(cg()))}bootstrap(t,r){if(!this._initStatus.done)throw new ne(405,"");let s;s=t instanceof R_?t:this._injector.get(Ri).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const i=function RR(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Tr),a=s.create(tn.NULL,[],r||s.selector,i),c=a.location.nativeElement,l=a.injector.get(Vh,null),u=l&&a.injector.get(TR);return l&&u&&u.registerApplication(c,l),a.onDestroy(()=>{this.detachView(a.hostView),Uh(this.components,a),u&&u.unregisterApplication(c)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new ne(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Uh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(vC,[]).concat(this._bootstrapListeners).forEach(s=>s(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(X(gt),X(tn),X(Lo),X(Nh))},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Uh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let IC=!0,aa=(()=>{class n{}return n.__NG_ELEMENT_ID__=jR,n})();function jR(n){return function BR(n,e,t){if(Ja(n)&&!t){const r=yn(n.index,e);return new ta(r,r)}return 47&n.type?new ta(e[16],e):null}(Mt(),q(),16==(16&n))}class OC{constructor(){}supports(e){return Ho(e)}create(e){return new GR(e)}}const zR=(n,e)=>e;class GR{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||zR}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,s=0,i=null;for(;t||r;){const o=!r||t&&t.currentIndex<FC(r,s,i)?t:r,a=FC(o,s,i),c=o.currentIndex;if(o===r)s--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)s++;else{i||(i=[]);const l=a-s,u=c-s;if(l!=u){for(let h=0;h<l;h++){const p=h<i.length?i[h]:i[h]=0,y=p+h;u<=y&&y<l&&(i[h]=p+1)}i[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ho(e))throw new ne(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let s,i,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],o=this._trackByFn(a,i),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,i,o,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)):(t=this._mismatch(t,i,o,a),r=!0),t=t._next}else s=0,function tI(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[yi()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(s,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,s)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,s),r=!0),t=t._next,s++}),this.length=s;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,s){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,s)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,s))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,s)):e=this._addAfter(new WR(t,r),i,s),e}_verifyReinsertion(e,t,r,s){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,s):e.currentIndex!=s&&(e.currentIndex=s,this._addToMoves(e,s)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const s=e._prevRemoved,i=e._nextRemoved;return null===s?this._removalsHead=i:s._nextRemoved=i,null===i?this._removalsTail=s:i._prevRemoved=s,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const s=null===t?this._itHead:t._next;return e._next=s,e._prev=t,null===s?this._itTail=e:s._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new kC),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kC),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class WR{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QR{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class kC{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new QR,this.map.set(t,r)),r.add(e)}get(e,t){const s=this.map.get(e);return s?s.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FC(n,e,t){const r=n.previousIndex;if(null===r)return r;let s=0;return t&&r<t.length&&(s=t[r]),r+e+s}class LC{constructor(){}supports(e){return e instanceof Map||Jd(e)}create(){return new JR}}class JR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Jd(e)))throw new ne(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,s)=>{if(t&&t.key===s)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(s,r);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const s=this._records.get(e);this._maybeAddToChanges(s,t);const i=s._prev,o=s._next;return i&&(i._next=o),o&&(o._prev=i),s._next=null,s._prev=null,s}const r=new KR(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class KR{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VC(){return new Wc([new OC])}let Wc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const s=r.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||VC()),deps:[[n,new Ao,new Gr]]}}find(t){const r=this.factories.find(s=>s.supports(t));if(null!=r)return r;throw new ne(901,"")}}return n.\u0275prov=ce({token:n,providedIn:"root",factory:VC}),n})();function jC(){return new ca([new LC])}let ca=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const s=r.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||jC()),deps:[[n,new Ao,new Gr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new ne(901,"")}}return n.\u0275prov=ce({token:n,providedIn:"root",factory:jC}),n})();const XR=EC(null,"core",[]);let eP=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(X($h))},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({}),n})(),Qc=null;function dr(){return Qc}const Gt=new _e("DocumentToken");let Yr=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:function(){return function sP(){return X(BC)}()},providedIn:"platform"}),n})();const iP=new _e("Location Initialized");let BC=(()=>{class n extends Yr{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return dr().getBaseHref(this._doc)}onPopState(t){const r=dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){$C()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){$C()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(X(Gt))},n.\u0275prov=ce({token:n,factory:function(){return function oP(){return new BC(X(Gt))}()},providedIn:"platform"}),n})();function $C(){return!!window.history.pushState}function Wh(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function UC(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Rr(n){return n&&"?"!==n[0]?"?"+n:n}let ki=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:function(){return function aP(n){const e=X(Gt).location;return new HC(X(Yr),e&&e.origin||"")}()},providedIn:"root"}),n})();const Qh=new _e("appBaseHref");let HC=(()=>{class n extends ki{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Wh(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Rr(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,i){const o=this.prepareExternalUrl(s+Rr(i));this._platformLocation.pushState(t,r,o)}replaceState(t,r,s,i){const o=this.prepareExternalUrl(s+Rr(i));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(X(Yr),X(Qh,8))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),cP=(()=>{class n extends ki{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Wh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,i){let o=this.prepareExternalUrl(s+Rr(i));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,s,i){let o=this.prepareExternalUrl(s+Rr(i));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(X(Yr),X(Qh,8))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),Jh=(()=>{class n{constructor(t,r){this._subject=new ze,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=UC(qC(s)),this._platformStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Rr(r))}normalize(t){return n.stripTrailingSlash(function uP(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,qC(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Rr(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Rr(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){this._platformStrategy.historyGo?.(t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Rr,n.joinWithSlash=Wh,n.stripTrailingSlash=UC,n.\u0275fac=function(t){return new(t||n)(X(ki),X(Yr))},n.\u0275prov=ce({token:n,factory:function(){return function lP(){return new Jh(X(ki),X(Yr))}()},providedIn:"root"}),n})();function qC(n){return n.replace(/\/index.html$/,"")}var vt=(()=>((vt=vt||{})[vt.Format=0]="Format",vt[vt.Standalone=1]="Standalone",vt))(),Oe=(()=>((Oe=Oe||{})[Oe.Narrow=0]="Narrow",Oe[Oe.Abbreviated=1]="Abbreviated",Oe[Oe.Wide=2]="Wide",Oe[Oe.Short=3]="Short",Oe))(),ct=(()=>((ct=ct||{})[ct.Short=0]="Short",ct[ct.Medium=1]="Medium",ct[ct.Long=2]="Long",ct[ct.Full=3]="Full",ct))(),fe=(()=>((fe=fe||{})[fe.Decimal=0]="Decimal",fe[fe.Group=1]="Group",fe[fe.List=2]="List",fe[fe.PercentSign=3]="PercentSign",fe[fe.PlusSign=4]="PlusSign",fe[fe.MinusSign=5]="MinusSign",fe[fe.Exponential=6]="Exponential",fe[fe.SuperscriptingExponent=7]="SuperscriptingExponent",fe[fe.PerMille=8]="PerMille",fe[fe.Infinity=9]="Infinity",fe[fe.NaN=10]="NaN",fe[fe.TimeSeparator=11]="TimeSeparator",fe[fe.CurrencyDecimal=12]="CurrencyDecimal",fe[fe.CurrencyGroup=13]="CurrencyGroup",fe))();function Jc(n,e){return Fn(nn(n)[te.DateFormat],e)}function Kc(n,e){return Fn(nn(n)[te.TimeFormat],e)}function Yc(n,e){return Fn(nn(n)[te.DateTimeFormat],e)}function kn(n,e){const t=nn(n),r=t[te.NumberSymbols][e];if(typeof r>"u"){if(e===fe.CurrencyDecimal)return t[te.NumberSymbols][fe.Decimal];if(e===fe.CurrencyGroup)return t[te.NumberSymbols][fe.Group]}return r}function GC(n){if(!n[te.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[te.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Fn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Yh(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const DP=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,la={},SP=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var It=(()=>((It=It||{})[It.Short=0]="Short",It[It.ShortGMT=1]="ShortGMT",It[It.Long=2]="Long",It[It.Extended=3]="Extended",It))(),me=(()=>((me=me||{})[me.FullYear=0]="FullYear",me[me.Month=1]="Month",me[me.Date=2]="Date",me[me.Hours=3]="Hours",me[me.Minutes=4]="Minutes",me[me.Seconds=5]="Seconds",me[me.FractionalSeconds=6]="FractionalSeconds",me[me.Day=7]="Day",me))(),Ie=(()=>((Ie=Ie||{})[Ie.DayPeriods=0]="DayPeriods",Ie[Ie.Days=1]="Days",Ie[Ie.Months=2]="Months",Ie[Ie.Eras=3]="Eras",Ie))();function EP(n,e,t,r){let s=function OP(n){if(JC(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[s,i=1,o=1]=n.split("-").map(a=>+a);return Zc(s,i-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(DP))return function kP(n){const e=new Date(0);let t=0,r=0;const s=n[8]?e.setUTCFullYear:e.setFullYear,i=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),s.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return i.call(e,o,a,c,l),e}(r)}const e=new Date(n);if(!JC(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Pr(t,e)||e;let a,o=[];for(;e;){if(a=SP.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let c=s.getTimezoneOffset();r&&(c=QC(r,c),s=function NP(n,e,t){const r=t?-1:1,s=n.getTimezoneOffset();return function PP(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(QC(e,s)-s))}(s,r,!0));let l="";return o.forEach(u=>{const d=function RP(n){if(Xh[n])return Xh[n];let e;switch(n){case"G":case"GG":case"GGG":e=nt(Ie.Eras,Oe.Abbreviated);break;case"GGGG":e=nt(Ie.Eras,Oe.Wide);break;case"GGGGG":e=nt(Ie.Eras,Oe.Narrow);break;case"y":e=St(me.FullYear,1,0,!1,!0);break;case"yy":e=St(me.FullYear,2,0,!0,!0);break;case"yyy":e=St(me.FullYear,3,0,!1,!0);break;case"yyyy":e=St(me.FullYear,4,0,!1,!0);break;case"Y":e=nl(1);break;case"YY":e=nl(2,!0);break;case"YYY":e=nl(3);break;case"YYYY":e=nl(4);break;case"M":case"L":e=St(me.Month,1,1);break;case"MM":case"LL":e=St(me.Month,2,1);break;case"MMM":e=nt(Ie.Months,Oe.Abbreviated);break;case"MMMM":e=nt(Ie.Months,Oe.Wide);break;case"MMMMM":e=nt(Ie.Months,Oe.Narrow);break;case"LLL":e=nt(Ie.Months,Oe.Abbreviated,vt.Standalone);break;case"LLLL":e=nt(Ie.Months,Oe.Wide,vt.Standalone);break;case"LLLLL":e=nt(Ie.Months,Oe.Narrow,vt.Standalone);break;case"w":e=Zh(1);break;case"ww":e=Zh(2);break;case"W":e=Zh(1,!0);break;case"d":e=St(me.Date,1);break;case"dd":e=St(me.Date,2);break;case"c":case"cc":e=St(me.Day,1);break;case"ccc":e=nt(Ie.Days,Oe.Abbreviated,vt.Standalone);break;case"cccc":e=nt(Ie.Days,Oe.Wide,vt.Standalone);break;case"ccccc":e=nt(Ie.Days,Oe.Narrow,vt.Standalone);break;case"cccccc":e=nt(Ie.Days,Oe.Short,vt.Standalone);break;case"E":case"EE":case"EEE":e=nt(Ie.Days,Oe.Abbreviated);break;case"EEEE":e=nt(Ie.Days,Oe.Wide);break;case"EEEEE":e=nt(Ie.Days,Oe.Narrow);break;case"EEEEEE":e=nt(Ie.Days,Oe.Short);break;case"a":case"aa":case"aaa":e=nt(Ie.DayPeriods,Oe.Abbreviated);break;case"aaaa":e=nt(Ie.DayPeriods,Oe.Wide);break;case"aaaaa":e=nt(Ie.DayPeriods,Oe.Narrow);break;case"b":case"bb":case"bbb":e=nt(Ie.DayPeriods,Oe.Abbreviated,vt.Standalone,!0);break;case"bbbb":e=nt(Ie.DayPeriods,Oe.Wide,vt.Standalone,!0);break;case"bbbbb":e=nt(Ie.DayPeriods,Oe.Narrow,vt.Standalone,!0);break;case"B":case"BB":case"BBB":e=nt(Ie.DayPeriods,Oe.Abbreviated,vt.Format,!0);break;case"BBBB":e=nt(Ie.DayPeriods,Oe.Wide,vt.Format,!0);break;case"BBBBB":e=nt(Ie.DayPeriods,Oe.Narrow,vt.Format,!0);break;case"h":e=St(me.Hours,1,-12);break;case"hh":e=St(me.Hours,2,-12);break;case"H":e=St(me.Hours,1);break;case"HH":e=St(me.Hours,2);break;case"m":e=St(me.Minutes,1);break;case"mm":e=St(me.Minutes,2);break;case"s":e=St(me.Seconds,1);break;case"ss":e=St(me.Seconds,2);break;case"S":e=St(me.FractionalSeconds,1);break;case"SS":e=St(me.FractionalSeconds,2);break;case"SSS":e=St(me.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=el(It.Short);break;case"ZZZZZ":e=el(It.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=el(It.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=el(It.Long);break;default:return null}return Xh[n]=e,e}(u);l+=d?d(s,t,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Zc(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Pr(n,e){const t=function dP(n){return nn(n)[te.LocaleId]}(n);if(la[t]=la[t]||{},la[t][e])return la[t][e];let r="";switch(e){case"shortDate":r=Jc(n,ct.Short);break;case"mediumDate":r=Jc(n,ct.Medium);break;case"longDate":r=Jc(n,ct.Long);break;case"fullDate":r=Jc(n,ct.Full);break;case"shortTime":r=Kc(n,ct.Short);break;case"mediumTime":r=Kc(n,ct.Medium);break;case"longTime":r=Kc(n,ct.Long);break;case"fullTime":r=Kc(n,ct.Full);break;case"short":const s=Pr(n,"shortTime"),i=Pr(n,"shortDate");r=Xc(Yc(n,ct.Short),[s,i]);break;case"medium":const o=Pr(n,"mediumTime"),a=Pr(n,"mediumDate");r=Xc(Yc(n,ct.Medium),[o,a]);break;case"long":const c=Pr(n,"longTime"),l=Pr(n,"longDate");r=Xc(Yc(n,ct.Long),[c,l]);break;case"full":const u=Pr(n,"fullTime"),d=Pr(n,"fullDate");r=Xc(Yc(n,ct.Full),[u,d])}return r&&(la[t][e]=r),r}function Xc(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Zn(n,e,t="-",r,s){let i="";(n<0||s&&n<=0)&&(s?n=1-n:(n=-n,i=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),i+o}function St(n,e,t=0,r=!1,s=!1){return function(i,o){let a=function TP(n,e){switch(n){case me.FullYear:return e.getFullYear();case me.Month:return e.getMonth();case me.Date:return e.getDate();case me.Hours:return e.getHours();case me.Minutes:return e.getMinutes();case me.Seconds:return e.getSeconds();case me.FractionalSeconds:return e.getMilliseconds();case me.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,i);if((t>0||a>-t)&&(a+=t),n===me.Hours)0===a&&-12===t&&(a=12);else if(n===me.FractionalSeconds)return function MP(n,e){return Zn(n,3).substr(0,e)}(a,e);const c=kn(o,fe.MinusSign);return Zn(a,e,c,r,s)}}function nt(n,e,t=vt.Format,r=!1){return function(s,i){return function xP(n,e,t,r,s,i){switch(t){case Ie.Months:return function pP(n,e,t){const r=nn(n),i=Fn([r[te.MonthsFormat],r[te.MonthsStandalone]],e);return Fn(i,t)}(e,s,r)[n.getMonth()];case Ie.Days:return function fP(n,e,t){const r=nn(n),i=Fn([r[te.DaysFormat],r[te.DaysStandalone]],e);return Fn(i,t)}(e,s,r)[n.getDay()];case Ie.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(i){const l=function vP(n){const e=nn(n);return GC(e),(e[te.ExtraData][2]||[]).map(r=>"string"==typeof r?Yh(r):[Yh(r[0]),Yh(r[1])])}(e),u=function _P(n,e,t){const r=nn(n);GC(r);const i=Fn([r[te.ExtraData][0],r[te.ExtraData][1]],e)||[];return Fn(i,t)||[]}(e,s,r),d=l.findIndex(h=>{if(Array.isArray(h)){const[p,y]=h,A=o>=p.hours&&a>=p.minutes,j=o<y.hours||o===y.hours&&a<y.minutes;if(p.hours<y.hours){if(A&&j)return!0}else if(A||j)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function hP(n,e,t){const r=nn(n),i=Fn([r[te.DayPeriodsFormat],r[te.DayPeriodsStandalone]],e);return Fn(i,t)}(e,s,r)[o<12?0:1];case Ie.Eras:return function gP(n,e){return Fn(nn(n)[te.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(s,i,n,e,t,r)}}function el(n){return function(e,t,r){const s=-1*r,i=kn(t,fe.MinusSign),o=s>0?Math.floor(s/60):Math.ceil(s/60);switch(n){case It.Short:return(s>=0?"+":"")+Zn(o,2,i)+Zn(Math.abs(s%60),2,i);case It.ShortGMT:return"GMT"+(s>=0?"+":"")+Zn(o,1,i);case It.Long:return"GMT"+(s>=0?"+":"")+Zn(o,2,i)+":"+Zn(Math.abs(s%60),2,i);case It.Extended:return 0===r?"Z":(s>=0?"+":"")+Zn(o,2,i)+":"+Zn(Math.abs(s%60),2,i);default:throw new Error(`Unknown zone width "${n}"`)}}}function WC(n){return Zc(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Zh(n,e=!1){return function(t,r){let s;if(e){const i=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();s=1+Math.floor((o+i)/7)}else{const i=WC(t),o=function AP(n){const e=Zc(n,0,1).getDay();return Zc(n,0,1+(e<=4?4:11)-e)}(i.getFullYear()),a=i.getTime()-o.getTime();s=1+Math.round(a/6048e5)}return Zn(s,n,kn(r,fe.MinusSign))}}function nl(n,e=!1){return function(t,r){return Zn(WC(t).getFullYear(),n,kn(r,fe.MinusSign),e)}}const Xh={};function QC(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function JC(n){return n instanceof Date&&!isNaN(n.valueOf())}function XC(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,i]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(i)}return null}let of=(()=>{class n{constructor(t,r,s,i){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Ho(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${He(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(V(Wc),V(ca),V(rn),V(Mr))},n.\u0275dir=he({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class QP{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fi=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,i,o)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new QP(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,o),ew(a,s)}});for(let s=0,i=r.length;s<i;s++){const a=r.get(s).context;a.index=s,a.count=i,a.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{ew(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(V(On),V(xr),V(Wc))},n.\u0275dir=he({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ew(n,e){n.context.$implicit=e.item}let hr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new JP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tw("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tw("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(V(On),V(xr))},n.\u0275dir=he({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class JP{constructor(){this.$implicit=null,this.ngIf=null}}function tw(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${He(e)}'.`)}class af{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let sl=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=he({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),nw=(()=>{class n{constructor(t,r,s){this.ngSwitch=s,s._addCase(),this._view=new af(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(V(On),V(xr),V(sl,9))},n.\u0275dir=he({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),sw=(()=>{class n{constructor(t,r,s){this._ngEl=t,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[s,i]=t.split(".");null!=(r=null!=r&&i?`${r}${i}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,s,r):this._renderer.removeStyle(this._ngEl.nativeElement,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(V(rn),V(ca),V(Mr))},n.\u0275dir=he({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();function Xn(n,e){return new ne(2100,"")}class XP{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class eN{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const tN=new eN,nN=new XP;let Zr=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(zo(t))return tN;if(pv(t))return nN;throw Xn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(V(aa,16))},n.\u0275pipe=cn({name:"async",type:n,pure:!1}),n})();const aN=new _e("DATE_PIPE_DEFAULT_TIMEZONE");let cf=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",s,i){if(null==t||""===t||t!=t)return null;try{return EP(t,r,i||this.locale,s??this.defaultTimezone??void 0)}catch(o){throw Xn()}}}return n.\u0275fac=function(t){return new(t||n)(V(Kr,16),V(aN,24))},n.\u0275pipe=cn({name:"date",type:n,pure:!0}),n})(),iw=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=cn({name:"json",type:n,pure:!1}),n})(),lf=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=ow}transform(t,r=ow){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const s=this.differ.diff(t),i=r!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(o=>{this.keyValues.push(function dN(n,e){return{key:n,value:e}}(o.key,o.currentValue))})),(s||i)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}}return n.\u0275fac=function(t){return new(t||n)(V(ca,16))},n.\u0275pipe=cn({name:"keyvalue",type:n,pure:!1}),n})();function ow(n,e){const t=n.key,r=e.key;if(t===r)return 0;if(void 0===t)return 1;if(void 0===r)return-1;if(null===t)return 1;if(null===r)return-1;if("string"==typeof t&&"string"==typeof r)return t<r?-1:1;if("number"==typeof t&&"number"==typeof r)return t-r;if("boolean"==typeof t&&"boolean"==typeof r)return t<r?-1:1;const s=String(t),i=String(r);return s==i?0:s<i?-1:1}let aw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({}),n})();const cw="browser";let CN=(()=>{class n{}return n.\u0275prov=ce({token:n,providedIn:"root",factory:()=>new wN(X(Gt),window)}),n})();class wN{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function bN(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const i=s.shadowRoot;if(i){const o=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(o)return o}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],s-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=lw(this.window.history)||lw(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function lw(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class uw{}class hf extends class DN extends class rP{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function nP(n){Qc||(Qc=n)}(new hf)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function SN(){return da=da||document.querySelector("base"),da?da.getAttribute("href"):null}();return null==t?null:function EN(n){il=il||document.createElement("a"),il.setAttribute("href",n);const e=il.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){da=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return XC(document.cookie,e)}}let il,da=null;const dw=new _e("TRANSITION_ID"),TN=[{provide:Ph,useFactory:function MN(n,e,t){return()=>{t.get(Nh).donePromise.then(()=>{const r=dr(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let i=0;i<s.length;i++)r.remove(s[i])})}},deps:[dw,Gt,tn],multi:!0}];class ff{static init(){!function IR(n){jh=n}(new ff)}addToWindow(e){Ge.getAngularTestability=(r,s=!0)=>{const i=e.findTestabilityInTree(r,s);if(null==i)throw new Error("Could not find testability for element.");return i},Ge.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ge.getAllAngularRootElements=()=>e.getAllRootElements(),Ge.frameworkStabilizers||(Ge.frameworkStabilizers=[]),Ge.frameworkStabilizers.push(r=>{const s=Ge.getAllAngularTestabilities();let i=s.length,o=!1;const a=function(c){o=o||c,i--,0==i&&r(o)};s.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?dr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}}let xN=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const ol=new _e("EventManagerPlugins");let al=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let i=0;i<s.length;i++){const o=s[i];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(X(ol),X(gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class hw{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=dr().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let fw=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),ha=(()=>{class n extends fw{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(i=>{const o=this._doc.createElement("style");o.textContent=i,s.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(pw),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(pw))}}return n.\u0275fac=function(t){return new(t||n)(X(Gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();function pw(n){dr().remove(n)}const pf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gf=/%COMP%/g;function cl(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?cl(n,s,t):(s=s.replace(gf,n),t.push(s))}return t}function yw(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ll=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new mf(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Un.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new ON(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case Un.ShadowDom:return new kN(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=cl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(X(al),X(ha),X(ia))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class mf{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pf[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const i=pf[s];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=pf[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(_n.DashCase|_n.Important)?e.style.setProperty(t,r,s&_n.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_n.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,yw(r)):this.eventManager.addEventListener(e,t,yw(r))}}class ON extends mf{constructor(e,t,r,s){super(e),this.component=r;const i=cl(s+"-"+r.id,r.styles,[]);t.addStyles(i),this.contentAttr=function RN(n){return"_ngcontent-%COMP%".replace(gf,n)}(s+"-"+r.id),this.hostAttr=function PN(n){return"_nghost-%COMP%".replace(gf,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class kN extends mf{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=cl(s.id,s.styles,[]);for(let o=0;o<i.length;o++){const a=document.createElement("style");a.textContent=i[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let FN=(()=>{class n extends hw{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(X(Gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const _w=["alt","control","meta","shift"],VN={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cw={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let BN=(()=>{class n extends hw{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const i=n.parseEventName(r),o=n.eventCallback(i.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>dr().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const i=n._normalizeKey(r.pop());let o="";if(_w.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=i,0!=r.length||0===i.length)return null;const a={};return a.domEventName=s,a.fullKey=o,a}static getEventFullKey(t){let r="",s=function $N(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Cw.hasOwnProperty(e)&&(e=Cw[e]))}return VN[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),_w.forEach(i=>{i!=s&&jN[i](t)&&(r+=i+".")}),r+=s,r}static eventCallback(t,r,s){return i=>{n.getEventFullKey(i)===t&&s.runGuarded(()=>r(i))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(X(Gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const zN=EC(XR,"browser",[{provide:qc,useValue:cw},{provide:yC,useValue:function UN(){hf.makeCurrent(),ff.init()},multi:!0},{provide:Gt,useFactory:function qN(){return function g0(n){Iu=n}(document),document},deps:[]}]),GN=[{provide:Hd,useValue:"root"},{provide:Lo,useFactory:function HN(){return new Lo},deps:[]},{provide:ol,useClass:FN,multi:!0,deps:[Gt,gt,qc]},{provide:ol,useClass:BN,multi:!0,deps:[Gt]},{provide:ll,useClass:ll,deps:[al,ha,ia]},{provide:Xo,useExisting:ll},{provide:fw,useExisting:ha},{provide:ha,useClass:ha,deps:[Gt]},{provide:Vh,useClass:Vh,deps:[gt]},{provide:al,useClass:al,deps:[ol,gt]},{provide:uw,useClass:xN,deps:[]}];let ww=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:ia,useValue:t.appId},{provide:dw,useExisting:ia},TN]}}}return n.\u0275fac=function(t){return new(t||n)(X(n,12))},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({providers:GN,imports:[aw,eP]}),n})();function ul(n,e){return new W(t=>{const r=n.length;if(0===r)return void t.complete();const s=new Array(r);let i=0,o=0;for(let a=0;a<r;a++){const c=jt(n[a]);let l=!1;t.add(c.subscribe({next:u=>{l||(l=!0,o++),s[a]=u},error:u=>t.error(u),complete:()=>{i++,(i===r||!l)&&(o===r&&t.next(e?e.reduce((u,d,h)=>(u[d]=s[h],u),{}):s),t.complete())}}))}})}typeof window<"u"&&window;let Sw=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(V(Mr),V(rn))},n.\u0275dir=he({type:n}),n})(),Es=(()=>{class n extends Sw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ht(n)))(r||n)}}(),n.\u0275dir=he({type:n,features:[qe]}),n})();const fr=new _e("NgValueAccessor"),sO={provide:fr,useExisting:Xe(()=>vf),multi:!0};let vf=(()=>{class n extends Es{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ht(n)))(r||n)}}(),n.\u0275dir=he({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&K("change",function(i){return r.onChange(i.target.checked)})("blur",function(){return r.onTouched()})},features:[it([sO]),qe]}),n})();const iO={provide:fr,useExisting:Xe(()=>es),multi:!0},aO=new _e("CompositionEventMode");let es=(()=>{class n extends Sw{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function oO(){const n=dr()?dr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(V(Mr),V(rn),V(aO,8))},n.\u0275dir=he({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&K("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[it([iO]),qe]}),n})();const Wt=new _e("NgValidators"),ns=new _e("NgAsyncValidators");function xw(n){return function ts(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function dl(n){return null}function Ow(n){return null!=n}function kw(n){const e=zo(n)?jt(n):n;return nh(e),e}function Fw(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Lw(n,e){return e.map(t=>t(n))}function Vw(n){return n.map(e=>function lO(n){return!n.validate}(e)?e:t=>e.validate(t))}function _f(n){return null!=n?function jw(n){if(!n)return null;const e=n.filter(Ow);return 0==e.length?null:function(t){return Fw(Lw(t,e))}}(Vw(n)):null}function Cf(n){return null!=n?function Bw(n){if(!n)return null;const e=n.filter(Ow);return 0==e.length?null:function(t){return function rO(...n){if(1===n.length){const e=n[0];if(S(e))return ul(e,null);if(L(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return ul(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return ul(n=1===n.length&&S(n[0])?n[0]:n,null).pipe(pe(t=>e(...t)))}return ul(n,null)}(Lw(t,e).map(kw)).pipe(pe(Fw))}}(Vw(n)):null}function $w(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wf(n){return n?Array.isArray(n)?n:[n]:[]}function hl(n,e){return Array.isArray(n)?n.includes(e):n===e}function qw(n,e){const t=wf(e);return wf(n).forEach(s=>{hl(t,s)||t.push(s)}),t}function zw(n,e){return wf(e).filter(t=>!hl(n,t))}class Gw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_f(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Cf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class on extends Gw{get formDirective(){return null}get path(){return null}}class rs extends Gw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ww{constructor(e){this._cd=e}is(e){return"submitted"===e?!!this._cd?.submitted:!!this._cd?.control?.[e]}}let Li=(()=>{class n extends Ww{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(V(rs,2))},n.\u0275dir=he({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Er("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[qe]}),n})(),Qw=(()=>{class n extends Ww{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(V(on,10))},n.\u0275dir=he({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&Er("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[qe]}),n})();function fa(n,e){Sf(n,e),e.valueAccessor.writeValue(n.value),function yO(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Kw(n,e)})}(n,e),function _O(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function vO(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Kw(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function mO(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ml(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Sf(n,e){const t=function Uw(n){return n._rawValidators}(n);null!==e.validator?n.setValidators($w(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Hw(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators($w(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();ml(e._rawValidators,s),ml(e._rawAsyncValidators,s)}function Kw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Tf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const pa="VALID",vl="INVALID",Vi="PENDING",ga="DISABLED";function If(n){return(_l(n)?n.validators:n)||null}function eb(n){return Array.isArray(n)?_f(n):n||null}function Af(n,e){return(_l(e)?e.asyncValidators:n)||null}function tb(n){return Array.isArray(n)?Cf(n):n||null}function _l(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Rf=n=>n instanceof Nf;function rb(n){return(n=>n instanceof ob)(n)?n.value:n.getRawValue()}function sb(n,e){const t=Rf(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new ne(1e3,"");if(!r[e])throw new ne(1001,"")}function ib(n,e){Rf(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new ne(1002,"")})}class Pf{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=eb(this._rawValidators),this._composedAsyncValidatorFn=tb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pa}get invalid(){return this.status===vl}get pending(){return this.status==Vi}get disabled(){return this.status===ga}get enabled(){return this.status!==ga}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=eb(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=tb(e)}addValidators(e){this.setValidators(qw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(zw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(zw(e,this._rawAsyncValidators))}hasValidator(e){return hl(this._rawValidators,e)}hasAsyncValidator(e){return hl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Vi,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ga,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pa,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pa||this.status===Vi)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ga:pa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Vi,this._hasOwnPendingAsyncValidator=!0;const t=kw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function DO(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=Rf(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:(n=>n instanceof EO)(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ze,this.statusChanges=new ze}_calculateStatus(){return this._allControlsDisabled()?ga:this.errors?vl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vi)?Vi:this._anyControlsHaveStatus(vl)?vl:pa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_l(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ob extends Pf{constructor(e=null,t,r){super(If(t),Af(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_l(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Tf(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Tf(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Nf extends Pf{constructor(e,t,r){super(If(t),Af(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ib(this,e),Object.keys(e).forEach(r=>{sb(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=rb(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,i)=>{r=t(r,s,i)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class EO extends Pf{constructor(e,t,r){super(If(t),Af(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ib(this,e),e.forEach((r,s)=>{sb(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>rb(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const MO={provide:on,useExisting:Xe(()=>Cl)},ma=(()=>Promise.resolve(null))();let Cl=(()=>{class n extends on{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new ze,this.form=new Nf({},_f(t),Cf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ma.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),fa(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ma.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ma.then(()=>{const r=this._findContainer(t.path),s=new Nf({});(function Yw(n,e){Sf(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ma.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ma.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Xw(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(V(Wt,10),V(ns,10))},n.\u0275dir=he({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&K("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[it([MO]),qe]}),n})();const xO={provide:rs,useExisting:Xe(()=>Ms)},lb=(()=>Promise.resolve(null))();let Ms=(()=>{class n extends rs{constructor(t,r,s,i,o){super(),this._changeDetectorRef=o,this.control=new ob,this._registered=!1,this.update=new ze,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Mf(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(i=>{i.constructor===es?t=i:function bO(n){return Object.getPrototypeOf(n.constructor)===Es}(i)?r=i:s=i}),s||r||t||null}(0,i)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Ef(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fa(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){lb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=""===r||r&&"false"!==r;lb.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function pl(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(V(on,9),V(Wt,10),V(ns,10),V(fr,10),V(aa,8))},n.\u0275dir=he({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[it([xO]),qe,Yt]}),n})(),ub=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=he({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),hb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({}),n})(),Ts=(()=>{class n{constructor(){this._validator=dl}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):dl,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=he({type:n,features:[Yt]}),n})();const WO={provide:Wt,useExisting:Xe(()=>wl),multi:!0};let wl=(()=>{class n extends Ts{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function qO(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>xw}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ht(n)))(r||n)}}(),n.\u0275dir=he({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&Jn("required",r._enabled?"":null)},inputs:{required:"required"},features:[it([WO]),qe]}),n})(),XO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({imports:[[hb]]}),n})(),Ab=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({imports:[XO]}),n})();class Rb{}const Nr="*";function jf(n,e){return{type:7,name:n,definitions:e,options:{}}}function ji(n,e=null){return{type:4,styles:e,timings:n}}function Pb(n,e=null){return{type:2,steps:n,options:e}}function ss(n){return{type:6,styles:n,offset:null}}function Bi(n,e,t){return{type:0,name:n,styles:e,options:t}}function $i(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Nb(n){Promise.resolve(null).then(n)}class ya{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Nb(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Ob{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,s=0;const i=this.players.length;0==i?Nb(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==i&&this._onFinish()}),o.onDestroy(()=>{++r==i&&this._onDestroy()}),o.onStart(()=>{++s==i&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const s=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(s)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Fe=!1;function kb(n){return new ne(3e3,Fe)}function Ok(){return typeof window<"u"&&typeof window.document<"u"}function $f(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function is(n){switch(n.length){case 0:return new ya;case 1:return n[0];default:return new Ob(n)}}function Fb(n,e,t,r,s={},i={}){const o=[],a=[];let c=-1,l=null;if(r.forEach(u=>{const d=u.offset,h=d==c,p=h&&l||{};Object.keys(u).forEach(y=>{let A=y,j=u[y];if("offset"!==y)switch(A=e.normalizePropertyName(A,o),j){case"!":j=s[y];break;case Nr:j=i[y];break;default:j=e.normalizeStyleValue(y,A,j,o)}p[A]=j}),h||a.push(p),l=p,c=d}),o.length)throw function Dk(n){return new ne(3502,Fe)}();return a}function Uf(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Hf(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Hf(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Hf(t,"destroy",n)))}}function Hf(n,e,t){const i=qf(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(i._data=o),i}function qf(n,e,t,r,s="",i=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:i,disabled:!!o}}function wn(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function Lb(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let zf=(n,e)=>!1,Vb=(n,e,t)=>[],jb=null;function Gf(n){const e=n.parentNode||n.host;return e===jb?null:e}($f()||typeof Element<"u")&&(Ok()?(jb=(()=>document.documentElement)(),zf=(n,e)=>{for(;e;){if(e===n)return!0;e=Gf(e)}return!1}):zf=(n,e)=>n.contains(e),Vb=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let xs=null,Bb=!1;function $b(n){xs||(xs=function Fk(){return typeof document<"u"?document.body:null}()||{},Bb=!!xs.style&&"WebkitAppearance"in xs.style);let e=!0;return xs.style&&!function kk(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in xs.style,!e&&Bb&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in xs.style)),e}const Ub=zf,Hb=Vb;let qb=(()=>{class n{validateStyleProperty(t){return $b(t)}matchesElement(t,r){return!1}containsElement(t,r){return Ub(t,r)}getParentElement(t){return Gf(t)}query(t,r,s){return Hb(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,i,o,a=[],c){return new ya(s,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),Wf=(()=>{class n{}return n.NOOP=new qb,n})();const Qf="ng-enter",Dl="ng-leave",Sl="ng-trigger",El=".ng-trigger",Gb="ng-animating",Jf=".ng-animating";function Is(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Kf(parseFloat(e[1]),e[2])}function Kf(n,e){return"s"===e?1e3*n:n}function Ml(n,e,t){return n.hasOwnProperty("duration")?n:function jk(n,e,t){let s,i=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(kb()),{duration:0,delay:0,easing:""};s=Kf(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(i=Kf(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else s=n;if(!t){let a=!1,c=e.length;s<0&&(e.push(function tk(){return new ne(3100,Fe)}()),a=!0),i<0&&(e.push(function nk(){return new ne(3101,Fe)}()),a=!0),a&&e.splice(c,0,kb())}return{duration:s,delay:i,easing:o}}(n,e,t)}function Ui(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function os(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Ui(n,t);return t}function Qb(n,e,t){return t?e+":"+t+";":""}function Jb(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Qb(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Qb(0,Uk(t),n.style[t]));n.setAttribute("style",e)}function pr(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const s=Zf(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[s]),n.style[s]=e[r]}),$f()&&Jb(n))}function As(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Zf(t);n.style[r]=""}),$f()&&Jb(n))}function va(n){return Array.isArray(n)?1==n.length?n[0]:Pb(n):n}const Yf=new RegExp("{{\\s*(.+?)\\s*}}","g");function Kb(n){let e=[];if("string"==typeof n){let t;for(;t=Yf.exec(n);)e.push(t[1]);Yf.lastIndex=0}return e}function Tl(n,e,t){const r=n.toString(),s=r.replace(Yf,(i,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function sk(n){return new ne(3003,Fe)}()),a=""),a.toString()});return s==r?n:s}function xl(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const $k=/-+([a-z0-9])/g;function Zf(n){return n.replace($k,(...e)=>e[1].toUpperCase())}function Uk(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function bn(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function ik(n){return new ne(3004,Fe)}()}}function Yb(n,e){return window.getComputedStyle(n)[e]}function Qk(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Jk(n,e,t){if(":"==n[0]){const c=function Kk(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function _k(n){return new ne(3016,Fe)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function vk(n){return new ne(3015,Fe)}()),e;const s=r[1],i=r[2],o=r[3];e.push(Zb(s,o));"<"==i[0]&&!("*"==s&&"*"==o)&&e.push(Zb(o,s))}(r,t,e)):t.push(n),t}const Pl=new Set(["true","1"]),Nl=new Set(["false","0"]);function Zb(n,e){const t=Pl.has(n)||Nl.has(n),r=Pl.has(e)||Nl.has(e);return(s,i)=>{let o="*"==n||n==s,a="*"==e||e==i;return!o&&t&&"boolean"==typeof s&&(o=s?Pl.has(n):Nl.has(n)),!a&&r&&"boolean"==typeof i&&(a=i?Pl.has(e):Nl.has(e)),o&&a}}const Yk=new RegExp("s*:selfs*,?","g");function Xf(n,e,t,r){return new Zk(n).build(e,t,r)}class Zk{constructor(e){this._driver=e}build(e,t,r){const s=new tF(t);this._resetContextStyleTimingState(s);const i=bn(this,va(e),s);return s.unsupportedCSSPropertiesFound.size&&s.unsupportedCSSPropertiesFound.keys(),i}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const i=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function ak(){return new ne(3006,Fe)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,i.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,s+=c.depCount,o.push(c)}else t.errors.push(function ck(){return new ne(3007,Fe)}())}),{type:7,name:e.name,states:i,transitions:o,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const i=new Set,o=s||{};r.styles.forEach(a=>{if(Ol(a)){const c=a;Object.keys(c).forEach(l=>{Kb(c[l]).forEach(u=>{o.hasOwnProperty(u)||i.add(u)})})}}),i.size&&(xl(i.values()),t.errors.push(function lk(n,e){return new ne(3008,Fe)}()))}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=bn(this,va(e.animation),t);return{type:1,matchers:Qk(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Rs(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>bn(this,r,t)),options:Rs(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const i=e.steps.map(o=>{t.currentTime=r;const a=bn(this,o,t);return s=Math.max(s,t.currentTime),a});return t.currentTime=s,{type:3,steps:i,options:Rs(e.options)}}visitAnimate(e,t){const r=function rF(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return ep(Ml(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(i=>"{"==i.charAt(0)&&"{"==i.charAt(1))){const i=ep(0,0,"");return i.dynamic=!0,i.strValue=t,i}const s=Ml(t,e);return ep(s.duration,s.delay,s.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,i=e.styles?e.styles:ss({});if(5==i.type)s=this.visitKeyframes(i,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};r.easing&&(l.easing=r.easing),o=ss(l)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,s=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==Nr?r.push(o):t.errors.push(function uk(n){return new ne(3002,Fe)}()):r.push(o)}):r.push(e.styles);let s=!1,i=null;return r.forEach(o=>{if(Ol(o)){const a=o,c=a.easing;if(c&&(i=c,delete a.easing),!s)for(let l in a)if(a[l].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:r,easing:i,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,i=t.currentTime;r&&i>0&&(i-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void t.unsupportedCSSPropertiesFound.add(a);const c=t.collectedStyles[t.currentQuerySelector],l=c[a];let u=!0;l&&(i!=s&&i>=l.startTime&&s<=l.endTime&&(t.errors.push(function dk(n,e,t,r,s){return new ne(3010,Fe)}()),u=!1),i=l.startTime),u&&(c[a]={startTime:i,endTime:s}),t.options&&function Bk(n,e,t){const r=e.params||{},s=Kb(n);s.length&&s.forEach(i=>{r.hasOwnProperty(i)||t.push(function rk(n){return new ne(3001,Fe)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function hk(){return new ne(3011,Fe)}()),r;let i=0;const o=[];let a=!1,c=!1,l=0;const u=e.steps.map(U=>{const P=this._makeStyleAst(U,t);let Y=null!=P.offset?P.offset:function nF(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Ol(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(Ol(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(P.styles),ae=0;return null!=Y&&(i++,ae=P.offset=Y),c=c||ae<0||ae>1,a=a||ae<l,l=ae,o.push(ae),P});c&&t.errors.push(function fk(){return new ne(3012,Fe)}()),a&&t.errors.push(function pk(){return new ne(3200,Fe)}());const d=e.steps.length;let h=0;i>0&&i<d?t.errors.push(function gk(){return new ne(3202,Fe)}()):0==i&&(h=1/(d-1));const p=d-1,y=t.currentTime,A=t.currentAnimateTimings,j=A.duration;return u.forEach((U,P)=>{const Y=h>0?P==p?1:h*P:o[P],ae=Y*j;t.currentTime=y+A.delay+ae,A.duration=ae,this._validateStyleAst(U,t),U.offset=Y,r.styles.push(U)}),r}visitReference(e,t){return{type:8,animation:bn(this,va(e.animation),t),options:Rs(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Rs(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Rs(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[i,o]=function Xk(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Yk,"")),n=n.replace(/@\*/g,El).replace(/@\w+/g,t=>El+"-"+t.substr(1)).replace(/:animating/g,Jf),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+i:i,wn(t.collectedStyles,t.currentQuerySelector,{});const a=bn(this,va(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:i,limit:s.limit||0,optional:!!s.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Rs(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function mk(){return new ne(3013,Fe)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Ml(e.timings,t.errors,!0);return{type:12,animation:bn(this,va(e.animation),t),timings:r,options:null}}}class tF{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ol(n){return!Array.isArray(n)&&"object"==typeof n}function Rs(n){return n?(n=Ui(n)).params&&(n.params=function eF(n){return n?Ui(n):null}(n.params)):n={},n}function ep(n,e,t){return{duration:n,delay:e,easing:t}}function tp(n,e,t,r,s,i,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:i,totalTime:s+i,easing:o,subTimeline:a}}class kl{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const oF=new RegExp(":enter","g"),cF=new RegExp(":leave","g");function np(n,e,t,r,s,i={},o={},a,c,l=[]){return(new lF).buildKeyframes(n,e,t,r,s,i,o,a,c,l)}class lF{buildKeyframes(e,t,r,s,i,o,a,c,l,u=[]){l=l||new kl;const d=new rp(e,t,l,s,i,u,[]);d.options=c,d.currentTimeline.setStyles([o],null,d.errors,c),bn(this,r,d);const h=d.timelines.filter(p=>p.containsAnimation());if(Object.keys(a).length){let p;for(let y=h.length-1;y>=0;y--){const A=h[y];if(A.element===t){p=A;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return h.length?h.map(p=>p.buildKeyframes()):[tp(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const s=t.createSubContext(e.options),i=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,s,s.options);i!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let i=t.currentTimeline.currentTime;const o=null!=r.duration?Is(r.duration):null,a=null!=r.delay?Is(r.delay):null;return 0!==o&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,o,a);i=Math.max(i,l.duration+l.delay)}),i}visitReference(e,t){t.updateOptions(e.options,!0),bn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const i=e.options;if(i&&(i.params||i.delay)&&(s=t.createSubContext(i),s.transformIntoNewTimeline(),null!=i.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=Fl);const o=Is(i.delay);s.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>bn(this,o,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?Is(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);i&&a.delayNextStep(i),bn(this,o,a),s=Math.max(s,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Ml(t.params?Tl(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(r.duration),this.visitStyle(i,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.getCurrentStyleProperties().length&&r.forwardFrame();const i=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(i):r.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,i=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*i),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(s+i),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},i=s.delay?Is(s.delay):0;i&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Fl);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,l);i&&d.delayNextStep(i),l===t.element&&(c=d.currentTimeline),bn(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,i=e.timings,o=Math.abs(i.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const u=t.currentTimeline;c&&u.delayNextStep(c);const d=u.currentTime;bn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-d+(s.startTime-r.currentTimeline.startTime)}}const Fl={};class rp{constructor(e,t,r,s,i,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=i,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Fl,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Ll(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=Is(r.duration)),null!=r.delay&&(s.delay=Is(r.delay));const i=r.params;if(i){let o=s.params;o||(o=this.options.params={}),Object.keys(i).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Tl(i[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,i=new rp(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=Fl,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},i=new uF(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(i),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,i,o){let a=[];if(s&&a.push(this.element),e.length>0){e=(e=e.replace(oF,"."+this._enterClassName)).replace(cF,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!i&&0==a.length&&o.push(function yk(n){return new ne(3014,Fe)}()),a}}class Ll{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Ll(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Nr,this._currentKeyframe[t]=Nr}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&(this._previousKeyframe.easing=t);const i=s&&s.params||{},o=function dF(n,e){const t={};let r;return n.forEach(s=>{"*"===s?(r=r||Object.keys(e),r.forEach(i=>{t[i]=Nr})):os(s,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const c=Tl(o[a],i,r);this._pendingStyles[a]=c,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Nr),this._updateStyle(a,c)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],s=e._styleSummary[t];(!r||s.time>r.time)&&this._updateStyle(t,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((a,c)=>{const l=os(a,!0);Object.keys(l).forEach(u=>{const d=l[u];"!"==d?e.add(u):d==Nr&&t.add(u)}),r||(l.offset=c/this.duration),s.push(l)});const i=e.size?xl(e.values()):[],o=t.size?xl(t.values()):[];if(r){const a=s[0],c=Ui(a);a.offset=0,c.offset=1,s=[a,c]}return tp(this.element,s,i,o,this.duration,this.startTime,this.easing,!1)}}class uF extends Ll{constructor(e,t,r,s,i,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=i,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],o=r+t,a=t/o,c=os(e[0],!1);c.offset=0,i.push(c);const l=os(e[0],!1);l.offset=tD(a),i.push(l);const u=e.length-1;for(let d=1;d<=u;d++){let h=os(e[d],!1);h.offset=tD((t+h.offset*r)/o),i.push(h)}r=o,t=0,s="",e=i}return tp(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function tD(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class sp{}class hF extends sp{normalizePropertyName(e,t){return Zf(e)}normalizeStyleValue(e,t,r,s){let i="";const o=r.toString().trim();if(fF[t]&&0!==r&&"0"!==r)if("number"==typeof r)i="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&s.push(function ok(n,e){return new ne(3005,Fe)}())}return o+i}}const fF=(()=>function pF(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function nD(n,e,t,r,s,i,o,a,c,l,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:i,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}const ip={};class rD{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function gF(n,e,t,r,s){return n.some(i=>i(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){const s=this._stateStyles["*"],i=this._stateStyles[e],o=s?s.buildStyles(t,r):{};return i?i.buildStyles(t,r):o}build(e,t,r,s,i,o,a,c,l,u){const d=[],h=this.ast.options&&this.ast.options.params||ip,y=this.buildStyles(r,a&&a.params||ip,d),A=c&&c.params||ip,j=this.buildStyles(s,A,d),U=new Set,P=new Map,Y=new Map,ae="void"===s,Ae={params:{...h,...A}},at=u?[]:np(e,t,this.ast.animation,i,o,y,j,Ae,l,d);let lt=0;if(at.forEach(En=>{lt=Math.max(En.duration+En.delay,lt)}),d.length)return nD(t,this._triggerName,r,s,ae,y,j,[],[],P,Y,lt,d);at.forEach(En=>{const Mn=En.element,ao=wn(P,Mn,{});En.preStyleProps.forEach(tr=>ao[tr]=!0);const jr=wn(Y,Mn,{});En.postStyleProps.forEach(tr=>jr[tr]=!0),Mn!==t&&U.add(Mn)});const Sn=xl(U.values());return nD(t,this._triggerName,r,s,ae,y,j,at,Sn,P,Y,lt)}}class mF{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},s=Ui(this.defaultParams);return Object.keys(e).forEach(i=>{const o=e[i];null!=o&&(s[i]=o)}),this.styles.styles.forEach(i=>{if("string"!=typeof i){const o=i;Object.keys(o).forEach(a=>{let c=o[a];c.length>1&&(c=Tl(c,s,t));const l=this.normalizer.normalizePropertyName(a,t);c=this.normalizer.normalizeStyleValue(a,l,c,t),r[l]=c})}}),r}}class vF{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(s=>{this.states[s.name]=new mF(s.style,s.options&&s.options.params||{},r)}),sD(this.states,"true","1"),sD(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new rD(e,s,this.states))}),this.fallbackTransition=function _F(n,e,t){return new rD(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(o=>o.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function sD(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const CF=new kl;class wF{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=Xf(this._driver,t,r,[]);if(r.length)throw function Sk(n){return new ne(3503,Fe)}();this._animations[e]=i}_buildPlayer(e,t,r){const s=e.element,i=Fb(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(s,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],i=this._animations[e];let o;const a=new Map;if(i?(o=np(this._driver,t,i,Qf,Dl,{},{},r,CF,s),o.forEach(u=>{const d=wn(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(s.push(function Ek(){return new ne(3300,Fe)}()),o=[]),s.length)throw function Mk(n){return new ne(3504,Fe)}();a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,Nr)})});const l=is(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=l,l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function Tk(n){return new ne(3301,Fe)}();return t}listen(e,t,r,s){const i=qf(t,"","","");return Uf(this._getPlayer(e),r,i,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const i=this._getPlayer(e);switch(r){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const iD="ng-animate-queued",op="ng-animate-disabled",MF=[],oD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},TF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ln="__ng_removed";class ap{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function RF(n){return n??null}(r?e.value:e),r){const i=Ui(e);delete i.value,this.options=i}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const _a="void",cp=new ap(_a);class xF{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Vn(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.hasOwnProperty(t))throw function xk(n,e){return new ne(3302,Fe)}();if(null==r||0==r.length)throw function Ik(n){return new ne(3303,Fe)}();if(!function PF(n){return"start"==n||"done"==n}(r))throw function Ak(n,e){return new ne(3400,Fe)}();const i=wn(this._elementListeners,e,[]),o={name:t,phase:r,callback:s};i.push(o);const a=wn(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Vn(e,Sl),Vn(e,Sl+"-"+t),a[t]=cp),()=>{this._engine.afterFlush(()=>{const c=i.indexOf(o);c>=0&&i.splice(c,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function Rk(n){return new ne(3401,Fe)}();return t}trigger(e,t,r,s=!0){const i=this._getTrigger(t),o=new lp(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Vn(e,Sl),Vn(e,Sl+"-"+t),this._engine.statesByElement.set(e,a={}));let c=a[t];const l=new ap(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a[t]=l,c||(c=cp),l.value!==_a&&c.value===l.value){if(!function kF(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const i=t[s];if(!e.hasOwnProperty(i)||n[i]!==e[i])return!1}return!0}(c.params,l.params)){const A=[],j=i.matchStyles(c.value,c.params,A),U=i.matchStyles(l.value,l.params,A);A.length?this._engine.reportError(A):this._engine.afterFlush(()=>{As(e,j),pr(e,U)})}return}const h=wn(this._engine.playersByElement,e,[]);h.forEach(A=>{A.namespaceId==this.id&&A.triggerName==t&&A.queued&&A.destroy()});let p=i.matchTransition(c.value,l.value,e,l.params),y=!1;if(!p){if(!s)return;p=i.fallbackTransition,y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:p,fromState:c,toState:l,player:o,isFallbackTransition:y}),y||(Vn(e,iD),o.onStart(()=>{Hi(e,iD)})),o.onDone(()=>{let A=this.players.indexOf(o);A>=0&&this.players.splice(A,1);const j=this._engine.playersByElement.get(e);if(j){let U=j.indexOf(o);U>=0&&j.splice(U,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,El,!0);r.forEach(s=>{if(s[Ln])return;const i=this._engine.fetchNamespacesByElement(s);i.size?i.forEach(o=>o.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const i=this._engine.statesByElement.get(e),o=new Map;if(i){const a=[];if(Object.keys(i).forEach(c=>{if(o.set(c,i[c].value),this._triggers[c]){const l=this.trigger(e,c,_a,s);l&&a.push(l)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&is(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(i=>{const o=i.name;if(s.has(o))return;s.add(o);const c=this._triggers[o].fallbackTransition,l=r[o]||cp,u=new ap(_a),d=new lp(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const i=r.players.length?r.playersByQueriedElement.get(e):[];if(i&&i.length)s=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const i=e[Ln];(!i||i===oD)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Vn(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const i=r.element,o=this._elementListeners.get(i);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=qf(i,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Uf(r.player,a.phase,c,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const i=r.transition.ast.depCount,o=s.transition.ast.depCount;return 0==i||0==o?i-o:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class IF{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,i)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new xF(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,s=this.namespacesByHostElement,i=r.length-1;if(i>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(t);for(;a;){const c=s.get(a);if(c){const l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=i;a>=0;a--)if(this.driver.containsElement(r[a].hostElement,t)){r.splice(a+1,0,e),o=!0;break}o||r.unshift(e)}else r.push(e);return s.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const s=Object.keys(r);for(let i=0;i<s.length;i++){const o=r[s[i]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,r,s){if(Vl(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!Vl(t))return;const i=t[Ln];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Vn(e,op)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Hi(e,op))}removeNode(e,t,r,s){if(Vl(t)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,r,s,i){this.collectedLeaveElements.push(t),t[Ln]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:i}}listen(e,t,r,s,i){return Vl(t)?this._fetchNamespace(e).listen(t,r,s,i):()=>{}}_buildInstruction(e,t,r,s,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,El,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Jf,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return is(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ln];if(t&&t.setForRemoval){if(e[Ln]=oD,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(op)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Vn(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?is(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw function Pk(n){return new ne(3402,Fe)}()}_flushAnimations(e,t){const r=new kl,s=[],i=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(re=>{u.add(re);const de=this.driver.query(re,".ng-animate-queued",!0);for(let ye=0;ye<de.length;ye++)u.add(de[ye])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),p=lD(h,this.collectedEnterElements),y=new Map;let A=0;p.forEach((re,de)=>{const ye=Qf+A++;y.set(de,ye),re.forEach(je=>Vn(je,ye))});const j=[],U=new Set,P=new Set;for(let re=0;re<this.collectedLeaveElements.length;re++){const de=this.collectedLeaveElements[re],ye=de[Ln];ye&&ye.setForRemoval&&(j.push(de),U.add(de),ye.hasAnimation?this.driver.query(de,".ng-star-inserted",!0).forEach(je=>U.add(je)):P.add(de))}const Y=new Map,ae=lD(h,Array.from(U));ae.forEach((re,de)=>{const ye=Dl+A++;Y.set(de,ye),re.forEach(je=>Vn(je,ye))}),e.push(()=>{p.forEach((re,de)=>{const ye=y.get(de);re.forEach(je=>Hi(je,ye))}),ae.forEach((re,de)=>{const ye=Y.get(de);re.forEach(je=>Hi(je,ye))}),j.forEach(re=>{this.processLeaveNode(re)})});const Ae=[],at=[];for(let re=this._namespaceList.length-1;re>=0;re--)this._namespaceList[re].drainQueuedTransitions(t).forEach(ye=>{const je=ye.player,kt=ye.element;if(Ae.push(je),this.collectedEnterElements.length){const an=kt[Ln];if(an&&an.setForMove){if(an.previousTriggersValues&&an.previousTriggersValues.has(ye.triggerName)){const Vs=an.previousTriggersValues.get(ye.triggerName),ps=this.statesByElement.get(ye.element);ps&&ps[ye.triggerName]&&(ps[ye.triggerName].value=Vs)}return void je.destroy()}}const yr=!d||!this.driver.containsElement(d,kt),Tn=Y.get(kt),fs=y.get(kt),ut=this._buildInstruction(ye,r,fs,Tn,yr);if(ut.errors&&ut.errors.length)return void at.push(ut);if(yr)return je.onStart(()=>As(kt,ut.fromStyles)),je.onDestroy(()=>pr(kt,ut.toStyles)),void s.push(je);if(ye.isFallbackTransition)return je.onStart(()=>As(kt,ut.fromStyles)),je.onDestroy(()=>pr(kt,ut.toStyles)),void s.push(je);const bE=[];ut.timelines.forEach(an=>{an.stretchStartingKeyframe=!0,this.disabledNodes.has(an.element)||bE.push(an)}),ut.timelines=bE,r.append(kt,ut.timelines),o.push({instruction:ut,player:je,element:kt}),ut.queriedElements.forEach(an=>wn(a,an,[]).push(je)),ut.preStyleProps.forEach((an,Vs)=>{const ps=Object.keys(an);if(ps.length){let js=c.get(Vs);js||c.set(Vs,js=new Set),ps.forEach(ig=>js.add(ig))}}),ut.postStyleProps.forEach((an,Vs)=>{const ps=Object.keys(an);let js=l.get(Vs);js||l.set(Vs,js=new Set),ps.forEach(ig=>js.add(ig))})});if(at.length){const re=[];at.forEach(de=>{re.push(function Nk(n,e){return new ne(3505,Fe)}())}),Ae.forEach(de=>de.destroy()),this.reportError(re)}const lt=new Map,Sn=new Map;o.forEach(re=>{const de=re.element;r.has(de)&&(Sn.set(de,de),this._beforeAnimationBuild(re.player.namespaceId,re.instruction,lt))}),s.forEach(re=>{const de=re.element;this._getPreviousPlayers(de,!1,re.namespaceId,re.triggerName,null).forEach(je=>{wn(lt,de,[]).push(je),je.destroy()})});const En=j.filter(re=>dD(re,c,l)),Mn=new Map;cD(Mn,this.driver,P,l,Nr).forEach(re=>{dD(re,c,l)&&En.push(re)});const jr=new Map;p.forEach((re,de)=>{cD(jr,this.driver,new Set(re),c,"!")}),En.forEach(re=>{const de=Mn.get(re),ye=jr.get(re);Mn.set(re,{...de,...ye})});const tr=[],co=[],lo={};o.forEach(re=>{const{element:de,player:ye,instruction:je}=re;if(r.has(de)){if(u.has(de))return ye.onDestroy(()=>pr(de,je.toStyles)),ye.disabled=!0,ye.overrideTotalTime(je.totalTime),void s.push(ye);let kt=lo;if(Sn.size>1){let Tn=de;const fs=[];for(;Tn=Tn.parentNode;){const ut=Sn.get(Tn);if(ut){kt=ut;break}fs.push(Tn)}fs.forEach(ut=>Sn.set(ut,kt))}const yr=this._buildAnimation(ye.namespaceId,je,lt,i,jr,Mn);if(ye.setRealPlayer(yr),kt===lo)tr.push(ye);else{const Tn=this.playersByElement.get(kt);Tn&&Tn.length&&(ye.parentPlayer=is(Tn)),s.push(ye)}}else As(de,je.fromStyles),ye.onDestroy(()=>pr(de,je.toStyles)),co.push(ye),u.has(de)&&s.push(ye)}),co.forEach(re=>{const de=i.get(re.element);if(de&&de.length){const ye=is(de);re.setRealPlayer(ye)}}),s.forEach(re=>{re.parentPlayer?re.syncPlayerEvents(re.parentPlayer):re.destroy()});for(let re=0;re<j.length;re++){const de=j[re],ye=de[Ln];if(Hi(de,Dl),ye&&ye.hasAnimation)continue;let je=[];if(a.size){let yr=a.get(de);yr&&yr.length&&je.push(...yr);let Tn=this.driver.query(de,Jf,!0);for(let fs=0;fs<Tn.length;fs++){let ut=a.get(Tn[fs]);ut&&ut.length&&je.push(...ut)}}const kt=je.filter(yr=>!yr.destroyed);kt.length?NF(this,de,kt):this.processLeaveNode(de)}return j.length=0,tr.forEach(re=>{this.players.push(re),re.onDone(()=>{re.destroy();const de=this.players.indexOf(re);this.players.splice(de,1)}),re.play()}),tr}elementContainsData(e,t){let r=!1;const s=t[Ln];return s&&s.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,i){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!i||i==_a;a.forEach(l=>{l.queued||!c&&l.triggerName!=s||o.push(l)})}}return(r||s)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||s&&s!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const i=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,u=l!==i,d=wn(r,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(p=>{const y=p.getRealPlayer();y.beforeDestroy&&y.beforeDestroy(),p.destroy(),d.push(p)})}As(i,t.fromStyles)}_buildAnimation(e,t,r,s,i,o){const a=t.triggerName,c=t.element,l=[],u=new Set,d=new Set,h=t.timelines.map(y=>{const A=y.element;u.add(A);const j=A[Ln];if(j&&j.removedBeforeQueried)return new ya(y.duration,y.delay);const U=A!==c,P=function OF(n){const e=[];return uD(n,e),e}((r.get(A)||MF).map(lt=>lt.getRealPlayer())).filter(lt=>!!lt.element&&lt.element===A),Y=i.get(A),ae=o.get(A),Ae=Fb(0,this._normalizer,0,y.keyframes,Y,ae),at=this._buildPlayer(y,Ae,P);if(y.subTimeline&&s&&d.add(A),U){const lt=new lp(e,a,A);lt.setRealPlayer(at),l.push(lt)}return at});l.forEach(y=>{wn(this.playersByQueriedElement,y.element,[]).push(y),y.onDone(()=>function AF(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,y.element,y))}),u.forEach(y=>Vn(y,Gb));const p=is(h);return p.onDestroy(()=>{u.forEach(y=>Hi(y,Gb)),pr(c,t.toStyles)}),d.forEach(y=>{wn(s,y,[]).push(p)}),p}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ya(e.duration,e.delay)}}class lp{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ya,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>Uf(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){wn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Vl(n){return n&&1===n.nodeType}function aD(n,e){const t=n.style.display;return n.style.display=e??"none",t}function cD(n,e,t,r,s){const i=[];t.forEach(c=>i.push(aD(c)));const o=[];r.forEach((c,l)=>{const u={};c.forEach(d=>{const h=u[d]=e.computeStyle(l,d,s);(!h||0==h.length)&&(l[Ln]=TF,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>aD(c,i[a++])),o}function lD(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const s=new Set(e),i=new Map;function o(a){if(!a)return 1;let c=i.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:s.has(l)?1:o(l),i.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function Vn(n,e){n.classList?.add(e)}function Hi(n,e){n.classList?.remove(e)}function NF(n,e,t){is(t).onDone(()=>n.processLeaveNode(e))}function uD(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Ob?uD(r.players,e):e.push(r)}}function dD(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(i=>s.add(i)):e.set(n,r),t.delete(n),!0}class jl{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,i)=>{},this._transitionEngine=new IF(e,t,r),this._timelineEngine=new wF(e,t,r),this._transitionEngine.onRemovalComplete=(s,i)=>this.onRemovalComplete(s,i)}registerTrigger(e,t,r,s,i){const o=e+"-"+s;let a=this._triggerCache[o];if(!a){const c=[],u=Xf(this._driver,i,c,[]);if(c.length)throw function bk(n,e){return new ne(3404,Fe)}();a=function yF(n,e,t){return new vF(n,e,t)}(s,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,s,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r,s){this._transitionEngine.removeNode(e,t,s||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[i,o]=Lb(r);this._timelineEngine.command(i,t,o,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,i){if("@"==r.charAt(0)){const[o,a]=Lb(r);return this._timelineEngine.listen(o,t,a,i)}return this._transitionEngine.listen(e,t,r,s,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let LF=(()=>{class n{constructor(t,r,s){this._element=t,this._startStyles=r,this._endStyles=s,this._state=0;let i=n.initialStylesByElement.get(t);i||n.initialStylesByElement.set(t,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&pr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pr(this._element,this._initialStyles),this._endStyles&&(pr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(As(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(As(this._element,this._endStyles),this._endStyles=null),pr(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function up(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const s=t[r];VF(s)&&(e=e||{},e[s]=n[s])}return e}function VF(n){return"display"===n||"position"===n}class hD{constructor(e,t,r,s){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:Yb(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class jF{validateStyleProperty(e){return $b(e)}matchesElement(e,t){return!1}containsElement(e,t){return Ub(e,t)}getParentElement(e){return Gf(e)}query(e,t,r){return Hb(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,s,i,o=[]){const c={duration:r,delay:s,fill:0==s?"both":"forwards"};i&&(c.easing=i);const l={},u=o.filter(h=>h instanceof hD);(function Hk(n,e){return 0===n||0===e})(r,s)&&u.forEach(h=>{let p=h.currentSnapshot;Object.keys(p).forEach(y=>l[y]=p[y])}),t=function qk(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let i=e[0],o=[];if(r.forEach(a=>{i.hasOwnProperty(a)||o.push(a),i[a]=t[a]}),o.length)for(var s=1;s<e.length;s++){let a=e[s];o.forEach(function(c){a[c]=Yb(n,c)})}}return e}(e,t=t.map(h=>os(h,!1)),l);const d=function FF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=up(e[0]),e.length>1&&(r=up(e[e.length-1]))):e&&(t=up(e)),t||r?new LF(n,t,r):null}(e,t);return new hD(e,t,c,d)}}let BF=(()=>{class n extends Rb{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Un.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?Pb(t):t;return fD(this._renderer,null,r,"register",[s]),new $F(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(X(Xo),X(Gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class $F extends class ek{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new UF(this._id,e,t||{},this._renderer)}}class UF{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return fD(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function fD(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const pD="@.disabled";let HF=(()=>{class n{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(i,o)=>{const a=o?.parentNode(i);a&&o.removeChild(a,i)}}createRenderer(t,r){const i=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let u=this._rendererCache.get(i);return u||(u=new gD("",i,this.engine),this._rendererCache.set(i,u)),u}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=u=>{Array.isArray(u)?u.forEach(c):this.engine.registerTrigger(o,a,t,u.name,u)};return r.data.animation.forEach(c),new qF(this,a,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(i=>{const[o,a]=i;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(X(Xo),X(jl),X(gt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class gD{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==pD?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class qF extends gD{constructor(e,t,r,s){super(t,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==pD?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function zF(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let i=t.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function GF(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,s,i,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let WF=(()=>{class n extends jl{constructor(t,r,s){super(t.body,r,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(X(Gt),X(Wf),X(sp))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const mD=new _e("AnimationModuleType"),yD=[{provide:Rb,useClass:BF},{provide:sp,useFactory:function QF(){return new hF}},{provide:jl,useClass:WF},{provide:Xo,useFactory:function JF(n,e,t){return new HF(n,e,t)},deps:[ll,jl,gt]}],vD=[{provide:Wf,useFactory:()=>new jF},{provide:mD,useValue:"BrowserAnimations"},...yD],KF=[{provide:Wf,useClass:qb},{provide:mD,useValue:"NoopAnimations"},...yD];let dp,YF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?KF:vD}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({providers:vD,imports:[ww]}),n})();function _D(n,e,t,r,s,i,o){try{var a=n[i](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(r,s)}function J(n){return function(){var e=this,t=arguments;return new Promise(function(r,s){var i=n.apply(e,t);function o(c){_D(i,r,s,o,a,"next",c)}function a(c){_D(i,r,s,o,a,"throw",c)}o(void 0)})}}try{dp=typeof Intl<"u"&&Intl.v8BreakIterator}catch{dp=!1}let ZF=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function _N(n){return n===cw}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!dp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(X(qc))},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wD(n,e=0){return function rL(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function bD(n,e,t,r){return _(t)&&(r=t,t=void 0),r?bD(n,e,t).pipe(pe(s=>S(s)?r(...s):r(s))):new W(s=>{DD(n,e,function i(o){s.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},s,t)})}function DD(n,e,t,r,s){let i;if(function oL(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,s),i=()=>o.removeEventListener(e,t,s)}else if(function iL(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),i=()=>o.off(e,t)}else if(function sL(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),i=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)DD(n[o],e,t,r,s)}r.add(i)}class aL extends M{constructor(e,t){super()}schedule(e,t=0){return this}}let SD=(()=>{class n{constructor(t,r=n.now){this.SchedulerAction=t,this.now=r}schedule(t,r=0,s){return new this.SchedulerAction(this,t).schedule(s,r)}}return n.now=()=>Date.now(),n})();class as extends SD{constructor(e,t=SD.now){super(e,()=>as.delegate&&as.delegate!==this?as.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,r){return as.delegate&&as.delegate!==this?as.delegate.schedule(e,t,r):super.schedule(e,t,r)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const zi=new as(class cL extends aL{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(i){r=!0,s=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),s}_unsubscribe(){const e=this.id,t=this.scheduler,r=t.actions,s=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&r.splice(s,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}});class uL{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new dL(e,this.durationSelector))}}class dL extends zs{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:s}=this;t=s(e)}catch(s){return this.destination.error(s)}const r=Gs(t,new qs(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:e,hasValue:t,throttled:r}=this;r&&(this.remove(r),this.throttled=void 0,r.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function ED(n){return!S(n)&&n-parseFloat(n)+1>=0}function fL(n){const{index:e,period:t,subscriber:r}=n;if(r.next(e),!r.closed){if(-1===t)return r.complete();n.index=e+1,this.schedule(n,t)}}function Gi(n){return e=>e.lift(new gL(n))}class gL{constructor(e){this.notifier=e}call(e,t){const r=new mL(e),s=Gs(this.notifier,new qs(r));return s&&!r.seenValue?(r.add(s),t.subscribe(r)):r}}class mL extends zs{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let yL=(()=>{class n{constructor(t,r,s,i){this._elementRef=t,this._platform=r,this._ngZone=s,this._destroyed=new se,this._enabled=!0,this._previousMinRows=-1,this._isViewInited=!1,this._handleFocusEvent=o=>{this._hasFocus="focus"===o.type},this._document=i,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(t){this._minRows=wD(t),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(t){this._maxRows=wD(t),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(t){t=function nL(n){return null!=n&&"false"!=`${n}`}(t),this._enabled!==t&&((this._enabled=t)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(t){this._cachedPlaceholderHeight=void 0,t?this._textareaElement.setAttribute("placeholder",t):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_setMinHeight(){const t=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.minHeight=t)}_setMaxHeight(){const t=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.maxHeight=t)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{bD(this._getWindow(),"resize").pipe(function pL(n,e=zi){return function lL(n){return function(t){return t.lift(new uL(n))}}(()=>function hL(n=0,e,t){let r=-1;return ED(e)?r=Number(e)<1?1:Number(e):Jt(e)&&(t=e),Jt(t)||(t=zi),new W(s=>{const i=ED(n)?n:+n-t.now();return t.schedule(fL,i,{index:0,period:r,subscriber:s})})}(n,e))}(16),Gi(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0)),this._textareaElement.addEventListener("focus",this._handleFocusEvent),this._textareaElement.addEventListener("blur",this._handleFocusEvent)}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._textareaElement.removeEventListener("focus",this._handleFocusEvent),this._textareaElement.removeEventListener("blur",this._handleFocusEvent),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let t=this._textareaElement.cloneNode(!1);t.rows=1,t.style.position="absolute",t.style.visibility="hidden",t.style.border="none",t.style.padding="0",t.style.height="",t.style.minHeight="",t.style.maxHeight="",t.style.overflow="hidden",this._textareaElement.parentNode.appendChild(t),this._cachedLineHeight=t.clientHeight,t.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){const t=this._textareaElement,r=t.style.marginBottom||"",s=this._platform.FIREFOX,i=s&&this._hasFocus,o=s?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";i&&(t.style.marginBottom=`${t.clientHeight}px`),t.classList.add(o);const a=t.scrollHeight-4;return t.classList.remove(o),i&&(t.style.marginBottom=r),a}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||null!=this._cachedPlaceholderHeight)return;if(!this.placeholder)return void(this._cachedPlaceholderHeight=0);const t=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=t}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(t=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;const r=this._elementRef.nativeElement,s=r.value;if(!t&&this._minRows===this._previousMinRows&&s===this._previousValue)return;const i=this._measureScrollHeight(),o=Math.max(i,this._cachedPlaceholderHeight||0);r.style.height=`${o}px`,this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame<"u"?requestAnimationFrame(()=>this._scrollToCaretPosition(r)):setTimeout(()=>this._scrollToCaretPosition(r))}),this._previousValue=s,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(t){const{selectionStart:r,selectionEnd:s}=t;!this._destroyed.isStopped&&this._hasFocus&&t.setSelectionRange(r,s)}}return n.\u0275fac=function(t){return new(t||n)(V(rn),V(ZF),V(gt),V(Gt,8))},n.\u0275dir=he({type:n,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(t,r){1&t&&K("input",function(){return r._noopInputHandler()})},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]}),n})(),vL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({}),n})();class Ue extends se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ie;return this._value}next(e){super.next(this._value=e)}}class _L extends F{notifyNext(e,t,r,s,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class CL extends F{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function wL(n,e,t,r,s=new CL(n,t,r)){if(!s.closed)return e instanceof W?e.subscribe(s):lu(e)(s)}const MD={};function wa(...n){let e,t;return Jt(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&S(n[0])&&(n=n[0]),du(n,t).lift(new bL(e))}class bL{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new DL(e,this.resultSelector))}}class DL extends _L{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(MD),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(wL(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const s=this.values,o=this.toRespond?s[r]===MD?--this.toRespond:this.toRespond:0;s[r]=t,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function ve(...n){let e=n[n.length-1];return Jt(e)?(n.pop(),uu(n,e)):du(n)}function At(n,e){return function(r){return r.lift(new SL(n,e))}}class SL{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new EL(e,this.predicate,this.thisArg))}}class EL extends F{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Wi(n,e=zi){return t=>t.lift(new ML(n,e))}class ML{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new TL(e,this.dueTime,this.scheduler))}}class TL extends F{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(xL,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function xL(n){n.debouncedNext()}const Ul=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})(),TD=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})(),Qi=new W(n=>n.complete());function Hl(n){return n?function IL(n){return new W(e=>n.schedule(()=>e.complete()))}(n):Qi}function fp(n){return e=>0===n?Hl():e.lift(new AL(n))}class AL{constructor(e){if(this.total=e,this.total<0)throw new TD}call(e,t){return t.subscribe(new RL(e,this.total))}}class RL extends F{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function xD(n=null){return e=>e.lift(new PL(n))}class PL{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new NL(e,this.defaultValue))}}class NL extends F{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function ID(n=FL){return e=>e.lift(new OL(n))}class OL{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new kL(e,this.errorFactory))}}class kL extends F{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function FL(){return new Ul}function jn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?At((s,i)=>n(s,i,r)):z,fp(1),t?xD(e):ID(()=>new Ul))}function AD(n){return n instanceof Date&&!isNaN(+n)}function Ji(n,e){return new W(e?t=>e.schedule(LL,0,{error:n,subscriber:t}):t=>t.error(n))}function LL({error:n,subscriber:e}){e.error(n)}class er{constructor(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}}accept(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)}toObservable(){switch(this.kind){case"N":return ve(this.value);case"E":return Ji(this.error);case"C":return Hl()}throw new Error("unexpected notification kind value")}static createNext(e){return typeof e<"u"?new er("N",e):er.undefinedValueNotification}static createError(e){return new er("E",void 0,e)}static createComplete(){return er.completeNotification}}er.completeNotification=new er("C"),er.undefinedValueNotification=new er("N",void 0);class jL{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new pp(e,this.delay,this.scheduler))}}class pp extends F{constructor(e,t,r){super(e),this.delay=t,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,r=t.queue,s=e.scheduler,i=e.destination;for(;r.length>0&&r[0].time-s.now()<=0;)r.shift().notification.observe(i);if(r.length>0){const o=Math.max(0,r[0].time-s.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(pp.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,r=new BL(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(er.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(er.createComplete()),this.unsubscribe()}}class BL{constructor(e,t){this.time=e,this.notification=t}}function RD(n,e){return t=>t.lift(new $L(n,e))}class $L{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new UL(e,this.compare,this.keySelector))}}class UL extends F{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:s}=this;t=s?s(e):e}catch(s){return this.destination.error(s)}let r=!1;if(this.hasKey)try{const{compare:s}=this;r=s(this.key,t)}catch(s){return this.destination.error(s)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}const HL=(()=>{function n(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return n.prototype=Object.create(Error.prototype),n})();class zL{constructor(e,t,r,s){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=s}call(e,t){return t.subscribe(new gp(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class gp extends zs{constructor(e,t,r,s,i){super(e),this.absoluteTimeout=t,this.waitFor=r,this.withObservable=s,this.scheduler=i,this.scheduleTimeout()}static dispatchTimeout(e){const{withObservable:t}=e;e._unsubscribeAndRecycle(),e.add(Gs(t,new qs(e)))}scheduleTimeout(){const{action:e}=this;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(gp.dispatchTimeout,this.waitFor,this))}_next(e){this.absoluteTimeout||this.scheduleTimeout(),super._next(e)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}function cs(n){return function(t){const r=new WL(n),s=t.lift(r);return r.caught=s}}class WL{constructor(e){this.selector=e}call(e,t){return t.subscribe(new QL(e,this.selector,this.caught))}}class QL extends zs{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(i){return void super.error(i)}this._unsubscribeAndRecycle();const r=new qs(this);this.add(r);const s=Gs(t,r);s!==r&&this.add(s)}}}var N=g(9225);function Ki(n,e){return Pt(n,e,1)}class PD{}class ND{}class Or{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),i=s.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(s,i),this.headers.has(i)?this.headers.get(i).push(o):this.headers.set(i,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Or?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Or;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Or?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const i=e.value;if(i){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===i.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class JL{encodeKey(e){return OD(e)}encodeValue(e){return OD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const YL=/%(\d[a-f0-9])/gi,ZL={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function OD(n){return encodeURIComponent(n).replace(YL,(e,t)=>ZL[t]??e)}function kD(n){return`${n}`}class ls{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new JL,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function KL(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const i=s.indexOf("="),[o,a]=-1==i?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,i)),e.decodeValue(s.slice(i+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ls({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(kD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(kD(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class XL{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function FD(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function LD(n){return typeof Blob<"u"&&n instanceof Blob}function VD(n){return typeof FormData<"u"&&n instanceof FormData}class ba{constructor(e,t,r,s){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function e2(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,i=s):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Or),this.context||(this.context=new XL),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new ls,this.urlWithParams=t}serializeBody(){return null===this.body?null:FD(this.body)||LD(this.body)||VD(this.body)||function t2(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ls?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||VD(this.body)?null:LD(this.body)?this.body.type||null:FD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ls?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),l)),new ba(t,r,i,{params:l,headers:c,context:u,reportProgress:a,responseType:s,withCredentials:o})}}var Et=(()=>((Et=Et||{})[Et.Sent=0]="Sent",Et[Et.UploadProgress=1]="UploadProgress",Et[Et.ResponseHeader=2]="ResponseHeader",Et[Et.DownloadProgress=3]="DownloadProgress",Et[Et.Response=4]="Response",Et[Et.User=5]="User",Et))();class mp{constructor(e,t=200,r="OK"){this.headers=e.headers||new Or,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class yp extends mp{constructor(e={}){super(e),this.type=Et.ResponseHeader}clone(e={}){return new yp({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ql extends mp{constructor(e={}){super(e),this.type=Et.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ql({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class jD extends mp{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function vp(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let _p=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let i;if(t instanceof ba)i=t;else{let c,l;c=s.headers instanceof Or?s.headers:new Or(s.headers),s.params&&(l=s.params instanceof ls?s.params:new ls({fromObject:s.params})),i=new ba(t,r,void 0!==s.body?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const o=ve(i).pipe(Ki(c=>this.handler.handle(c)));if(t instanceof ba||"events"===s.observe)return o;const a=o.pipe(At(c=>c instanceof ql));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(pe(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(pe(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(pe(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(pe(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ls).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,vp(s,r))}post(t,r,s={}){return this.request("POST",t,vp(s,r))}put(t,r,s={}){return this.request("PUT",t,vp(s,r))}}return n.\u0275fac=function(t){return new(t||n)(X(PD))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class BD{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const $D=new _e("HTTP_INTERCEPTORS");let n2=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const r2=/^\)\]\}',?\n/;let UD=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new W(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((p,y)=>s.setRequestHeader(p,y.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const p=t.detectContentTypeHeader();null!==p&&s.setRequestHeader("Content-Type",p)}if(t.responseType){const p=t.responseType.toLowerCase();s.responseType="json"!==p?p:"text"}const i=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const p=s.statusText||"OK",y=new Or(s.getAllResponseHeaders()),A=function s2(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return o=new yp({headers:y,status:s.status,statusText:p,url:A}),o},c=()=>{let{headers:p,status:y,statusText:A,url:j}=a(),U=null;204!==y&&(U=typeof s.response>"u"?s.responseText:s.response),0===y&&(y=U?200:0);let P=y>=200&&y<300;if("json"===t.responseType&&"string"==typeof U){const Y=U;U=U.replace(r2,"");try{U=""!==U?JSON.parse(U):null}catch(ae){U=Y,P&&(P=!1,U={error:ae,text:U})}}P?(r.next(new ql({body:U,headers:p,status:y,statusText:A,url:j||void 0})),r.complete()):r.error(new jD({error:U,headers:p,status:y,statusText:A,url:j||void 0}))},l=p=>{const{url:y}=a(),A=new jD({error:p,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});r.error(A)};let u=!1;const d=p=>{u||(r.next(a()),u=!0);let y={type:Et.DownloadProgress,loaded:p.loaded};p.lengthComputable&&(y.total=p.total),"text"===t.responseType&&!!s.responseText&&(y.partialText=s.responseText),r.next(y)},h=p=>{let y={type:Et.UploadProgress,loaded:p.loaded};p.lengthComputable&&(y.total=p.total),r.next(y)};return s.addEventListener("load",c),s.addEventListener("error",l),s.addEventListener("timeout",l),s.addEventListener("abort",l),t.reportProgress&&(s.addEventListener("progress",d),null!==i&&s.upload&&s.upload.addEventListener("progress",h)),s.send(i),r.next({type:Et.Sent}),()=>{s.removeEventListener("error",l),s.removeEventListener("abort",l),s.removeEventListener("load",c),s.removeEventListener("timeout",l),t.reportProgress&&(s.removeEventListener("progress",d),null!==i&&s.upload&&s.upload.removeEventListener("progress",h)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(X(uw))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const Cp=new _e("XSRF_COOKIE_NAME"),wp=new _e("XSRF_HEADER_NAME");class HD{}let i2=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=XC(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(X(Gt),X(qc),X(Cp))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),bp=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const i=this.tokenService.getToken();return null!==i&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,i)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(X(HD),X(wp))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),o2=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get($D,[]);this.chain=r.reduceRight((s,i)=>new BD(s,i),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(X(ND),X(tn))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),a2=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:bp,useClass:n2}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Cp,useValue:t.cookieName}:[],t.headerName?{provide:wp,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({providers:[bp,{provide:$D,useExisting:bp,multi:!0},{provide:HD,useClass:i2},{provide:Cp,useValue:"XSRF-TOKEN"},{provide:wp,useValue:"X-XSRF-TOKEN"}]}),n})(),c2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({providers:[_p,{provide:PD,useClass:o2},UD,{provide:ND,useExisting:UD}],imports:[[a2.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();function Dp(...n){return function l2(){return fo(1)}()(ve(...n))}function qD(n){return new W(e=>{let t;try{t=n()}catch(s){return void e.error(s)}return(t?jt(t):Hl()).subscribe(e)})}function us(n,e){return"function"==typeof e?t=>t.pipe(us((r,s)=>jt(n(r,s)).pipe(pe((i,o)=>e(r,i,s,o))))):t=>t.lift(new u2(n))}class u2{constructor(e){this.project=e}call(e,t){return t.subscribe(new d2(e,this.project))}}class d2 extends zs{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(s){return void this.destination.error(s)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new qs(this),s=this.destination;s.add(r),this.innerSubscription=Gs(e,r),this.innerSubscription!==r&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function zD(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(s){return s.lift(new f2(n,e,t))}}class f2{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new p2(e,this.accumulator,this.seed,this.hasSeed))}}class p2 extends F{constructor(e,t,r,s){super(e),this.accumulator=t,this._seed=r,this.hasSeed=s,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(s){this.destination.error(s)}this.seed=r,this.destination.next(r)}}function Sp(n){return function(t){return 0===n?Hl():t.lift(new g2(n))}}class g2{constructor(e){if(this.total=e,this.total<0)throw new TD}call(e,t){return t.subscribe(new m2(e,this.total))}}class m2 extends F{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,s=this.count++;t.length<r?t.push(e):t[s%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,s=this.ring;for(let i=0;i<r;i++){const o=t++%r;e.next(s[o])}}e.complete()}}function ds(){}function Dn(n,e,t){return function(s){return s.lift(new v2(n,e,t))}}class v2{constructor(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}call(e,t){return t.subscribe(new _2(e,this.nextOrObserver,this.error,this.complete))}}class _2 extends F{constructor(e,t,r,s){super(e),this._tapNext=ds,this._tapError=ds,this._tapComplete=ds,this._tapError=r||ds,this._tapComplete=s||ds,_(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||ds,this._tapError=t.error||ds,this._tapComplete=t.complete||ds)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class w2{constructor(e){this.callback=e}call(e,t){return t.subscribe(new b2(e,this.callback))}}class b2 extends F{constructor(e,t){super(e),this.add(new M(t))}}class kr{constructor(e,t){this.id=e,this.url=t}}class Ep extends kr{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Da extends kr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class GD extends kr{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class D2 extends kr{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class S2 extends kr{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E2 extends kr{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M2 extends kr{constructor(e,t,r,s,i){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class T2 extends kr{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class x2 extends kr{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WD{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class QD{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class I2{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class A2{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class R2{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P2{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JD{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ne="primary";class N2{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Yi(n){return new N2(n)}const KD="ngNavigationCancelingError";function Mp(n){const e=Error("NavigationCancelingError: "+n);return e[KD]=!0,e}function k2(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let i=0;i<r.length;i++){const o=r[i],a=n[i];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function gr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let i=0;i<t.length;i++)if(s=t[i],!YD(n[s],e[s]))return!1;return!0}function YD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,i)=>r[i]===s)}return n===e}function ZD(n){return Array.prototype.concat.apply([],n)}function XD(n){return n.length>0?n[n.length-1]:null}function Vt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function mr(n){return nh(n)?n:zo(n)?jt(Promise.resolve(n)):ve(n)}const V2={exact:function nS(n,e,t){if(!Os(n.segments,e.segments)||!zl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!nS(n.children[r],e.children[r],t))return!1;return!0},subset:rS},eS={exact:function j2(n,e){return gr(n,e)},subset:function B2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>YD(n[t],e[t]))},ignored:()=>!0};function tS(n,e,t){return V2[t.paths](n.root,e.root,t.matrixParams)&&eS[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function rS(n,e,t){return sS(n,e,e.segments,t)}function sS(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Os(s,t)||e.hasChildren()||!zl(s,t,r))}if(n.segments.length===t.length){if(!Os(n.segments,t)||!zl(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!rS(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!!(Os(n.segments,s)&&zl(n.segments,s,r)&&n.children[Ne])&&sS(n.children[Ne],e,i,r)}}function zl(n,e,t){return e.every((r,s)=>eS[t](n[s].parameters,r.parameters))}class Ns{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yi(this.queryParams)),this._queryParamMap}toString(){return H2.serialize(this)}}class Le{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Vt(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gl(this)}}class Sa{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Yi(this.parameters)),this._parameterMap}toString(){return lS(this)}}function Os(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class iS{}class oS{parse(e){const t=new Z2(e);return new Ns(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ea(e.root,!0)}`,r=function G2(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Wl(t)}=${Wl(s)}`).join("&"):`${Wl(t)}=${Wl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),s="string"==typeof e.fragment?`#${function q2(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${s}`}}const H2=new oS;function Gl(n){return n.segments.map(e=>lS(e)).join("/")}function Ea(n,e){if(!n.hasChildren())return Gl(n);if(e){const t=n.children[Ne]?Ea(n.children[Ne],!1):"",r=[];return Vt(n.children,(s,i)=>{i!==Ne&&r.push(`${i}:${Ea(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function U2(n,e){let t=[];return Vt(n.children,(r,s)=>{s===Ne&&(t=t.concat(e(r,s)))}),Vt(n.children,(r,s)=>{s!==Ne&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Ne?[Ea(n.children[Ne],!1)]:[`${s}:${Ea(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ne]?`${Gl(n)}/${t[0]}`:`${Gl(n)}/(${t.join("//")})`}}function aS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wl(n){return aS(n).replace(/%3B/gi,";")}function Tp(n){return aS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ql(n){return decodeURIComponent(n)}function cS(n){return Ql(n.replace(/\+/g,"%20"))}function lS(n){return`${Tp(n.path)}${function z2(n){return Object.keys(n).map(e=>`;${Tp(e)}=${Tp(n[e])}`).join("")}(n.parameters)}`}const W2=/^[^\/()?;=#]+/;function Jl(n){const e=n.match(W2);return e?e[0]:""}const Q2=/^[^=?&#]+/,K2=/^[^&#]+/;class Z2{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ne]=new Le(e,t)),r}parseSegment(){const e=Jl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Sa(Ql(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Jl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Jl(this.remaining);s&&(r=s,this.capture(r))}e[Ql(t)]=Ql(r)}parseQueryParam(e){const t=function J2(n){const e=n.match(Q2);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Y2(n){const e=n.match(K2);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const s=cS(t),i=cS(r);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(i)}else e[s]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Jl(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let i;r.indexOf(":")>-1?(i=r.substr(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Ne);const o=this.parseChildren();t[i]=1===Object.keys(o).length?o[Ne]:new Le([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class uS{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=xp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ip(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Ip(e,this._root).map(t=>t.value)}}function xp(n,e){if(n===e.value)return e;for(const t of e.children){const r=xp(n,t);if(r)return r}return null}function Ip(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ip(n,t);if(r.length)return r.unshift(e),r}return[]}class Fr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Zi(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class dS extends uS{constructor(e,t){super(e),this.snapshot=t,Ap(this,e)}toString(){return this.snapshot.toString()}}function hS(n,e){const t=function X2(n,e){const o=new Kl([],{},{},"",{},Ne,e,null,n.root,-1,{});return new pS("",new Fr(o,[]))}(n,e),r=new Ue([new Sa("",{})]),s=new Ue({}),i=new Ue({}),o=new Ue({}),a=new Ue(""),c=new Xi(r,s,o,a,i,Ne,e,t.root);return c.snapshot=t.root,new dS(new Fr(c,[]),t)}class Xi{constructor(e,t,r,s,i,o,a,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(pe(e=>Yi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(pe(e=>Yi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fS(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],i=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(i.component)break;r--}}return function eV(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...e.resolve,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Kl{constructor(e,t,r,s,i,o,a,c,l,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pS extends uS{constructor(e,t){super(t),this.url=e,Ap(this,t)}toString(){return gS(this._root)}}function Ap(n,e){e.value._routerState=n,e.children.forEach(t=>Ap(n,t))}function gS(n){const e=n.children.length>0?` { ${n.children.map(gS).join(", ")} } `:"";return`${n.value}${e}`}function Rp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),gr(e.params,t.params)||n.params.next(t.params),function F2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),gr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Pp(n,e){const t=gr(n.params,e.params)&&function $2(n,e){return Os(n,e)&&n.every((t,r)=>gr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Pp(n.parent,e.parent))}function Ma(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function nV(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Ma(n,r,s);return Ma(n,r)})}(n,e,t);return new Fr(r,s)}{if(n.shouldAttach(e.value)){const i=n.retrieve(e.value);if(null!==i){const o=i.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ma(n,a)),o}}const r=function rV(n){return new Xi(new Ue(n.url),new Ue(n.params),new Ue(n.queryParams),new Ue(n.fragment),new Ue(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(i=>Ma(n,i));return new Fr(r,s)}}function Yl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ta(n){return"object"==typeof n&&null!=n&&n.outlets}function Np(n,e,t,r,s){let i={};if(r&&Vt(r,(a,c)=>{i[c]=Array.isArray(a)?a.map(l=>`${l}`):`${a}`}),n===e)return new Ns(t,i,s);const o=mS(n,e,t);return new Ns(o,i,s)}function mS(n,e,t){const r={};return Vt(n.children,(s,i)=>{r[i]=s===e?t:mS(s,e,t)}),new Le(n.segments,r)}class yS{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Yl(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(Ta);if(s&&s!==XD(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Op{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function vS(n,e,t){if(n||(n=new Le([],{})),0===n.segments.length&&n.hasChildren())return Zl(n,e,t);const r=function lV(n,e,t){let r=0,s=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return i;const o=n.segments[s],a=t[r];if(Ta(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(s>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!CS(c,l,o))return i;r+=2}else{if(!CS(c,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const i=new Le(n.segments.slice(0,r.pathIndex),{});return i.children[Ne]=new Le(n.segments.slice(r.pathIndex),n.children),Zl(i,0,s)}return r.match&&0===s.length?new Le(n.segments,{}):r.match&&!n.hasChildren()?kp(n,e,t):r.match?Zl(n,0,s):kp(n,e,t)}function Zl(n,e,t){if(0===t.length)return new Le(n.segments,{});{const r=function cV(n){return Ta(n[0])?n[0].outlets:{[Ne]:n}}(t),s={};return Vt(r,(i,o)=>{"string"==typeof i&&(i=[i]),null!==i&&(s[o]=vS(n.children[o],e,i))}),Vt(n.children,(i,o)=>{void 0===r[o]&&(s[o]=i)}),new Le(n.segments,s)}}function kp(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const i=t[s];if(Ta(i)){const c=uV(i.outlets);return new Le(r,c)}if(0===s&&Yl(t[0])){r.push(new Sa(n.segments[e].path,_S(t[0]))),s++;continue}const o=Ta(i)?i.outlets[Ne]:`${i}`,a=s<t.length-1?t[s+1]:null;o&&a&&Yl(a)?(r.push(new Sa(o,_S(a))),s+=2):(r.push(new Sa(o,{})),s++)}return new Le(r,{})}function uV(n){const e={};return Vt(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=kp(new Le([],{}),0,t))}),e}function _S(n){const e={};return Vt(n,(t,r)=>e[r]=`${t}`),e}function CS(n,e,t){return n==t.path&&gr(e,t.parameters)}class hV{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Zi(t);e.children.forEach(i=>{const o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Vt(s,(i,o)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){const s=e.value,i=t?t.value:null;if(s===i)if(s.component){const o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,i=Zi(e);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],s);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,i=Zi(e);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Zi(t);e.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new P2(i.value.snapshot))}),e.children.length&&this.forwardEvent(new A2(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,i=t?t.value:null;if(Rp(s),s===i)if(s.component){const o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Rp(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function fV(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),c=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=s,o.resolver=c,o.outlet&&o.outlet.activateWith(s,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Fp{constructor(e,t){this.routes=e,this.module=t}}function hs(n){return"function"==typeof n}function ks(n){return n instanceof Ns}const xa=Symbol("INITIAL_VALUE");function Ia(){return us(n=>wa(n.map(e=>e.pipe(fp(1),function h2(...n){const e=n[n.length-1];return Jt(e)?(n.pop(),t=>Dp(n,t,e)):t=>Dp(n,t)}(xa)))).pipe(zD((e,t)=>{let r=!1;return t.reduce((s,i,o)=>s!==xa?s:(i===xa&&(r=!0),r||!1!==i&&o!==t.length-1&&!ks(i)?s:i),e)},xa),At(e=>e!==xa),pe(e=>ks(e)?e:!0===e),fp(1)))}class _V{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Aa,this.attachRef=null}}class Aa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new _V,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Lp=(()=>{class n{constructor(t,r,s,i,o){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ze,this.deactivateEvents=new ze,this.attachEvents=new ze,this.detachEvents=new ze,this.name=i||Ne,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,c=new CV(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,c),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(V(Aa),V(On),V(Ri),function Do(n){return function G0(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let s=0;for(;s<r;){const i=t[s];if(Vg(i))break;if(0===i)s+=2;else if("number"==typeof i)for(s++;s<r&&"string"==typeof t[s];)s++;else{if(i===e)return t[s+1];s+=2}}}return null}(Mt(),n)}("name"),V(aa))},n.\u0275dir=he({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class CV{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xi?this.route:e===Aa?this.childContexts:this.parent.get(e,t)}}let wS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&xe(0,"router-outlet")},directives:[Lp],encapsulation:2}),n})();function bS(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];wV(r,bV(e,r))}}function wV(n,e){n.children&&bS(n.children,e)}function bV(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Vp(n){const e=n.children&&n.children.map(Vp),t=e?{...n,children:e}:{...n};return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ne&&(t.component=wS),t}function Bn(n){return n.outlet||Ne}function DS(n,e){const t=n.filter(r=>Bn(r)===e);return t.push(...n.filter(r=>Bn(r)!==e)),t}const SS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xl(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...SS}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||k2)(t,n,e);if(!s)return{...SS};const i={};Vt(s.posParams,(a,c)=>{i[c]=a.path});const o=s.consumed.length>0?{...i,...s.consumed[s.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function eu(n,e,t,r,s="corrected"){if(t.length>0&&function EV(n,e,t){return t.some(r=>tu(n,e,r)&&Bn(r)!==Ne)}(n,t,r)){const o=new Le(e,function SV(n,e,t,r){const s={};s[Ne]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const i of t)if(""===i.path&&Bn(i)!==Ne){const o=new Le([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,s[Bn(i)]=o}return s}(n,e,r,new Le(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function MV(n,e,t){return t.some(r=>tu(n,e,r))}(n,t,r)){const o=new Le(n.segments,function DV(n,e,t,r,s,i){const o={};for(const a of r)if(tu(n,t,a)&&!s[Bn(a)]){const c=new Le([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===i?n.segments.length:e.length,o[Bn(a)]=c}return{...s,...o}}(n,e,t,r,n.children,s));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new Le(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function tu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ES(n,e,t,r){return!!(Bn(n)===r||r!==Ne&&tu(e,t,n))&&("**"===n.path||Xl(e,n,t).matched)}function MS(n,e,t){return 0===e.length&&!n.children[t]}class nu{constructor(e){this.segmentGroup=e||null}}class TS{constructor(e){this.urlTree=e}}function Ra(n){return Ji(new nu(n))}function xS(n){return Ji(new TS(n))}function TV(n){return Ji(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class AV{constructor(e,t,r,s,i){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(Tr)}apply(){const e=eu(this.urlTree.root,[],[],this.config).segmentGroup,t=new Le(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ne).pipe(pe(i=>this.createUrlTree(jp(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(cs(i=>{if(i instanceof TS)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof nu?this.noMatchError(i):i}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ne).pipe(pe(s=>this.createUrlTree(jp(s),e.queryParams,e.fragment))).pipe(cs(s=>{throw s instanceof nu?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new Le([],{[Ne]:e}):e;return new Ns(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(pe(i=>new Le([],i))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const i of Object.keys(r.children))"primary"===i?s.unshift(i):s.push(i);return jt(s).pipe(Ki(i=>{const o=r.children[i],a=DS(t,i);return this.expandSegmentGroup(e,a,o,i).pipe(pe(c=>({segment:c,outlet:i})))}),zD((i,o)=>(i[o.outlet]=o.segment,i),{}),function y2(n,e){const t=arguments.length>=2;return r=>r.pipe(n?At((s,i)=>n(s,i,r)):z,Sp(1),t?xD(e):ID(()=>new Ul))}())}expandSegment(e,t,r,s,i,o){return jt(r).pipe(Ki(a=>this.expandSegmentAgainstRoute(e,t,r,a,s,i,o).pipe(cs(l=>{if(l instanceof nu)return ve(null);throw l}))),jn(a=>!!a),cs((a,c)=>{if(a instanceof Ul||"EmptyError"===a.name)return MS(t,s,i)?ve(new Le([],{})):Ra(t);throw a}))}expandSegmentAgainstRoute(e,t,r,s,i,o,a){return ES(s,t,i,o)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,i,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,i,o):Ra(t):Ra(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,i,o){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?xS(i):this.lineralizeSegments(r,i).pipe(Pt(o=>{const a=new Le(o,{});return this.expandSegment(e,a,t,o,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,i,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=Xl(t,s,i);if(!a)return Ra(t);const d=this.applyRedirectCommands(c,s.redirectTo,u);return s.redirectTo.startsWith("/")?xS(d):this.lineralizeSegments(s,d).pipe(Pt(h=>this.expandSegment(e,t,r,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,s,i){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ve(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(pe(d=>(r._loadedConfig=d,new Le(s,{})))):ve(new Le(s,{}));const{matched:o,consumedSegments:a,remainingSegments:c}=Xl(t,r,s);return o?this.getChildConfig(e,r,s).pipe(Pt(u=>{const d=u.module,h=u.routes,{segmentGroup:p,slicedSegments:y}=eu(t,a,c,h),A=new Le(p.segments,p.children);if(0===y.length&&A.hasChildren())return this.expandChildren(d,h,A).pipe(pe(Y=>new Le(a,Y)));if(0===h.length&&0===y.length)return ve(new Le(a,{}));const j=Bn(r)===i;return this.expandSegment(d,A,h,y,j?Ne:i,!0).pipe(pe(P=>new Le(a.concat(P.segments),P.children)))})):Ra(t)}getChildConfig(e,t,r){return t.children?ve(new Fp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ve(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(Pt(s=>s?this.configLoader.load(e.injector,t).pipe(pe(i=>(t._loadedConfig=i,i))):function xV(n){return Ji(Mp(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ve(new Fp([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;if(!s||0===s.length)return ve(!0);const i=s.map(o=>{const a=e.get(o);let c;if(function gV(n){return n&&hs(n.canLoad)}(a))c=a.canLoad(t,r);else{if(!hs(a))throw new Error("Invalid CanLoad guard");c=a(t,r)}return mr(c)});return ve(i).pipe(Ia(),Dn(o=>{if(!ks(o))return;const a=Mp(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),pe(o=>!0===o))}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return ve(r);if(s.numberOfChildren>1||!s.children[Ne])return TV(e.redirectTo);s=s.children[Ne]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const i=this.createSegmentGroup(e,t.root,r,s);return new Ns(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Vt(e,(s,i)=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,s){const i=this.createSegments(e,t.segments,r,s);let o={};return Vt(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,r,s)}),new Le(i,o)}createSegments(e,t,r,s){return t.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,s):this.findOrReturn(i,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function jp(n){const e={};for(const r of Object.keys(n.children)){const i=jp(n.children[r]);(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function RV(n){if(1===n.numberOfChildren&&n.children[Ne]){const e=n.children[Ne];return new Le(n.segments.concat(e.segments),e.children)}return n}(new Le(n.segments,e))}class IS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ru{constructor(e,t){this.component=e,this.route=t}}function NV(n,e,t){const r=n._root;return Pa(r,e?e._root:null,t,[r.value])}function su(n,e,t){const r=function kV(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Pa(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=Zi(e);return n.children.forEach(o=>{(function FV(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){const c=function LV(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Os(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Os(n.url,e.url)||!gr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pp(n,e)||!gr(n.queryParams,e.queryParams);default:return!Pp(n,e)}}(o,i,i.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new IS(r)):(i.data=o.data,i._resolvedData=o._resolvedData),Pa(n,e,i.component?a?a.children:null:t,r,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new ru(a.outlet.component,o))}else o&&Na(e,a,s),s.canActivateChecks.push(new IS(r)),Pa(n,null,i.component?a?a.children:null:t,r,s)})(o,i[o.value.outlet],t,r.concat([o.value]),s),delete i[o.value.outlet]}),Vt(i,(o,a)=>Na(o,t.getContext(a),s)),s}function Na(n,e,t){const r=Zi(n),s=n.value;Vt(r,(i,o)=>{Na(i,s.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new ru(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class GV{}function AS(n){return new W(e=>e.error(n))}class QV{constructor(e,t,r,s,i,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const e=eu(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ne);if(null===t)return null;const r=new Kl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ne,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Fr(r,t),i=new pS(this.url,s);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,r=fS(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const i of Object.keys(t.children)){const o=t.children[i],a=DS(e,i),c=this.processSegmentGroup(a,o,i);if(null===c)return null;r.push(...c)}const s=RS(r);return function JV(n){n.sort((e,t)=>e.value.outlet===Ne?-1:t.value.outlet===Ne?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const i of e){const o=this.processSegmentAgainstRoute(i,t,r,s);if(null!==o)return o}return MS(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!ES(e,t,r,s))return null;let i,o=[],a=[];if("**"===e.path){const p=r.length>0?XD(r).parameters:{};i=new Kl(r,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OS(e),Bn(e),e.component,e,PS(t),NS(t)+r.length,kS(e))}else{const p=Xl(t,e,r);if(!p.matched)return null;o=p.consumedSegments,a=p.remainingSegments,i=new Kl(o,p.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OS(e),Bn(e),e.component,e,PS(t),NS(t)+o.length,kS(e))}const c=function KV(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:u}=eu(t,o,a,c.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const p=this.processChildren(c,l);return null===p?null:[new Fr(i,p)]}if(0===c.length&&0===u.length)return[new Fr(i,[])];const d=Bn(e)===s,h=this.processSegment(c,l,u,d?Ne:s);return null===h?null:[new Fr(i,h)]}}function YV(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function RS(n){const e=[],t=new Set;for(const r of n){if(!YV(r)){e.push(r);continue}const s=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=RS(r.children);e.push(new Fr(r.value,s))}return e.filter(r=>!t.has(r))}function PS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function NS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function OS(n){return n.data||{}}function kS(n){return n.resolve||{}}function FS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Bp(n){return us(e=>{const t=n(e);return t?jt(t).pipe(pe(()=>e)):ve(e)})}class ij extends class sj{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const $p=new _e("ROUTES");class LS{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe(pe(i=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=i.create(e);return new Fp(ZD(o.injector.get($p,void 0,Ce.Self|Ce.Optional)).map(Vp),o)}),cs(i=>{throw t._loader$=void 0,i}));return t._loader$=new ag(s,()=>new se).pipe(fu()),t._loader$}loadModuleFactory(e){return mr(e()).pipe(Pt(t=>t instanceof k_?ve(t):jt(this.compiler.compileModuleAsync(t))))}}class aj{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function cj(n){throw n}function lj(n,e,t){return e.parse("/")}function VS(n,e){return ve(null)}const uj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let dn=(()=>{class n{constructor(t,r,s,i,o,a,c){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new se,this.errorHandler=cj,this.malformedUriErrorHandler=lj,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:VS,afterPreactivation:VS},this.urlHandlingStrategy=new aj,this.routeReuseStrategy=new ij,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Tr),this.console=o.get(mR);const d=o.get(gt);this.isNgZoneEnabled=d instanceof gt&&gt.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function L2(){return new Ns(new Le([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new LS(o,a,h=>this.triggerEvent(new WD(h)),h=>this.triggerEvent(new QD(h))),this.routerState=hS(this.currentUrlTree,this.rootComponentType),this.transitions=new Ue({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(At(s=>0!==s.id),pe(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),us(s=>{let i=!1,o=!1;return ve(s).pipe(Dn(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),us(a=>{const c=this.browserUrlTree.toString(),l=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return jS(a.source)&&(this.browserUrlTree=a.extractedUrl),ve(a).pipe(us(d=>{const h=this.transitions.getValue();return r.next(new Ep(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Qi:Promise.resolve(d)}),function PV(n,e,t,r){return us(s=>function IV(n,e,t,r,s){return new AV(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe(pe(i=>({...s,urlAfterRedirects:i}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Dn(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects}}),function ZV(n,e,t,r,s){return Pt(i=>function WV(n,e,t,r,s="emptyOnly",i="legacy"){try{const o=new QV(n,e,t,r,s,i).recognize();return null===o?AS(new GV):ve(o)}catch(o){return AS(o)}}(n,e,i.urlAfterRedirects,t(i.urlAfterRedirects),r,s).pipe(pe(o=>({...i,targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Dn(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const p=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(p,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new S2(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:p,source:y,restoredState:A,extras:j}=a,U=new Ep(h,this.serializeUrl(p),y,A);r.next(U);const P=hS(p,this.rootComponentType).snapshot;return ve({...a,targetSnapshot:P,urlAfterRedirects:p,extras:{...j,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Qi}),Bp(a=>{const{targetSnapshot:c,id:l,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:p}}=a;return this.hooks.beforePreactivation(c,{navigationId:l,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!p})}),Dn(a=>{const c=new E2(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),pe(a=>({...a,guards:NV(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function VV(n,e){return Pt(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=t;return 0===o.length&&0===i.length?ve({...t,guardsResult:!0}):function jV(n,e,t,r){return jt(n).pipe(Pt(s=>function zV(n,e,t,r,s){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?ve(i.map(a=>{const c=su(a,e,s);let l;if(function vV(n){return n&&hs(n.canDeactivate)}(c))l=mr(c.canDeactivate(n,e,t,r));else{if(!hs(c))throw new Error("Invalid CanDeactivate guard");l=mr(c(n,e,t,r))}return l.pipe(jn())})).pipe(Ia()):ve(!0)}(s.component,s.route,t,e,r)),jn(s=>!0!==s,!0))}(o,r,s,n).pipe(Pt(a=>a&&function pV(n){return"boolean"==typeof n}(a)?function BV(n,e,t,r){return jt(e).pipe(Ki(s=>Dp(function UV(n,e){return null!==n&&e&&e(new I2(n)),ve(!0)}(s.route.parent,r),function $V(n,e){return null!==n&&e&&e(new R2(n)),ve(!0)}(s.route,r),function qV(n,e,t){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>function OV(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>qD(()=>ve(o.guards.map(c=>{const l=su(c,o.node,t);let u;if(function yV(n){return n&&hs(n.canActivateChild)}(l))u=mr(l.canActivateChild(r,n));else{if(!hs(l))throw new Error("Invalid CanActivateChild guard");u=mr(l(r,n))}return u.pipe(jn())})).pipe(Ia())));return ve(i).pipe(Ia())}(n,s.path,t),function HV(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ve(!0);const s=r.map(i=>qD(()=>{const o=su(i,e,t);let a;if(function mV(n){return n&&hs(n.canActivate)}(o))a=mr(o.canActivate(e,n));else{if(!hs(o))throw new Error("Invalid CanActivate guard");a=mr(o(e,n))}return a.pipe(jn())}));return ve(s).pipe(Ia())}(n,s.route,t))),jn(s=>!0!==s,!0))}(r,i,n,e):ve(a)),pe(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Dn(a=>{if(ks(a.guardsResult)){const l=Mp(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw l.url=a.guardsResult,l}const c=new M2(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),At(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),Bp(a=>{if(a.guards.canActivateChecks.length)return ve(a).pipe(Dn(c=>{const l=new T2(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}),us(c=>{let l=!1;return ve(c).pipe(function XV(n,e){return Pt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return ve(t);let i=0;return jt(s).pipe(Ki(o=>function ej(n,e,t,r){return function tj(n,e,t,r){const s=FS(n);if(0===s.length)return ve({});const i={};return jt(s).pipe(Pt(o=>function nj(n,e,t,r){const s=su(n,e,r);return mr(s.resolve?s.resolve(e,t):s(e,t))}(n[o],e,t,r).pipe(Dn(a=>{i[o]=a}))),Sp(1),Pt(()=>FS(i).length===s.length?ve(i):Qi))}(n._resolve,n,e,r).pipe(pe(i=>(n._resolvedData=i,n.data={...n.data,...fS(n,t).resolve},null)))}(o.route,r,n,e)),Dn(()=>i++),Sp(1),Pt(o=>i===s.length?ve(t):Qi))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Dn({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(c),this.cancelNavigationTransition(c,"At least one route resolver didn't emit any value."))}}))}),Dn(c=>{const l=new x2(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}))}),Bp(a=>{const{targetSnapshot:c,id:l,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:p}}=a;return this.hooks.afterPreactivation(c,{navigationId:l,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!p})}),pe(a=>{const c=function tV(n,e,t){const r=Ma(n,e._root,t?t._root:void 0);return new dS(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return{...a,targetRouterState:c}}),Dn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>pe(r=>(new hV(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Dn({next(){i=!0},complete(){i=!0}}),function C2(n){return e=>e.lift(new w2(n))}(()=>{i||o||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),cs(a=>{if(o=!0,function O2(n){return n&&n[KD]}(a)){const c=ks(a.url);c||(this.navigated=!0,this.restoreHistory(s,!0));const l=new GD(s.id,this.serializeUrl(s.extractedUrl),a.message);r.next(l),c?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jS(s.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const c=new D2(s.id,this.serializeUrl(s.extractedUrl),a);r.next(c);try{s.resolve(this.errorHandler(a))}catch(l){s.reject(l)}}return Qi}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},i=t.state?.navigationId?t.state:null;if(i){const a={...i};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(s.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,r,i,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){bS(t),this.config=t.map(Vp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:i,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=s||this.routerState.root,u=c?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...i};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=i||null}return null!==d&&(d=this.removeEmptyProps(d)),function sV(n,e,t,r,s){if(0===t.length)return Np(e.root,e.root,e.root,r,s);const i=function iV(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yS(!0,0,n);let e=0,t=!1;const r=n.reduce((s,i,o)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Vt(i.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return"string"!=typeof i?[...s,i]:0===o?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&s.push(a))}),s):[...s,i]},[]);return new yS(t,e,r)}(t);if(i.toRoot())return Np(e.root,e.root,new Le([],{}),r,s);const o=function oV(n,e,t){if(n.isAbsolute)return new Op(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const i=t.snapshot._urlSegment;return new Op(i,i===e.root,0)}const r=Yl(n.commands[0])?0:1;return function aV(n,e,t){let r=n,s=e,i=t;for(;i>s;){if(i-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Op(r,!1,s-i)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(i,e,n),a=o.processChildren?Zl(o.segmentGroup,o.index,i.commands):vS(o.segmentGroup,o.index,i.commands);return Np(e.root,o.segmentGroup,a,r,s)}(l,this.currentUrlTree,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=ks(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function hj(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...uj}:!1===r?{...dj}:r,ks(t))return tS(this.currentUrlTree,t,s);const i=this.parseUrl(t);return tS(this.currentUrlTree,i,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const i=t[s];return null!=i&&(r[s]=i),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Da(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,i,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((h,p)=>{a=h,c=p});const u=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),d=s&&s.\u0275routerPageId?s.\u0275routerPageId:i.replaceUrl||i.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:u,targetPageId:d,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),i={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",i):this.location.go(s,"",i)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new GD(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){eh()},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();function jS(n){return"imperative"!==n}let Oa=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this.commands=null,this.href=null,this.onChanges=new se,this.subscription=t.events.subscribe(i=>{i instanceof Da&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,i,o){if(0!==t||r||s||i||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:eo(this.skipLocationChange),replaceUrl:eo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:eo(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(V(dn),V(Xi),V(ki))},n.\u0275dir=he({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&K("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&t&&Jn("target",r.target)("href",r.href,Oo)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Yt]}),n})();function eo(n){return""===n||!!n}class BS{}class $S{preload(e,t){return ve(null)}}let US=(()=>{class n{constructor(t,r,s,i){this.router=t,this.injector=s,this.preloadingStrategy=i,this.loader=new LS(s,r,c=>t.triggerEvent(new WD(c)),c=>t.triggerEvent(new QD(c)))}setUpPreloading(){this.subscription=this.router.events.pipe(At(t=>t instanceof Da),Ki(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Tr);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const i of r)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const o=i._loadedConfig;s.push(this.processRoutes(o.module,o.routes))}else i.loadChildren&&!i.canLoad?s.push(this.preloadConfig(t,i)):i.children&&s.push(this.processRoutes(t,i.children));return jt(s).pipe(fo(),pe(i=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ve(r._loadedConfig):this.loader.load(t.injector,r)).pipe(Pt(i=>(r._loadedConfig=i,this.processRoutes(i.module,i.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(X(dn),X(_C),X(tn),X(BS))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),Hp=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ep?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Da&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof JD&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new JD(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){eh()},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const Fs=new _e("ROUTER_CONFIGURATION"),HS=new _e("ROUTER_FORROOT_GUARD"),mj=[Jh,{provide:iS,useClass:oS},{provide:dn,useFactory:function wj(n,e,t,r,s,i,o={},a,c){const l=new dn(null,n,e,t,r,s,ZD(i));return a&&(l.urlHandlingStrategy=a),c&&(l.routeReuseStrategy=c),function bj(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,l),o.enableTracing&&l.events.subscribe(u=>{console.group?.(`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),console.groupEnd?.()}),l},deps:[iS,Aa,Jh,tn,_C,$p,Fs,[class oj{},new Gr],[class rj{},new Gr]]},Aa,{provide:Xi,useFactory:function Dj(n){return n.routerState.root},deps:[dn]},US,$S,class gj{preload(e,t){return t().pipe(cs(()=>ve(null)))}},{provide:Fs,useValue:{enableTracing:!1}}];function yj(){return new SC("Router",dn)}let qS=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[mj,zS(t),{provide:HS,useFactory:Cj,deps:[[dn,new Gr,new Ao]]},{provide:Fs,useValue:r||{}},{provide:ki,useFactory:_j,deps:[Yr,[new fc(Qh),new Gr],Fs]},{provide:Hp,useFactory:vj,deps:[dn,CN,Fs]},{provide:BS,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:$S},{provide:SC,multi:!0,useFactory:yj},[qp,{provide:Ph,multi:!0,useFactory:Sj,deps:[qp]},{provide:GS,useFactory:Ej,deps:[qp]},{provide:vC,multi:!0,useExisting:GS}]]}}static forChild(t){return{ngModule:n,providers:[zS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(X(HS,8),X(dn,8))},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({}),n})();function vj(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Hp(n,e,t)}function _j(n,e,t={}){return t.useHash?new cP(n,e):new HC(n,e)}function Cj(n){return"guarded"}function zS(n){return[{provide:Y0,multi:!0,useValue:n},{provide:$p,multi:!0,useValue:n}]}let qp=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new se}appInitializer(){return this.injector.get(iP,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(a=>r=a),i=this.injector.get(dn),o=this.injector.get(Fs);return"disabled"===o.initialNavigation?(i.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(i.hooks.afterPreactivation=()=>this.initNavigation?ve(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),i.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(Fs),s=this.injector.get(US),i=this.injector.get(Hp),o=this.injector.get(dn),a=this.injector.get($h);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),s.setUpPreloading(),i.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(X(tn))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();function Sj(n){return n.appInitializer.bind(n)}function Ej(n){return n.bootstrapListener.bind(n)}const GS=new _e("Router Initializer");g(3639);const WS=["*"],Tj=["chatInput"],xj=function(n){return{backgroundImage:n}};function Ij(n,e){if(1&n){const t=yt();x(0,"div",6)(1,"ngx-chat-avatar",7),K("click",function(){return Re(t),Z().avatarClickHandler.emit()}),T()()}if(2&n){const t=Z();O(1),Er("has-click-handler",t.avatarInteractive),B("imageUrl",t.avatar)}}function Aj(n,e){if(1&n){const t=yt();x(0,"div",8)(1,"img",9),K("load",function(){return Re(t),Z().showImagePlaceholder=!1}),T()()}if(2&n){const t=Z();Er("chat-message-image-wrapper--placeholder",t.showImagePlaceholder),O(1),B("src",t.imageLink,Oo)}}function Rj(n,e){1&n&&(wt(0),$(1,"\u2713"),bt())}function Pj(n,e){1&n&&(wt(0),$(1,"\u2713\u2713"),bt())}function Nj(n,e){1&n&&(wt(0),x(1,"span",16),$(2,"\u2713\u2713"),T(),bt())}function Oj(n,e){if(1&n&&(wt(0,14),oe(1,Rj,2,0,"ng-container",15),oe(2,Pj,2,0,"ng-container",15),oe(3,Nj,3,0,"ng-container",15),bt()),2&n){const t=Z(2);B("ngSwitch",t.messageState),O(1),B("ngSwitchCase",t.MessageState.SENT),O(1),B("ngSwitchCase",t.MessageState.RECIPIENT_RECEIVED),O(1),B("ngSwitchCase",t.MessageState.RECIPIENT_SEEN)}}function kj(n,e){if(1&n&&(x(0,"div",10)(1,"small",11),$(2),oe(3,Oj,4,4,"ng-container",12),T(),x(4,"small",13),$(5),T()()),2&n){const t=Z();O(1),Wo("title",t.nick),O(1),tt(" ",t.nick," "),O(1),B("ngIf","out"===t.direction),O(2),ft(t.formattedDate)}}const Fj=["messageArea"];function Lj(n,e){if(1&n&&xe(0,"ngx-chat-message",9),2&n){const t=e.$implicit,r=Z(2);Er("chat-message--in",t.direction===r.Direction.in)("chat-message--out",t.direction===r.Direction.out),B("id","message-"+t.id)("contact",r.getOrCreateContactWithFullJid(t))("nick",t.direction===r.Direction.in?r.getOrCreateContactWithFullJid(t).name:"")("avatar",r.getOrCreateContactWithFullJid(t).avatar)("message",t)("showAvatars",r.showAvatars)}}function Vj(n,e){if(1&n&&(wt(0),x(1,"div",7),$(2),Se(3,"date"),T(),oe(4,Lj,1,10,"ngx-chat-message",8),bt()),2&n){const t=e.$implicit,r=Z();O(2),ft(function z_(n,e,t,r,s,i){const o=n+20,a=q(),c=Zs(a,o);return ra(a,o)?U_(a,Zt(),e,c.transform,t,r,s,i,c):c.transform(t,r,s,i)}(3,2,t.date,r.chatService.translations.dateFormat,void 0,r.chatService.translations.locale)),O(2),B("ngForOf",t.messages)}}function jj(n,e){if(1&n&&(x(0,"div",10),$(1),T()),2&n){const t=Z();O(1),tt(" ",t.chatService.translations.noMessages," ")}}function Bj(n,e){if(1&n&&(x(0,"span",16),$(1),T()),2&n){const t=Z(2);O(1),ft(t.chatService.translations.acceptSubscriptionRequest)}}function $j(n,e){if(1&n){const t=yt();x(0,"a",17),K("click",function(s){return Re(t),Z(2).acceptSubscriptionRequest(s)}),$(1),T()}if(2&n){const t=Z(2);O(1),ft(t.chatService.translations.acceptSubscriptionRequest)}}function Uj(n,e){if(1&n&&(x(0,"span",16),$(1),T()),2&n){const t=Z(2);O(1),ft(t.chatService.translations.denySubscriptionRequest)}}function Hj(n,e){if(1&n){const t=yt();x(0,"a",17),K("click",function(s){return Re(t),Z(2).denySubscriptionRequest(s)}),$(1),T()}if(2&n){const t=Z(2);O(1),ft(t.chatService.translations.denySubscriptionRequest)}}function qj(n,e){if(1&n){const t=yt();x(0,"li")(1,"a",17),K("click",function(s){return Re(t),Z(3).blockContactAndReport(s)}),$(2),T()()}if(2&n){const t=Z(3);O(2),ft(t.chatService.translations.blockAndReport)}}function zj(n,e){if(1&n){const t=yt();x(0,"ul",18)(1,"li")(2,"a",17),K("click",function(s){return Re(t),Z(2).blockContact(s)}),$(3),T()(),oe(4,qj,3,1,"li",19),x(5,"li")(6,"a",17),K("click",function(s){return Re(t),Z(2).dismissBlockOptions(s)}),$(7),T()()()}if(2&n){const t=Z(2);O(3),ft(t.chatService.translations.block),O(1),B("ngIf",t.reportUserService),O(3),ft(t.chatService.translations.dismiss)}}function Gj(n,e){if(1&n&&(x(0,"ngx-chat-message-simple",11)(1,"span"),$(2),T(),x(3,"ul",12)(4,"li"),oe(5,Bj,2,1,"span",13),oe(6,$j,2,1,"a",14),T(),x(7,"li"),oe(8,Uj,2,1,"span",13),oe(9,Hj,2,1,"a",14),T()(),oe(10,zj,8,3,"ul",15),Se(11,"async"),T()),2&n){const t=Z();B("direction",t.Direction.in)("avatar",t.showAvatars?t.recipient.avatar:void 0)("footerHidden",!0),O(2),tt(" ",t.chatService.translations.subscriptionRequestMessage," "),O(3),B("ngIf",t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS),O(1),B("ngIf",t.subscriptionAction===t.SubscriptionAction.PENDING_REQUEST),O(2),B("ngIf",t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS),O(1),B("ngIf",t.subscriptionAction===t.SubscriptionAction.PENDING_REQUEST),O(1),B("ngIf",!0===Ee(11,9,t.blockPlugin.supportsBlock$)&&t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS)}}function Wj(n,e){if(1&n){const t=yt();x(0,"div",3),K("click",function(){return Re(t),Z().closeClick.emit()}),$(1," \xd7 "),T()}}const Qj=[[["",8,"window-header-content"]],[["",8,"window-content"]]],Jj=[".window-header-content",".window-content"];function Kj(n,e){if(1&n&&(x(0,"div",9)(1,"span",10),$(2),Se(3,"async"),T()()),2&n){const t=Z();O(2),tt(" ",t.chatService.translations.presence[Ee(3,1,t.chatWindowState.recipient.presence$)]," ")}}function Yj(n,e){if(1&n){const t=yt();x(0,"div",17),K("click",function(){const i=Re(t).$implicit;return Z(2).onActionClick(i)}),T()}if(2&n){const t=e.$implicit;B("ngClass",t.cssClass)("innerHTML",t.html,_m)}}function Zj(n,e){if(1&n){const t=yt();x(0,"ngx-chat-filedrop",11),K("fileUpload",function(s){return Re(t),Z().uploadFile(s)}),x(1,"div",12),K("click",function(){return Re(t),Z().onFocus()}),xe(2,"ngx-chat-message-list",13),x(3,"div",14)(4,"ngx-chat-message-input",15),K("messageSent",function(){return Re(t),Z().afterSendMessage()}),T(),oe(5,Yj,1,2,"div",16),T()()()}if(2&n){const t=Z();B("enabled",t.httpFileUploadPlugin.fileUploadSupported)("dropMessage",t.chatService.translations.dropMessage),O(2),B("recipient",t.chatWindowState.recipient)("showAvatars",!1),O(2),B("recipient",t.chatWindowState.recipient),O(1),B("ngForOf",t.chatService.chatActions)}}const Xj=function(n){return{"has-click-handler":n}},eB=["video"];function tB(n,e){1&n&&xe(0,"ngx-chat-video-window",3),2&n&&B("track",e.$implicit)}function nB(n,e){1&n&&xe(0,"ngx-chat-window",4),2&n&&B("chatWindowState",e.$implicit)}function rB(n,e){if(1&n&&(x(0,"div",7),$(1),Se(2,"async"),T()),2&n){const t=Z();O(1),ft(Ee(2,1,t.unreadCount$))}}function sB(n,e){1&n&&(x(0,"div",9),$(1,"\u25cf "),T()),2&n&&B("ngClass","roster-presence--"+Z().ngIf)}function iB(n,e){if(1&n&&(wt(0),oe(1,sB,2,1,"div",8),bt()),2&n){const t=e.ngIf,r=Z();O(1),B("ngIf",t!==r.Presence.unavailable)}}function oB(n,e){1&n&&(x(0,"div",6),$(1,"\xbb"),T())}function aB(n,e){1&n&&(x(0,"div",6),$(1,"\xab"),T())}function cB(n,e){if(1&n){const t=yt();x(0,"ngx-chat-roster-recipient",10),K("click",function(){const i=Re(t).$implicit;return Z(3).onClickRecipient(i)}),T()}2&n&&B("recipient",e.$implicit)}function lB(n,e){if(1&n&&(wt(0),x(1,"div",7),$(2),T(),x(3,"div",8),oe(4,cB,1,1,"ngx-chat-roster-recipient",9),T(),bt()),2&n){const t=Z().ngIf,r=Z();O(2),ft(r.chatService.translations.rooms),O(2),B("ngForOf",t)}}function uB(n,e){if(1&n&&(wt(0),oe(1,lB,5,2,"ng-container",4),bt()),2&n){const t=e.ngIf;O(1),B("ngIf",t.length>0)}}function dB(n,e){if(1&n){const t=yt();x(0,"ngx-chat-roster-recipient",10),K("click",function(){const i=Re(t).$implicit;return Z(2).onClickRecipient(i)}),T()}2&n&&B("recipient",e.$implicit)}function hB(n,e){if(1&n&&(wt(0),x(1,"div",7),$(2),T(),x(3,"div",8),oe(4,dB,1,1,"ngx-chat-roster-recipient",9),Se(5,"async"),T(),bt()),2&n){const t=Z();O(2),ft(t.chatService.translations.contacts),O(2),B("ngForOf",Ee(5,2,t.contacts))}}function fB(n,e){if(1&n){const t=yt();x(0,"ngx-chat-roster-recipient",10),K("click",function(){const i=Re(t).$implicit;return Z(2).onClickRecipient(i)}),T()}2&n&&B("recipient",e.$implicit)}function pB(n,e){if(1&n&&(wt(0),x(1,"div",7),$(2),T(),x(3,"div",8),oe(4,fB,1,1,"ngx-chat-roster-recipient",9),Se(5,"async"),T(),bt()),2&n){const t=Z();O(2),ft(t.chatService.translations.contactRequestIn),O(2),B("ngForOf",Ee(5,2,t.contactRequestsReceived$))}}function gB(n,e){if(1&n){const t=yt();x(0,"ngx-chat-roster-recipient",10),K("click",function(){const i=Re(t).$implicit;return Z(2).onClickRecipient(i)}),T()}2&n&&B("recipient",e.$implicit)}function mB(n,e){if(1&n&&(wt(0),x(1,"div",7),$(2),T(),x(3,"div",8),oe(4,gB,1,1,"ngx-chat-roster-recipient",9),Se(5,"async"),T(),bt()),2&n){const t=Z();O(2),ft(t.chatService.translations.contactRequestOut),O(2),B("ngForOf",Ee(5,2,t.contactRequestsSent$))}}function yB(n,e){if(1&n){const t=yt();x(0,"ngx-chat-roster-recipient",10),K("click",function(){Re(t);const s=Z().$implicit;return Z(2).onClickRecipient(s)}),T()}2&n&&B("recipient",Z().$implicit)}function vB(n,e){if(1&n&&(wt(0),oe(1,yB,1,1,"ngx-chat-roster-recipient",12),bt()),2&n){const t=e.$implicit;O(1),B("ngIf",t.messages.length>0)}}function _B(n,e){if(1&n&&(wt(0),x(1,"div",7),$(2),T(),x(3,"div",8),oe(4,vB,2,1,"ng-container",11),Se(5,"async"),T(),bt()),2&n){const t=Z();O(2),ft(t.chatService.translations.contactsUnaffiliated),O(2),B("ngForOf",Ee(5,2,t.contactsUnaffiliated$))}}function CB(n,e){if(1&n&&(x(0,"div",13),$(1),T()),2&n){const t=Z();O(1),tt(" ",t.chatService.translations.noContacts," ")}}function wB(n,e){if(1&n&&(x(0,"div",20),$(1),T()),2&n){const t=e.$implicit;O(1),tt(" ",t.name," ")}}function bB(n,e){if(1&n&&(x(0,"div",21),$(1),T()),2&n){const t=e.$implicit;O(1),tt(" ",t.name," ")}}function DB(n,e){if(1&n&&(x(0,"p",22)(1,"em"),$(2),T(),xe(3,"br"),$(4),Se(5,"async"),xe(6,"br"),$(7),Se(8,"async"),xe(9,"br"),$(10),Se(11,"async"),xe(12,"br"),$(13),Se(14,"async"),T()),2&n){const t=e.$implicit;O(2),tt("",t.name,":"),O(2),tt(" subscription=",Ee(5,5,t.subscription$),""),O(3),tt(" presence=",Ee(8,7,t.presence$),""),O(3),tt(" pendingIn=",Ee(11,9,t.pendingIn$),""),O(3),tt(" pendingOut=",Ee(14,11,t.pendingOut$)," ")}}function SB(n,e){if(1&n&&(wt(0),xe(1,"hr"),x(2,"div",14),$(3," debug contact requests in: "),oe(4,wB,2,1,"div",15),Se(5,"async"),T(),xe(6,"hr"),x(7,"div",16),$(8," debug contact requests out: "),oe(9,bB,2,1,"div",17),Se(10,"async"),T(),xe(11,"hr"),x(12,"p"),$(13),Se(14,"async"),xe(15,"br"),T(),oe(16,DB,15,13,"p",18),Se(17,"async"),x(18,"p",19),$(19),Se(20,"async"),T(),bt()),2&n){const t=Z();O(4),B("ngForOf",Ee(5,5,t.chatService.contactRequestsReceived$)),O(5),B("ngForOf",Ee(10,7,t.chatService.contactRequestsSent$)),O(4),tt(" debug contacts (count: ",Ee(14,9,t.chatService.contacts$).length,")"),O(3),B("ngForOf",Ee(17,11,t.chatService.contacts$)),O(3),tt("state: ",Ee(20,13,t.chatService.state$),"")}}function EB(n,e){1&n&&xe(0,"ngx-chat-window-list",2),2&n&&B("rosterState",Z().rosterState)}function MB(n,e){if(1&n){const t=yt();x(0,"ngx-chat-roster-list",3),K("rosterStateChanged",function(s){return Re(t),Z().onRosterStateChanged(s)}),T()}if(2&n){const t=Z();B("rosterState",t.rosterState)("contacts",t.contacts)("contactRequestsReceived$",t.contactRequestsReceived$)("contactRequestsSent$",t.contactRequestsSent$)("contactsUnaffiliated$",t.contactsUnaffiliated$)}}let TB=(()=>{class n{constructor(){this.fileUpload=new ze,this.enabled=!0,this.isDropTarget=!1}onDragOver(t){this.enabled&&(t.preventDefault(),t.stopPropagation(),this.isDropTarget=!0)}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDropTarget=!1}onDrop(t){var r=this;return J(function*(){if(r.enabled){t.preventDefault(),t.stopPropagation(),r.isDropTarget=!1;for(let s=0;s<t.dataTransfer.items.length;s++){const i=t.dataTransfer.items[s];"file"===i.kind&&r.fileUpload.emit(i.getAsFile())}}})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-filedrop"]],hostBindings:function(t,r){1&t&&K("dragover",function(i){return r.onDragOver(i)})("dragenter",function(i){return r.onDragOver(i)})("dragleave",function(i){return r.onDragLeave(i)})("dragexit",function(i){return r.onDragLeave(i)})("drop",function(i){return r.onDrop(i)})},inputs:{dropMessage:"dropMessage",enabled:"enabled"},outputs:{fileUpload:"fileUpload"},ngContentSelectors:WS,decls:5,vars:3,consts:[[1,"drop-message"]],template:function(t,r){1&t&&(Pc(),x(0,"div")(1,"div",0),$(2),T(),x(3,"div"),Go(4),T()()),2&t&&(O(1),Er("drop-message--visible",r.isDropTarget),O(1),tt(" ",r.dropMessage," "))},styles:[".drop-message[_ngcontent-%COMP%]{pointer-events:none;display:none}.drop-message--visible[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;justify-content:center;align-content:center;flex-direction:column;text-align:center;font-size:1.5em;z-index:999;background-color:#fff9;padding:1em}"]}),n})();const hn=new _e("pazznetworkNgxChatService");let iu=(()=>{class n{constructor(t){this.chatService=t,this.messageSent=new ze,this.message=""}ngOnInit(){}onSendMessage(t){t&&t.preventDefault(),this.chatService.sendMessage(this.recipient,this.message),this.message="",this.messageSent.emit()}focus(){this.chatInput.nativeElement.focus()}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message-input"]],viewQuery:function(t,r){if(1&t&&Ds(Tj,5),2&t){let s;Ir(s=Ar())&&(r.chatInput=s.first)}},inputs:{recipient:"recipient"},outputs:{messageSent:"messageSent"},decls:2,vars:2,consts:[["cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",1,"chat-input",3,"ngModel","placeholder","ngModelChange","keydown.enter"],["chatInput",""]],template:function(t,r){1&t&&(x(0,"textarea",0,1),K("ngModelChange",function(i){return r.message=i})("keydown.enter",function(i){return r.onSendMessage(i)}),T()),2&t&&(Wo("placeholder",r.chatService.translations.placeholder),B("ngModel",r.message))},directives:[yL,es,Li,Ms],styles:["@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.chat-input[_ngcontent-%COMP%]{border:none;width:100%;font-size:1em;padding:0;display:block;resize:none;overflow-x:hidden;outline:none}"]}),n})();var Qt=(()=>(function(n){n.SENDING="sending",n.SENT="sent",n.RECIPIENT_RECEIVED="recipientReceived",n.RECIPIENT_SEEN="recipientSeen"}(Qt||(Qt={})),Qt))(),ke=(()=>(function(n){n.in="in",n.out="out"}(ke||(ke={})),ke))();class Ot{onBeforeOnline(){return Promise.resolve()}onOffline(){}afterSendMessage(e,t){}beforeSendMessage(e,t){}handleStanza(e){return!1}afterReceiveMessage(e,t,r){}}class QS extends Ot{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.supportsBlock$=new Ue("unknown")}onBeforeOnline(){var e=this;return J(function*(){const t=yield e.determineSupportForBlock();e.supportsBlock$.next(t),t&&(yield e.requestBlockedJids())})()}determineSupportForBlock(){var e=this;return J(function*(){try{return yield e.serviceDiscoveryPlugin.supportsFeature(e.xmppChatAdapter.chatConnectionService.userJid.domain,"urn:xmpp:blocking")}catch{return!1}})()}onOffline(){this.supportsBlock$.next("unknown"),this.xmppChatAdapter.blockedContactIds$.next(new Set)}blockJid(e){return this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("block",{xmlns:"urn:xmpp:blocking"},(0,N.Ls)("item",{jid:e}))))}unblockJid(e){return this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("unblock",{xmlns:"urn:xmpp:blocking"},(0,N.Ls)("item",{jid:e}))))}requestBlockedJids(){var e=this;return J(function*(){const r=(yield e.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get"},(0,N.Ls)("blocklist",{xmlns:"urn:xmpp:blocking"})))).getChild("blocklist").getChildren("item").map(s=>s.attrs.jid);e.xmppChatAdapter.blockedContactIds$.next(new Set(r))})()}handleStanza(e){const{from:t}=e.attrs;if(t&&t===this.xmppChatAdapter.chatConnectionService.userJid?.bare().toString()){const r=e.getChild("block","urn:xmpp:blocking"),s=e.getChild("unblock","urn:xmpp:blocking"),i=this.xmppChatAdapter.blockedContactIds$.getValue();if(r)return r.getChildren("item").map(o=>o.attrs.jid).forEach(o=>i.add(o)),this.xmppChatAdapter.blockedContactIds$.next(i),!0;if(s){const o=s.getChildren("item").map(a=>a.attrs.jid);return 0===o.length?i.clear():o.forEach(a=>i.delete(a)),this.xmppChatAdapter.blockedContactIds$.next(i),!0}}return!1}}class Ls{}let JS=(()=>{class n extends Error{constructor(t){super(n.extractErrorTextFromErrorResponse(t,n.extractErrorDataFromErrorResponse(t))),this.errorStanza=t;const{code:r,type:s,condition:i}=n.extractErrorDataFromErrorResponse(t);this.errorCode=r,this.errorType=s,this.errorCondition=i}static extractErrorDataFromErrorResponse(t){const r=t.getChild("error"),s=Number(r?.attrs.code)||void 0,i=r?.attrs.type,o=r?.children.filter(a=>"text"!==a.getName()&&a.attrs.xmlns===n.ERROR_ELEMENT_NS)[0]?.getName();return{code:s,type:i,condition:o}}static extractErrorTextFromErrorResponse(t,{code:r,type:s,condition:i}){const o=[`errorCode: ${r??"[unknown]"}`,`errorType: ${s??"[unknown]"}`,`errorCondition: ${i??"[unknown]"}`].join(", ");return`IqResponseError: ${t.getChild("error")?.getChildText("text",n.ERROR_ELEMENT_NS)||"Unknown error"}${o?` (${o})`:""}`}}return n.ERROR_ELEMENT_NS="urn:ietf:params:xml:ns:xmpp-stanzas",n})();const KS="http://jabber.org/protocol/pubsub#event";class YS extends Ls{constructor(e){super(),this.publishOptions={persistItems:!1},e&&(this.publishOptions={...this.publishOptions,...e})}toStanza(){const{node:e,id:t,persistItems:r}=this.publishOptions,s=this.publishOptions.data||(0,N.Ls)("data");return(0,N.Ls)("iq",{type:"set"},(0,N.Ls)("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"},(0,N.Ls)("publish",{node:e},(0,N.Ls)("item",{id:t},s)),(0,N.Ls)("publish-options",{},(0,N.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,N.Ls)("field",{var:"FORM_TYPE",type:"hidden"},(0,N.Ls)("value",{},"http://jabber.org/protocol/pubsub#publish-options")),(0,N.Ls)("field",{var:"pubsub#persist_items"},(0,N.Ls)("value",{},r?1:0)),(0,N.Ls)("field",{var:"pubsub#access_model"},(0,N.Ls)("value",{},"whitelist"))))))}}class xB extends Ls{constructor(e){super(),this.node=e}toStanza(){return(0,N.Ls)("iq",{type:"get"},(0,N.Ls)("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"},(0,N.Ls)("items",{node:this.node})))}}class IB extends Ot{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.publish$=new se,this.supportsPrivatePublish=new Ue("unknown")}onBeforeOnline(){return this.determineSupportForPrivatePublish()}onOffline(){this.supportsPrivatePublish.next("unknown")}storePrivatePayloadPersistent(e,t,r){return new Promise((s,i)=>{this.supportsPrivatePublish.pipe(At(o=>"unknown"!==o)).subscribe(o=>{o?s(this.xmppChatAdapter.chatConnectionService.sendIq(new YS({node:e,id:t,data:r,persistItems:!0}).toStanza())):i(new Error("does not support private publish subscribe"))})})}privateNotify(e,t,r){return new Promise((s,i)=>{this.supportsPrivatePublish.pipe(At(o=>"unknown"!==o)).subscribe(o=>{o?s(this.xmppChatAdapter.chatConnectionService.sendIq(new YS({node:e,id:r,data:t,persistItems:!1}).toStanza())):i(new Error("does not support private publish subscribe"))})})}handleStanza(e){const t=e.getChild("event",KS);return!(!e.is("message")||!t||(this.publish$.next(t),0))}retrieveNodeItems(e){var t=this;return J(function*(){try{return(yield t.xmppChatAdapter.chatConnectionService.sendIq(new xB(e).toStanza())).getChild("pubsub").getChild("items").getChildren("item")}catch(r){if(r instanceof JS&&("item-not-found"===r.errorCondition||404===r.errorCode))return[];throw r}})()}determineSupportForPrivatePublish(){var e=this;return J(function*(){let t;try{t=(yield e.serviceDiscoveryPlugin.findService("pubsub","pep")).features.includes("http://jabber.org/protocol/pubsub#publish-options")}catch{t=!1}e.supportsPrivatePublish.next(t)})()}}const ka="urn:xmpp:mucsub:0";var to=(()=>(function(n){n.presence="urn:xmpp:mucsub:nodes:presence",n.messages="urn:xmpp:mucsub:nodes:messages",n.affiliations="urn:xmpp:mucsub:nodes:affiliations",n.subscribers="urn:xmpp:mucsub:nodes:subscribers",n.config="urn:xmpp:mucsub:nodes:config",n.subject="urn:xmpp:mucsub:nodes:subject",n.system="urn:xmpp:mucsub:nodes:system"}(to||(to={})),to))();class ZS extends Ot{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.supportsMucSub$=new Ue("unknown")}onBeforeOnline(){return this.determineSupportForMucSub()}determineSupportForMucSub(){var e=this;return J(function*(){let t;try{t=(yield e.serviceDiscoveryPlugin.findService("conference","text")).features.includes(ka)}catch{t=!1}e.supportsMucSub$.next(t)})()}onOffline(){this.supportsMucSub$.next("unknown")}subscribeRoom(e,t=[]){var r=this;return J(function*(){const s=r.xmppChatAdapter.chatConnectionService.userJid.local;yield r.xmppChatAdapter.chatConnectionService.sendIq(function AB(n,e,t){return(0,N.Ls)("iq",{type:"set",to:n},(0,N.Ls)("subscribe",{xmlns:ka,nick:e},t.map(r=>(0,N.Ls)("event",{node:r}))))}(e,s,t))})()}unsubscribeRoom(e){var t=this;return J(function*(){yield t.xmppChatAdapter.chatConnectionService.sendIq(function RB(n){return(0,N.Ls)("iq",{type:"set",to:n},(0,N.Ls)("unsubscribe",{xmlns:ka}))}(e))})()}retrieveSubscriptions(){var e=this;return J(function*(){const t=yield e.serviceDiscoveryPlugin.findService("conference","text"),s=(yield e.xmppChatAdapter.chatConnectionService.sendIq(function PB(n){return(0,N.Ls)("iq",{type:"get",to:n},(0,N.Ls)("subscriptions",{xmlns:ka}))}(t.jid))).getChild("subscriptions",ka)?.getChildren("subscription")?.map(i=>{const o=i.getChildren("event")?.map(a=>a.attrs.node)??[];return[i.attrs.jid,o]});return new Map(s)})()}}class zp extends Ot{constructor(e,t,r,s,i){var o;super(),o=this,this.chatService=e,this.serviceDiscoveryPlugin=t,this.multiUserChatPlugin=r,this.logService=s,this.messagePlugin=i,this.mamMessageReceived$=new se,this.chatService.state$.pipe(At(a=>"online"===a)).subscribe(J(function*(){(yield o.supportsMessageArchiveManagement())&&(yield o.requestNewestMessages())})),this.mamMessageReceived$.pipe(Wi(10)).subscribe(()=>this.chatService.contacts$.next(this.chatService.contacts$.getValue()))}requestNewestMessages(){var e=this;return J(function*(){yield e.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,N.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,N.Ls)("max",{},250),(0,N.Ls)("before")))))})()}loadMostRecentUnloadedMessages(e){var t=this;return J(function*(){const r="room"===e.recipientType?e.roomJid.toString():void 0,s=(0,N.Ls)("iq",{type:"set",to:r},(0,N.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,N.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,N.Ls)("field",{var:"FORM_TYPE",type:"hidden"},(0,N.Ls)("value",{},"urn:xmpp:mam:2")),"contact"===e.recipientType?(0,N.Ls)("field",{var:"with"},(0,N.Ls)("value",{},e.jidBare)):void 0,e.oldestMessage?(0,N.Ls)("field",{var:"end"},(0,N.Ls)("value",{},e.oldestMessage.datetime.toISOString())):void 0),(0,N.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,N.Ls)("max",{},100),(0,N.Ls)("before"))));yield t.chatService.chatConnectionService.sendIq(s)})()}loadAllMessages(){var e=this;return J(function*(){if(!(yield e.supportsMessageArchiveManagement()))throw new Error("message archive management not suppported");let t=yield e.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"urn:xmpp:mam:2"})));for(;"true"!==t.getChild("fin").attrs.complete;){const r=t.getChild("fin").getChild("set").getChildText("last");t=yield e.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,N.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,N.Ls)("max",{},250),(0,N.Ls)("after",{},r)))))}})()}supportsMessageArchiveManagement(){var e=this;return J(function*(){const t=yield e.serviceDiscoveryPlugin.supportsFeature(e.chatService.chatConnectionService.userJid.bare().toString(),"urn:xmpp:mam:2");return t||e.logService.info("server doesnt support MAM"),t})()}handleStanza(e){return!!this.isMamMessageStanza(e)&&(this.handleMamMessageStanza(e),!0)}isMamMessageStanza(e){const t=e.getChild("result");return"message"===e.name&&"urn:xmpp:mam:2"===t?.attrs.xmlns}handleMamMessageStanza(e){const t=e.getChild("result").getChild("forwarded"),r=t.getChild("message"),s=t.getChild("delay"),i=r.getChild("event",KS);null==r.getAttr("type")&&null!=i?this.handlePubSubEvent(i,s):this.handleArchivedMessage(r,s)}handleArchivedMessage(e,t){const r=e.getAttr("type");if("chat"===r)this.messagePlugin.handleStanza(e,t)&&this.mamMessageReceived$.next();else{if("groupchat"!==r)throw new Error(`unknown archived message type: ${r}`);this.multiUserChatPlugin.handleStanza(e,t)}}handlePubSubEvent(e,t){const r=e.getChild("items");r?.attrs.node===to.messages?r.getChildren("item").forEach(o=>this.handleArchivedMessage(o.getChild("message"),t)):this.logService.warn(`Handling of MUC/Sub message types other than ${to.messages} isn't implemented yet!`)}}const NB=new _e("ReportUserService"),OB=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;function XS(n){return n.match(OB)||[]}class Fa extends Ot{static extractIdFromStanza(e){const t=e.getChild("origin-id"),r=e.getChild("stanza-id");return e.attrs.id||t&&t.attrs.id||r&&r.attrs.id}beforeSendMessage(e,t){const r=function kB(){let n;for(;!n;)n=Math.random().toString(36).substr(2,12);return n}();e.children.push((0,N.Ls)("origin-id",{xmlns:"urn:xmpp:sid:0",id:r})),t&&(t.id=r)}afterSendMessage(e,t){e.id=Fa.extractIdFromStanza(t)}afterReceiveMessage(e,t){e.id=Fa.extractIdFromStanza(t)}}const no="ngxchat:contactmessagestates",eE="entries",tE="contact-message-state";class nE extends Ot{constructor(e,t,r,s,i){var o;super(),o=this,this.publishSubscribePlugin=e,this.xmppChatAdapter=t,this.chatMessageListRegistry=r,this.logService=s,this.entityTimePlugin=i,this.jidToMessageStateDate=new Map,this.chatMessageListRegistry.openChats$.pipe(At(()=>"online"===t.state$.getValue())).subscribe(a=>{a.forEach(function(){var c=J(function*(l){l.mostRecentMessageReceived&&(yield o.sendMessageStateNotification(l.jidBare,l.mostRecentMessageReceived.id,Qt.RECIPIENT_SEEN))});return function(l){return c.apply(this,arguments)}}())}),this.publishSubscribePlugin.publish$.subscribe(a=>this.handlePubSubEvent(a))}onBeforeOnline(){var e=this;return J(function*(){e.parseContactMessageStates().catch(t=>e.logService.error("error parsing contact message states",t))})()}parseContactMessageStates(){var e=this;return J(function*(){const t=yield e.publishSubscribePlugin.retrieveNodeItems(no);e.processPubSub(t)})()}processPubSub(e){let t=[];1===e.length&&(t=e[0].getChild(eE).getChildren(tE).map(r=>{const{lastRecipientReceived:s,lastRecipientSeen:i,lastSent:o,jid:a}=r.attrs;return[a,{lastRecipientSeen:new Date(+i||0),lastRecipientReceived:new Date(+s||0),lastSent:new Date(+o||0)}]})),this.jidToMessageStateDate=new Map(t)}persistContactMessageStates(){var e=this;return J(function*(){const t=[...e.jidToMessageStateDate.entries()].map(([r,s])=>(0,N.Ls)(tE,{jid:r,lastRecipientReceived:String(s.lastRecipientReceived.getTime()),lastRecipientSeen:String(s.lastRecipientSeen.getTime()),lastSent:String(s.lastSent.getTime())}));yield e.publishSubscribePlugin.storePrivatePayloadPersistent(no,"current",(0,N.Ls)(eE,{},t))})()}onOffline(){this.jidToMessageStateDate.clear()}beforeSendMessage(e,t){const{type:r}=e.attrs;"chat"===r&&t&&(t.state=Qt.SENDING)}afterSendMessage(e,t){var r=this;return J(function*(){const{type:s,to:i}=t.attrs;"chat"===s&&(r.updateContactMessageState((0,N.kO)(i).bare().toString(),Qt.SENT,new Date(yield r.entityTimePlugin.getNow())),delete e.state)})()}afterReceiveMessage(e,t,r){t.getChild("message-state",no)?r.discard=!0:e.direction===ke.in&&!e.fromArchive&&"groupchat"!==t.attrs.type&&this.acknowledgeReceivedMessage(t)}acknowledgeReceivedMessage(e){const{from:t}=e.attrs,s=this.chatMessageListRegistry.isChatOpen(this.xmppChatAdapter.getOrCreateContactById(t))?Qt.RECIPIENT_SEEN:Qt.RECIPIENT_RECEIVED,i=Fa.extractIdFromStanza(e);this.sendMessageStateNotification((0,N.kO)(t),i,s).catch(o=>this.logService.error("error sending state notification",o))}sendMessageStateNotification(e,t,r){var s=this;return J(function*(){const i=(0,N.Ls)("message",{to:e.bare().toString(),from:s.xmppChatAdapter.chatConnectionService.userJid.toString(),type:"chat"},(0,N.Ls)("message-state",{xmlns:no,messageId:t,date:new Date(yield s.entityTimePlugin.getNow()).toISOString(),state:r}));yield s.xmppChatAdapter.chatConnectionService.send(i)})()}handleStanza(e){const{type:t,from:r}=e.attrs,s=e.getChild("message-state",no);return!("chat"!==t||!s||(this.handleStateNotificationStanza(s,r),0))}handleStateNotificationStanza(e,t){const{state:r,date:s}=e.attrs,i=this.xmppChatAdapter.getOrCreateContactById(t),o=new Date(s);this.updateContactMessageState(i.jidBare.toString(),r,o)}updateContactMessageState(e,t,r){const s=this.getContactMessageState(e);let i=!1;t===Qt.RECIPIENT_RECEIVED&&s.lastRecipientReceived<r?(s.lastRecipientReceived=r,i=!0):t===Qt.RECIPIENT_SEEN&&s.lastRecipientSeen<r?(s.lastRecipientReceived=r,s.lastRecipientSeen=r,i=!0):t===Qt.SENT&&s.lastSent<r&&(s.lastSent=r,i=!0),i&&this.persistContactMessageStates().catch(o=>this.logService.error("error persisting contact message states",o))}getContactMessageState(e){return this.jidToMessageStateDate.has(e)||this.jidToMessageStateDate.set(e,{lastRecipientReceived:new Date(0),lastRecipientSeen:new Date(0),lastSent:new Date(0)}),this.jidToMessageStateDate.get(e)}handlePubSubEvent(e){const t=e.getChild("items"),r=t?.attrs.node,s=t?.getChildren("item");r===no&&s&&this.processPubSub(s)}}const Gp="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDYwMCA2MDAiPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwLV8xIj4KICAgICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgogIDxnIGlkPSJfMSIgZGF0YS1uYW1lPSIxIiBjbGlwLXBhdGg9InVybCgjY2xpcC1fMSkiPgogICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9IiNmZmYiLz4KICAgIDxnIGlkPSJHcnVwcGVfNzcxNyIgZGF0YS1uYW1lPSJHcnVwcGUgNzcxNyI+CiAgICAgIDxyZWN0IGlkPSJSZWNodGVja18xMzk3IiBkYXRhLW5hbWU9IlJlY2h0ZWNrIDEzOTciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIiBmaWxsPSIjZTVlNmU4Ii8+CiAgICAgIDxlbGxpcHNlIGlkPSJFbGxpcHNlXzI4MyIgZGF0YS1uYW1lPSJFbGxpcHNlIDI4MyIgY3g9IjExNi4yMzEiIGN5PSIxMjUuNjcxIiByeD0iMTE2LjIzMSIgcnk9IjEyNS42NzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4NS4yMzEgMTExLjQ4NSkiIGZpbGw9IiNhZmI0YjgiLz4KICAgICAgPHBhdGggaWQ9IlBmYWRfMjQ5NjIiIGRhdGEtbmFtZT0iUGZhZCAyNDk2MiIgZD0iTTU0Ni4zNTksNTk1LjI3NnMwLTIxNy41NjMtMjQ0LjkwOS0yMTcuNTYzaC0xLjQ1N2MtMjQ0LjkwOSwwLTI0NC45MDksMjE3LjU2My0yNDQuOTA5LDIxNy41NjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgNC43MjQpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K";var Rt=(()=>(function(n){n.present="present",n.unavailable="unavailable",n.away="away"}(Rt||(Rt={})),Rt))();function rE(){return{acceptSubscriptionRequest:"Accept",block:"Block",blockAndReport:"Block & report",chat:"Chat",contactRequestIn:"Incoming contact requests",contactRequestOut:"Outgoing contact requests",contacts:"Contacts",contactsUnaffiliated:"Unknown",dateFormat:"EEEE, MM/dd/yyyy",denySubscriptionRequest:"Deny",dismiss:"Dismiss",dropMessage:"Drop your file to send it",locale:void 0,noContacts:"No contacts yet.",noMessages:"No messages yet.",placeholder:"Enter your message!",presence:{[Rt.away]:"Away",[Rt.present]:"Online",[Rt.unavailable]:"Offline"},rooms:"Rooms",subscriptionRequestMessage:"I want to add you as a contact.",timeFormat:"shortTime"}}class Wp{constructor(){this.discard=!1}}class sE extends Ot{constructor(e,t){super(),this.xmppChatAdapter=e,this.logService=t}handleStanza(e,t){return!!this.isMessageStanza(e)&&(this.handleMessageStanza(e,t),!0)}isMessageStanza(e){return"message"===e.name&&"groupchat"!==e.attrs.type&&"error"!==e.attrs.type&&!!e.getChildText("body")?.trim()}handleMessageStanza(e,t){const r=this.xmppChatAdapter.chatConnectionService.userJid.bare().equals((0,N.kO)(e.attrs.to).bare()),s=r?ke.in:ke.out,i=null!=t,o=t??e.getChild("delay"),a=o?.attrs.stamp?new Date(o.attrs.stamp):new Date;s===ke.in&&!i&&this.logService.debug("message received <=",e.getChildText("body"));const c={body:e.getChildText("body").trim(),direction:s,datetime:a,delayed:!!o,fromArchive:i},l=new Wp;if(this.xmppChatAdapter.plugins.forEach(h=>h.afterReceiveMessage(c,e,l)),l.discard)return;const d=this.xmppChatAdapter.getOrCreateContactById(r?e.attrs.from:e.attrs.to);d.addMessage(c),s===ke.in&&!i&&this.xmppChatAdapter.message$.next(d)}sendMessage(e,t){const r=(0,N.Ls)("message",{to:e.jidBare.toString(),from:this.xmppChatAdapter.chatConnectionService.userJid.toString(),type:"chat"},(0,N.Ls)("body",{},t)),s={direction:ke.out,body:t,datetime:new Date,delayed:!1,fromArchive:!1};this.xmppChatAdapter.plugins.forEach(i=>i.beforeSendMessage(r,s)),e.addMessage(s),this.xmppChatAdapter.chatConnectionService.send(r).then(()=>{this.xmppChatAdapter.plugins.forEach(i=>i.afterSendMessage(s,r))},i=>{this.logService.error("rejected message "+s.id,i)})}}const Qp=n=>n.toString();function iE(n,e,t=Qp){e.splice(Jp(t(n),e,t),0,n)}function Jp(n,e,t=Qp){let r=0,s=e.length;for(;r!==s;){const i=Math.floor(r+(s-r)/2);n<t(e[i])?s=i:r=i+1}return r}function oE(n,e){return n[function VB(n,e){for(let t=n.length-1;t>=0;t--)if(e(n[t]))return t;return-1}(n,e)]}function Kp(n){const e=n.toISOString();return e.slice(0,e.indexOf("T"))}class aE{constructor(e){this.logService=e,this.messages=[],this.dateMessageGroups=[],this.messageIdToMessage=new Map,this.messages$=new se}addMessage(e){return e.id&&this.messageIdToMessage.has(e.id)?(this.logService&&this.logService.warn(`message with id ${e.id} already exists`),!1):(iE(e,this.messages,t=>t.datetime),this.addToDateMessageGroups(e),this.messageIdToMessage.set(e.id,e),this.messages$.next(e),!0)}get oldestMessage(){return this.messages[0]}get mostRecentMessage(){return this.messages[this.messages.length-1]}get mostRecentMessageReceived(){return oE(this.messages,e=>e.direction===ke.in)}get mostRecentMessageSent(){return oE(this.messages,e=>e.direction===ke.out)}addToDateMessageGroups(e){const t=Kp(e.datetime),r=function LB(n,e,t=Qp){let r=0,s=e.length;for(;r!==s;){const i=Math.floor(r+(s-r)/2),o=t(e[i]);if(n<o)s=i;else{if(!(n>o))return i;r=i+1}}return-1}(t,this.dateMessageGroups,s=>Kp(s.date));if(-1!==r)iE(e,this.dateMessageGroups[r].messages,s=>s.datetime);else{const s={date:e.datetime,messages:[e]},i=Jp(t,this.dateMessageGroups,o=>Kp(o.date));this.dateMessageGroups.splice(i,0,s)}}}function cE(n){return!!n.bare}class lE extends Ls{constructor(e,t){super(),this.xmlns=e,this.to=t}toStanza(){return(0,N.Ls)("iq",{type:"get",...this.to?{to:this.to}:{}},(0,N.Ls)("query",{xmlns:this.xmlns}))}}let La=(()=>{class n extends Ot{constructor(t){super(),this.chatAdapter=t,this.servicesInitialized$=new Ue(!1),this.hostedServices=[],this.resourceCache=new Map}onBeforeOnline(){var t=this;return J(function*(){yield t.discoverServices(t.chatAdapter.chatConnectionService.userJid.domain),t.servicesInitialized$.next(!0)})()}onOffline(){this.servicesInitialized$.next(!1),this.hostedServices=[],this.resourceCache.clear()}supportsFeature(t,r){var s=this;return new Promise((i,o)=>{this.servicesInitialized$.pipe(jn(a=>!!a)).subscribe(J(function*(){try{const a=s.resourceCache.get(t)||(yield s.discoverServiceInformation(t));a||o(new Error("no service found for jid "+t)),i(a.features.includes(r))}catch(a){o(a)}}))})}findService(t,r){return new Promise((s,i)=>{this.servicesInitialized$.pipe(jn(o=>!!o)).subscribe(()=>{const o=this.hostedServices.filter(a=>a.identities.filter(c=>c.category===t&&c.type===r).length>0);if(0===o.length)i(new Error(`no service matching category ${t} and type ${r} found!`));else{if(!(o.length>1))return s(o[0]);i(new Error(`multiple services matching category ${t} and type ${r} found! ${JSON.stringify(o)}`))}})})}discoverServices(t){var r=this;return J(function*(){const s=yield r.chatAdapter.chatConnectionService.sendIq(new lE(n.DISCO_ITEMS,r.chatAdapter.chatConnectionService.userJid.domain).toStanza()),i=new Set(s.getChild("query").getChildren("item").map(a=>a.attrs.jid));i.add(t);const o=yield Promise.all([...i.keys()].map(a=>r.discoverServiceInformation(a)));r.hostedServices.push(...o)})()}discoverServiceInformation(t){var r=this;return J(function*(){const s=yield r.chatAdapter.chatConnectionService.sendIq(new lE(n.DISCO_INFO,t).toStanza()),i=s.getChild("query"),o=i.getChildren("feature").map(c=>c.attrs.var),a={identities:i.getChildren("identity").map(c=>c.attrs),features:o,jid:s.attrs.from};return r.resourceCache.set(s.attrs.from,a),a})()}}return n.DISCO_INFO="http://jabber.org/protocol/disco#info",n.DISCO_ITEMS="http://jabber.org/protocol/disco#items",n})();class Va{constructor(e,t,r){this.recipientType="room",this.avatar="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDYwMCA2MDAiPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwLV8zIj4KICAgICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgogIDxnIGlkPSJfMyIgZGF0YS1uYW1lPSIzIiBjbGlwLXBhdGg9InVybCgjY2xpcC1fMykiPgogICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9IiNmZmYiLz4KICAgIDxnIGlkPSJHcnVwcGVfNzcxOCIgZGF0YS1uYW1lPSJHcnVwcGUgNzcxOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTc4MC42OTcgODgxLjUpIj4KICAgICAgPHJlY3QgaWQ9IlJlY2h0ZWNrXzEzOTgiIGRhdGEtbmFtZT0iUmVjaHRlY2sgMTM5OCIgd2lkdGg9IjYwMCIgaGVpZ2h0PSI1OTkuOTk1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3ODAuNjk3IC04ODEuNSkiIGZpbGw9IiNlNWU2ZTgiLz4KICAgICAgPGVsbGlwc2UgaWQ9IkVsbGlwc2VfMjg0IiBkYXRhLW5hbWU9IkVsbGlwc2UgMjg0IiBjeD0iMTE2LjIzMSIgY3k9IjEyNS42NzEiIHJ4PSIxMTYuMjMxIiByeT0iMTI1LjY3MSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTY1LjkyNiAtNzY5LjA5MykiIGZpbGw9IiNhZmI0YjgiLz4KICAgICAgPGVsbGlwc2UgaWQ9IkVsbGlwc2VfMjg1IiBkYXRhLW5hbWU9IkVsbGlwc2UgMjg1IiBjeD0iNjcuOTk4IiBjeT0iNzMuNTIxIiByeD0iNjcuOTk4IiByeT0iNzMuNTIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MTYuMjEgLTY2NS40OTYpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxlbGxpcHNlIGlkPSJFbGxpcHNlXzI4OSIgZGF0YS1uYW1lPSJFbGxpcHNlIDI4OSIgY3g9IjY3Ljk5OCIgY3k9IjczLjUyMSIgcng9IjY3Ljk5OCIgcnk9IjczLjUyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIxMi4xMDcgLTY2NS40OTYpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxwYXRoIGlkPSJQZmFkXzI0OTYzIiBkYXRhLW5hbWU9IlBmYWQgMjQ5NjMiIGQ9Ik0xMzI3LjA1Mi0yODYuMjI1czAtMjE3LjU2My0yNDQuOTA3LTIxNy41NjNoLTEuNDU3Yy0yNDQuOTA3LDAtMjQ0LjkwNywyMTcuNTYzLTI0NC45MDcsMjE3LjU2M1oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgNC43MjUpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxwYXRoIGlkPSJQZmFkXzI0OTY0IiBkYXRhLW5hbWU9IlBmYWQgMjQ5NjQiIGQ9Ik05MzMuOTc3LTQ4My44Yy0xLjA1LjYtMi4xLDEuMjItMy4xNCwxLjg0LTMyLjM0LDE5LjM0LTU4LjI5LDQ2LjI3LTc3LjEyLDgwLjA1LTMxLjcsNTYuODgtMzQuMzU1LDExOC43MjgtMzQuMzU1LDEyMS4yNDhoLTQwLjkxTDc4MC43LTQ3MS4zMmMyMy4yOC0xOC44Miw1Ny4wNS0zMi40NywxMDYuMDQtMzIuNDdoLjk0YTIxNy43NTMsMjE3Ljc1MywwLDAsMSw0My44Myw0LjE4QTguNTQ5LDguNTQ5LDAsMCwxLDkzMy45NzctNDgzLjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAgLTAuNzI1KSIgZmlsbD0iI2FmYjRiOCIvPgogICAgICA8cGF0aCBpZD0iUGZhZF8yNDk2OCIgZGF0YS1uYW1lPSJQZmFkIDI0OTY4IiBkPSJNNzgyLjc5LTQ4My44YzEuMDUuNiwyLjEsMS4yMiwzLjE0LDEuODQsMzIuMzQsMTkuMzQsNTguMjksNDYuMjcsNzcuMTIsODAuMDUsMzEuNyw1Ni44OCwzNC4zNTUsMTE4LjcyOCwzNC4zNTUsMTIxLjI0OGg0MC45MUw5MzYuMDctNDcxLjMyYy0yMy4yOC0xOC44Mi01Ny4wNS0zMi40Ny0xMDYuMDQtMzIuNDdoLS45NGEyMTcuNzUzLDIxNy43NTMsMCwwLDAtNDMuODMsNC4xOEE4LjU0OSw4LjU0OSwwLDAsMCw3ODIuNzktNDgzLjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NTcuNTQ3IC0wLjcyNikiIGZpbGw9IiNhZmI0YjgiLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=",this.metadata={},this.roomJid=e.bare(),this.name=r??e.bare().toString(),this.occupantJid=e,this.messageStore=new aE(t)}get jidBare(){return this.roomJid}get messages$(){return this.messageStore.messages$}get messages(){return this.messageStore.messages}get dateMessagesGroups(){return this.messageStore.dateMessageGroups}get oldestMessage(){return this.messageStore.oldestMessage}get mostRecentMessage(){return this.messageStore.mostRecentMessage}get mostRecentMessageReceived(){return this.messageStore.mostRecentMessageReceived}get mostRecentMessageSent(){return this.messageStore.mostRecentMessageSent}addMessage(e){this.messageStore.addMessage(e)}equalsBareJid(e){if(e instanceof Va||cE(e)){const t=e instanceof Va?e.roomJid:e.bare();return this.roomJid.bare().equals(t)}return!1}}class BB extends Ls{constructor(e,t,r,s){super(),this.roomJid=e,this.from=t,this.body=r,this.thread=s}toStanza(){const e=(0,N.Ls)("message",{from:this.from,to:this.roomJid,type:"groupchat"},(0,N.Ls)("body",{},this.body));return this.thread&&e.children.push((0,N.Ls)("thread",{},this.thread)),e}}var Lr=(()=>(function(n){n[n.none=0]="none",n[n.member=1]="member",n[n.admin=2]="admin",n[n.owner=3]="owner",n[n.outcast=4]="outcast"}(Lr||(Lr={})),Lr))();class ro extends Ls{constructor(e,t){super(),this.roomJid=e,this.affiliation=t}static build(e,t){return new ro(e,t).toStanza()}toStanza(){return(0,N.Ls)("iq",{type:"get",to:this.roomJid},(0,N.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#admin"},(0,N.Ls)("item",{affiliation:this.affiliation})))}}class Yp extends Ls{constructor(e,t){super(),this.roomJid=e,this.modifications=t}static build(e,t){return new Yp(e,t).toStanza()}toStanza(){return(0,N.Ls)("iq",{to:this.roomJid,type:"set"},(0,N.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#admin"},...this.modifications.map(e=>this.buildItem(e))))}buildItem(e){const t=(0,N.Ls)("item",{jid:e.jid,affiliation:Lr[e.affiliation]});return e.nick&&(t.attrs.nick=e.nick),t}}class so extends Ot{constructor(e,t,r){super(),this.xmppChatAdapter=e,this.logService=t,this.serviceDiscoveryPlugin=r,this.rooms$=new Ue([]),this.message$=new se,this.roomJoinResponseHandlers=new Map}onOffline(){this.roomJoinResponseHandlers.clear(),this.rooms$.next([])}handleStanza(e,t){return this.isRoomPresenceStanza(e)?this.handleRoomPresenceStanza(e):!!this.isRoomMessageStanza(e)&&this.handleRoomMessageStanza(e,t)}isRoomPresenceStanza(e){return"presence"===e.name&&null!=(e.getChild("x","http://jabber.org/protocol/muc")||e.getChild("x","http://jabber.org/protocol/muc#user"))}handleRoomPresenceStanza(e){const t=this.roomJoinResponseHandlers.get(e.attrs.from);return!!t&&(this.roomJoinResponseHandlers.delete(e.attrs.from),t(e),!0)}createRoom(e){var t=this;return J(function*(){const r=e.roomId,s=yield t.serviceDiscoveryPlugin.findService("conference","text"),i=(0,N.kO)(r,s.jid,e.nick),{presenceResponse:o,room:a}=yield t.joinRoomInternal(i,e.name);if("owner"!==o.getChild("x").getChild("item").attrs.affiliation)throw new Error("error creating room, user is not owner: "+o.toString());const u=(yield t.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get",to:a.roomJid.toString()},(0,N.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"})))).getChild("query").getChild("x");if(!u)throw new Error("room not configurable");const d=t.applyRoomCreationRequestOptions(t.extractDefaultConfiguration(u.getChildren("field")),e);try{return yield t.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set",to:a.roomJid.toString()},(0,N.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"},(0,N.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,N.Ls)("field",{var:"FORM_TYPE"},(0,N.Ls)("value",{},"http://jabber.org/protocol/muc#roomconfig")),...t.configurationToElements(d))))),a}catch(h){throw t.logService.error("room configuration rejected",h),h}})()}destroyRoom(e){var t=this;return J(function*(){let r;try{r=yield t.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set",to:e.toString()},(0,N.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"},(0,N.Ls)("destroy"))))}catch(i){throw t.logService.error("error destroying room"),i}const s=t.rooms$.getValue().filter(i=>!i.roomJid.equals(e));return t.rooms$.next(s),r})()}joinRoomInternal(e,t){var r=this;return J(function*(){if(r.getRoomByJid(e.bare()))throw new Error("can not join room more than once: "+e.bare().toString());const s=r.xmppChatAdapter.chatConnectionService.userJid,i=(0,N.kO)(e.local,e.domain,e.resource||s.local),o=new Promise(l=>r.roomJoinResponseHandlers.set(i.toString(),l));try{yield r.xmppChatAdapter.chatConnectionService.send((0,N.Ls)("presence",{from:s.toString(),to:i.toString()},(0,N.Ls)("x",{xmlns:"http://jabber.org/protocol/muc"})))}catch(l){throw r.logService.error("error sending presence stanza to join a room",l),r.roomJoinResponseHandlers.delete(i.toString()),l}const a=yield o;if(a.getChild("error"))throw new Error("error joining room: "+a.toString());let c=r.getRoomByJid(e);return c||(c=new Va(i,r.logService,t),r.rooms$.next([c].concat(r.rooms$.getValue()))),{presenceResponse:a,room:c}})()}joinRoom(e){var t=this;return J(function*(){return(yield t.joinRoomInternal(e)).room})()}queryAllRooms(){var e=this;return J(function*(){const t=yield e.serviceDiscoveryPlugin.findService("conference","text"),r=[];let s=yield e.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get",to:t.jid.toString()},(0,N.Ls)("query",{xmlns:La.DISCO_ITEMS})));r.push(...e.extractRoomSummariesFromResponse(s));let i=e.extractResultSetFromResponse(s);for(;i&&i.getChild("last");){const o=i.getChildText("last");s=yield e.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get",to:t.jid.toString()},(0,N.Ls)("query",{xmlns:La.DISCO_ITEMS},(0,N.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,N.Ls)("max",{},250),(0,N.Ls)("after",{},o))))),r.push(...e.extractRoomSummariesFromResponse(s)),i=e.extractResultSetFromResponse(s)}return r})()}extractRoomSummariesFromResponse(e){return e.getChild("query",La.DISCO_ITEMS)?.getChildren("item")?.map(t=>t.attrs)||[]}extractResultSetFromResponse(e){return e.getChild("query",La.DISCO_ITEMS)?.getChild("set","http://jabber.org/protocol/rsm")}queryMemberList(e){var t=this;return J(function*(){const r=yield Promise.all([t.xmppChatAdapter.chatConnectionService.sendIq(ro.build(e.roomJid.toString(),"admin")),t.xmppChatAdapter.chatConnectionService.sendIq(ro.build(e.roomJid.toString(),"member")),t.xmppChatAdapter.chatConnectionService.sendIq(ro.build(e.roomJid.toString(),"owner")),t.xmppChatAdapter.chatConnectionService.sendIq(ro.build(e.roomJid.toString(),"outcast"))]);let s=[];for(const i of r){const o=i.getChild("query").getChildren("item").map(a=>({jid:a.attrs.jid,nick:a.attrs.nick,affiliation:t.reverseMapAffiliation(a.attrs.affiliation)}));s=s.concat(o)}return s})()}reverseMapAffiliation(e){if(!e||"none"===e)return Lr.none;if("member"===e)return Lr.member;if("admin"===e)return Lr.admin;if("owner"===e)return Lr.owner;if("outcast"===e)return Lr.outcast;{const t="unexpected affilation: "+e;throw this.logService.error(t),new Error(t)}}modifyMemberList(e,t,r,s){var i=this;return J(function*(){return yield i.xmppChatAdapter.chatConnectionService.sendIq(Yp.build(e,[{jid:t,affiliation:r,nick:s}]))})()}sendMessage(e,t,r){var s=this;return J(function*(){const i=s.xmppChatAdapter.chatConnectionService.userJid,o=new BB(e.roomJid.toString(),i.toString(),t,r).toStanza();for(const a of s.xmppChatAdapter.plugins)a.beforeSendMessage(o);return yield s.xmppChatAdapter.chatConnectionService.send(o)})()}configurationToElements(e){return[...e.entries()].map(([t,r])=>(0,N.Ls)("field",{var:t},...r.map(s=>(0,N.Ls)("value",{},s))))}extractDefaultConfiguration(e){const t=e.filter(r=>"hidden"!==r.attrs.type).map(r=>[r.attrs.var,r.getChildren("value").map(s=>s.getText())]);return new Map(t)}applyRoomCreationRequestOptions(e,t){const r=new Map(e);return r.set("muc#roomconfig_whois",[t.nonAnonymous?"anyone":"moderators"]).set("muc#roomconfig_publicroom",[t.public?"1":"0"]).set("muc#roomconfig_membersonly",[t.membersOnly?"1":"0"]).set("muc#roomconfig_persistentroom",[t.persistentRoom?"1":"0"]),void 0!==t.allowSubscription&&r.set("allow_subscription",[!0===t.allowSubscription?"1":"0"]),r}isRoomMessageStanza(e){return"message"===e.name&&"groupchat"===e.attrs.type&&!!e.getChildText("body")?.trim()}handleRoomMessageStanza(e,t){const r=t??e.getChild("delay"),s=r?.attrs.stamp?new Date(r.attrs.stamp):new Date,i=(0,N.kO)(e.attrs.from),o=this.getRoomByJid(i.bare());if(!o)return this.logService.warn(`received stanza for unknown room: ${i.bare().toString()}`),!1;const a={body:e.getChildText("body").trim(),datetime:s,id:e.attrs.id,from:i,direction:i.equals(o.occupantJid)?ke.out:ke.in,delayed:!!r,fromArchive:null!=t},c=new Wp;for(const l of this.xmppChatAdapter.plugins)l.afterReceiveMessage(a,e,c);return c.discard||o.addMessage(a),a.delayed||this.message$.next(o),!0}getRoomByJid(e){for(const t of this.rooms$.getValue())if(t.roomJid.equals(e))return t;return null}}var ot=(()=>(function(n){n.to="to",n.from="from",n.both="both",n.none="none"}(ot||(ot={})),ot))();class ou extends Ot{constructor(e,t){super(),this.chatService=e,this.logService=t}handleStanza(e){return!this.isCapabilitiesStanza(e)&&(this.isRosterPushStanza(e)?this.handleRosterPushStanza(e):!!this.isPresenceStanza(e)&&this.handlePresenceStanza(e))}isRosterPushStanza(e){return"iq"===e.name&&"set"===e.attrs.type&&e.getChild("query","jabber:iq:roster")}isPresenceStanza(e){return"presence"===e.name&&!e.getChild("x","http://jabber.org/protocol/muc#user")}isCapabilitiesStanza(e){return!!e.getChild("c","http://jabber.org/protocol/caps")}handleRosterPushStanza(e){const t=e.getChild("query").getChild("item"),r=this.chatService.getOrCreateContactById(t.attrs.jid,t.attrs.name||t.attrs.jid);r.pendingOut$.next("subscribe"===t.attrs.ask);const s=t.attrs.subscription||"none";this.chatService.chatConnectionService.sendIqAckResult(e.attrs.id);let i=!1;if("remove"===s?(r.pendingOut$.next(!1),r.subscription$.next(ot.none),i=!0):"none"===s?(r.subscription$.next(ot.none),i=!0):"to"===s?(r.subscription$.next(ot.to),i=!0):"from"===s?(r.subscription$.next(ot.from),i=!0):"both"===s&&(r.subscription$.next(ot.both),i=!0),i){const o=this.chatService.contacts$.getValue();this.chatService.contacts$.next(o)}return i}handlePresenceStanza(e){const t=this.chatService.getOrCreateContactById(e.attrs.from);if(this.chatService.chatConnectionService.userJid.bare().equals((0,N.kO)(e.attrs.to).bare())){if(!e.attrs.type){const s=e.getChildText("show"),o={chat:Rt.present,null:Rt.present,away:Rt.away,dnd:Rt.away,xa:Rt.away}[s];return o?t.updateResourcePresence(e.attrs.from,o):this.logService.error("illegal presence:",e.attrs.from,s),!0}if("unavailable"===e.attrs.type)return t.updateResourcePresence(e.attrs.from,Rt.unavailable),!0;if("subscribe"===e.attrs.type){if(t.isSubscribed()||t.pendingOut$.getValue())return t.pendingIn$.next(!1),this.sendAcceptPresenceSubscriptionRequest(e.attrs.from),t.subscription$.next(this.transitionSubscriptionRequestReceivedAccepted(t.subscription$.getValue())),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0;if(t)return t.pendingIn$.next(!0),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0}else if("subscribed"===e.attrs.type)return t.pendingOut$.next(!1),t.subscription$.next(this.transitionSubscriptionRequestSentAccepted(t.subscription$.getValue())),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0}return!1}transitionSubscriptionRequestReceivedAccepted(e){switch(e){case ot.none:return ot.from;case ot.to:return ot.both;default:return e}}transitionSubscriptionRequestSentAccepted(e){switch(e){case ot.none:return ot.to;case ot.from:return ot.both;default:return e}}sendAcceptPresenceSubscriptionRequest(e){this.chatService.getOrCreateContactById(e).pendingIn$.next(!1),this.chatService.chatConnectionService.send((0,N.Ls)("presence",{to:e,type:"subscribed",id:this.chatService.chatConnectionService.getNextIqId()}))}onBeforeOnline(){return this.refreshRosterContacts()}getRosterContacts(){return new Promise(e=>this.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get"},(0,N.Ls)("query",{xmlns:"jabber:iq:roster"}))).then(t=>e(this.convertToContacts(t)),t=>{this.logService.error("error converting roster contact push",t.toString()),e([])}))}convertToContacts(e){return e.getChild("query").getChildElements().map(t=>{const r=this.chatService.getOrCreateContactById(t.attrs.jid,t.attrs.name||t.attrs.jid);return r.subscription$.next(this.parseSubscription(t.attrs.subscription)),r.pendingOut$.next("subscribe"===t.attrs.ask),r})}parseSubscription(e){switch(e){case"to":return ot.to;case"from":return ot.from;case"both":return ot.both;default:return ot.none}}addRosterContact(e){this.sendAcceptPresenceSubscriptionRequest(e),this.sendAddToRoster(e),this.sendSubscribeToPresence(e)}sendAddToRoster(e){return this.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"jabber:iq:roster"},(0,N.Ls)("item",{jid:e}))))}sendSubscribeToPresence(e){this.chatService.chatConnectionService.send((0,N.Ls)("presence",{id:this.chatService.chatConnectionService.getNextIqId(),to:e,type:"subscribe"}))}removeRosterContact(e){const t=this.chatService.getContactById(e);t&&(t.subscription$.next(ot.none),t.pendingOut$.next(!1),t.pendingIn$.next(!1),this.sendRemoveFromRoster(e),this.sendWithdrawPresenceSubscription(e))}sendRemoveFromRoster(e){this.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"jabber:iq:roster"},(0,N.Ls)("item",{jid:e,subscription:"remove"}))))}sendWithdrawPresenceSubscription(e){this.chatService.chatConnectionService.send((0,N.Ls)("presence",{id:this.chatService.chatConnectionService.getNextIqId(),to:e,type:"unsubscribed"}))}refreshRosterContacts(){return this.getRosterContacts()}}var Vr=(()=>(function(n){n[n.Disabled=0]="Disabled",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Info=3]="Info",n[n.Debug=4]="Debug"}(Vr||(Vr={})),Vr))();let io=(()=>{class n{constructor(){this.logLevel=Vr.Info,this.writer=console,this.messagePrefix=()=>"ChatService:"}error(...t){this.logLevel>=Vr.Error&&this.writer.error(this.messagePrefix(),...t)}warn(...t){this.logLevel>=Vr.Warn&&this.writer.warn(this.messagePrefix(),...t)}info(...t){this.logLevel>=Vr.Info&&this.writer.info(this.messagePrefix(),...t)}debug(...t){this.logLevel>=Vr.Debug&&this.writer.debug(this.messagePrefix(),...t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),uE=(()=>{class n{client(t){return(0,N.Lp)(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),Zp=(()=>{class n{constructor(t,r,s){this.logService=t,this.ngZone=r,this.xmppClientFactoryService=s,this.state$=new Ue("disconnected"),this.stanzaUnknown$=new se,this.iqId=(new Date).getTime(),this.iqStanzaResponseHandlers=new Map}onOnline(t){this.logService.info("online =","online as",t.toString()),this.userJid=t,this.state$.next("online")}sendPresence(){var t=this;return J(function*(){yield t.send((0,N.Ls)("presence"))})()}send(t){var r=this;return J(function*(){r.logService.debug(">>>",t),yield r.client.send(t)})()}sendIq(t){return new Promise((r,s)=>{t.attrs={id:this.getNextIqId(),from:this.userJid.toString(),...t.attrs};const{id:i}=t.attrs;if(!t.attrs.type){const o="iq stanza without type: "+t.toString();throw this.logService.error(o),new Error(o)}this.iqStanzaResponseHandlers.set(i,o=>{"result"===o.attrs.type?r(o):s(new JS(o))}),this.send(t).catch(o=>{this.logService.error("error sending iq",o),this.iqStanzaResponseHandlers.delete(i),s(o)})})}sendIqAckResult(t){var r=this;return J(function*(){yield r.send((0,N.Ls)("iq",{from:r.userJid.toString(),id:t,type:"result"}))})()}onStanzaReceived(t){let r=!1;if(this.isIqStanzaResponse(t)){const s=this.iqStanzaResponseHandlers.get(t.attrs.id);s&&(this.logService.debug("<<<",t.toString(),"handled by callback",s),this.iqStanzaResponseHandlers.delete(t.attrs.id),s(t),r=!0)}r||this.stanzaUnknown$.next(t)}isIqStanzaResponse(t){const r=t.attrs.type;return"iq"===t.name&&("result"===r||"error"===r)}logIn(t){var r=this;return J(function*(){yield r.ngZone.runOutsideAngular(J(function*(){t.username.indexOf("@")>=0&&r.logService.warn("username should not contain domain, only local part, this can lead to errors!"),r.client=r.xmppClientFactoryService.client(t),r.client.on("error",s=>{r.ngZone.run(()=>{r.logService.error("chat service error =>",s.toString(),s)})}),r.client.on("status",(s,i)=>{r.ngZone.run(()=>{r.logService.info("status update =",s,i?JSON.stringify(i):""),"offline"===s&&r.state$.next("disconnected")})}),r.client.on("online",s=>r.ngZone.run(()=>r.onOnline(s))),r.client.on("stanza",s=>{r.ngZone.run(()=>{r.onStanzaReceived(s)})}),r.client.on("disconnect",()=>{r.ngZone.run(()=>{r.state$.next("reconnecting")})}),yield r.client.start()}))})()}logOut(){var t=this;return J(function*(){if(t.logService.debug("logging out"),t.client){t.client.reconnect.stop();try{yield t.send((0,N.Ls)("presence",{type:"unavailable"}))}catch{t.logService.error("error sending presence unavailable")}finally{t.client.stop()}}})()}getNextIqId(){return String(this.iqId++)}reconnectSilently(){this.logService.warn("hard reconnect..."),this.state$.next("disconnected")}}return n.\u0275fac=function(t){return new(t||n)(X(io),X(gt),X(uE))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();class ja{constructor(e,t,r,s){this.name=t,this.recipientType="contact",this.avatar=Gp,this.metadata={},this.presence$=new Ue(Rt.unavailable),this.subscription$=new Ue(ot.none),this.pendingOut$=new Ue(!1),this.pendingIn$=new Ue(!1),this.resources$=new Ue(new Map),s&&(this.avatar=s);const i=(0,N.kO)(e);this.jidFull=i,this.jidBare=i.bare(),this.messageStore=new aE(r)}get messages$(){return this.messageStore.messages$}get messages(){return this.messageStore.messages}get dateMessagesGroups(){return this.messageStore.dateMessageGroups}get oldestMessage(){return this.messageStore.oldestMessage}get mostRecentMessage(){return this.messageStore.mostRecentMessage}get mostRecentMessageReceived(){return this.messageStore.mostRecentMessageReceived}get mostRecentMessageSent(){return this.messageStore.mostRecentMessageSent}addMessage(e){this.messageStore.addMessage(e)}equalsBareJid(e){if(e instanceof ja||cE(e)){const t=e instanceof ja?e.jidBare:e.bare();return this.jidBare.equals(t)}return!1}isSubscribed(){const e=this.subscription$.getValue();return e===ot.both||e===ot.to}isUnaffiliated(){return!this.isSubscribed()&&!this.pendingIn$.getValue()&&!this.pendingOut$.getValue()}updateResourcePresence(e,t){const r=this.resources$.getValue();r.set(e,t),this.presence$.next(this.determineOverallPresence(r)),this.resources$.next(r)}getMessageById(e){return this.messageStore.messageIdToMessage.get(e)}determineOverallPresence(e){let t=Rt.unavailable;return[...e.values()].some(r=>r===Rt.present?(t=r,!0):(r===Rt.away&&(t=Rt.away),!1)),t}}let Ba=(()=>{class n{constructor(t){this.logService=t}createContact(t,r,s){return r||(r=t),new ja(t,r,this.logService,s)}}return n.\u0275fac=function(t){return new(t||n)(X(io))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),dE=(()=>{class n{constructor(t,r,s){this.chatConnectionService=t,this.logService=r,this.contactFactory=s,this.message$=new se,this.messageSent$=new se,this.contacts$=new Ue([]),this.contactCreated$=new se,this.blockedContactIds$=new Ue(new Set),this.blockedContacts$=wa([this.contacts$,this.blockedContactIds$]).pipe(pe(([i,o])=>i.filter(a=>o.has(a.jidBare.toString())))),this.notBlockedContacts$=wa([this.contacts$,this.blockedContactIds$]).pipe(pe(([i,o])=>i.filter(a=>!o.has(a.jidBare.toString())))),this.contactsSubscribed$=this.notBlockedContacts$.pipe(pe(i=>i.filter(o=>o.isSubscribed()))),this.contactRequestsReceived$=this.notBlockedContacts$.pipe(pe(i=>i.filter(o=>o.pendingIn$.getValue()))),this.contactRequestsSent$=this.notBlockedContacts$.pipe(pe(i=>i.filter(o=>o.pendingOut$.getValue()))),this.contactsUnaffiliated$=this.notBlockedContacts$.pipe(pe(i=>i.filter(o=>o.isUnaffiliated()&&o.messages.length>0))),this.state$=new Ue("disconnected"),this.plugins=[],this.enableDebugging=!1,this.userAvatar$=new Ue(Gp),this.translations=rE(),this.chatActions=[{id:"sendMessage",cssClass:"chat-window-send",html:"&raquo;",onClick:i=>{i.chatWindow.sendMessage()}}],this.state$.subscribe(i=>this.logService.info("state changed to:",i)),t.state$.pipe(At(i=>i!==this.state$.getValue())).subscribe(i=>{this.handleInternalStateChange(i)}),this.chatConnectionService.stanzaUnknown$.subscribe(i=>this.onUnknownStanza(i)),hu(this.messageSent$,this.message$).subscribe(()=>{this.contacts$.next(this.contacts$.getValue())})}handleInternalStateChange(t){"online"===t?(this.state$.next("connecting"),Promise.all(this.plugins.map(r=>r.onBeforeOnline())).then(()=>this.announceAvailability(),r=>{this.logService.error("error while connecting",r),this.announceAvailability()})):("online"===this.state$.getValue()&&this.onOffline(),this.state$.next("disconnected"))}onOffline(){this.contacts$.next([]),this.plugins.forEach(t=>{try{t.onOffline()}catch{this.logService.error("error while handling offline in ",t)}})}announceAvailability(){this.logService.info("announcing availability"),this.chatConnectionService.sendPresence(),this.state$.next("online")}addPlugins(t){t.forEach(r=>{this.plugins.push(r)})}reloadContacts(){this.getPlugin(ou).refreshRosterContacts()}getContactById(t){const r=(0,N.kO)(t).bare();return this.contacts$.getValue().find(s=>s.jidBare.equals(r))}getOrCreateContactById(t,r){let s=this.getContactById(t);return s||(s=this.contactFactory.createContact((0,N.kO)(t).bare().toString(),r),this.contacts$.next([s,...this.contacts$.getValue()]),this.contactCreated$.next(s)),s}addContact(t){this.getPlugin(ou).addRosterContact(t)}removeContact(t){this.getPlugin(ou).removeRosterContact(t)}logIn(t){var r=this;return J(function*(){r.lastLogInRequest=t,"disconnected"===r.state$.getValue()&&(yield r.chatConnectionService.logIn(t))})()}logOut(){return this.chatConnectionService.logOut()}sendMessage(t,r){var s=this;return J(function*(){const i=r.trim();if(0!==i.length)switch(t.recipientType){case"room":yield s.getPlugin(so).sendMessage(t,i);break;case"contact":s.getPlugin(sE).sendMessage(t,i),s.messageSent$.next(t);break;default:throw new Error("invalid recipient type: "+t?.recipientType)}})()}loadCompleteHistory(){return this.getPlugin(zp).loadAllMessages()}getPlugin(t){for(const r of this.plugins)if(r.constructor===t)return r;throw new Error("plugin not found: "+t)}onUnknownStanza(t){let r=!1;for(const s of this.plugins)try{s.handleStanza(t)&&(this.logService.debug(s.constructor.name,"handled",t.toString()),r=!0)}catch(i){this.logService.error("error handling stanza in ",s.constructor.name,i)}r||this.logService.warn("unknown stanza <=",t.toString())}reconnectSilently(){this.chatConnectionService.reconnectSilently()}reconnect(){return this.logIn(this.lastLogInRequest)}}return n.\u0275fac=function(t){return new(t||n)(X(Zp),X(io),X(Ba))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})();const hE=new _e("ChatContactClickHandler");let Xp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-avatar"]],inputs:{imageUrl:"imageUrl"},decls:1,vars:3,consts:[[1,"chat-avatar",3,"ngStyle"]],template:function(t,r){1&t&&xe(0,"div",0),2&t&&B("ngStyle",mh(1,xj,"url("+r.imageUrl+")"))},directives:[sw],styles:[".chat-avatar[_ngcontent-%COMP%]{border-radius:50%;background-size:cover;background-position:50%;background-repeat:no-repeat;width:100%;height:100%}"]}),n})(),eg=(()=>{class n{constructor(){this.avatarClickHandler=new ze,this.footerHidden=!1,this.MessageState=Qt}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message-simple"]],inputs:{avatar:"avatar",avatarInteractive:"avatarInteractive",direction:"direction",formattedDate:"formattedDate",footerHidden:"footerHidden",imageLink:"imageLink",showImagePlaceholder:"showImagePlaceholder",messageState:"messageState",nick:"nick"},outputs:{avatarClickHandler:"avatarClickHandler"},ngContentSelectors:WS,decls:7,vars:7,consts:[[1,"chat-message"],[1,"chat-message-text-wrapper"],["class","chat-message-avatar",4,"ngIf"],[1,"chat-message-text"],["class","chat-message-image-wrapper",3,"chat-message-image-wrapper--placeholder",4,"ngIf"],["class","chat-message-footer",4,"ngIf"],[1,"chat-message-avatar"],[3,"imageUrl","click"],[1,"chat-message-image-wrapper"],[1,"chat-message-image",3,"src","load"],[1,"chat-message-footer"],[1,"chat-message-name",3,"title"],[3,"ngSwitch",4,"ngIf"],[1,"chat-message-datetime"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"state--seen"]],template:function(t,r){1&t&&(Pc(),x(0,"div",0)(1,"div",1),oe(2,Ij,2,3,"div",2),x(3,"div",3),Go(4),T()(),oe(5,Aj,2,3,"div",4),oe(6,kj,6,4,"div",5),T()),2&t&&(Er("chat-message--in","in"===r.direction)("chat-message--out","out"===r.direction),O(2),B("ngIf",r.avatar),O(3),B("ngIf",r.imageLink||r.showImagePlaceholder),O(1),B("ngIf",!r.footerHidden))},directives:[Xp,hr,sl,nw],styles:[".chat-message-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:2em;height:2em;padding:.5em}.chat-message--in[_ngcontent-%COMP%]   .chat-message-avatar[_ngcontent-%COMP%]{padding-right:0}.chat-message--out[_ngcontent-%COMP%]   .chat-message-avatar[_ngcontent-%COMP%]{padding-left:0}.has-click-handler[_ngcontent-%COMP%]:hover{cursor:pointer}.chat-message-text[_ngcontent-%COMP%]{min-width:0;padding:.5em;word-break:break-word}.chat-message[_ngcontent-%COMP%]{border-radius:.5em;margin:.25em}.chat-message--out[_ngcontent-%COMP%]{background-color:#e6ffd1}.chat-message--in[_ngcontent-%COMP%]{background-color:#dbedff}.chat-message-text-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}.chat-message--out[_ngcontent-%COMP%]   .chat-message-text-wrapper[_ngcontent-%COMP%]{flex-direction:row-reverse}.chat-message-image-wrapper[_ngcontent-%COMP%]{max-width:100%;max-height:150px;overflow:hidden;height:auto;margin:0 .5em;display:flex;justify-content:center}.chat-message-image-wrapper.chat-message-image-wrapper--placeholder[_ngcontent-%COMP%]{height:150px}.chat-message-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain;min-width:0}.chat-message-footer[_ngcontent-%COMP%]{font-size:.75em;text-align:right;color:#999;padding:0 .5em .5em;clear:both}.chat-message-datetime[_ngcontent-%COMP%]{display:inline-block;vertical-align:bottom}.chat-message-name[_ngcontent-%COMP%]{display:inline-block;max-width:9em;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;vertical-align:bottom;margin-right:.5em}.state--seen[_ngcontent-%COMP%]{color:#00c5d2}"],changeDetection:0}),n})();const $B=new _e("pazznetworkNgxChatLinkOpener");let UB=(()=>{class n{constructor(t,r,s){this.router=t,this.platformLocation=r,this.linkOpener=s}ngOnInit(){}onClick(t){if(this.linkOpener)t.preventDefault(),this.linkOpener.openLink(this.link);else if(this.isInApp()){t.preventDefault();const r=document.createElement("a");r.href=this.link,this.router.navigateByUrl(r.pathname)}}isInApp(){return this.link.startsWith(this.appUrl())}appUrl(){return window.location.protocol+"//"+window.location.host+this.platformLocation.getBaseHrefFromDOM()}}return n.\u0275fac=function(t){return new(t||n)(V(dn),V(Yr),V($B,8))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message-link"]],decls:2,vars:2,consts:[["target","_blank","rel","noopener",3,"href","click"]],template:function(t,r){1&t&&(x(0,"a",0),K("click",function(i){return r.onClick(i)}),$(1),T()),2&t&&(Wo("href",r.link,Oo),O(1),ft(r.text))},styles:["a[_ngcontent-%COMP%]{color:#198cff;cursor:pointer}a[_ngcontent-%COMP%]:visited{color:#9a46e8}"]}),n})(),HB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message-text"]],inputs:{text:"text"},decls:1,vars:1,template:function(t,r){1&t&&$(0),2&t&&ft(r.text)},styles:["[_nghost-%COMP%]{white-space:pre-wrap}"]}),n})(),qB=(()=>{class n{constructor(t,r){this.resolver=t,this.viewContainerRef=r}ngOnChanges(){this.transform()}transform(){const t=this.ngxChatLinks;if(!t)return;const r=XS(t),s=this.resolver.resolveComponentFactory(HB),i=this.resolver.resolveComponentFactory(UB);let o=0;for(const c of r){const l=t.indexOf(c,o),u=t.substring(o,l);u&&(this.viewContainerRef.createComponent(s).instance.text=u);const d=this.viewContainerRef.createComponent(i);d.instance.link=c,d.instance.text=this.shorten(c),o=l+c.length}const a=t.substring(o);a&&(this.viewContainerRef.createComponent(s).instance.text=a)}shorten(t){const r=document.createElement("a");r.href=t;let s=r.pathname;return s.length>17&&(s=s.substring(0,5)+"..."+s.substring(s.length-10)),r.protocol+"//"+r.host+s}}return n.\u0275fac=function(t){return new(t||n)(V(Ri),V(On))},n.\u0275dir=he({type:n,selectors:[["","ngxChatLinks",""]],inputs:{ngxChatLinks:"ngxChatLinks"},features:[Yt]}),n})(),fE=(()=>{class n{constructor(t,r,s){this.chatService=t,this.httpClient=r,this.contactClickHandler=s,this.showMessageReadState=!0,this.showImagePlaceholder=!0,this.Direction=ke,this.messageStatePlugin=this.chatService.getPlugin(nE)}ngOnInit(){this.tryFindImageLink()}tryFindImageLink(){if(this.chatService instanceof dE){const t=XS(this.message.body);if(0===t.length)return void(this.showImagePlaceholder=!1);this.tryFindEmbedImageUrls(t)}}tryFindEmbedImageUrls(t){var r=this;return J(function*(){for(const s of t)try{const i=yield r.httpClient.head(s,{observe:"response"}).toPromise(),o=i.headers.get("Content-Type"),a=o&&o.startsWith("image"),c=i.headers.get("Content-Length");if(a&&parseInt(c,10)<256e3){r.imageLink=s;break}}catch{}r.imageLink||(r.showImagePlaceholder=!1)})()}getMessageState(){if(this.showMessageReadState){if(this.message.state)return this.message.state;if(this.messageStatePlugin&&this.contact){const t=this.message.datetime,r=this.messageStatePlugin.getContactMessageState(this.contact.jidBare.toString());return this.getStateForDate(t,r)}}}getStateForDate(t,r){return t<=r.lastRecipientSeen?Qt.RECIPIENT_SEEN:t<=r.lastRecipientReceived?Qt.RECIPIENT_RECEIVED:t<=r.lastSent?Qt.SENT:void 0}onContactClick(){this.contactClickHandler&&this.contactClickHandler.onClick(this.contact)}getAvatar(){if(this.showAvatars)return this.message.direction===ke.in?this.avatar:this.chatService.userAvatar$.getValue()}}return n.\u0275fac=function(t){return new(t||n)(V(hn),V(_p),V(hE,8))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message"]],inputs:{showAvatars:"showAvatars",avatar:"avatar",message:"message",nick:"nick",contact:"contact",showMessageReadState:"showMessageReadState"},decls:3,vars:12,consts:[[3,"imageLink","showImagePlaceholder","avatar","avatarInteractive","direction","messageState","formattedDate","nick","avatarClickHandler"],[3,"ngxChatLinks"]],template:function(t,r){1&t&&(x(0,"ngx-chat-message-simple",0),K("avatarClickHandler",function(){return r.onContactClick()}),Se(1,"date"),xe(2,"span",1),T()),2&t&&(B("imageLink",r.imageLink)("showImagePlaceholder",r.showImagePlaceholder)("avatar",r.getAvatar())("avatarInteractive",r.message.direction===r.Direction.in)("direction",r.message.direction)("messageState",r.getMessageState())("formattedDate",q_(1,9,r.message.datetime,r.chatService.translations.timeFormat))("nick",r.nick),O(2),B("ngxChatLinks",r.message.body))},directives:[eg,qB],pipes:[cf],styles:[".chat-message--out[_nghost-%COMP%]{align-self:flex-end}.chat-message--in[_nghost-%COMP%]{align-self:flex-start}"]}),n})();class GB{constructor(e,t){this.recipient=e,this.isCollapsed=t}}let oo=(()=>{class n{constructor(t){this.chatService=t,this.openChats$=new Ue([]),this.openTracks$=new Ue([]),this.chatService.state$.pipe(At(r=>"disconnected"===r)).subscribe(()=>{this.openChats$.next([])}),this.chatService.contactRequestsReceived$.subscribe(r=>{for(const s of r)this.openChat(s)})}openChatCollapsed(t){if(!this.isChatWithRecipientOpen(t)){const r=this.openChats$.getValue(),i=[new GB(t,!0)].concat(r);this.openChats$.next(i)}}openChat(t){this.openChatCollapsed(t),this.findChatWindowStateByRecipient(t).isCollapsed=!1}closeChat(t){const r=this.openChats$.getValue(),s=this.findChatWindowStateIndexByRecipient(t);if(s>=0){const i=r.slice();i.splice(s,1),this.openChats$.next(i)}}openTrack(t){this.openTracks$.next(this.openTracks$.getValue().concat([t]))}closeTrack(t){this.openTracks$.next(this.openTracks$.getValue().filter(r=>r!==t))}isChatWithRecipientOpen(t){return void 0!==this.findChatWindowStateByRecipient(t)}findChatWindowStateIndexByRecipient(t){return this.openChats$.getValue().findIndex(r=>r.recipient.equalsBareJid(t))}findChatWindowStateByRecipient(t){return this.openChats$.getValue().find(r=>r.recipient.equalsBareJid(t))}}return n.\u0275fac=function(t){return new(t||n)(X(hn))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),tg=(()=>{class n{constructor(){this.openChats$=new Ue(new Set),this.chatOpened$=new se,this.recipientToOpenMessageListCount=new Map}isChatOpen(t){return this.getOrDefault(t,0)>0}incrementOpenWindowCount(t){const r=this.isChatOpen(t);this.recipientToOpenMessageListCount.set(t,this.getOrDefault(t,0)+1);const s=this.openChats$.getValue();s.add(t),this.openChats$.next(s),r||this.chatOpened$.next(t)}decrementOpenWindowCount(t){const r=this.getOrDefault(t,0)-1;if(r<=0){this.recipientToOpenMessageListCount.set(t,0);const s=this.openChats$.getValue();s.delete(t),this.openChats$.next(s)}else this.recipientToOpenMessageListCount.set(t,r)}getOrDefault(t,r){return this.recipientToOpenMessageListCount.get(t)||r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),WB=(()=>{class n{constructor(t){this.el=t,this.ngxChatIntersectionObserver=new ze,this.intersectionObserver=new IntersectionObserver(r=>{this.ngxChatIntersectionObserver.emit(r[0])},{rootMargin:"150px 0px 150px 0px"}),this.intersectionObserver.observe(t.nativeElement)}ngOnDestroy(){this.intersectionObserver.disconnect()}}return n.\u0275fac=function(t){return new(t||n)(V(rn))},n.\u0275dir=he({type:n,selectors:[["","ngxChatIntersectionObserver",""]],outputs:{ngxChatIntersectionObserver:"ngxChatIntersectionObserver"}}),n})();var fn=(()=>(function(n){n[n.PENDING_REQUEST=0]="PENDING_REQUEST",n[n.SHOW_BLOCK_ACTIONS=1]="SHOW_BLOCK_ACTIONS",n[n.NO_PENDING_REQUEST=2]="NO_PENDING_REQUEST"}(fn||(fn={})),fn))();let $a=(()=>{class n{constructor(t,r,s,i,o,a){this.chatListService=t,this.chatService=r,this.chatMessageListRegistry=s,this.reportUserService=i,this.changeDetectorRef=o,this.contactFactory=a,this.Direction=ke,this.SubscriptionAction=fn,this.subscriptionAction=fn.NO_PENDING_REQUEST,this.onTop$=new se,this.ngDestroy=new se,this.isAtBottom=!0,this.bottomLeftAt=0,this.oldestVisibleMessageBeforeLoading=null,this.blockPlugin=this.chatService.getPlugin(QS)}ngOnInit(){var t=this;return J(function*(){t.onTop$.pipe(At(r=>r.isIntersecting),Wi(1e3)).subscribe(()=>t.loadOlderMessagesBeforeViewport()),"contact"===t.recipient.recipientType&&t.recipient.pendingIn$.pipe(At(r=>!0===r),Gi(t.ngDestroy)).subscribe(()=>{t.subscriptionAction=fn.PENDING_REQUEST,t.scheduleScrollToLastMessage()}),t.chatMessageListRegistry.incrementOpenWindowCount(t.recipient)})()}ngAfterViewInit(){var t=this;return J(function*(){t.chatMessageViewChildrenList.changes.subscribe(()=>{t.oldestVisibleMessageBeforeLoading&&t.scrollToMessage(t.oldestVisibleMessageBeforeLoading),t.oldestVisibleMessageBeforeLoading=null}),t.recipient.messages$.pipe(Wi(10),At(()=>t.isNearBottom()),Gi(t.ngDestroy)).subscribe(s=>t.scheduleScrollToLastMessage()),t.recipient.messages.length<10&&(yield t.loadMessages()),t.scheduleScrollToLastMessage()})()}ngOnChanges(t){const r=t.contact;r&&r.previousValue&&r.currentValue&&(this.chatMessageListRegistry.decrementOpenWindowCount(r.previousValue),this.chatMessageListRegistry.incrementOpenWindowCount(r.currentValue)),r&&r.currentValue&&this.scheduleScrollToLastMessage()}ngOnDestroy(){this.ngDestroy.next(),this.chatMessageListRegistry.decrementOpenWindowCount(this.recipient)}acceptSubscriptionRequest(t){t.preventDefault(),this.subscriptionAction===fn.PENDING_REQUEST&&(this.chatService.addContact(this.recipient.jidBare.toString()),this.subscriptionAction=fn.NO_PENDING_REQUEST,this.scheduleScrollToLastMessage())}denySubscriptionRequest(t){t.preventDefault(),this.subscriptionAction===fn.PENDING_REQUEST&&(this.chatService.removeContact(this.recipient.jidBare.toString()),this.subscriptionAction=fn.SHOW_BLOCK_ACTIONS,this.scheduleScrollToLastMessage())}scheduleScrollToLastMessage(){setTimeout(()=>this.scrollToLastMessage(),0)}scrollToLastMessage(){this.chatMessageAreaElement&&(this.chatMessageAreaElement.nativeElement.scrollTop=this.chatMessageAreaElement.nativeElement.scrollHeight,this.isAtBottom=!0)}scrollToMessage(t){this.chatMessageAreaElement&&document.getElementById("message-"+t.id).scrollIntoView(!1)}blockContact(t){t.preventDefault(),this.blockPlugin.blockJid(this.recipient.jidBare.toString()),this.chatListService.closeChat(this.recipient),this.subscriptionAction=fn.NO_PENDING_REQUEST}blockContactAndReport(t){"contact"===this.recipient.recipientType&&(t.preventDefault(),this.reportUserService.reportUser(this.recipient),this.blockContact(t))}dismissBlockOptions(t){t.preventDefault(),this.subscriptionAction=fn.NO_PENDING_REQUEST}subscriptionActionShown(){return"contact"===this.recipient.recipientType&&(this.subscriptionAction===fn.PENDING_REQUEST||!0===this.blockPlugin.supportsBlock$.getValue()&&this.subscriptionAction===fn.SHOW_BLOCK_ACTIONS)}loadOlderMessagesBeforeViewport(){var t=this;return J(function*(){if(!t.isLoadingHistory()&&!t.isNearBottom())try{t.oldestVisibleMessageBeforeLoading=t.recipient.oldestMessage,yield t.loadMessages()}catch{t.oldestVisibleMessageBeforeLoading=null}})()}loadMessages(){var t=this;return J(function*(){try{t.changeDetectorRef.detach(),yield t.chatService.getPlugin(zp).loadMostRecentUnloadedMessages(t.recipient)}finally{t.changeDetectorRef.reattach()}})()}onBottom(t){this.isAtBottom=t.isIntersecting,t.isIntersecting?this.isAtBottom=!0:(this.isAtBottom=!1,this.bottomLeftAt=Date.now())}isNearBottom(){return this.isAtBottom||Date.now()-this.bottomLeftAt<1e3}isLoadingHistory(){return!!this.oldestVisibleMessageBeforeLoading}getOrCreateContactWithFullJid(t){if("contact"===this.recipient.recipientType)return this.recipient;const r=t;let s=this.chatService.contacts$.getValue().find(i=>i.jidFull.equals(r.from));return s||(s=this.contactFactory.createContact(r.from.toString(),r.from.resource),this.chatService.contacts$.next([s].concat(this.chatService.contacts$.getValue()))),s}}return n.\u0275fac=function(t){return new(t||n)(V(oo),V(hn),V(tg),V(NB,8),V(aa),V(Ba))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-message-list"]],viewQuery:function(t,r){if(1&t&&(Ds(Fj,5),Ds(fE,5)),2&t){let s;Ir(s=Ar())&&(r.chatMessageAreaElement=s.first),Ir(s=Ar())&&(r.chatMessageViewChildrenList=s)}},inputs:{recipient:"recipient",showAvatars:"showAvatars"},features:[Yt],decls:7,vars:3,consts:[[1,"chat-messages"],["messageArea",""],[1,"chat-messages-start",3,"ngxChatIntersectionObserver"],[4,"ngFor","ngForOf"],["class","chat-messages-empty",4,"ngIf"],[3,"direction","avatar","footerHidden",4,"ngIf"],[1,"chat-messages-end",3,"ngxChatIntersectionObserver"],[1,"chat-messages-date-group"],[3,"id","chat-message--in","chat-message--out","contact","nick","avatar","message","showAvatars",4,"ngFor","ngForOf"],[3,"id","contact","nick","avatar","message","showAvatars"],[1,"chat-messages-empty"],[3,"direction","avatar","footerHidden"],[1,"chat-presence-subscription-actions"],["class","action-disabled",4,"ngIf"],["href","#",3,"click",4,"ngIf"],["class","deny-actions",4,"ngIf"],[1,"action-disabled"],["href","#",3,"click"],[1,"deny-actions"],[4,"ngIf"]],template:function(t,r){1&t&&(x(0,"div",0,1)(2,"div",2),K("ngxChatIntersectionObserver",function(i){return r.onTop$.next(i)}),T(),oe(3,Vj,5,7,"ng-container",3),oe(4,jj,2,1,"div",4),oe(5,Gj,12,11,"ngx-chat-message-simple",5),x(6,"div",6),K("ngxChatIntersectionObserver",function(i){return r.onBottom(i)}),T()()),2&t&&(O(3),B("ngForOf",r.recipient.dateMessagesGroups),O(1),B("ngIf",0===r.recipient.messages.length),O(1),B("ngIf",r.subscriptionActionShown()))},directives:[fE,eg,WB,Fi,hr],pipes:[cf,Zr],styles:[".chat-message--out[_nghost-%COMP%]{align-self:flex-end}.chat-message--in[_nghost-%COMP%]{align-self:flex-start}.chat-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:10em;max-height:20em;overflow-y:scroll}.chat-messages-date-group[_ngcontent-%COMP%]{font-size:.7em;font-style:italic;margin:.5em 0;text-align:center}ngx-chat-message[_ngcontent-%COMP%], ngx-chat-message-simple[_ngcontent-%COMP%]{max-width:76%;align-self:flex-start;-webkit-animation-duration:1.5s;animation-duration:1.5s;-webkit-animation-timing-function:cubic-bezier(.16,1,.3,1);animation-timing-function:cubic-bezier(.16,1,.3,1)}ngx-chat-message.chat-message--in[_ngcontent-%COMP%], ngx-chat-message-simple.chat-message--in[_ngcontent-%COMP%]{-webkit-animation-name:ngx-chat-message-in;animation-name:ngx-chat-message-in}ngx-chat-message.chat-message--out[_ngcontent-%COMP%], ngx-chat-message-simple.chat-message--out[_ngcontent-%COMP%]{-webkit-animation-name:ngx-chat-message-out;animation-name:ngx-chat-message-out}.chat-messages-empty[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;color:#999;margin-top:1em;margin-bottom:1em}.chat-presence-subscription-actions[_ngcontent-%COMP%], .deny-actions[_ngcontent-%COMP%]{list-style:none;padding:0;margin:1em 0 0}.chat-presence-subscription-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .deny-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .chat-presence-subscription-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited, .deny-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#198cff}.deny-actions[_ngcontent-%COMP%]{margin-top:1em}.action-disabled[_ngcontent-%COMP%]{color:#999}.chat-messages-start[_ngcontent-%COMP%]{min-height:5px;height:5px;margin-top:5px}.chat-messages-end[_ngcontent-%COMP%]{min-height:5px;height:5px;margin-bottom:5px}"]}),n})();class pE extends Ot{constructor(e,t,r,s){super(),this.httpClient=e,this.serviceDiscoveryPlugin=t,this.xmppChatAdapter=r,this.logService=s}onBeforeOnline(){return this.uploadService=this.serviceDiscoveryPlugin.findService("store","file"),this.uploadService.then(()=>{this.fileUploadSupported=!0},()=>{this.fileUploadSupported=!1,this.logService.info("http file upload not supported")}),Promise.resolve()}onOffline(){this.uploadService=null,this.fileUploadSupported=!1}upload(e){var t=this;return J(function*(){yield t.uploadService;const{name:r,size:s,type:i}=e,o=yield t.requestSlot(r,s.toString(),i);return yield t.uploadToSlot(o,e)})()}requestSlot(e,t,r){var s=this;return J(function*(){const i=(yield s.uploadService).jid;return(yield s.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{to:i,type:"get"},(0,N.Ls)("request",{xmlns:"urn:xmpp:http:upload:0",filename:e,size:t,"content-type":r})))).getChild("slot").getChild("put").attrs.url})()}uploadToSlot(e,t){var r=this;return J(function*(){return yield r.httpClient.put(e,t,{responseType:"blob"}).toPromise(),e})()}}let gE=(()=>{class n{constructor(){this.closeClick=new ze,this.headerClick=new ze}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-window-frame"]],outputs:{closeClick:"closeClick",headerClick:"headerClick"},ngContentSelectors:Jj,decls:5,vars:1,consts:[[1,"window"],[1,"window-header",3,"click"],["class","window-close",3,"click",4,"ngIf"],[1,"window-close",3,"click"]],template:function(t,r){1&t&&(Pc(Qj),x(0,"div",0)(1,"div",1),K("click",function(){return r.headerClick.emit()}),Go(2),oe(3,Wj,2,0,"div",2),T(),Go(4,1),T()),2&t&&(O(3),B("ngIf",r.closeClick.observers.length>0))},directives:[hr],styles:["@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.window[_ngcontent-%COMP%]{border:1px solid #e1e1e1;border-bottom:none;background:#f5f5f5;margin-left:1em;width:17em;bottom:0;pointer-events:auto;position:relative}.window-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid #e1e1e1;cursor:pointer;height:2.5em;align-items:center;padding:.25em}.window-header[_ngcontent-%COMP%]:hover{background-color:#efefef}.window-close[_ngcontent-%COMP%]{padding:.5em;text-align:right;color:#777}.window-close[_ngcontent-%COMP%]:hover{color:#000}"]}),n})(),QB=(()=>{class n{constructor(t,r,s){this.chatService=t,this.chatListService=r,this.contactClickHandler=s,this.ngDestroy=new se,this.httpFileUploadPlugin=this.chatService.getPlugin(pE)}ngOnInit(){this.chatWindowState.recipient.messages$.pipe(At(r=>r.direction===ke.in),Gi(this.ngDestroy)).subscribe(()=>{this.chatWindowState.isCollapsed=!1})}ngOnDestroy(){this.ngDestroy.next(),this.ngDestroy.complete()}onClickHeader(){this.chatWindowState.isCollapsed=!this.chatWindowState.isCollapsed}onClickClose(){this.chatListService.closeChat(this.chatWindowState.recipient)}sendMessage(){this.messageInput.onSendMessage()}afterSendMessage(){this.contactMessageList.scheduleScrollToLastMessage()}uploadFile(t){var r=this;return J(function*(){const s=yield r.httpFileUploadPlugin.upload(t);r.chatService.sendMessage(r.chatWindowState.recipient,s)})()}onFocus(){this.messageInput.focus()}onActionClick(t){t.onClick({contact:this.chatWindowState.recipient.jidBare.toString(),chatWindow:this})}onContactClick(t){this.contactClickHandler&&!this.chatWindowState.isCollapsed&&(t.stopPropagation(),this.contactClickHandler.onClick(this.chatWindowState.recipient))}}return n.\u0275fac=function(t){return new(t||n)(V(hn),V(oo),V(hE,8))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-window"]],viewQuery:function(t,r){if(1&t&&(Ds(iu,5),Ds($a,5)),2&t){let s;Ir(s=Ar())&&(r.messageInput=s.first),Ir(s=Ar())&&(r.contactMessageList=s.first)}},inputs:{chatWindowState:"chatWindowState"},decls:10,vars:8,consts:[[3,"headerClick","closeClick"],[1,"window-header-content"],[1,"chat-contact-avatar-wrapper",3,"click"],[3,"imageUrl"],[1,"header-middle"],[1,"chat-contact-name-wrapper",3,"title"],[3,"ngClass","click"],["class","chat-contact-status-wrapper",4,"ngIf"],["class","window-content",3,"enabled","dropMessage","fileUpload",4,"ngIf"],[1,"chat-contact-status-wrapper"],[1,"chat-contact-status"],[1,"window-content",3,"enabled","dropMessage","fileUpload"],[3,"click"],[3,"recipient","showAvatars"],[1,"chat-input-container"],[3,"recipient","messageSent"],["class","chat-action",3,"ngClass","innerHTML","click",4,"ngFor","ngForOf"],[1,"chat-action",3,"ngClass","innerHTML","click"]],template:function(t,r){1&t&&(x(0,"ngx-chat-window-frame",0),K("headerClick",function(){return r.onClickHeader()})("closeClick",function(){return r.onClickClose()}),wt(1,1),x(2,"div",2),K("click",function(i){return r.onContactClick(i)}),xe(3,"ngx-chat-avatar",3),T(),x(4,"div",4)(5,"div",5)(6,"span",6),K("click",function(i){return r.onContactClick(i)}),$(7),T()(),oe(8,Kj,4,3,"div",7),T(),bt(),oe(9,Zj,6,6,"ngx-chat-filedrop",8),T()),2&t&&(O(3),B("imageUrl",r.chatWindowState.recipient.avatar),O(2),B("title",r.chatWindowState.recipient.name),O(1),B("ngClass",mh(6,Xj,!r.chatWindowState.isCollapsed&&!!r.contactClickHandler)),O(1),tt(" ",r.chatWindowState.recipient.name," "),O(1),B("ngIf",!r.chatWindowState.isCollapsed&&"contact"===r.chatWindowState.recipient.recipientType),O(1),B("ngIf",!r.chatWindowState.isCollapsed))},directives:[gE,Xp,TB,$a,iu,of,hr,Fi],pipes:[Zr],styles:["@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.chat-contact-avatar-wrapper[_ngcontent-%COMP%]{min-width:2em;width:2em;min-height:2em;height:2em}.header-middle[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:1;padding:0 .5em;white-space:nowrap;overflow:hidden;font-size:.8em;line-height:1.2;height:100%;display:flex;flex-direction:column;justify-content:space-around}.chat-contact-name-wrapper[_ngcontent-%COMP%], .chat-contact-status-wrapper[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:block}.has-click-handler[_ngcontent-%COMP%]:hover{text-decoration:underline}.chat-contact-status[_ngcontent-%COMP%]{color:#999}.window-content[_ngcontent-%COMP%]{text-align:left;padding:0;min-height:5em;display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto}.chat-input-container[_ngcontent-%COMP%]{display:flex;padding:.5em;border-top:1px solid #e1e1e1;background:#fff;cursor:text}.chat-action[_ngcontent-%COMP%]{cursor:pointer;align-self:center;text-align:center}.chat-window-send[_ngcontent-%COMP%]{background-color:#fff;border-color:#fff;color:#000;width:1.5em}.chat-window-send[_ngcontent-%COMP%]:active{border:none}ngx-chat-message-input[_ngcontent-%COMP%]{flex-grow:1}"]}),n})(),JB=(()=>{class n{constructor(){}ngAfterViewInit(){this.track.attach(this.video.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-video-window"]],viewQuery:function(t,r){if(1&t&&Ds(eB,5),2&t){let s;Ir(s=Ar())&&(r.video=s.first)}},inputs:{track:"track"},decls:3,vars:0,consts:[["autoplay","1"],["video",""]],template:function(t,r){1&t&&(x(0,"ngx-chat-window-frame"),xe(1,"video",0,1),T())},directives:[gE],styles:["video[_ngcontent-%COMP%]{width:100%}"]}),n})(),KB=(()=>{class n{constructor(t){this.chatListService=t}}return n.\u0275fac=function(t){return new(t||n)(V(oo))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-window-list"]],inputs:{rosterState:"rosterState"},decls:5,vars:7,consts:[[1,"chat-list"],[3,"track",4,"ngFor","ngForOf"],[3,"chatWindowState",4,"ngFor","ngForOf"],[3,"track"],[3,"chatWindowState"]],template:function(t,r){1&t&&(x(0,"div",0),oe(1,tB,1,1,"ngx-chat-video-window",1),Se(2,"async"),oe(3,nB,1,1,"ngx-chat-window",2),Se(4,"async"),T()),2&t&&(B("@rosterVisibility",r.rosterState),O(1),B("ngForOf",Ee(2,3,r.chatListService.openTracks$)),O(2),B("ngForOf",Ee(4,5,r.chatListService.openChats$)))},directives:[JB,QB,Fi],pipes:[Zr],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.chat-list[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:flex-end;position:fixed;bottom:0;right:16em;z-index:5;pointer-events:none}"],data:{animation:[jf("rosterVisibility",[Bi("hidden",ss({right:"1em"})),Bi("shown",ss({right:"15em"})),$i("hidden => shown",ji("400ms ease")),$i("shown => hidden",ji("400ms ease"))])]}}),n})();const ng="ngxchat:unreadmessagedate",mE="entries",yE="last-read";class YB extends Ls{constructor(){super(...arguments),this.lastReadNodes=[]}addLastReadNode(e,t){this.lastReadNodes.push((0,N.Ls)(yE,{jid:e,date:t}))}toStanza(){return(0,N.Ls)(mE,{},this.lastReadNodes)}}class rg extends Ot{constructor(e,t,r,s,i){super(),this.chatService=e,this.chatMessageListRegistry=t,this.publishSubscribePlugin=r,this.entityTimePlugin=s,this.multiUserChatPlugin=i,this.jidToUnreadCount$=new Ue(new Map),this.jidToLastReadTimestamp=new Map,this.recipientIdToMessageSubscription=new Map,this.chatMessageListRegistry.chatOpened$.pipe(function VL(n,e=zi){const r=AD(n)?+n-e.now():Math.abs(n);return s=>s.lift(new jL(r,e))}(0)).subscribe(o=>this.checkForUnreadCountChange(o)),hu(i.rooms$,this.chatService.contactCreated$.pipe(pe(o=>[o]))).subscribe(o=>{for(const a of o){const c=a.jidBare.toString();if(!this.recipientIdToMessageSubscription.has(c)){const u=a.messages$.pipe(Wi(20)).subscribe(()=>this.checkForUnreadCountChange(a));this.recipientIdToMessageSubscription.set(c,u)}}}),this.publishSubscribePlugin.publish$.subscribe(o=>this.handlePubSubEvent(o)),this.unreadMessageCountSum$=wa([this.jidToUnreadCount$,this.chatService.blockedContactIds$]).pipe(Wi(20),pe(([o,a])=>{let c=0;for(const[l,u]of o)a.has(l)||(c+=u);return c}),RD(),cg())}checkForUnreadCountChange(e){var t=this;return J(function*(){t.chatMessageListRegistry.isChatOpen(e)&&(t.jidToLastReadTimestamp.set(e.jidBare.toString(),yield t.entityTimePlugin.getNow()),yield t.persistLastSeenDates()),t.updateContactUnreadMessageState(e)})()}onBeforeOnline(){var e=this;return J(function*(){const t=yield e.fetchLastSeenDates();e.mergeJidToDates(t)})()}onOffline(){for(const e of this.recipientIdToMessageSubscription.values())e.unsubscribe();this.recipientIdToMessageSubscription.clear(),this.jidToLastReadTimestamp.clear(),this.jidToUnreadCount$.next(new Map)}fetchLastSeenDates(){var e=this;return J(function*(){const t=yield e.publishSubscribePlugin.retrieveNodeItems(ng);return e.parseLastSeenDates(t)})()}parseLastSeenDates(e){const t=new Map;if(1===e.length){const[r]=e;for(const s of r.getChild(mE).getChildren(yE)){const{jid:i,date:o}=s.attrs;isNaN(o)||t.set(i,o)}}return t}updateContactUnreadMessageState(e){const t=e.jidBare.toString(),r=this.jidToLastReadTimestamp.get(t)||0,s=this.calculateUnreadMessageCount(e,r),i=this.jidToUnreadCount$.getValue();i.get(t)!==s&&this.jidToUnreadCount$.next(i.set(t,s))}calculateUnreadMessageCount(e,t){const r=Jp(t,e.messages,s=>s.datetime.getTime());return e.messages.slice(r).filter(s=>s.direction===ke.in).length}persistLastSeenDates(){var e=this;return J(function*(){const t=new YB;for(const[r,s]of e.jidToLastReadTimestamp)t.addLastReadNode(r,s.toString());yield e.publishSubscribePlugin.storePrivatePayloadPersistent(ng,"current",t.toStanza())})()}handlePubSubEvent(e){const t=e.getChild("items"),r=t&&t.attrs.node,s=t&&t.getChildren("item");if(r===ng&&s){const i=this.parseLastSeenDates(s);this.mergeJidToDates(i)}}mergeJidToDates(e){for(const[t,r]of e){const s=this.jidToLastReadTimestamp.get(t);(!s||s<r)&&this.jidToLastReadTimestamp.set(t,r)}}}let ZB=(()=>{class n{constructor(t){this.chatService=t,this.Presence=Rt}ngOnInit(){this.unreadCount$=this.chatService.getPlugin(rg).jidToUnreadCount$.pipe(pe(t=>t.get(this.recipient.jidBare.toString())||0),RD(),Wi(20)),this.presence$="contact"===this.recipient.recipientType?this.recipient.presence$:ve(Rt.unavailable)}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-roster-recipient"]],inputs:{recipient:"recipient"},decls:10,vars:9,consts:[[1,"roster-recipient",3,"title"],[1,"roster-recipient-avatar"],[3,"imageUrl"],[1,"roster-recipient-name"],[1,"roster-recipient-status"],["class","unread-message-badge",4,"ngIf"],[4,"ngIf"],[1,"unread-message-badge"],["class","roster-presence",3,"ngClass",4,"ngIf"],[1,"roster-presence",3,"ngClass"]],template:function(t,r){1&t&&(x(0,"div",0)(1,"div",1),xe(2,"ngx-chat-avatar",2),T(),x(3,"div",3),$(4),T(),x(5,"div",4),oe(6,rB,3,3,"div",5),Se(7,"async"),oe(8,iB,2,1,"ng-container",6),Se(9,"async"),T()()),2&t&&(B("title",r.recipient.name),O(2),B("imageUrl",r.recipient.avatar),O(2),tt(" ",r.recipient.name," "),O(2),B("ngIf",Ee(7,5,r.unreadCount$)>0),O(2),B("ngIf",Ee(9,7,r.presence$)))},directives:[Xp,hr,of],pipes:[Zr],styles:["@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.roster-recipient[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.roster-recipient-avatar[_ngcontent-%COMP%]{min-width:2em;width:2em;min-height:2em;height:2em}.roster-recipient-name[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;flex-grow:1}.roster-recipient-status[_ngcontent-%COMP%]{white-space:nowrap}.roster-presence[_ngcontent-%COMP%]{display:inline-block;padding-top:.5em;margin-left:.3em}.roster-presence.roster-presence--present[_ngcontent-%COMP%]{color:#69ca48}.roster-presence.roster-presence--away[_ngcontent-%COMP%]{color:#ffbe00}.roster-presence.roster-presence--unavailable[_ngcontent-%COMP%]{color:transparent}.unread-message-badge[_ngcontent-%COMP%]{display:inline-block;padding-top:.2em;background-color:#ff5940;color:#fff;border-radius:50%;align-self:center;margin-top:.25em;width:1.5em;height:1.5em;text-align:center}"]}),n})(),XB=(()=>{class n{constructor(t,r){this.chatService=t,this.chatListService=r,this.rosterStateChanged=new ze,this.multiUserChatPlugin=this.chatService.getPlugin(so)}ngOnInit(){this.contacts||(this.contacts=this.chatService.contactsSubscribed$),this.contactRequestsReceived$||(this.contactRequestsReceived$=this.chatService.contactRequestsReceived$),this.contactRequestsSent$||(this.contactRequestsSent$=this.chatService.contactRequestsSent$),this.contactsUnaffiliated$||(this.contactsUnaffiliated$=this.chatService.contactsUnaffiliated$),this.hasNoContacts$=wa([this.contacts,this.contactRequestsReceived$,this.contactRequestsSent$,this.contactsUnaffiliated$]).pipe(pe(([t,r,s,i])=>t.length+r.length+s.length+i.length===0))}onClickRecipient(t){this.chatListService.openChat(t)}toggleVisibility(){this.rosterStateChanged.emit("shown"===this.rosterState?"hidden":"shown")}}return n.\u0275fac=function(t){return new(t||n)(V(hn),V(oo))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat-roster-list"]],inputs:{rosterState:"rosterState",contacts:"contacts",contactRequestsReceived$:"contactRequestsReceived$",contactRequestsSent$:"contactRequestsSent$",contactsUnaffiliated$:"contactsUnaffiliated$"},outputs:{rosterStateChanged:"rosterStateChanged"},decls:20,vars:27,consts:[[1,"roster-drawer",3,"click"],["class","roster-drawer__button",4,"ngIf"],[1,"roster-list"],[1,"roster-header"],[4,"ngIf"],["class","roster-list__empty",4,"ngIf"],[1,"roster-drawer__button"],[1,"roster-group-header"],[1,"contact-list-wrapper"],[3,"recipient","click",4,"ngFor","ngForOf"],[3,"recipient","click"],[4,"ngFor","ngForOf"],[3,"recipient","click",4,"ngIf"],[1,"roster-list__empty"],[1,"contact-pending-request-received-wrapper"],["class","contact-pending-request-received",4,"ngFor","ngForOf"],[1,"contact-pending-request-sent-wrapper"],["class","contact-pending-request-sent",4,"ngFor","ngForOf"],["style","margin-bottom: 1em",4,"ngFor","ngForOf"],[1,"roster-debug-state"],[1,"contact-pending-request-received"],[1,"contact-pending-request-sent"],[2,"margin-bottom","1em"]],template:function(t,r){1&t&&(x(0,"div",0),K("click",function(){return r.toggleVisibility()}),oe(1,oB,2,0,"div",1),oe(2,aB,2,0,"div",1),T(),x(3,"div",2),Se(4,"async"),x(5,"div",3),$(6),T(),oe(7,uB,2,1,"ng-container",4),Se(8,"async"),oe(9,hB,6,4,"ng-container",4),Se(10,"async"),oe(11,pB,6,4,"ng-container",4),Se(12,"async"),oe(13,mB,6,4,"ng-container",4),Se(14,"async"),oe(15,_B,6,4,"ng-container",4),Se(16,"async"),oe(17,CB,2,1,"div",5),Se(18,"async"),oe(19,SB,21,15,"ng-container",4),T()),2&t&&(B("@drawerVisibility",r.rosterState),O(1),B("ngIf","shown"===r.rosterState),O(1),B("ngIf","hidden"===r.rosterState),O(1),B("@rosterVisibility",r.rosterState),Jn("data-ngx-chat-state",Ee(4,13,r.chatService.state$)),O(3),tt(" ",r.chatService.translations.chat," "),O(1),B("ngIf",Ee(8,15,r.multiUserChatPlugin.rooms$)),O(2),B("ngIf",Ee(10,17,r.contacts).length>0),O(2),B("ngIf",Ee(12,19,r.contactRequestsReceived$).length>0),O(2),B("ngIf",Ee(14,21,r.contactRequestsSent$).length>0),O(2),B("ngIf",Ee(16,23,r.contactsUnaffiliated$).length>0),O(2),B("ngIf",Ee(18,25,r.hasNoContacts$)),O(2),B("ngIf",r.chatService.enableDebugging))},directives:[ZB,hr,Fi],pipes:[Zr],styles:["@-webkit-keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@-webkit-keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Helvetica,Arial,serif}.roster-list[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;right:0;width:14em;overflow-y:auto;border-left:1px solid #e1e1e1;z-index:80;margin-left:10px;background-color:#f5f5f5;text-align:left;padding:.5em .5em 0;display:flex;flex-direction:column}.roster-list[_ngcontent-%COMP%]   .roster-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1em}.roster-list[_ngcontent-%COMP%]   .roster-group-header[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1;padding-bottom:.5em}.roster-list[_ngcontent-%COMP%]   .roster-footer[_ngcontent-%COMP%]{border-top:1px solid #e1e1e1;width:14em;padding-top:.5em}.roster-list[_ngcontent-%COMP%]   .contact-list-wrapper[_ngcontent-%COMP%]{margin-bottom:1em}.roster-list[_ngcontent-%COMP%]   ngx-chat-roster-recipient[_ngcontent-%COMP%]{display:block;padding:.5em}.roster-list[_ngcontent-%COMP%]   ngx-chat-roster-recipient[_ngcontent-%COMP%]:hover{background-color:#e8e8e8;cursor:pointer}.roster-list__empty[_ngcontent-%COMP%]{color:#999;text-align:center;margin-top:.5em;font-size:1.5em}.roster-drawer[_ngcontent-%COMP%]{top:0;bottom:0;right:14em;width:1em;position:fixed;z-index:80;cursor:pointer}.roster-drawer[_ngcontent-%COMP%]:hover{background-color:#1e1e1e33}.roster-drawer__button[_ngcontent-%COMP%]{top:50%;color:transparent;background-color:transparent;position:fixed;margin-left:.4rem}.roster-drawer[_ngcontent-%COMP%]:hover   .roster-drawer__button[_ngcontent-%COMP%]{color:#fff}"],data:{animation:[jf("rosterVisibility",[Bi("hidden",ss({right:"-14em"})),Bi("shown",ss({right:"0em"})),$i("hidden => shown",ji("400ms ease")),$i("shown => hidden",ji("400ms ease"))]),jf("drawerVisibility",[Bi("hidden",ss({right:"0em"})),Bi("shown",ss({right:"14em"})),$i("hidden => shown",ji("400ms ease")),$i("shown => hidden",ji("400ms ease"))])]}}),n})(),e$=(()=>{class n{constructor(t){this.chatService=t,this.showChatComponent=!1}set translations(t){const r=rE();t&&(this.chatService.translations={...r,...t,presence:{...r.presence,...t.presence}})}ngOnInit(){this.chatService.state$.subscribe(t=>this.onChatStateChange(t)),this.onRosterStateChanged(this.rosterState),this.userAvatar$&&this.userAvatar$.subscribe(t=>this.chatService.userAvatar$.next(t))}ngOnChanges(t){t.rosterState&&this.onRosterStateChanged(t.rosterState.currentValue)}onChatStateChange(t){this.showChatComponent="online"===t,this.updateBodyClass()}onRosterStateChanged(t){this.rosterState=t,this.updateBodyClass()}updateBodyClass(){const t="has-roster";this.showChatComponent&&"hidden"!==this.rosterState?document.body.classList.add(t):document.body.classList.remove(t)}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["ngx-chat"]],inputs:{translations:"translations",contacts:"contacts",contactRequestsReceived$:"contactRequestsReceived$",contactRequestsSent$:"contactRequestsSent$",contactsUnaffiliated$:"contactsUnaffiliated$",userAvatar$:"userAvatar$",rosterState:"rosterState"},features:[Yt],decls:2,vars:2,consts:[[3,"rosterState",4,"ngIf"],[3,"rosterState","contacts","contactRequestsReceived$","contactRequestsSent$","contactsUnaffiliated$","rosterStateChanged",4,"ngIf"],[3,"rosterState"],[3,"rosterState","contacts","contactRequestsReceived$","contactRequestsSent$","contactsUnaffiliated$","rosterStateChanged"]],template:function(t,r){1&t&&(oe(0,EB,1,1,"ngx-chat-window-list",0),oe(1,MB,1,5,"ngx-chat-roster-list",1)),2&t&&(B("ngIf",r.showChatComponent),O(1),B("ngIf",r.showChatComponent))},directives:[KB,XB,hr],styles:[""]}),n})();function vE(n){return(n.split("://")[1]||n).split(":")[0].split("/")[0]}const au="storage:bookmarks";class t$ extends Ot{constructor(e){super(),this.publishSubscribePlugin=e,this.pendingAddConference=null}onOffline(){this.pendingAddConference=null}retrieveMultiUserChatRooms(){var e=this;return J(function*(){const t=yield e.publishSubscribePlugin.retrieveNodeItems(au),r=t&&t[0]&&t[0].getChild("storage",au),s=t&&r.getChildren("conference");return s?s.map(i=>e.convertElementToSavedConference(i)):[]})()}convertElementToSavedConference(e){return{name:e.attrs.name,jid:e.attrs.jid,autojoin:"true"===e.attrs.autojoin}}saveConferences(e){const t=function jB(n,e=((t,r)=>t===r)){const t=[];for(const r of n){let s=!1;for(const i of t)if(e(r,i)){s=!0;break}s||t.push(r)}return t}(e,(r,s)=>r.jid===s.jid);return this.publishSubscribePlugin.storePrivatePayloadPersistent(au,null,(0,N.Ls)("storage",{xmlns:au},t.map(r=>this.convertSavedConferenceToElement(r))))}addConference(e){var t=this;return J(function*(){for(;t.pendingAddConference;)try{yield t.pendingAddConference}catch{}t.pendingAddConference=t.addConferenceInternal(e);try{return yield t.pendingAddConference}finally{t.pendingAddConference=null}})()}addConferenceInternal(e){var t=this;return J(function*(){const s=[...yield t.retrieveMultiUserChatRooms(),e];return yield t.saveConferences(s)})()}convertSavedConferenceToElement({name:e,autojoin:t,jid:r}){return(0,N.Ls)("conference",{name:e,jid:r,autojoin:t.toString()})}}class n$ extends Ot{constructor(e,t,r){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.logService=r,this.serverSupportsTime$=new Ue("unknown"),this.serverTime$=new Ue(null)}onBeforeOnline(){var e=this;return J(function*(){if(yield e.serviceDiscoveryPlugin.supportsFeature(e.xmppChatAdapter.chatConnectionService.userJid.domain,"urn:xmpp:time")){const r=yield e.requestTime(e.xmppChatAdapter.chatConnectionService.userJid.domain);e.serverTime$.next(r),e.serverSupportsTime$.next(!0)}else e.serverSupportsTime$.next(!1)})()}onOffline(){this.serverSupportsTime$.next("unknown"),this.serverTime$.next(null)}getNow(){var e=this;return J(function*(){const t=e.serverTime$.pipe(pe(r=>e.calculateNow(r)),jn());return yield e.serverSupportsTime$.pipe(function GL(n,e=zi){return function qL(n,e,t=zi){return r=>{let s=AD(n),i=s?+n-t.now():Math.abs(n);return r.lift(new zL(i,s,e,t))}}(n,Ji(new HL),e)}(5e3),jn(r=>"unknown"!==r),Pt(r=>r?t:ve(Date.now())),cs(()=>ve(Date.now()))).toPromise()})()}calculateNow(e){return e.utcTimestamp+(performance.now()-e.localReference)}requestTime(e){var t=this;return J(function*(){const r=yield t.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get",to:e},(0,N.Ls)("time",{xmlns:"urn:xmpp:time"}))),s=r.getChild("time","urn:xmpp:time")?.getChildText("utc");if(!s){const i="invalid time response";throw t.logService.error(i,r.toString()),new Error(i)}return{utcTimestamp:Date.parse(s),localReference:performance.now()}})()}}class r$ extends Ot{constructor(e){super(),this.xmppChatAdapter=e}onBeforeOnline(){var e=this;return J(function*(){return yield e.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("enable",{xmlns:"urn:xmpp:carbons:2"})))})()}handleStanza(e){const t=e.getChildByAttr("xmlns","urn:xmpp:carbons:2"),r=t&&t.getChild("forwarded","urn:xmpp:forward:0"),s=r&&r.getChild("message","jabber:client"),i=e.attrs.from,o=this.xmppChatAdapter.chatConnectionService.userJid;return!!(e.is("message")&&t&&r&&s&&o&&o.bare().toString()===i)&&this.handleCarbonMessageStanza(s,t)}handleCarbonMessageStanza(e,t){const r=t.is("received")?ke.in:ke.out,s={body:e.getChildText("body").trim(),direction:r,datetime:new Date,delayed:!1,fromArchive:!1},i=new Wp;if(this.xmppChatAdapter.plugins.forEach(o=>o.afterReceiveMessage(s,e,i)),!i.discard){const{from:o,to:a}=e.attrs,l=this.xmppChatAdapter.getOrCreateContactById(r===ke.in?o:a);l.addMessage(s),r===ke.in&&this.xmppChatAdapter.message$.next(l)}return!0}}class s$ extends Error{constructor(e){super(e),this.name="TimeoutError"}}function _E(n,e){const t=function i$(n){let e;const t=new Promise(r=>{e=setTimeout(r,n)});return t.timeout=e,t}(e);return Promise.race([n.finally(function r(){clearTimeout(t.timeout)}),t.then(()=>{throw new s$})])}class o$ extends Ot{constructor(e,t,r){super(),this.xmppChatAdapter=e,this.logService=t,this.ngZone=r,this.pingInterval=6e4,this.xmppChatAdapter.state$.pipe(At(s=>"online"===s)).subscribe(()=>this.schedulePings()),this.xmppChatAdapter.state$.pipe(At(s=>"disconnected"===s)).subscribe(()=>this.unschedulePings())}schedulePings(){this.unschedulePings(),this.ngZone.runOutsideAngular(()=>{this.timeoutHandle=window.setInterval(()=>this.ping(),this.pingInterval)})}ping(){var e=this;return J(function*(){e.logService.debug("ping...");try{yield _E(e.sendPing(),1e4),e.logService.debug("... pong")}catch{"online"===e.xmppChatAdapter.state$.getValue()&&"online"===e.xmppChatAdapter.chatConnectionService.state$.getValue()&&e.logService.error("... pong errored,  connection should be online, waiting for browser websocket timeout")}})()}sendPing(){var e=this;return J(function*(){return yield e.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get"},(0,N.Ls)("ping",{xmlns:"urn:xmpp:ping"})))})()}unschedulePings(){window.clearInterval(this.timeoutHandle)}}class a$ extends Ot{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t}register(e,t){var r=this;return J(function*(){return t||(t=(yield r.getPushServiceComponent()).jid),yield r.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("enable",{xmlns:"urn:xmpp:push:0",jid:t,node:e})))})()}getPushServiceComponent(){var e=this;return J(function*(){return yield e.serviceDiscoveryPlugin.findService("pubsub","push")})()}unregister(e,t){var r=this;return J(function*(){return t||(t=(yield r.getPushServiceComponent()).jid),yield r.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("disable",{xmlns:"urn:xmpp:push:0",jid:t,node:e})))})()}}class CE extends Ot{constructor(e,t){super(),this.logService=e,this.ngZone=t,this.registered$=new se,this.cleanUp=new se,this.loggedIn$=new se,this.registrationTimeout=5e3}register(e,t,r,s){var i=this;return J(function*(){yield i.ngZone.runOutsideAngular(J(function*(){try{yield _E(J(function*(){s=s||vE(r),i.logService.debug("registration plugin","connecting..."),yield i.connect(e,t,r,s),i.logService.debug("registration plugin","connection established, starting registration"),yield i.client.iqCaller.request((0,N.Ls)("iq",{type:"get",to:s},(0,N.Ls)("query",{xmlns:"jabber:iq:register"}))),i.logService.debug("registration plugin","server acknowledged registration request, sending credentials"),yield i.client.iqCaller.request((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"jabber:iq:register"},(0,N.Ls)("username",{},e),(0,N.Ls)("password",{},t)))),i.registered$.next(),yield i.loggedIn$.pipe(Gi(i.cleanUp),jn()).toPromise(),i.logService.debug("registration plugin","registration successful")})(),i.registrationTimeout)}catch(o){throw i.logService.warn("error registering",o),o}finally{i.cleanUp.next(),i.logService.debug("registration plugin","cleaning up"),yield i.client.stop()}}))})()}connect(e,t,r,s){var i=this;return new Promise(o=>{return this.client=(0,N.Lp)({domain:s||vE(r),service:r,credentials:(a=J(function*(c){o(),yield i.registered$.pipe(Gi(i.cleanUp),jn()).toPromise(),yield c({username:e,password:t})}),function(l){return a.apply(this,arguments)})}),this.client.reconnect.stop(),this.client.timeout=this.registrationTimeout,this.client.on("online",()=>{this.logService.debug("registration plugin","online event"),this.loggedIn$.next()}),this.client.on("error",a=>{this.logService.error("registration plugin",a)}),this.client.on("offline",()=>{this.logService.debug("registration plugin","offline event")}),this.client.start();var a})}}let wE=(()=>{class n{constructor(t){this.chatService=t,this.enabled=!1,t.message$.subscribe(r=>{this.receivedDirectMessage(r)}),t.getPlugin(so).message$.subscribe(r=>{this.receivedGroupMessage(r)})}enable(){this.supportsNotification()&&(this.requestNotificationPermission(),this.enabled=!0)}disable(){this.enabled=!1}requestNotificationPermission(){Notification.requestPermission()}receivedDirectMessage(t){if(this.shouldDisplayNotification()){const r=new Notification(t.name,{body:t.mostRecentMessage.body,icon:t.avatar});r.addEventListener("click",()=>{window.focus(),r.close()})}}receivedGroupMessage(t){var r=this;return J(function*(){if(r.shouldDisplayNotification()){const s=t.mostRecentMessage.body,i=t.mostRecentMessage.from,o=yield r.customizeGroupMessage(i,s,t),a=new Notification(t.name,o);a.addEventListener("click",()=>{window.focus(),a.close()})}})()}customizeGroupMessage(t,r,s){return J(function*(){return{body:`${t}: ${r}`}})()}shouldDisplayNotification(){const t=Notification;return this.enabled&&"hidden"===document.visibilityState&&this.supportsNotification()&&"granted"===t.permission}supportsNotification(){return"Notification"in window}}return n.\u0275fac=function(t){return new(t||n)(X(hn))},n.\u0275prov=ce({token:n,factory:n.\u0275fac}),n})(),c$=(()=>{class n{static forRoot(){return{ngModule:n,providers:[wE,oo,tg,Ba,io,Zp,uE,{provide:hn,deps:[Zp,tg,Ba,_p,io,gt],useFactory:n.xmppChatAdapter}]}}static xmppChatAdapter(t,r,s,i,o,a){const c=new dE(t,o,s),l=new La(c),u=new IB(c,l),d=new n$(c,l,o),h=new so(c,o,l),p=new rg(c,r,u,d,h),y=new sE(c,o);return c.addPlugins([new t$(u),new zp(c,l,h,o,y),y,new Fa,h,u,new ou(c,o),l,new a$(c,l),new o$(c,o,a),new CE(o,a),new r$(c),p,new pE(i,l,c,o),new nE(u,c,r,o,d),new ZS(c,l),new QS(c,l),d]),c}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({imports:[[aw,Ab,c2,vL]]}),n})();var sg=g(6105);let l$=(()=>{class n{constructor(t){this.chatService=t}ngOnInit(){}sendIq(){var t=this;return J(function*(){const r=(0,sg.parse)(t.iqRequest);if(r){const s=yield t.chatService.chatConnectionService.sendIq(r);t.iqResponse=(0,sg.stringify)(s,4,1)}})()}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["app-iq"]],decls:9,vars:2,consts:[["rows","10",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,r){1&t&&(x(0,"div")(1,"h2"),$(2,"Send custom IQ packets:"),T(),x(3,"textarea",0),K("ngModelChange",function(i){return r.iqRequest=i}),T(),x(4,"button",1),K("click",function(){return r.sendIq()}),$(5,"Send IQ"),T(),x(6,"pre")(7,"code"),$(8),T()()()),2&t&&(O(3),B("ngModel",r.iqRequest),O(5),ft(r.iqResponse))},directives:[es,Li,Ms],styles:[""]}),n})(),u$=(()=>{class n{constructor(t){this.chatService=t}ngOnInit(){}sendStanza(){var t=this;return J(function*(){const r=(0,sg.parse)(t.stanza);r&&(yield t.chatService.chatConnectionService.send(r))})()}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["app-send-stanza"]],decls:8,vars:1,consts:[["rows","10",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,r){1&t&&(x(0,"div")(1,"h2"),$(2,"Send custom stanza:"),T(),x(3,"textarea",0),K("ngModelChange",function(i){return r.stanza=i}),T(),x(4,"button",1),K("click",function(){return r.sendStanza()}),$(5,"Send stanza"),T(),x(6,"div"),$(7,"Note: responses will not be displayed!"),T()()),2&t&&(O(3),B("ngModel",r.stanza))},directives:[es,Li,Ms],styles:[""]}),n})();function d$(n,e){if(1&n){const t=yt();x(0,"div")(1,"button",5),K("click",function(){const i=Re(t).$implicit;return Z(2).selectedRoom=i}),$(2),T()()}if(2&n){const t=e.$implicit;O(2),tt(" ",t.roomJid.bare().toString()," ")}}function h$(n,e){if(1&n&&(wt(0),xe(1,"ngx-chat-message-list",8)(2,"ngx-chat-message-input",8),bt()),2&n){const t=Z(2);O(1),B("recipient",t.selectedRoom),O(1),B("recipient",t.selectedRoom)}}function f$(n,e){1&n&&(x(0,"span"),$(1,"(no room joined yet)"),T())}function p$(n,e){if(1&n&&(x(0,"li"),$(1),T()),2&n){const t=e.$implicit;O(1),tt(" ",t," ")}}function g$(n,e){if(1&n&&(x(0,"li"),$(1),x(2,"ul"),oe(3,p$,2,1,"li",2),T()()),2&n){const t=e.$implicit;O(1),tt(" ",t.key,": "),O(2),B("ngForOf",t.value)}}function m$(n,e){if(1&n){const t=yt();x(0,"div"),$(1),x(2,"button",5),K("click",function(){const i=Re(t).$implicit;return Z(2).joinRoom(i.jid)}),$(3,"join"),T(),x(4,"button",5),K("click",function(){const i=Re(t).$implicit;return Z(2).subscribeWithMucSub(i.jid)}),$(5,"subscribe with MUC/Sub"),T(),x(6,"button",5),K("click",function(){const i=Re(t).$implicit;return Z(2).unsubscribeFromMucSub(i.jid)}),$(7,"unsubscribe from MUC/Sub"),T(),x(8,"button",5),K("click",function(){const i=Re(t).$implicit;return Z(2).destroyRoom(i.jid)}),$(9,"destroy"),T()()}if(2&n){const t=e.$implicit;O(1),oh(" ",t.name,": ",t.jid," ")}}function y$(n,e){if(1&n){const t=yt();x(0,"button",5),K("click",function(){return Re(t),Z(2).createNewRoom()}),$(1,"Create new room"),T()}}function v$(n,e){if(1&n){const t=yt();x(0,"form",9),K("submit",function(){return Re(t),Z(2).createRoomOnServer()}),x(1,"div",10)(2,"input",11,12),K("ngModelChange",function(s){return Re(t),Z(2).newRoom.roomId=s}),T(),x(4,"div",13),$(5," Room id is required "),T()(),x(6,"label")(7,"input",14),K("ngModelChange",function(s){return Re(t),Z(2).newRoom.membersOnly=s}),T(),$(8," members only "),T(),xe(9,"br"),x(10,"label")(11,"input",15),K("ngModelChange",function(s){return Re(t),Z(2).newRoom.nonAnonymous=s}),T(),$(12," non-anonymous "),T(),xe(13,"br"),x(14,"label")(15,"input",16),K("ngModelChange",function(s){return Re(t),Z(2).newRoom.persistentRoom=s}),T(),$(16," persistent "),T(),xe(17,"br"),x(18,"label")(19,"input",17),K("ngModelChange",function(s){return Re(t),Z(2).newRoom.public=s}),T(),$(20," public "),T(),xe(21,"br"),x(22,"label")(23,"input",18),K("ngModelChange",function(s){return Re(t),Z(2).newRoom.allowSubscription=s}),T(),$(24," allow subscription "),T(),xe(25,"br"),x(26,"button",19),$(27,"Create room"),T(),x(28,"button",5),K("click",function(){return Re(t),Z(2).cancelRoomCreation()}),$(29,"Cancel room creation"),T()()}if(2&n){const t=Ac(3),r=Z(2);O(2),B("ngModel",r.newRoom.roomId),O(2),B("hidden",t.valid||t.pristine),O(3),B("ngModel",r.newRoom.membersOnly),O(4),B("ngModel",r.newRoom.nonAnonymous),O(4),B("ngModel",r.newRoom.persistentRoom),O(4),B("ngModel",r.newRoom.public),O(4),B("ngModel",r.newRoom.allowSubscription)}}function _$(n,e){if(1&n){const t=yt();x(0,"div"),oe(1,d$,3,1,"div",2),Se(2,"async"),oe(3,h$,3,2,"ng-container",3),oe(4,f$,2,0,"span",3),Se(5,"async"),xe(6,"hr"),x(7,"input",4),K("ngModelChange",function(s){return Re(t),Z().roomJid=s}),T(),x(8,"button",5),K("click",function(){Re(t);const s=Z();return s.joinRoom(s.roomJid)}),$(9,"Join room"),T(),x(10,"button",5),K("click",function(){Re(t);const s=Z();return s.subscribeWithMucSub(s.roomJid)}),$(11,"subscribe with MUC/Sub"),T(),x(12,"button",5),K("click",function(){Re(t);const s=Z();return s.unsubscribeFromMucSub(s.roomJid)}),$(13,"unsubscribe from MUC/Sub"),T(),x(14,"button",5),K("click",function(){return Re(t),Z().getSubscriptions()}),$(15,"get MUC/Sub subscriptions"),T(),x(16,"ul"),oe(17,g$,4,2,"li",2),Se(18,"keyvalue"),T(),xe(19,"hr"),x(20,"button",5),K("click",function(){return Re(t),Z().queryAllRooms()}),$(21,"List all rooms"),T(),oe(22,m$,10,2,"div",2),xe(23,"hr"),oe(24,y$,2,0,"button",6),oe(25,v$,30,7,"form",7),T()}if(2&n){const t=Z();O(1),B("ngForOf",Ee(2,8,t.multiUserChatPlugin.rooms$)),O(2),B("ngIf",t.selectedRoom),O(1),B("ngIf",0===Ee(5,10,t.multiUserChatPlugin.rooms$).length),O(3),B("ngModel",t.roomJid),O(10),B("ngForOf",Ee(18,12,t.mucSubSubscriptions)),O(5),B("ngForOf",t.allRooms),O(2),B("ngIf",null==t.newRoom),O(1),B("ngIf",null!=t.newRoom)}}function C$(n,e){1&n&&(x(0,"span"),$(1,"You need to be online."),T())}function w$(n,e){1&n&&(oe(0,C$,2,0,"span",3),Se(1,"async")),2&n&&B("ngIf","online"!==Ee(1,1,Z().chatService.state$))}let b$=(()=>{class n{constructor(t){this.chatService=t,this.allRooms=[],this.mucSubSubscriptions=new Map,this.multiUserChatPlugin=t.getPlugin(so),this.mucSubPlugin=t.getPlugin(ZS)}joinRoom(t){var r=this;return J(function*(){const s=(0,N.kO)(t);r.selectedRoom=yield r.multiUserChatPlugin.joinRoom(s)})()}subscribeWithMucSub(t){var r=this;return J(function*(){yield r.mucSubPlugin.subscribeRoom(t,[to.messages])})()}unsubscribeFromMucSub(t){var r=this;return J(function*(){yield r.mucSubPlugin.unsubscribeRoom(t)})()}getSubscriptions(){var t=this;return J(function*(){t.mucSubSubscriptions=yield t.mucSubPlugin.retrieveSubscriptions()})()}destroyRoom(t){var r=this;return J(function*(){const s=(0,N.kO)(t);yield r.multiUserChatPlugin.destroyRoom(s),yield r.queryAllRooms()})()}queryAllRooms(){var t=this;return J(function*(){t.allRooms=yield t.multiUserChatPlugin.queryAllRooms()})()}createNewRoom(){this.newRoom={roomId:"",membersOnly:!0,nonAnonymous:!1,persistentRoom:!0,public:!1,allowSubscription:!0}}cancelRoomCreation(){this.newRoom=null}createRoomOnServer(){var t=this;return J(function*(){!t.newRoom?.roomId||""===t.newRoom.roomId||(yield t.multiUserChatPlugin.createRoom(t.newRoom),t.newRoom=void 0)})()}}return n.\u0275fac=function(t){return new(t||n)(V(hn))},n.\u0275cmp=rt({type:n,selectors:[["app-multi-user-chat"]],decls:8,vars:4,consts:[[4,"ngIf","ngIfElse"],["offline",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","text","placeholder","room",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[3,"click",4,"ngIf"],[3,"submit",4,"ngIf"],[3,"recipient"],[3,"submit"],[1,"form-group"],["name","roomId","type","text","placeholder","Room id","required","required",1,"form-control",3,"ngModel","ngModelChange"],["roomId","ngModel"],[1,"alert","alert-danger",3,"hidden"],["name","membersOnly","type","checkbox",3,"ngModel","ngModelChange"],["name","nonAnonymous","type","checkbox",3,"ngModel","ngModelChange"],["name","persistentRoom","type","checkbox",3,"ngModel","ngModelChange"],["name","public","type","checkbox",3,"ngModel","ngModelChange"],["name","allowSubscription","type","checkbox",3,"ngModel","ngModelChange"],["type","submit"]],template:function(t,r){if(1&t&&(x(0,"div")(1,"h2"),$(2,"Chat rooms:"),T(),oe(3,_$,26,14,"div",0),Se(4,"async"),xe(5,"hr"),oe(6,w$,2,3,"ng-template",null,1,Mh),T()),2&t){const s=Ac(7);O(3),B("ngIf","online"===Ee(4,2,r.chatService.state$))("ngIfElse",s)}},directives:[hr,Fi,$a,iu,es,Li,Ms,ub,Qw,Cl,wl,vf],pipes:[Zr,lf],styles:["ngx-chat-message-input[_ngcontent-%COMP%]{display:block;border:1px solid #dadada;width:100%;padding:.5em}"]}),n})();function D$(n,e){if(1&n&&(x(0,"div")(1,"p"),$(2),T()()),2&n){const t=Z();O(2),ft(t.registrationMessage)}}function S$(n,e){if(1&n&&(wt(0),xe(1,"ngx-chat-message-list",17),Se(2,"async"),xe(3,"ngx-chat-message-input",18),Se(4,"async"),bt()),2&n){const t=Z();O(1),B("recipient",Ee(2,3,t.chatService.contactsSubscribed$)[0])("showAvatars",!0),O(2),B("recipient",Ee(4,5,t.chatService.contactsSubscribed$)[0])}}function E$(n,e){1&n&&$(0,"You need to be logged in and have contacts to see this component")}let M$=(()=>{class n{constructor(t,r,s,i,o){this.chatService=t,this.contactFactory=r,this.logService=s,this.chatListStateService=i;const a=JSON.parse(localStorage.getItem("data"))||{};this.logService.logLevel=Vr.Debug,this.domain=a.domain,this.service=a.service,this.password=a.password,this.username=a.username,this.chatService.state$.subscribe(c=>this.stateChanged(c)),this.multiUserChatPlugin=this.chatService.getPlugin(so),this.unreadMessageCountPlugin=this.chatService.getPlugin(rg),o.enable(),window.chatService=t}onLogin(){const t={domain:this.domain,service:this.service,password:this.password,username:this.username};localStorage.setItem("data",JSON.stringify(t)),this.chatService.logIn(t)}onLogout(){this.chatService.logOut()}onRegister(){var t=this;return J(function*(){t.registrationMessage="registering ...";try{yield t.chatService.getPlugin(CE).register(t.username,t.password,t.service,t.domain),t.registrationMessage="registration successful"}catch(r){throw t.registrationMessage="registration failed: "+r.toString(),r}})()}onAddContact(){this.chatService.addContact(this.otherJid)}onRemoveContact(){this.chatService.removeContact(this.otherJid)}onOpenChat(){this.chatListStateService.openChat(this.chatService.getOrCreateContactById(this.otherJid))}stateChanged(t){return J(function*(){console.log("state changed!",t)})()}onReconnect(){this.chatService.reconnect()}}return n.\u0275fac=function(t){return new(t||n)(V(hn),V(Ba),V(io),V(oo),V(wE))},n.\u0275cmp=rt({type:n,selectors:[["app-index"]],decls:80,vars:25,consts:[[1,"container"],[1,"form-group"],["name","domain","type","text","placeholder","jabber.example.com",1,"form-control",3,"ngModel","ngModelChange"],["name","service","type","text","placeholder","wss://jabber.example.com:5280/websocket",1,"form-control",3,"ngModel","ngModelChange"],["name","username","type","text","placeholder","test",1,"form-control",3,"ngModel","ngModelChange"],["name","password","type","password","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["name","login",3,"click"],["name","logout",3,"click"],["name","register",3,"click"],["name","reconnect",3,"click"],[4,"ngIf"],["type","text","placeholder","JID",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngIf","ngIfElse"],["messagesComponentInformation",""],["routerLink","/ui"],["rosterState","shown"],[3,"recipient","showAvatars"],[3,"recipient"]],template:function(t,r){if(1&t&&(x(0,"div",0)(1,"div",1)(2,"div"),$(3," XMPP domain "),x(4,"small"),$(5,"(e.g. jabber.example.com)"),T()(),x(6,"div")(7,"input",2),K("ngModelChange",function(i){return r.domain=i}),T()()(),x(8,"div",1)(9,"div"),$(10," Host Websocket endpoint "),x(11,"small"),$(12,"(e.g. wss://jabber.example.com:5280/websocket)"),T()(),x(13,"div")(14,"input",3),K("ngModelChange",function(i){return r.service=i}),T()()(),x(15,"div",1)(16,"div"),$(17," Username "),x(18,"small"),$(19,"(e.g. test if test@jabber.example.com is your full JID)"),T()(),x(20,"div")(21,"input",4),K("ngModelChange",function(i){return r.username=i}),T()()(),x(22,"div",1)(23,"div"),$(24," Password "),T(),x(25,"div")(26,"input",5),K("ngModelChange",function(i){return r.password=i}),T()()(),x(27,"div")(28,"button",6),K("click",function(){return r.onLogin()}),$(29,"Log in"),T(),x(30,"button",7),K("click",function(){return r.onLogout()}),$(31,"Log out"),T(),x(32,"button",8),K("click",function(){return r.onRegister()}),$(33,"Register"),T(),x(34,"button",9),K("click",function(){return r.onReconnect()}),$(35,"Reconnect"),T()(),x(36,"div"),$(37),Se(38,"async"),T(),oe(39,D$,3,1,"div",10),xe(40,"hr"),x(41,"div",1)(42,"div"),$(43," Contact Management "),T(),x(44,"div")(45,"input",11),K("ngModelChange",function(i){return r.otherJid=i}),T()()(),x(46,"button",12),K("click",function(){return r.onAddContact()}),$(47,"Add contact"),T(),x(48,"button",12),K("click",function(){return r.onRemoveContact()}),$(49,"Remove contact"),T(),x(50,"button",12),K("click",function(){return r.onOpenChat()}),$(51,"Open chat"),T(),xe(52,"hr"),x(53,"button",12),K("click",function(){return r.chatService.enableDebugging=!r.chatService.enableDebugging}),$(54,"Enable debugging"),T(),x(55,"div")(56,"h2"),$(57,"Custom component for a chat session"),T(),oe(58,S$,5,7,"ng-container",13),Se(59,"async"),Se(60,"async"),oe(61,E$,1,0,"ng-template",null,14,Mh),T(),xe(63,"hr")(64,"app-iq")(65,"app-send-stanza")(66,"app-multi-user-chat"),x(67,"div")(68,"h2"),$(69,"Unread messages count:"),T(),$(70),Se(71,"async"),x(72,"pre"),$(73),Se(74,"json"),Se(75,"keyvalue"),Se(76,"async"),T()(),x(77,"a",15),$(78,"Show mock chats"),T()(),xe(79,"ngx-chat",16)),2&t){const s=Ac(62);O(7),B("ngModel",r.domain),O(7),B("ngModel",r.service),O(7),B("ngModel",r.username),O(5),B("ngModel",r.password),O(11),tt("State: ",Ee(38,11,r.chatService.state$),""),O(2),B("ngIf",r.registrationMessage),O(6),B("ngModel",r.otherJid),O(13),B("ngIf","online"===Ee(59,13,r.chatService.state$)&&Ee(60,15,r.chatService.contactsSubscribed$).length>0)("ngIfElse",s),O(12),tt(" Sum unread messages: ",Ee(71,17,r.unreadMessageCountPlugin.unreadMessageCountSum$)," "),O(3),ft(Ee(74,19,Ee(75,21,Ee(76,23,r.unreadMessageCountPlugin.jidToUnreadCount$))))}},directives:[es,Li,Ms,hr,$a,iu,l$,u$,b$,Oa,e$],pipes:[Zr,iw,lf],styles:[""]}),n})(),T$=(()=>{class n{constructor(){this.Direction=ke,this.MessageState=Qt,this.dummyAvatarContact=Gp,this.myJid=(0,N.kO)("me@example.com"),this.otherContactJid=(0,N.kO)("other@example.com")}ngOnInit(){this.contact=new ja(this.otherContactJid.toString(),"chat partner name"),this.room=new Va(this.myJid,null),this.add({body:"This is an incoming example message",datetime:new Date("2019-12-22T14:00:00"),direction:ke.in}),this.add({body:"This is an incoming example message on another day",datetime:new Date("2019-12-24T14:00:00"),direction:ke.in}),this.add({body:"This is an incoming example message with a really long link https://forum.golem.de/kommentare/wissenschaft/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/oneweb-ist-doch-bald-pleite/137396,5739317,5739317,read.html#msg-5739317 which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:ke.in}),this.add({body:"This is an incoming example message with a really long link https://forum.golem.de/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/ which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:ke.in}),this.add({body:"This is an outgoing example message with a really long link https://forum.golem.de/kommentare/wissenschaft/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/oneweb-ist-doch-bald-pleite/137396,5739317,5739317,read.html#msg-5739317 which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:ke.out}),this.add({body:"This is an outgoing example message with a really long link https://forum.golem.de/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/ which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:ke.out}),this.add({body:"This is an outgoing example message",datetime:new Date("2019-12-24T14:05:01"),direction:ke.out}),this.add({body:"123",datetime:new Date("2019-12-24T14:05:01"),direction:ke.out}),this.add({body:"This is an outgoing message with a link to an image https://dummyimage.com/600x400/000/fff and some text after the link",datetime:new Date("2019-12-24T14:05:01"),direction:ke.out}),this.add({body:"This is an incoming message with a link to an image https://dummyimage.com/600x400/000/fff and some text after the link",datetime:new Date("2019-12-24T14:05:01"),direction:ke.in}),this.add({body:"Really tall image https://dummyimage.com/600x4000/000/fff",datetime:new Date("2019-12-24T14:05:01"),direction:ke.in}),this.add({body:"Really wide image https://dummyimage.com/6000x400/000/fff",datetime:new Date("2019-12-24T14:05:01"),direction:ke.in}),this.add({body:"Rinderkennzeichnungs- und Rindfleischetikettierungs\xfcberwachungsaufgaben\xfcbertragungsgesetz",datetime:new Date("2019-12-24T14:05:01"),direction:ke.in})}add(t){this.contact.addMessage({...t,delayed:!1,fromArchive:!1,id:null}),this.room.addMessage({...t,delayed:!1,fromArchive:!1,from:t.direction===ke.in?this.otherContactJid:this.myJid})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["app-ui"]],decls:34,vars:21,consts:[[1,"container"],["routerLink","/"],[1,"example"],[1,"chat-message-list-wrapper"],[3,"recipient","showAvatars"],[1,"chat-message-list-wrapper","simple-message-list"],["formattedDate","2020-06-04 18:35","nick","chat partner",1,"chat-message--out",3,"avatar","direction","messageState"],["formattedDate","2020-06-04 18:36","nick","chat partner",1,"chat-message--out",3,"avatar","direction","messageState"],["formattedDate","2020-06-04 18:37","imageLink","https://dummyimage.com/600x400/000/fff","nick","chat partner",1,"chat-message--out",3,"direction"],[3,"recipient"]],template:function(t,r){1&t&&(x(0,"div",0)(1,"a",1),$(2,"Back to ngx-chat sample component"),T(),x(3,"div",2)(4,"p"),$(5,"Default theme (avatars)"),T(),x(6,"div",3),xe(7,"ngx-chat-message-list",4),T()(),x(8,"div",2)(9,"p"),$(10,"Default theme (no avatars)"),T(),x(11,"div",3),xe(12,"ngx-chat-message-list",4),T()(),x(13,"div",2)(14,"p"),$(15,"Simple chat message component used directly"),T(),x(16,"div",5)(17,"ngx-chat-message-simple",6),$(18," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),T(),x(19,"ngx-chat-message-simple",6),$(20," sending "),T(),x(21,"ngx-chat-message-simple",6),$(22," sent "),T(),x(23,"ngx-chat-message-simple",6),$(24," recipient received "),T(),x(25,"ngx-chat-message-simple",7),$(26," recipient seen "),T(),x(27,"ngx-chat-message-simple",8),$(28," content goes here "),T()()(),x(29,"div",2)(30,"p"),$(31,"Mock for multi user chat room"),T(),x(32,"div",3),xe(33,"ngx-chat-message-list",9),T()()()),2&t&&(O(7),B("recipient",r.contact)("showAvatars",!0),O(5),B("recipient",r.contact)("showAvatars",!1),O(5),B("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.SENDING),O(2),B("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.SENDING),O(2),B("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.SENT),O(2),B("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.RECIPIENT_RECEIVED),O(2),B("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.RECIPIENT_SEEN),O(2),B("direction",r.Direction.out),O(6),B("recipient",r.room))},directives:[Oa,$a,eg],styles:[".chat-message-list-wrapper[_ngcontent-%COMP%]{border:1px solid #e3e3e3}.example[_ngcontent-%COMP%]{margin-bottom:2em}.simple-message-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple[_ngcontent-%COMP%]{max-width:76%}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple.chat-message--in[_ngcontent-%COMP%]{align-self:flex-start}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple.chat-message--out[_ngcontent-%COMP%]{align-self:flex-end}"]}),n})(),x$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=Bt({imports:[[qS.forRoot([{path:"",component:M$},{path:"ui",component:T$},{path:"**",redirectTo:"/"}],{relativeLinkResolution:"legacy"})],qS]}),n})(),I$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&xe(0,"router-outlet")},directives:[Lp],styles:[""]}),n})(),A$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n,bootstrap:[I$]}),n.\u0275inj=Bt({providers:[],imports:[[ww,YF,c$.forRoot(),Ab,x$]]}),n})();(function VR(){IC=!1})(),zN().bootstrapModule(A$).catch(n=>console.log(n))},512:E=>{"use strict";E.exports.encode=function(g){return global.btoa(g)},E.exports.decode=function(g){return global.atob(g)}},4924:(E,I,g)=>{"use strict";const _=g(3619),b=g(6320),C=g(3639);E.exports.Client=_,E.exports.xml=b,E.exports.jid=C},3619:(E,I,g)=>{"use strict";const _=g(1574);class b extends _{constructor(f){super(f),this.transports=[]}send(f,...m){return this.Transport.prototype.send.call(this,f,...m)}_findTransport(f){return this.transports.find(m=>{try{return void 0!==m.prototype.socketParameters(f)}catch{return!1}})}connect(f){const m=this._findTransport(f);if(!m)throw new Error("No compatible connection method found.");return this.Transport=m,this.Socket=m.prototype.Socket,this.Parser=m.prototype.Parser,super.connect(f)}socketParameters(...f){return this.Transport.prototype.socketParameters(...f)}header(...f){return this.Transport.prototype.header(...f)}headerElement(...f){return this.Transport.prototype.headerElement(...f)}footer(...f){return this.Transport.prototype.footer(...f)}footerElement(...f){return this.Transport.prototype.footerElement(...f)}}b.prototype.NS="jabber:client",E.exports=b},9225:(E,I,g)=>{"use strict";const{xml:_,jid:b,Client:C}=g(4924),f=g(3067),m=g(3595),S=g(1656),L=g(6405),k=g(2454),R=g(9824),M=g(524),D=g(9862),v=g(3635),w=g(874),F=g(1875),Q=g(7049),ge=g(5080);E.exports.Ls=_,E.exports.kO=b,E.exports.Lp=function le(We={}){const{resource:z,credentials:H,username:G,password:W,...ue}=We,{domain:Be,service:ie}=ue;!Be&&ie&&(ue.domain=f(ie));const Ze=new C(ue),$e=m({entity:Ze}),se=S({entity:Ze}),Ft=L({entity:Ze}),Jt=k({middleware:Ft}),pe=R({middleware:Ft,entity:Ze}),Bs=M({middleware:Ft,entity:Ze}),$s=D({entity:Ze}),Qe=v({streamFeatures:Jt},H||{username:G,password:W}),Us=w({iqCaller:pe,streamFeatures:Jt},z),Hs=F({iqCaller:pe,streamFeatures:Jt}),vr=Object.entries({plain:ge,anonymous:Q}).map(([uo,ho])=>({[uo]:ho(Qe)}));return Object.assign(Ze,{entity:Ze,reconnect:$e,websocket:se,middleware:Ft,streamFeatures:Jt,iqCaller:pe,iqCallee:Bs,resolve:$s,sasl:Qe,resourceBinding:Us,sessionEstablishment:Hs,mechanisms:vr})}},3067:E=>{"use strict";E.exports=function(g){return(g.split("://")[1]||g).split(":")[0].split("/")[0]}},1574:(E,I,g)=>{"use strict";var _=g(8926).default;const{EventEmitter:b,promise:C}=g(6160),f=g(3639),m=g(6320),S=g(4867),{parseHost:L,parseService:k}=g(3672);class M extends b{constructor(v={}){super(),this.jid=null,this.timeout=2e3,this.options=v,this.socketListeners=Object.create(null),this.parserListeners=Object.create(null),this.status="offline",this.socket=null,this.parser=null,this.root=null}_reset(){this.jid=null,this.status="offline",this._detachSocket(),this._detachParser()}_streamError(v,w){var F=this;return _(function*(){try{yield F.send(m("stream:error",{},[m(v,{xmlns:"urn:ietf:params:xml:ns:xmpp-streams"},w)]))}catch{}return F._end()})()}_onData(v){const w=v.toString("utf8");this.emit("input",w),this.parser.write(w)}_onParserError(v){this._streamError("bad-format"),this._detachParser(),this.emit("error",v)}_attachSocket(v){const w=this.socket=v,F=this.socketListeners;F.data=this._onData.bind(this),F.close=(Q,ge)=>{this._reset(),this._status("disconnect",{clean:!Q,event:ge})},F.connect=()=>{this._status("connect")},F.error=Q=>{this.emit("error",Q)},w.on("close",F.close),w.on("data",F.data),w.on("error",F.error),w.on("connect",F.connect)}_detachSocket(){const{socketListeners:v,socket:w}=this;return Object.getOwnPropertyNames(v).forEach(F=>{w.removeListener(F,v[F]),delete v[F]}),this.socket=null,w}_onElement(v){this.emit("element",v),this.emit(this.isStanza(v)?"stanza":"nonza",v),"stream:error"===v.name&&this._onStreamError(v)}_onStreamError(v){const w=S.fromElement(v);"see-other-host"===w.condition?this._onSeeOtherHost(w):this.emit("error",w),this._end()}_onSeeOtherHost(v){var w=this;return _(function*(){const{protocol:F}=k(w.options.service),Q=v.element.getChildText("see-other-host"),{port:ge}=L(Q);let le;le=ge?`${F||"xmpp:"}//${Q}`:(F?`${F}//`:"")+Q;try{yield C(w,"disconnect");const{domain:We,lang:z}=w.options;yield w.connect(le),yield w.open({domain:We,lang:z})}catch(We){w.emit("error",We)}})()}_attachParser(v){const w=this.parser=v,F=this.parserListeners;F.element=this._onElement.bind(this),F.error=this._onParserError.bind(this),F.end=Q=>{this._detachParser(),this._status("close",Q)},F.start=Q=>{this._status("open",Q)},w.on("error",F.error),w.on("element",F.element),w.on("end",F.end),w.on("start",F.start)}_detachParser(){const v=this.parserListeners;Object.getOwnPropertyNames(v).forEach(w=>{this.parser.removeListener(w,v[w]),delete v[w]}),this.parser=null}_jid(v){return this.jid=f(v),this.jid}_status(v,...w){this.status=v,this.emit("status",v,...w),this.emit(v,...w)}_end(){var v=this;return _(function*(){let w;try{w=yield v.close()}catch{}try{yield v.disconnect()}catch{}return w})()}start(){var v=this;return _(function*(){if("offline"!==v.status)throw new Error("Connection is not offline");const{service:w,domain:F,lang:Q}=v.options;yield v.connect(w);const ge=C(v,"online");return yield v.open({domain:F,lang:Q}),ge})()}connect(v){var w=this;return _(function*(){w._status("connecting",v);const F=new w.Socket;return w._attachSocket(F),F.connect(w.socketParameters(v)),C(F,"connect")})()}disconnect(v=this.timeout){var w=this;return _(function*(){w.socket&&w._status("disconnecting"),w.socket.end(),yield C(w.socket,"close","error",v)})()}open(v){var w=this;return _(function*(){w._status("opening"),"string"==typeof v&&(v={domain:v});const{domain:F,lang:Q,timeout:ge=w.timeout}=v,le=w.headerElement();return le.attrs.to=F,le.attrs["xml:lang"]=Q,w.root=le,w._attachParser(new w.Parser),yield w.write(w.header(le)),C(w,"open","error",ge)})()}stop(){var v=this;return _(function*(){const w=yield v._end();return"offline"!==v.status&&v._status("offline",w),w})()}close(v=this.timeout){var w=this;return _(function*(){const F=Promise.all([C(w.parser,"end","error",v),w.write(w.footer(w.footerElement()))]);w.parser&&w.socket&&w._status("closing");const[Q]=yield F;return w.root=null,Q})()}restart(){var v=this;return _(function*(){v._detachParser();const{domain:w,lang:F}=v.options;return v.open({domain:w,lang:F})})()}send(v){var w=this;return _(function*(){v.parent=w.root,w.emit("outgoing",v),yield w.write(v),w.emit("send",v)})()}sendReceive(v,w=this.timeout){return Promise.all([this.send(v),C(this,"element","error",w)]).then(([,F])=>F)}write(v){return new Promise((w,F)=>{if("closing"===this.status)return void F(new Error("Connection is closing"));const Q=v.toString("utf8");this.socket.write(Q,ge=>{if(ge)return F(ge);this.emit("output",Q),w()})})}isStanza(v){const{name:w}=v;return"iq"===w||"message"===w||"presence"===w}isNonza(v){return!this.isStanza(v)}header(v){return v.toString()}headerElement(){return new m.Element("",{version:"1.0",xmlns:this.NS})}footer(v){return v.toString()}footerElement(){}socketParameters(){}}M.prototype.NS="",M.prototype.Socket=null,M.prototype.Parser=null,E.exports=M},4867:(E,I,g)=>{"use strict";const _=g(8007);E.exports=class b extends _{constructor(...f){super(...f),this.name="StreamError"}}},3672:E=>{"use strict";function I(b){let{port:C,hostname:f,protocol:m}=new URL(b);return"[::1]"===f&&(f="::1"),{port:C,hostname:f,protocol:m}}function g(b){const{port:C,hostname:f}=I(`http://${b}`);return{port:C,hostname:f}}Object.assign(E.exports,{parseURI:I,parseHost:g,parseService:function _(b){return b.includes("://")?I(b):g(b)}})},8007:E=>{"use strict";class I extends Error{constructor(_,b,C){super(_+(b?` - ${b}`:"")),this.name="XMPPError",this.condition=_,this.text=b,this.application=C}static fromElement(_){const[b,C,f]=_.children;let m,S;C&&(C.is("text")?m=C:C&&(S=C),f&&(S=f));const L=new this(b.name,m?m.text():"",S);return L.element=_,L}}E.exports=I},6160:(E,I,g)=>{"use strict";const _=g(4240),b=g(9320),C=g(4441),f=g(5305),m=g(9069),S=g(2458);I.EventEmitter=m,I.timeout=_,I.delay=b,I.TimeoutError=C,I.promise=f,I.Deferred=S},2458:E=>{"use strict";E.exports=function(){this.promise=new Promise((g,_)=>{this.resolve=g,this.reject=_})}},4441:E=>{"use strict";E.exports=class extends Error{constructor(g){super(g),this.name="TimeoutError"}}},9320:E=>{"use strict";E.exports=function(g){let _;const b=new Promise(C=>{_=setTimeout(C,g)});return b.timeout=_,b}},5305:(E,I,g)=>{"use strict";const _=g(4441);E.exports=function(C,f,m="error",S){return new Promise((L,k)=>{let R;const M=()=>{clearTimeout(R),C.removeListener(f,v),C.removeListener(m,D)};function D(w){k(w),M()}function v(w){L(w),M()}C.once(f,v),m&&C.once(m,D),S&&(R=setTimeout(()=>{M(),k(new _)},S))})}},4240:(E,I,g)=>{"use strict";const _=g(4441),b=g(9320);E.exports=function(f,m){const S=b(m);return Promise.race([f.finally(function L(){clearTimeout(S.timeout)}),S.then(()=>{throw new _})])}},8284:E=>{"use strict";E.exports=function(){let g;for(;!g;)g=Math.random().toString(36).slice(2,12);return g}},524:(E,I,g)=>{"use strict";var _=g(8926).default;const b=g(6320);function S({stanza:v}){return b("iq",{to:v.attrs.from,from:v.attrs.to,id:v.attrs.id})}function k(v,w,F){const Q=S(v);return Q.attrs.type="error",F&&Q.append(F),Q.append(w),Q}function R(v,w){return b("error",{type:v},b(w,"urn:ietf:params:xml:ns:xmpp-stanzas"))}function D(v,w,F,Q){return function(ge,le){return ge.type!==v|!ge.element||!ge.element.is(F,w)?le():Q(ge,le)}}E.exports=function({middleware:v,entity:w}){return v.use(function M(v){return function(){var w=_(function*(Q,ge){if(!function f({name:v,type:w}){return!("iq"!==v||"error"===w||"result"===w)}(Q))return ge();const{stanza:le}=Q,We=le.getChildElements(),[z]=We;if(!function m({type:v},w,F){return!("get"!==v&&"set"!==v||1!==w.length||!F)}(Q,We,z))return k(Q,R("modify","bad-request"),z);let H;Q.element=z;try{H=yield ge()}catch(G){v.emit("error",G),H=R("cancel","internal-server-error")}return H||(H=R("cancel","service-unavailable")),H instanceof b.Element&&H.is("error")?k(Q,H,z):function L(v,w){const F=S(v);return F.attrs.type="result",w&&F.append(w),F}(Q,H instanceof b.Element?H:void 0)});return function F(Q,ge){return w.apply(this,arguments)}}()}(w)),{get(F,Q,ge){v.use(D("get",F,Q,ge))},set(F,Q,ge){v.use(D("set",F,Q,ge))}}}},9824:(E,I,g)=>{"use strict";var _=g(8926).default;const b=g(8284),C=g(9839),{Deferred:f}=g(6160),m=g(6160).timeout,S=g(6320);class k{constructor({entity:M,middleware:D}){this.handlers=new Map,this.entity=M,this.middleware=D}start(){this.middleware.use(this._route.bind(this))}_route({type:M,name:D,id:v,stanza:w},F){if(!function L({name:R,type:M}){return!("iq"!==R||"error"!==M&&"result"!==M)}({name:D,type:M}))return F();const Q=this.handlers.get(v);if(!Q)return F();"error"===M?Q.reject(C.fromElement(w.getChild("error"))):Q.resolve(w),this.handlers.delete(v)}request(M,D=3e4){var v=this;return _(function*(){M.attrs.id||(M.attrs.id=b());const w=new f;v.handlers.set(M.attrs.id,w);try{yield v.entity.send(M),yield m(w.promise,D)}catch(F){throw v.handlers.delete(M.attrs.id),F}return w.promise})()}_childRequest(M,D,v,...w){const{name:F}=D,{xmlns:Q}=D.attrs;return this.request(S("iq",{type:M,to:v},D),...w).then(ge=>ge.getChild(F,Q))}get(...M){var D=this;return _(function*(){return D._childRequest("get",...M)})()}set(...M){var D=this;return _(function*(){return D._childRequest("set",...M)})()}}E.exports=function(...M){const D=new k(...M);return D.start(),D}},3639:(E,I,g)=>{"use strict";const _=g(1867),b=g(1857),C=g(1817);function f(...m){return m[1]||m[2]?new _(...m):C(...m)}(I=E.exports=f.bind()).jid=f,I.JID=_,I.equal=function(m,S){return m.equals(S)},I.detectEscape=b.detect,I.escapeLocal=b.escape,I.unescapeLocal=b.unescape,I.parse=C},1867:(E,I,g)=>{"use strict";const _=g(1857);class b{constructor(f,m,S){if("string"!=typeof m||!m)throw new TypeError("Invalid domain.");this.setDomain(m),this.setLocal("string"==typeof f?f:""),this.setResource("string"==typeof S?S:"")}[Symbol.toPrimitive](f){return"number"===f?NaN:this.toString()}toString(f){let m=this._domain;return this._local&&(m=this.getLocal(f)+"@"+m),this._resource&&(m=m+"/"+this._resource),m}bare(){return this._resource?new b(this._local,this._domain,null):this}equals(f){return this._local===f._local&&this._domain===f._domain&&this._resource===f._resource}setLocal(f,m){return(m=m||_.detect(f))&&(f=_.escape(f)),this._local=f&&f.toLowerCase(),this}getLocal(f){let m=null;return m=(f=f||!1)?_.unescape(this._local):this._local,m}setDomain(f){return this._domain=f.toLowerCase(),this}getDomain(){return this._domain}setResource(f){return this._resource=f,this}getResource(){return this._resource}}Object.defineProperty(b.prototype,"local",{get:b.prototype.getLocal,set:b.prototype.setLocal}),Object.defineProperty(b.prototype,"domain",{get:b.prototype.getDomain,set:b.prototype.setDomain}),Object.defineProperty(b.prototype,"resource",{get:b.prototype.getResource,set:b.prototype.setResource}),E.exports=b},1857:E=>{"use strict";E.exports.detect=function(I){return!(!I||-1===I.replace(/\\20/g,"").replace(/\\22/g,"").replace(/\\26/g,"").replace(/\\27/g,"").replace(/\\2f/g,"").replace(/\\3a/g,"").replace(/\\3c/g,"").replace(/\\3e/g,"").replace(/\\40/g,"").replace(/\\5c/g,"").search(/\\| |"|&|'|\/|:|<|>|@/g))},E.exports.escape=function(I){return null===I?null:I.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/"/g,"\\22").replace(/&/g,"\\26").replace(/'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40").replace(/\3a/g,"\x05c3a")},E.exports.unescape=function(I){return null===I?null:I.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")}},1817:(E,I,g)=>{"use strict";const _=g(1867);E.exports=function(C){let f,m;const S=C.indexOf("/");-1!==S&&(m=C.slice(S+1),C=C.slice(0,S));const L=C.indexOf("@");return-1!==L&&(f=C.slice(0,L),C=C.slice(L+1)),new _(f,C,m)}},6405:(E,I,g)=>{"use strict";const _=g(4775),b=g(7702),C=g(3299);function f(S,L,k){return function(R){const M=new k(S,R);return _(L)(M)}}function m(S){return function(L,k){k().then(R=>R&&S.send(R)).catch(R=>S.emit("error",R))}}E.exports=function({entity:S}){const L=[m(S)],k=[],R=f(S,L,b),M=f(S,k,C);return S.on("element",R),S.hookOutgoing=M,{use:D=>(L.push(D),D),filter:D=>(k.push(D),D)}}},4111:E=>{"use strict";E.exports=class{constructor(g,_){this.stanza=_,this.entity=g;const{name:b,attrs:C}=_,{type:f,id:m}=C;this.name=b,this.id=m||"",this.type="message"===b?f||"normal":"presence"===b?f||"available":f||"",this.from=null,this.to=null,this.local="",this.domain="",this.resource=""}}},7702:(E,I,g)=>{"use strict";const _=g(4111),b=g(3639);E.exports=class extends _{constructor(f,m){super(f,m);const{jid:S,domain:L}=f,k=m.attrs.to||S&&S.toString(),R=m.attrs.from||L;k&&(this.to=new b(k)),R&&(this.from=new b(R),this.local=this.from.local,this.domain=this.from.domain,this.resource=this.from.resource)}}},3299:(E,I,g)=>{"use strict";const _=g(4111),b=g(3639);E.exports=class extends _{constructor(f,m){super(f,m);const{jid:S,domain:L}=f,k=m.attrs.from||S&&S.toString(),R=m.attrs.to||L;k&&(this.from=new b(k)),R&&(this.to=new b(R),this.local=this.to.local,this.domain=this.to.domain,this.resource=this.to.resource)}}},9839:(E,I,g)=>{"use strict";const _=g(8007);E.exports=class b extends _{constructor(f,m,S,L){super(f,m,S),this.type=L,this.name="StanzaError"}static fromElement(f){const m=super.fromElement(f);return m.type=f.attrs.type,m}}},3595:(E,I,g)=>{"use strict";var _=g(8926).default;const{EventEmitter:b}=g(6160);class C extends b{constructor(m){super(),this.delay=1e3,this.entity=m,this._timeout=null}scheduleReconnect(){var m=this;const{entity:S,delay:L,_timeout:k}=this;clearTimeout(k),this._timeout=setTimeout(_(function*(){if("disconnect"===S.status)try{yield m.reconnect()}catch{}}),L)}reconnect(){var m=this;return _(function*(){const{entity:S}=m;m.emit("reconnecting");const{service:L,domain:k,lang:R}=S.options;yield S.connect(L),yield S.open({domain:k,lang:R}),m.emit("reconnected")})()}start(){const{entity:m}=this,S={};S.disconnect=()=>{this.scheduleReconnect()},this.listeners=S,m.on("disconnect",S.disconnect)}stop(){const{entity:m,listeners:S,_timeout:L}=this;m.removeListener("disconnect",S.disconnect),clearTimeout(L)}}E.exports=function({entity:m}){const S=new C(m);return S.start(),S}},9862:(E,I,g)=>{"use strict";var _=g(8926).default;const b=g(9012),{promise:C}=g(6160);function m(){return(m=_(function*(R){return[...new Set((yield b(R,{srv:[{service:"xmpps-client",protocol:"tcp"},{service:"xmpp-client",protocol:"tcp"}]})).map(M=>M.uri))]})).apply(this,arguments)}function L(R,M){return k.apply(this,arguments)}function k(){return(k=_(function*(R,M){if(0===M.length)throw new Error("Couldn't connect");const D=M.shift(),v=R._findTransport(D);if(!v)return L(R,M);R._status("connecting",D);const w=v.prototype.socketParameters(D),F=new v.prototype.Socket;try{F.connect(w),yield C(F,"connect")}catch{return L(R,M)}R._attachSocket(F),F.emit("connect"),R.Transport=v,R.Socket=v.prototype.Socket,R.Parser=v.prototype.Parser})).apply(this,arguments)}E.exports=function({entity:R}){const M=R.connect;R.connect=function(){var D=_(function*(w){if(!w||w.match(/:\/\//))return M.call(this,w);const F=function S(R,M){return M.filter(D=>R._findTransport(D))}(R,yield function f(R){return m.apply(this,arguments)}(w));if(0===F.length)throw new Error("No compatible transport found.");try{yield L(R,F)}catch(Q){throw R._reset(),R._status("disconnect"),Q}});return function v(w){return D.apply(this,arguments)}}()}},8394:E=>{"use strict";function I(g){return g.startsWith("https")||g.startsWith("wss")}E.exports.q=function(_,b){let C,f;return C=I(_.uri)&&!I(b.uri)?-1:!I(_.uri)&&I(b.uri)?1:0,0!==C?C:(f=_.method===b.method?0:"websocket"===_.method?-1:"websocket"===b.method?1:"xbosh"===_.method?-1:"xbosh"===b.method?1:"httppoll"===_.method?-1:"httppoll"===b.method?1:0,0!==f?f:0)}},2830:(E,I,g)=>{"use strict";const _=global.fetch||g(2754),b=g(2371),C=g(8394).q;E.exports.resolve=function f(m){return _(`https://${m}/.well-known/host-meta`).then(S=>S.text()).then(S=>b(S).getChildren("Link").filter(L=>["urn:xmpp:alt-connections:websocket","urn:xmpp:alt-connections:httppoll","urn:xmpp:alt-connections:xbosh"].includes(L.attrs.rel)).map(({attrs:L})=>({rel:L.rel,href:L.href,method:L.rel.split(":").pop(),uri:L.href})).sort(C)).catch(()=>[])}},9012:(E,I,g)=>{"use strict";const _=g(6739),b=g(2830);E.exports=function(...f){return Promise.all([_.resolve?_.resolve(...f):Promise.resolve([]),b.resolve(...f)]).then(([m,S])=>m.concat(S))},_.resolve&&(E.exports.dns=_),E.exports.http=b},874:(E,I,g)=>{"use strict";var _=g(8926).default;const b=g(6320),C="urn:ietf:params:xml:ns:xmpp-bind";function f(k){return b("bind",{xmlns:C},k&&b("resource",{},k))}function m(k,R,M){return S.apply(this,arguments)}function S(){return(S=_(function*(k,R,M){const v=(yield R.set(f(M))).getChildText("jid");return k._jid(v),v})).apply(this,arguments)}E.exports=function({streamFeatures:k,iqCaller:R},M){k.use("bind",C,function L({iqCaller:k},R){return function(){var M=_(function*({entity:D},v){"function"==typeof R?yield R(w=>m(D,k,w)):yield m(D,k,R),v()});return function(D,v){return M.apply(this,arguments)}}()}({iqCaller:R},M))}},7049:(E,I,g)=>{"use strict";const _=g(4959);E.exports=function(C){C.use(_)}},5080:(E,I,g)=>{"use strict";const _=g(6758);E.exports=function(C){C.use(_)}},3635:(E,I,g)=>{"use strict";var _=g(8926).default;const{encode:b,decode:C}=g(512),f=g(9175),m=g(6320),S=g(4218),L="urn:ietf:params:xml:ns:xmpp-sasl";function R(D,v,w,F){return M.apply(this,arguments)}function M(){return(M=_(function*(D,v,w,F){const Q=D.create([w]);if(!Q)throw new Error("No compatible mechanism");const{domain:ge}=v.options,le={username:null,password:null,server:ge,host:ge,realm:ge,serviceType:"xmpp",serviceName:ge,...F};return new Promise((We,z)=>{const H=G=>{if(G.attrs.xmlns===L){if("challenge"===G.name){Q.challenge(C(G.text()));const W=Q.response(le);return void v.send(m("response",{xmlns:L,mechanism:Q.name},"string"==typeof W?b(W):""))}"failure"===G.name?z(f.fromElement(G)):"success"===G.name&&We(),v.removeListener("nonza",H)}};v.on("nonza",H),Q.clientFirst&&v.send(m("auth",{xmlns:L,mechanism:Q.name},b(Q.response(le))))})})).apply(this,arguments)}E.exports=function({streamFeatures:v},w){const F=new S;return v.use("mechanisms",L,function(){var Q=_(function*({stanza:ge,entity:le}){const We=function k(D){return D.getChild("mechanisms",L).children.map(v=>v.text())}(ge);let G=F._mechs.map(({name:W})=>W).filter(W=>We.includes(W))[0];"function"==typeof w?yield w(W=>R(F,le,G,W,ge),G):(!w.username&&!w.password&&(G="ANONYMOUS"),yield R(F,le,G,w,ge)),yield le.restart()});return function(ge){return Q.apply(this,arguments)}}()),{use:(...Q)=>F.use(...Q)}}},9175:(E,I,g)=>{"use strict";const _=g(8007);E.exports=class b extends _{constructor(...f){super(...f),this.name="SASLError"}}},1875:(E,I,g)=>{"use strict";var _=g(8926).default;const b=g(6320),C="urn:ietf:params:xml:ns:xmpp-session";E.exports=function({iqCaller:f,streamFeatures:m}){m.use("session",C,function(){var S=_(function*(L,k,R){return R.getChild("optional")||(yield f.set(b("session",C))),k()});return function(L,k,R){return S.apply(this,arguments)}}())}},2454:(E,I,g)=>{"use strict";const _=g(1310);E.exports=function({middleware:b}){return b.use(_()),{use:function C(f,m,S){return b.use((L,k)=>{const{stanza:R}=L;if(!R.is("features","http://etherx.jabber.org/streams"))return k();const M=R.getChild(f,m);return M?S(L,k,M):k()})}}}},1310:(E,I,g)=>{"use strict";var _=g(8926).default;E.exports=function(){return function(){var C=_(function*({stanza:f,entity:m},S){if(!f.is("features","http://etherx.jabber.org/streams"))return S();yield S(),m.jid&&m._status("online",m.jid)});return function(f,m){return C.apply(this,arguments)}}()}},1656:(E,I,g)=>{"use strict";const _=g(8672);E.exports=function({entity:C}){C.transports.push(_)}},8672:(E,I,g)=>{"use strict";const _=g(7013),b=g(1574),C=g(6320),f=g(4519),m="urn:ietf:params:xml:ns:xmpp-framing";class S extends b{send(k,...R){return!k.attrs.xmlns&&super.isStanza(k)&&(k.attrs.xmlns="jabber:client"),super.send(k,...R)}footerElement(){return new C.Element("close",{xmlns:m})}headerElement(){const k=super.headerElement();return k.name="open",k.attrs.xmlns=m,k}socketParameters(k){return k.match(/^wss?:\/\//)?k:void 0}}S.prototype.Socket=_,S.prototype.NS="jabber:client",S.prototype.Parser=f,E.exports=S},4519:(E,I,g)=>{"use strict";const{Parser:_,Element:b,XMLError:C}=g(6320);E.exports=class extends _{onStartElement(m,S){const L=new b(m,S),{cursor:k}=this;k&&k.append(L),this.cursor=L}onEndElement(m){const{cursor:S}=this;m===S.name?S.parent?this.cursor=S.parent:(S.is("open","urn:ietf:params:xml:ns:xmpp-framing")?this.emit("start",S):S.is("close","urn:ietf:params:xml:ns:xmpp-framing")?this.emit("end",S):this.emit("element",S),this.cursor=null):this.emit("error",new C(`${S.name} must be closed.`))}}},7013:(E,I,g)=>{"use strict";const _=g(2993),b=global.WebSocket||_,C=g(9069),f="ECONNERROR";E.exports=class m extends C{constructor(){super(),this.listeners=Object.create(null)}connect(L){this.url=L,this._attachSocket(new b(L,["xmpp"]))}_attachSocket(L){const k=this.socket=L,{listeners:R}=this;R.open=()=>{this.emit("connect")},R.message=({data:M})=>this.emit("data",M),R.error=M=>{let{error:D}=M;D||(D=new Error(`WebSocket ${f} ${this.url}`),D.errno=f,D.code=f),D.event=M,D.url=this.url,this.emit("error",D)},R.close=M=>{this._detachSocket(),this.emit("close",!M.wasClean,M)},k.addEventListener("open",R.open),k.addEventListener("message",R.message),k.addEventListener("error",R.error),k.addEventListener("close",R.close)}_detachSocket(){delete this.url;const{socket:L,listeners:k}=this;Object.getOwnPropertyNames(k).forEach(R=>{L.removeEventListener(R,k[R]),delete k[R]}),delete this.socket}end(){this.socket.close()}write(L,k){b===_?this.socket.send(L,k):(this.socket.send(L),k())}}},6320:(E,I,g)=>{"use strict";const _=g(6826),b=g(6229),C=g(1416),{escapeXML:f,unescapeXML:m,escapeXMLText:S,unescapeXMLText:L}=g(2104),k=g(163);I=E.exports=function R(...M){return _(...M)},Object.assign(I,{x:_,Element:b,Parser:C,escapeXML:f,unescapeXML:m,escapeXMLText:S,unescapeXMLText:L,XMLError:k})},6229:(E,I,g)=>{"use strict";const _=g(1251);E.exports=class b extends _{setAttrs(f){"string"==typeof f?this.attrs.xmlns=f:f&&Object.keys(f).forEach(function(m){if("__source"===m||"__self"===m)return;const S=f[m];null!=S&&(this.attrs[m.toString()]=S.toString())},this)}append(f){return(f=Array.isArray(f)?f:[f]).forEach(m=>{this.children.push(m),"object"==typeof m&&(m.parent=this)}),this}prepend(f){return(f=Array.isArray(f)?f:[f]).forEach(m=>{this.children.unshift(m),"object"==typeof m&&(m.parent=this)}),this}}},1416:(E,I,g)=>{"use strict";const _=g(9863),b=g(6229),C=g(9069),f=g(163);E.exports=(()=>{class S extends C{constructor(){super();const k=new _;this.root=null,this.cursor=null,k.on("startElement",this.onStartElement.bind(this)),k.on("endElement",this.onEndElement.bind(this)),k.on("text",this.onText.bind(this)),this.parser=k}onStartElement(k,R){const M=new b(k,R),{root:D,cursor:v}=this;D?v!==D&&v.append(M):(this.root=M,this.emit("start",M)),this.cursor=M}onEndElement(k){const{root:R,cursor:M}=this;if(k===M.name){if(M!==R)return M.parent?void(this.cursor=M.parent):(M.parent=R,this.emit("element",M),void(this.cursor=R));this.emit("end",R)}else this.emit("error",new f(`${M.name} must be closed.`))}onText(k){const{cursor:R}=this;R?R.t(k):this.emit("error",new f(`${k} must be a child.`))}write(k){this.parser.write(k)}end(k){k&&this.parser.write(k)}}return S.XMLError=f,S})()},163:E=>{"use strict";E.exports=class extends Error{constructor(...g){super(...g),this.name="XMLError"}}},2371:(E,I,g)=>{"use strict";const _=g(1416);E.exports=function(C){const f=new _;let m=null,S=null;if(f.on("start",L=>{m=L}),f.on("element",L=>{m.append(L)}),f.on("error",L=>{S=L}),f.write(C),f.end(),S)throw S;return m}},6826:(E,I,g)=>{"use strict";const _=g(6229);function b(f,m){!1===m||null==m||(m instanceof _?f.append(m):Array.isArray(m)?m.forEach(S=>b(f,S)):f.append(String(m)))}E.exports=function C(f,m,...S){const L=new _(f,m);for(let k=0;k<S.length;k++)b(L,S[k]);return L}},9069:E=>{"use strict";var _,I="object"==typeof Reflect?Reflect:null,g=I&&"function"==typeof I.apply?I.apply:function(H,G,W){return Function.prototype.apply.call(H,G,W)};_=I&&"function"==typeof I.ownKeys?I.ownKeys:Object.getOwnPropertySymbols?function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:function(H){return Object.getOwnPropertyNames(H)};var C=Number.isNaN||function(H){return H!=H};function f(){f.init.call(this)}E.exports=f,E.exports.once=function ge(z,H){return new Promise(function(G,W){function ue(ie){z.removeListener(H,Be),W(ie)}function Be(){"function"==typeof z.removeListener&&z.removeListener("error",ue),G([].slice.call(arguments))}We(z,H,Be,{once:!0}),"error"!==H&&function le(z,H,G){"function"==typeof z.on&&We(z,"error",H,G)}(z,ue,{once:!0})})},f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var m=10;function S(z){if("function"!=typeof z)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof z)}function L(z){return void 0===z._maxListeners?f.defaultMaxListeners:z._maxListeners}function k(z,H,G,W){var ue,Be,ie;if(S(G),void 0===(Be=z._events)?(Be=z._events=Object.create(null),z._eventsCount=0):(void 0!==Be.newListener&&(z.emit("newListener",H,G.listener?G.listener:G),Be=z._events),ie=Be[H]),void 0===ie)ie=Be[H]=G,++z._eventsCount;else if("function"==typeof ie?ie=Be[H]=W?[G,ie]:[ie,G]:W?ie.unshift(G):ie.push(G),(ue=L(z))>0&&ie.length>ue&&!ie.warned){ie.warned=!0;var Ze=new Error("Possible EventEmitter memory leak detected. "+ie.length+" "+String(H)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ze.name="MaxListenersExceededWarning",Ze.emitter=z,Ze.type=H,Ze.count=ie.length,function b(z){console&&console.warn&&console.warn(z)}(Ze)}return z}function R(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M(z,H,G){var W={fired:!1,wrapFn:void 0,target:z,type:H,listener:G},ue=R.bind(W);return ue.listener=G,W.wrapFn=ue,ue}function D(z,H,G){var W=z._events;if(void 0===W)return[];var ue=W[H];return void 0===ue?[]:"function"==typeof ue?G?[ue.listener||ue]:[ue]:G?function Q(z){for(var H=new Array(z.length),G=0;G<H.length;++G)H[G]=z[G].listener||z[G];return H}(ue):w(ue,ue.length)}function v(z){var H=this._events;if(void 0!==H){var G=H[z];if("function"==typeof G)return 1;if(void 0!==G)return G.length}return 0}function w(z,H){for(var G=new Array(H),W=0;W<H;++W)G[W]=z[W];return G}function We(z,H,G,W){if("function"==typeof z.on)W.once?z.once(H,G):z.on(H,G);else{if("function"!=typeof z.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof z);z.addEventListener(H,function ue(Be){W.once&&z.removeEventListener(H,ue),G(Be)})}}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(z){if("number"!=typeof z||z<0||C(z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+z+".");m=z}}),f.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(H){if("number"!=typeof H||H<0||C(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this},f.prototype.getMaxListeners=function(){return L(this)},f.prototype.emit=function(H){for(var G=[],W=1;W<arguments.length;W++)G.push(arguments[W]);var ue="error"===H,Be=this._events;if(void 0!==Be)ue=ue&&void 0===Be.error;else if(!ue)return!1;if(ue){var ie;if(G.length>0&&(ie=G[0]),ie instanceof Error)throw ie;var Ze=new Error("Unhandled error."+(ie?" ("+ie.message+")":""));throw Ze.context=ie,Ze}var $e=Be[H];if(void 0===$e)return!1;if("function"==typeof $e)g($e,this,G);else{var se=$e.length,Ft=w($e,se);for(W=0;W<se;++W)g(Ft[W],this,G)}return!0},f.prototype.on=f.prototype.addListener=function(H,G){return k(this,H,G,!1)},f.prototype.prependListener=function(H,G){return k(this,H,G,!0)},f.prototype.once=function(H,G){return S(G),this.on(H,M(this,H,G)),this},f.prototype.prependOnceListener=function(H,G){return S(G),this.prependListener(H,M(this,H,G)),this},f.prototype.off=f.prototype.removeListener=function(H,G){var W,ue,Be,ie,Ze;if(S(G),void 0===(ue=this._events))return this;if(void 0===(W=ue[H]))return this;if(W===G||W.listener===G)0==--this._eventsCount?this._events=Object.create(null):(delete ue[H],ue.removeListener&&this.emit("removeListener",H,W.listener||G));else if("function"!=typeof W){for(Be=-1,ie=W.length-1;ie>=0;ie--)if(W[ie]===G||W[ie].listener===G){Ze=W[ie].listener,Be=ie;break}if(Be<0)return this;0===Be?W.shift():function F(z,H){for(;H+1<z.length;H++)z[H]=z[H+1];z.pop()}(W,Be),1===W.length&&(ue[H]=W[0]),void 0!==ue.removeListener&&this.emit("removeListener",H,Ze||G)}return this},f.prototype.removeAllListeners=function(H){var G,W,ue;if(void 0===(W=this._events))return this;if(void 0===W.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==W[H]&&(0==--this._eventsCount?this._events=Object.create(null):delete W[H]),this;if(0===arguments.length){var ie,Be=Object.keys(W);for(ue=0;ue<Be.length;++ue)"removeListener"!==(ie=Be[ue])&&this.removeAllListeners(ie);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(G=W[H]))this.removeListener(H,G);else if(void 0!==G)for(ue=G.length-1;ue>=0;ue--)this.removeListener(H,G[ue]);return this},f.prototype.listeners=function(H){return D(this,H,!0)},f.prototype.rawListeners=function(H){return D(this,H,!1)},f.listenerCount=function(z,H){return"function"==typeof z.listenerCount?z.listenerCount(H):v.call(z,H)},f.prototype.listenerCount=v,f.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]}},3894:E=>{E.exports="function"==typeof Object.create?function(g,_){_&&(g.super_=_,g.prototype=Object.create(_.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,_){if(_){g.super_=_;var b=function(){};b.prototype=_.prototype,g.prototype=new b,g.prototype.constructor=g}}},4775:E=>{"use strict";E.exports=function I(g){if(!Array.isArray(g))throw new TypeError("Middleware stack must be an array!");for(const _ of g)if("function"!=typeof _)throw new TypeError("Middleware must be composed of functions!");return function(_,b){let C=-1;return function f(m){if(m<=C)return Promise.reject(new Error("next() called multiple times"));C=m;let S=g[m];if(m===g.length&&(S=b),!S)return Promise.resolve();try{return Promise.resolve(S(_,f.bind(null,m+1)))}catch(L){return Promise.reject(L)}}(0)}}},6105:(E,I,g)=>{"use strict";var _=g(4887),b=g(8574),C=g(2104),f=g(1251),m=g(8660),S=g(473),L=g(9472),k=g(2739),R=g(8336),M=g(3853),D=g(7875);(I=E.exports=function(){return L.apply(null,arguments)}).Element=f,I.equal=m.equal,I.nameEqual=m.name,I.attrsEqual=m.attrs,I.childrenEqual=m.children,I.isNode=R.isNode,I.isElement=R.isElement,I.isText=R.isText,I.clone=M,I.createElement=S,I.escapeXML=C.escapeXML,I.unescapeXML=C.unescapeXML,I.escapeXMLText=C.escapeXMLText,I.unescapeXMLText=C.unescapeXMLText,I.Parser=b,I.parse=_,I.tag=L,I.tagString=k,I.stringify=D},1251:(E,I,g)=>{"use strict";var _=g(2104),b=_.escapeXML,C=_.escapeXMLText,f=g(8660),m=f.equal,S=f.name,L=f.attrs,k=f.children,R=g(3853);function M(D,v){this.name=D,this.parent=null,this.children=[],this.attrs={},this.setAttrs(v)}M.prototype.is=function(D,v){return this.getName()===D&&(!v||this.getNS()===v)},M.prototype.getName=function(){return this.name.indexOf(":")>=0?this.name.substr(this.name.indexOf(":")+1):this.name},M.prototype.getNS=function(){if(this.name.indexOf(":")>=0){var D=this.name.substr(0,this.name.indexOf(":"));return this.findNS(D)}return this.findNS()},M.prototype.findNS=function(D){if(D){var v="xmlns:"+D;if(this.attrs[v])return this.attrs[v];if(this.parent)return this.parent.findNS(D)}else{if(this.attrs.xmlns)return this.attrs.xmlns;if(this.parent)return this.parent.findNS()}},M.prototype.getXmlns=function(){var D={};for(var v in this.parent&&(D=this.parent.getXmlns()),this.attrs){var w=v.match("xmlns:?(.*)");this.attrs.hasOwnProperty(v)&&w&&(D[this.attrs[v]]=w[1])}return D},M.prototype.setAttrs=function(D){"string"==typeof D?this.attrs.xmlns=D:D&&Object.keys(D).forEach(function(v){this.attrs[v]=D[v]},this)},M.prototype.getAttr=function(D,v){if(!v)return this.attrs[D];var w=this.getXmlns();return w[v]?this.attrs[[w[v],D].join(":")]:null},M.prototype.getChild=function(D,v){return this.getChildren(D,v)[0]},M.prototype.getChildren=function(D,v){for(var w=[],F=0;F<this.children.length;F++){var Q=this.children[F];Q.getName&&Q.getName()===D&&(!v||Q.getNS()===v)&&w.push(Q)}return w},M.prototype.getChildByAttr=function(D,v,w,F){return this.getChildrenByAttr(D,v,w,F)[0]},M.prototype.getChildrenByAttr=function(D,v,w,F){for(var Q=[],ge=0;ge<this.children.length;ge++){var le=this.children[ge];le.attrs&&le.attrs[D]===v&&(!w||le.getNS()===w)&&Q.push(le),F&&le.getChildrenByAttr&&Q.push(le.getChildrenByAttr(D,v,w,!0))}return F&&(Q=[].concat.apply([],Q)),Q},M.prototype.getChildrenByFilter=function(D,v){for(var w=[],F=0;F<this.children.length;F++){var Q=this.children[F];D(Q)&&w.push(Q),v&&Q.getChildrenByFilter&&w.push(Q.getChildrenByFilter(D,!0))}return v&&(w=[].concat.apply([],w)),w},M.prototype.getText=function(){for(var D="",v=0;v<this.children.length;v++){var w=this.children[v];("string"==typeof w||"number"==typeof w)&&(D+=w)}return D},M.prototype.getChildText=function(D,v){var w=this.getChild(D,v);return w?w.getText():null},M.prototype.getChildElements=function(){return this.getChildrenByFilter(function(D){return D instanceof M})},M.prototype.tree=M.prototype.root=function(){return this.parent?this.parent.root():this},M.prototype.up=function(){return this.parent?this.parent:this},M.prototype.c=function(D,v){return this.cnode(new M(D,v))},M.prototype.cnode=function(D){return this.children.push(D),"object"==typeof D&&(D.parent=this),D},M.prototype.t=function(D){return this.children.push(D),this},M.prototype.remove=function(D,v){return this.children=this.children.filter("string"==typeof D?function(F){return!(F.is&&F.is(D,v))}:function(F){return F!==D}),this},M.prototype.clone=function(){return R(this)},M.prototype.text=function(D){return D&&1===this.children.length?(this.children[0]=D,this):this.getText()},M.prototype.attr=function(D,v){return typeof v<"u"||null===v?(this.attrs||(this.attrs={}),this.attrs[D]=v,this):this.attrs[D]},M.prototype.toString=function(){var D="";return this.write(function(v){D+=v}),D},M.prototype.toJSON=function(){return{name:this.name,attrs:this.attrs,children:this.children.map(function(D){return D&&D.toJSON?D.toJSON():D})}},M.prototype._addChildren=function(D){D(">");for(var v=0;v<this.children.length;v++){var w=this.children[v];(w||0===w)&&(w.write?w.write(D):"string"==typeof w?D(C(w)):w.toString&&D(C(w.toString(10))))}D("</"),D(this.name),D(">")},M.prototype.write=function(D){for(var v in D("<"),D(this.name),this.attrs){var w=this.attrs[v];null!=w&&(D(" "),D(v),D('="'),"string"!=typeof w&&(w=w.toString()),D(b(w)),D('"'))}0===this.children.length?D("/>"):this._addChildren(D)},M.prototype.nameEquals=function(D){return S(this,D)},M.prototype.attrsEquals=function(D){return L(this,D)},M.prototype.childrenEquals=function(D){return k(this,D)},M.prototype.equals=function(D){return m(this,D)},E.exports=M},8574:(E,I,g)=>{"use strict";var _=g(9069).EventEmitter,b=g(3894),C=g(1251),f=g(9863),m=function(S){_.call(this);var L=this.Parser=S&&S.Parser||this.DefaultParser,k=this.Element=S&&S.Element||this.DefaultElement;this.parser=new L;var R,M=this;this.parser.on("startElement",function(D,v){var w=new k(D,v);R=R?R.cnode(w):w}),this.parser.on("endElement",function(D){R&&D===R.name&&(R.parent?R=R.parent:M.tree||(M.tree=R,R=void 0))}),this.parser.on("text",function(D){R&&R.t(D)}),this.parser.on("error",function(D){M.error=D,M.emit("error",D)})};b(m,_),m.prototype.DefaultParser=f,m.prototype.DefaultElement=C,m.prototype.write=function(S){this.parser.write(S)},m.prototype.end=function(S){this.parser.end(S),this.error||(this.tree?this.emit("tree",this.tree):this.emit("error",new Error("Incomplete document")))},E.exports=m},3853:E=>{"use strict";E.exports=function(g){for(var _=new g.constructor(g.name,g.attrs),b=0;b<g.children.length;b++){var C=g.children[b];_.cnode(C.clone?C.clone():C)}return _}},473:(E,I,g)=>{"use strict";var _=g(1251);E.exports=function(C,f){for(var m=new _(C,f),S=2;S<arguments.length;S++){var L=arguments[S];L&&m.cnode(L)}return m}},8660:E=>{"use strict";function I(C,f){return C.name===f.name}function g(C,f){var m=C.attrs,S=Object.keys(m),L=S.length;if(L!==Object.keys(f.attrs).length)return!1;for(var k=0,R=L;k<R;k++){var M=S[k],D=m[M];if(null==D||null==f.attrs[M]){if(D!==f.attrs[M])return!1}else if(D.toString()!==f.attrs[M].toString())return!1}return!0}function _(C,f){var m=C.children,S=m.length;if(S!==f.children.length)return!1;for(var L=0,k=S;L<k;L++){var R=m[L];if("string"==typeof R){if(R!==f.children[L])return!1}else if(!R.equals(f.children[L]))return!1}return!0}E.exports.name=I,E.exports.attrs=g,E.exports.children=_,E.exports.equal=function b(C,f){return!(!I(C,f)||!g(C,f)||!_(C,f))}},2104:(E,I)=>{"use strict";var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};function _(f){return g[f]}var b={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"};function C(f){if("#"===f[1]){var m;if(9===(m="x"===f[2]?parseInt(f.slice(3),16):parseInt(f.slice(2),10))||10===m||13===m||m>=32&&m<=55295||m>=57344&&m<=65533||m>=65536&&m<=1114111)return String.fromCodePoint(m);throw new Error("Illegal XML character 0x"+m.toString(16))}if(b[f])return b[f]||f;throw new Error("Illegal XML entity "+f)}I.escapeXML=function(m){return m.replace(/&|<|>|"|'/g,_)},I.unescapeXML=function(m){for(var S="",L=-1,k=-1,R=0;-1!==(L=m.indexOf("&",R))&&-1!==(k=m.indexOf(";",L+1));)S=S+m.substring(R,L)+C(m.substring(L,k+1)),R=k+1;return 0===R?m:S+=m.substring(R)},I.escapeXMLText=function(m){return m.replace(/&|<|>/g,_)},I.unescapeXMLText=function(m){return m.replace(/&(amp|#38|lt|#60|gt|#62);/g,C)}},8336:(E,I,g)=>{"use strict";var _=g(1251);E.exports.isNode=function(C){return C instanceof _||"string"==typeof C},E.exports.isElement=function(C){return C instanceof _},E.exports.isText=function(C){return"string"==typeof C}},4887:(E,I,g)=>{"use strict";var _=g(8574);E.exports=function(C,f){var m;m="function"==typeof f?new f:new _(f);var S=null,L=null;if(m.on("tree",function(k){S=k}),m.on("error",function(k){L=k}),m.write(C),m.end(),L)throw L;return S}},9863:(E,I,g)=>{"use strict";var _=g(3894),b=g(9069).EventEmitter,C=g(2104).unescapeXML,Q=E.exports=function(){b.call(this);var We,z,H,G,W,ue,Be,Ze,le=0,ie=0;this._handleTagOpening=function($e,se,Ft){$e?this.emit("endElement",se):(this.emit("startElement",se,Ft),W&&this.emit("endElement",se))},this.write=function($e){"string"!=typeof $e&&($e=$e.toString());var se=0;function Ft(){if("number"==typeof ie){var Ua=$e.substring(ie,se);return ie=void 0,Ua}}for(We&&($e=We+$e,se+=We.length,We=null);se<$e.length;se++){if(0===le){var Jt=$e.indexOf("<",se);-1!==Jt&&se!==Jt&&(se=Jt)}else if(8===le){var pe=$e.indexOf(Be,se);-1!==pe&&(se=pe)}else if(1===le){var Bs=$e.indexOf("--\x3e",se);-1!==Bs&&(se=Bs+2)}else if(10===le){var $s=$e.indexOf("]]>",se);-1!==$s&&(se=$s+2)}var Qe=$e.charCodeAt(se);switch(le){case 0:if(60===Qe){var Us=Ft();Us&&this.emit("text",C(Us)),le=3,ie=se+1,H={}}break;case 9:if(93===Qe&&"]>"===$e.substr(se+1,2)){var Hs=Ft();Hs&&this.emit("text",Hs),le=0}break;case 3:47===Qe&&ie===se?(ie=se+1,G=!0):33===Qe?"[CDATA["===$e.substr(se+1,7)?(ie=se+8,le=9):(ie=void 0,le=1):63===Qe?(ie=void 0,le=2):(Qe<=32||47===Qe||62===Qe)&&(z=Ft(),se--,le=4);break;case 1:if(62===Qe){var vr=$e.charCodeAt(se-1),uo=$e.charCodeAt(se-2);(45===vr&&45===uo||93===vr&&93===uo)&&(le=0)}break;case 2:62===Qe&&63===$e.charCodeAt(se-1)&&(le=0);break;case 4:62===Qe?(this._handleTagOpening(G,z,H),z=void 0,H=void 0,G=void 0,W=void 0,le=0,ie=se+1):47===Qe?W=!0:Qe>32&&(ie=se,le=5);break;case 5:(Qe<=32||61===Qe)&&(Ze=Ft(),se--,le=6);break;case 6:61===Qe&&(le=7);break;case 7:(34===Qe||39===Qe)&&(ue=Qe,Be=34===Qe?'"':"'",le=8,ie=se+1);break;case 8:if(Qe===ue){var cu=C(Ft());H[Ze]=cu,Ze=void 0,le=4}}}"number"==typeof ie&&ie<=$e.length&&(We=$e.slice(ie),ie=0)}};_(Q,b),Q.prototype.end=function(ge){ge&&this.write(ge),this.write=function(){}}},7875:E=>{"use strict";E.exports=function I(g,_,b){"number"==typeof _&&(_=" ".repeat(_)),b||(b=1);var C="";return C+="<"+g.name,Object.keys(g.attrs).forEach(function(f){C+=" "+f+'="'+g.attrs[f]+'"'}),g.children.length?(C+=">",g.children.forEach(function(f,m){_&&(C+="\n"+_.repeat(b)),C+="string"==typeof f?f:I(f,_,b+1)}),_&&(C+="\n"+_.repeat(b-1)),C+="</"+g.name+">"):C+="/>",C}},9472:(E,I,g)=>{"use strict";var _=g(2739),b=g(4887);E.exports=function(){return b(_.apply(null,arguments))}},2739:(E,I,g)=>{"use strict";var _=g(2104).escapeXML;E.exports=function(){for(var C=arguments[0],f="",m=1;m<arguments.length;m++)f+=C[m-1],f+=_(arguments[m]);return f+C[C.length-1]}},7477:function(E,I,g){!function(_,b){function C(){}C.prototype.name="ANONYMOUS",C.prototype.clientFirst=!0,C.prototype.response=function(f){return f.trace||""},C.prototype.challenge=function(f){},b.exports=C}(0,E=g.nmd(E))},4959:function(E,I,g){var b,C;b=E=g.nmd(E),C=g(7477),(b.exports=C).Mechanism=C},7978:function(E,I,g){!function(_,b){function C(){}C.prototype.name="PLAIN",C.prototype.clientFirst=!0,C.prototype.response=function(f){var m="";return m+=f.authzid||"",m+="\0",m+=f.username,(m+="\0")+f.password},C.prototype.challenge=function(f){return this},b.exports=C}(0,E=g.nmd(E))},6758:function(E,I,g){var b,C;b=E=g.nmd(E),C=g(7978),(b.exports=C).Mechanism=C},6496:function(E,I,g){!function(_,b){function C(){this._mechs=[]}C.prototype.use=function(f,m){return m||(f=(m=f).prototype.name),this._mechs.push({name:f,mech:m}),this},C.prototype.create=function(f){for(var m=0,S=this._mechs.length;m<S;m++)for(var L=0,k=f.length;L<k;L++){var R=this._mechs[m];if(R.name==f[L])return new R.mech}return null},b.exports=C}(0,E=g.nmd(E))},4218:function(E,I,g){var b,C;b=E=g.nmd(E),C=g(6496),(b.exports=C).Factory=C},8926:E=>{function I(_,b,C,f,m,S,L){try{var k=_[S](L),R=k.value}catch(M){return void C(M)}k.done?b(R):Promise.resolve(R).then(f,m)}E.exports=function g(_){return function(){var b=this,C=arguments;return new Promise(function(f,m){var S=_.apply(b,C);function L(R){I(S,f,m,L,k,"next",R)}function k(R){I(S,f,m,L,k,"throw",R)}L(void 0)})}},E.exports.__esModule=!0,E.exports.default=E.exports},2754:()=>{},6739:()=>{},2993:()=>{}},E=>{E(E.s=5935)}]);