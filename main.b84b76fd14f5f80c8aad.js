var c5=Object.defineProperty,Ld=Object.getOwnPropertySymbols,NT=Object.prototype.hasOwnProperty,OT=Object.prototype.propertyIsEnumerable,kT=(D,A,m)=>A in D?c5(D,A,{enumerable:!0,configurable:!0,writable:!0,value:m}):D[A]=m,FT=(D,A)=>{for(var m in A||(A={}))NT.call(A,m)&&kT(D,m,A[m]);if(Ld)for(var m of Ld(A))OT.call(A,m)&&kT(D,m,A[m]);return D},LT=(D,A)=>{var m={};for(var v in D)NT.call(D,v)&&A.indexOf(v)<0&&(m[v]=D[v]);if(null!=D&&Ld)for(var v of Ld(D))A.indexOf(v)<0&&OT.call(D,v)&&(m[v]=D[v]);return m};(self.webpackChunkngx_chat=self.webpackChunkngx_chat||[]).push([[179],{8255:D=>{function A(m){return Promise.resolve().then(()=>{var v=new Error("Cannot find module '"+m+"'");throw v.code="MODULE_NOT_FOUND",v})}A.keys=()=>[],A.resolve=A,A.id=8255,D.exports=A},2332:D=>{"use strict";D.exports.encode=function(m){return global.btoa(m)},D.exports.decode=function(m){return global.atob(m)}},6424:(D,A,m)=>{"use strict";const v=m(1843),T=m(998),w=m(8310);D.exports.Client=v,D.exports.xml=T,D.exports.jid=w},1843:(D,A,m)=>{"use strict";const v=m(7611);class T extends v{constructor(g){super(g),this.transports=[]}send(g,...y){return this.Transport.prototype.send.call(this,g,...y)}_findTransport(g){return this.transports.find(y=>{try{return void 0!==y.prototype.socketParameters(g)}catch(I){return!1}})}connect(g){const y=this._findTransport(g);if(!y)throw new Error("No compatible connection method found.");return this.Transport=y,this.Socket=y.prototype.Socket,this.Parser=y.prototype.Parser,super.connect(g)}socketParameters(...g){return this.Transport.prototype.socketParameters(...g)}header(...g){return this.Transport.prototype.header(...g)}headerElement(...g){return this.Transport.prototype.headerElement(...g)}footer(...g){return this.Transport.prototype.footer(...g)}footerElement(...g){return this.Transport.prototype.footerElement(...g)}}T.prototype.NS="jabber:client",D.exports=T},6023:(D,A,m)=>{"use strict";const{xml:v,jid:T,Client:w}=m(6424),g=m(156),y=m(6179),I=m(412),B=m(6246),V=m(5331),O=m(4040),R=m(4198),x=m(2274),C=m(9816),M=m(1098),j=m(794),k=m(6295),U=m(5967);D.exports.Ls=v,D.exports.kO=T,D.exports.Lp=function(te={}){const Ti=te,{resource:oe,credentials:Te,username:ae,password:ce}=Ti,tn=LT(Ti,["resource","credentials","username","password"]),{domain:us,service:ze}=tn;!us&&ze&&(tn.domain=g(ze));const mn=new w(tn),et=y({entity:mn}),se=I({entity:mn}),nn=B({entity:mn}),rn=V({middleware:nn}),pe=O({middleware:nn,entity:mn}),Ei=R({middleware:nn,entity:mn}),Si=x({entity:mn}),Je=C({streamFeatures:rn},Te||{username:ae,password:ce}),Di=M({iqCaller:pe,streamFeatures:rn},oe),Mi=j({iqCaller:pe,streamFeatures:rn}),jr=Object.entries({plain:U,anonymous:k}).map(([aa,ca])=>({[aa]:ca(Je)}));return Object.assign(mn,{entity:mn,reconnect:et,websocket:se,middleware:nn,streamFeatures:rn,iqCaller:pe,iqCallee:Ei,resolve:Si,sasl:Je,resourceBinding:Di,sessionEstablishment:Mi,mechanisms:jr})}},156:D=>{"use strict";D.exports=function(m){return(m.split("://")[1]||m).split(":")[0].split("/")[0]}},7611:(D,A,m)=>{"use strict";var v=m(1325).default;const{EventEmitter:T,promise:w}=m(9014),g=m(8310),y=m(998),I=m(6823),{parseHost:B,parseService:V}=m(6616);class R extends T{constructor(C={}){super(),this.jid=null,this.timeout=2e3,this.options=C,this.socketListeners=Object.create(null),this.parserListeners=Object.create(null),this.status="offline",this.socket=null,this.parser=null,this.root=null}_reset(){this.jid=null,this.status="offline",this._detachSocket(),this._detachParser()}_streamError(C,M){var j=this;return v(function*(){try{yield j.send(y("stream:error",{},[y(C,{xmlns:"urn:ietf:params:xml:ns:xmpp-streams"},M)]))}catch(k){}return j._end()})()}_onData(C){const M=C.toString("utf8");this.emit("input",M),this.parser.write(M)}_onParserError(C){this._streamError("bad-format"),this._detachParser(),this.emit("error",C)}_attachSocket(C){const M=this.socket=C,j=this.socketListeners;j.data=this._onData.bind(this),j.close=(k,U)=>{this._reset(),this._status("disconnect",{clean:!k,event:U})},j.connect=()=>{this._status("connect")},j.error=k=>{this.emit("error",k)},M.on("close",j.close),M.on("data",j.data),M.on("error",j.error),M.on("connect",j.connect)}_detachSocket(){const{socketListeners:C,socket:M}=this;return Object.getOwnPropertyNames(C).forEach(j=>{M.removeListener(j,C[j]),delete C[j]}),this.socket=null,M}_onElement(C){this.emit("element",C),this.emit(this.isStanza(C)?"stanza":"nonza",C),"stream:error"===C.name&&this._onStreamError(C)}_onStreamError(C){const M=I.fromElement(C);"see-other-host"===M.condition?this._onSeeOtherHost(M):this.emit("error",M),this._end()}_onSeeOtherHost(C){var M=this;return v(function*(){const{protocol:j}=V(M.options.service),k=C.element.getChildText("see-other-host"),{port:U}=B(k);let q;q=U?`${j||"xmpp:"}//${k}`:(j?`${j}//`:"")+k;try{yield w(M,"disconnect");const{domain:te,lang:oe}=M.options;yield M.connect(q),yield M.open({domain:te,lang:oe})}catch(te){M.emit("error",te)}})()}_attachParser(C){const M=this.parser=C,j=this.parserListeners;j.element=this._onElement.bind(this),j.error=this._onParserError.bind(this),j.end=k=>{this._detachParser(),this._status("close",k)},j.start=k=>{this._status("open",k)},M.on("error",j.error),M.on("element",j.element),M.on("end",j.end),M.on("start",j.start)}_detachParser(){const C=this.parserListeners;Object.getOwnPropertyNames(C).forEach(M=>{this.parser.removeListener(M,C[M]),delete C[M]}),this.parser=null}_jid(C){return this.jid=g(C),this.jid}_status(C,...M){this.status=C,this.emit("status",C,...M),this.emit(C,...M)}_end(){var C=this;return v(function*(){let M;try{M=yield C.close()}catch(j){}try{yield C.disconnect()}catch(j){}return M})()}start(){var C=this;return v(function*(){if("offline"!==C.status)throw new Error("Connection is not offline");const{service:M,domain:j,lang:k}=C.options;yield C.connect(M);const U=w(C,"online");return yield C.open({domain:j,lang:k}),U})()}connect(C){var M=this;return v(function*(){M._status("connecting",C);const j=new M.Socket;return M._attachSocket(j),j.connect(M.socketParameters(C)),w(j,"connect")})()}disconnect(C=this.timeout){var M=this;return v(function*(){M.socket&&M._status("disconnecting"),M.socket.end(),yield w(M.socket,"close","error",C)})()}open(C){var M=this;return v(function*(){M._status("opening"),"string"==typeof C&&(C={domain:C});const{domain:j,lang:k,timeout:U=M.timeout}=C,q=M.headerElement();return q.attrs.to=j,q.attrs["xml:lang"]=k,M.root=q,M._attachParser(new M.Parser),yield M.write(M.header(q)),w(M,"open","error",U)})()}stop(){var C=this;return v(function*(){const M=yield C._end();return"offline"!==C.status&&C._status("offline",M),M})()}close(C=this.timeout){var M=this;return v(function*(){const j=Promise.all([w(M.parser,"end","error",C),M.write(M.footer(M.footerElement()))]);M.parser&&M.socket&&M._status("closing");const[k]=yield j;return M.root=null,k})()}restart(){var C=this;return v(function*(){C._detachParser();const{domain:M,lang:j}=C.options;return C.open({domain:M,lang:j})})()}send(C){var M=this;return v(function*(){C.parent=M.root,M.emit("outgoing",C),yield M.write(C),M.emit("send",C)})()}sendReceive(C,M=this.timeout){return Promise.all([this.send(C),w(this,"element","error",M)]).then(([,j])=>j)}write(C){return new Promise((M,j)=>{if("closing"===this.status)return void j(new Error("Connection is closing"));const k=C.toString("utf8");this.socket.write(k,U=>{if(U)return j(U);this.emit("output",k),M()})})}isStanza(C){const{name:M}=C;return"iq"===M||"message"===M||"presence"===M}isNonza(C){return!this.isStanza(C)}header(C){return C.toString()}headerElement(){return new y.Element("",{version:"1.0",xmlns:this.NS})}footer(C){return C.toString()}footerElement(){}socketParameters(){}}R.prototype.NS="",R.prototype.Socket=null,R.prototype.Parser=null,D.exports=R},6823:(D,A,m)=>{"use strict";const v=m(1721);D.exports=class extends v{constructor(...g){super(...g),this.name="StreamError"}}},6616:D=>{"use strict";function A(T){let{port:w,hostname:g,protocol:y}=new URL(T);return"[::1]"===g&&(g="::1"),{port:w,hostname:g,protocol:y}}function m(T){const{port:w,hostname:g}=A(`http://${T}`);return{port:w,hostname:g}}Object.assign(D.exports,{parseURI:A,parseHost:m,parseService:function(T){return T.includes("://")?A(T):m(T)}})},1721:D=>{"use strict";class A extends Error{constructor(v,T,w){super(v+(T?` - ${T}`:"")),this.name="XMPPError",this.condition=v,this.text=T,this.application=w}static fromElement(v){const[T,w,g]=v.children;let y,I;w&&(w.is("text")?y=w:w&&(I=w),g&&(I=g));const B=new this(T.name,y?y.text():"",I);return B.element=v,B}}D.exports=A},9014:(D,A,m)=>{"use strict";const v=m(6797),T=m(5800),w=m(3246),g=m(8762),y=m(3105),I=m(1581);A.EventEmitter=y,A.timeout=v,A.delay=T,A.TimeoutError=w,A.promise=g,A.Deferred=I},1581:D=>{"use strict";D.exports=function(){this.promise=new Promise((m,v)=>{this.resolve=m,this.reject=v})}},3246:D=>{"use strict";D.exports=class extends Error{constructor(m){super(m),this.name="TimeoutError"}}},5800:D=>{"use strict";D.exports=function(m){let v;const T=new Promise(w=>{v=setTimeout(w,m)});return T.timeout=v,T}},8762:(D,A,m)=>{"use strict";const v=m(3246);D.exports=function(w,g,y="error",I){return new Promise((B,V)=>{let O;const R=()=>{clearTimeout(O),w.removeListener(g,C),w.removeListener(y,x)};function x(M){V(M),R()}function C(M){B(M),R()}w.once(g,C),y&&w.once(y,x),I&&(O=setTimeout(()=>{R(),V(new v)},I))})}},6797:(D,A,m)=>{"use strict";const v=m(3246),T=m(5800);D.exports=function(g,y){const I=T(y);return Promise.race([g.finally(function(){clearTimeout(I.timeout)}),I.then(()=>{throw new v})])}},4113:D=>{"use strict";D.exports=function(){let m;for(;!m;)m=Math.random().toString(36).slice(2,12);return m}},4198:(D,A,m)=>{"use strict";var v=m(1325).default;const T=m(998);function I({stanza:C}){return T("iq",{to:C.attrs.from,from:C.attrs.to,id:C.attrs.id})}function V(C,M,j){const k=I(C);return k.attrs.type="error",j&&k.append(j),k.append(M),k}function O(C,M){return T("error",{type:C},T(M,"urn:ietf:params:xml:ns:xmpp-stanzas"))}function x(C,M,j,k){return function(U,q){return U.type!==C|!U.element||!U.element.is(j,M)?q():k(U,q)}}D.exports=function({middleware:C,entity:M}){return C.use(function(C){return function(){var M=v(function*(k,U){if(!function({name:C,type:M}){return!("iq"!==C||"error"===M||"result"===M)}(k))return U();const{stanza:q}=k,te=q.getChildElements(),[oe]=te;if(!function({type:C},M,j){return!("get"!==C&&"set"!==C||1!==M.length||!j)}(k,te,oe))return V(k,O("modify","bad-request"),oe);let Te;k.element=oe;try{Te=yield U()}catch(ae){C.emit("error",ae),Te=O("cancel","internal-server-error")}return Te||(Te=O("cancel","service-unavailable")),Te instanceof T.Element&&Te.is("error")?V(k,Te,oe):function(C,M){const j=I(C);return j.attrs.type="result",M&&j.append(M),j}(k,Te instanceof T.Element?Te:void 0)});return function(k,U){return M.apply(this,arguments)}}()}(M)),{get(j,k,U){C.use(x("get",j,k,U))},set(j,k,U){C.use(x("set",j,k,U))}}}},4040:(D,A,m)=>{"use strict";var v=m(1325).default;const T=m(4113),w=m(1751),{Deferred:g}=m(9014),y=m(9014).timeout,I=m(998);class V{constructor({entity:R,middleware:x}){this.handlers=new Map,this.entity=R,this.middleware=x}start(){this.middleware.use(this._route.bind(this))}_route({type:R,name:x,id:C,stanza:M},j){if(!function({name:O,type:R}){return!("iq"!==O||"error"!==R&&"result"!==R)}({name:x,type:R}))return j();const k=this.handlers.get(C);if(!k)return j();"error"===R?k.reject(w.fromElement(M.getChild("error"))):k.resolve(M),this.handlers.delete(C)}request(R,x=3e4){var C=this;return v(function*(){R.attrs.id||(R.attrs.id=T());const M=new g;C.handlers.set(R.attrs.id,M);try{yield C.entity.send(R),yield y(M.promise,x)}catch(j){throw C.handlers.delete(R.attrs.id),j}return M.promise})()}_childRequest(R,x,C,...M){const{name:j}=x,{xmlns:k}=x.attrs;return this.request(I("iq",{type:R,to:C},x),...M).then(U=>U.getChild(j,k))}get(...R){var x=this;return v(function*(){return x._childRequest("get",...R)})()}set(...R){var x=this;return v(function*(){return x._childRequest("set",...R)})()}}D.exports=function(...R){const x=new V(...R);return x.start(),x}},8310:(D,A,m)=>{"use strict";const v=m(2353),T=m(773),w=m(1453);function g(...y){return y[1]||y[2]?new v(...y):w(...y)}(A=D.exports=g.bind()).jid=g,A.JID=v,A.equal=function(y,I){return y.equals(I)},A.detectEscape=T.detect,A.escapeLocal=T.escape,A.unescapeLocal=T.unescape,A.parse=w},2353:(D,A,m)=>{"use strict";const v=m(773);class T{constructor(g,y,I){if("string"!=typeof y||!y)throw new TypeError("Invalid domain.");this.setDomain(y),this.setLocal("string"==typeof g?g:""),this.setResource("string"==typeof I?I:"")}[Symbol.toPrimitive](g){return"number"===g?NaN:this.toString()}toString(g){let y=this._domain;return this._local&&(y=this.getLocal(g)+"@"+y),this._resource&&(y=y+"/"+this._resource),y}bare(){return this._resource?new T(this._local,this._domain,null):this}equals(g){return this._local===g._local&&this._domain===g._domain&&this._resource===g._resource}setLocal(g,y){return(y=y||v.detect(g))&&(g=v.escape(g)),this._local=g&&g.toLowerCase(),this}getLocal(g){let y=null;return y=(g=g||!1)?v.unescape(this._local):this._local,y}setDomain(g){return this._domain=g.toLowerCase(),this}getDomain(){return this._domain}setResource(g){return this._resource=g,this}getResource(){return this._resource}}Object.defineProperty(T.prototype,"local",{get:T.prototype.getLocal,set:T.prototype.setLocal}),Object.defineProperty(T.prototype,"domain",{get:T.prototype.getDomain,set:T.prototype.setDomain}),Object.defineProperty(T.prototype,"resource",{get:T.prototype.getResource,set:T.prototype.setResource}),D.exports=T},773:D=>{"use strict";D.exports.detect=function(A){return!(!A||-1===A.replace(/\\20/g,"").replace(/\\22/g,"").replace(/\\26/g,"").replace(/\\27/g,"").replace(/\\2f/g,"").replace(/\\3a/g,"").replace(/\\3c/g,"").replace(/\\3e/g,"").replace(/\\40/g,"").replace(/\\5c/g,"").search(/\\| |"|&|'|\/|:|<|>|@/g))},D.exports.escape=function(A){return null===A?null:A.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/"/g,"\\22").replace(/&/g,"\\26").replace(/'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40").replace(/\3a/g,"\x05c3a")},D.exports.unescape=function(A){return null===A?null:A.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")}},1453:(D,A,m)=>{"use strict";const v=m(2353);D.exports=function(w){let g,y;const I=w.indexOf("/");-1!==I&&(y=w.slice(I+1),w=w.slice(0,I));const B=w.indexOf("@");return-1!==B&&(g=w.slice(0,B),w=w.slice(B+1)),new v(g,w,y)}},6246:(D,A,m)=>{"use strict";const v=m(7367),T=m(3249),w=m(2168);function g(I,B,V){return function(O){const R=new V(I,O);return v(B)(R)}}function y(I){return function(B,V){V().then(O=>O&&I.send(O)).catch(O=>I.emit("error",O))}}D.exports=function({entity:I}){const B=[y(I)],V=[],O=g(I,B,T),R=g(I,V,w);return I.on("element",O),I.hookOutgoing=R,{use:x=>(B.push(x),x),filter:x=>(V.push(x),x)}}},6082:D=>{"use strict";D.exports=class{constructor(m,v){this.stanza=v,this.entity=m;const{name:T,attrs:w}=v,{type:g,id:y}=w;this.name=T,this.id=y||"",this.type="message"===T?g||"normal":"presence"===T?g||"available":g||"",this.from=null,this.to=null,this.local="",this.domain="",this.resource=""}}},3249:(D,A,m)=>{"use strict";const v=m(6082),T=m(8310);D.exports=class extends v{constructor(g,y){super(g,y);const{jid:I,domain:B}=g,V=y.attrs.to||I&&I.toString(),O=y.attrs.from||B;V&&(this.to=new T(V)),O&&(this.from=new T(O),this.local=this.from.local,this.domain=this.from.domain,this.resource=this.from.resource)}}},2168:(D,A,m)=>{"use strict";const v=m(6082),T=m(8310);D.exports=class extends v{constructor(g,y){super(g,y);const{jid:I,domain:B}=g,V=y.attrs.from||I&&I.toString(),O=y.attrs.to||B;V&&(this.from=new T(V)),O&&(this.to=new T(O),this.local=this.to.local,this.domain=this.to.domain,this.resource=this.to.resource)}}},1751:(D,A,m)=>{"use strict";const v=m(1721);D.exports=class extends v{constructor(g,y,I,B){super(g,y,I),this.type=B,this.name="StanzaError"}static fromElement(g){const y=super.fromElement(g);return y.type=g.attrs.type,y}}},6179:(D,A,m)=>{"use strict";var v=m(1325).default;const{EventEmitter:T}=m(9014);class w extends T{constructor(y){super(),this.delay=1e3,this.entity=y,this._timeout=null}scheduleReconnect(){var y=this;const{entity:I,delay:B,_timeout:V}=this;clearTimeout(V),this._timeout=setTimeout(v(function*(){if("disconnect"===I.status)try{yield y.reconnect()}catch(O){}}),B)}reconnect(){var y=this;return v(function*(){const{entity:I}=y;y.emit("reconnecting");const{service:B,domain:V,lang:O}=I.options;yield I.connect(B),yield I.open({domain:V,lang:O}),y.emit("reconnected")})()}start(){const{entity:y}=this,I={};I.disconnect=()=>{this.scheduleReconnect()},this.listeners=I,y.on("disconnect",I.disconnect)}stop(){const{entity:y,listeners:I,_timeout:B}=this;y.removeListener("disconnect",I.disconnect),clearTimeout(B)}}D.exports=function({entity:y}){const I=new w(y);return I.start(),I}},2274:(D,A,m)=>{"use strict";var v=m(1325).default;const T=m(8210),{promise:w}=m(9014);function y(){return(y=v(function*(O){return[...new Set((yield T(O,{srv:[{service:"xmpps-client",protocol:"tcp"},{service:"xmpp-client",protocol:"tcp"}]})).map(R=>R.uri))]})).apply(this,arguments)}function B(O,R){return V.apply(this,arguments)}function V(){return(V=v(function*(O,R){if(0===R.length)throw new Error("Couldn't connect");const x=R.shift(),C=O._findTransport(x);if(!C)return B(O,R);O._status("connecting",x);const M=C.prototype.socketParameters(x),j=new C.prototype.Socket;try{j.connect(M),yield w(j,"connect")}catch(k){return B(O,R)}O._attachSocket(j),j.emit("connect"),O.Transport=C,O.Socket=C.prototype.Socket,O.Parser=C.prototype.Parser})).apply(this,arguments)}D.exports=function({entity:O}){const R=O.connect;O.connect=function(){var x=v(function*(M){if(!M||M.match(/:\/\//))return R.call(this,M);const j=function(O,R){return R.filter(x=>O._findTransport(x))}(O,yield function(O){return y.apply(this,arguments)}(M));if(0===j.length)throw new Error("No compatible transport found.");try{yield B(O,j)}catch(k){throw O._reset(),O._status("disconnect"),k}});return function(M){return x.apply(this,arguments)}}()}},892:D=>{"use strict";function A(m){return m.startsWith("https")||m.startsWith("wss")}D.exports.q=function(v,T){let w,g;return w=A(v.uri)&&!A(T.uri)?-1:!A(v.uri)&&A(T.uri)?1:0,0!==w?w:(g=v.method===T.method?0:"websocket"===v.method?-1:"websocket"===T.method?1:"xbosh"===v.method?-1:"xbosh"===T.method?1:"httppoll"===v.method?-1:"httppoll"===T.method?1:0,0!==g?g:0)}},8542:(D,A,m)=>{"use strict";const v=global.fetch||m(2754),T=m(4971),w=m(892).q;D.exports.resolve=function(y){return v(`https://${y}/.well-known/host-meta`).then(I=>I.text()).then(I=>T(I).getChildren("Link").filter(B=>["urn:xmpp:alt-connections:websocket","urn:xmpp:alt-connections:httppoll","urn:xmpp:alt-connections:xbosh"].includes(B.attrs.rel)).map(({attrs:B})=>({rel:B.rel,href:B.href,method:B.rel.split(":").pop(),uri:B.href})).sort(w)).catch(()=>[])}},8210:(D,A,m)=>{"use strict";const v=m(6739),T=m(8542);D.exports=function(...g){return Promise.all([v.resolve?v.resolve(...g):Promise.resolve([]),T.resolve(...g)]).then(([y,I])=>y.concat(I))},v.resolve&&(D.exports.dns=v),D.exports.http=T},1098:(D,A,m)=>{"use strict";var v=m(1325).default;const T=m(998),w="urn:ietf:params:xml:ns:xmpp-bind";function g(V){return T("bind",{xmlns:w},V&&T("resource",{},V))}function y(V,O,R){return I.apply(this,arguments)}function I(){return(I=v(function*(V,O,R){const C=(yield O.set(g(R))).getChildText("jid");return V._jid(C),C})).apply(this,arguments)}D.exports=function({streamFeatures:V,iqCaller:O},R){V.use("bind",w,function({iqCaller:V},O){return function(){var R=v(function*({entity:x},C){"function"==typeof O?yield O(M=>y(x,V,M)):yield y(x,V,O),C()});return function(x,C){return R.apply(this,arguments)}}()}({iqCaller:O},R))}},6295:(D,A,m)=>{"use strict";const v=m(7698);D.exports=function(w){w.use(v)}},5967:(D,A,m)=>{"use strict";const v=m(2731);D.exports=function(w){w.use(v)}},9816:(D,A,m)=>{"use strict";var v=m(1325).default;const{encode:T,decode:w}=m(2332),g=m(6044),y=m(998),I=m(4615),B="urn:ietf:params:xml:ns:xmpp-sasl";function O(x,C,M,j){return R.apply(this,arguments)}function R(){return(R=v(function*(x,C,M,j){const k=x.create([M]);if(!k)throw new Error("No compatible mechanism");const{domain:U}=C.options,q=FT({username:null,password:null,server:U,host:U,realm:U,serviceType:"xmpp",serviceName:U},j);return new Promise((te,oe)=>{const Te=ae=>{if(ae.attrs.xmlns===B){if("challenge"===ae.name){k.challenge(w(ae.text()));const ce=k.response(q);return void C.send(y("response",{xmlns:B,mechanism:k.name},"string"==typeof ce?T(ce):""))}"failure"===ae.name?oe(g.fromElement(ae)):"success"===ae.name&&te(),C.removeListener("nonza",Te)}};C.on("nonza",Te),k.clientFirst&&C.send(y("auth",{xmlns:B,mechanism:k.name},T(k.response(q))))})})).apply(this,arguments)}D.exports=function({streamFeatures:C},M){const j=new I;return C.use("mechanisms",B,function(){var k=v(function*({stanza:U,entity:q}){const te=U.getChild("mechanisms",B).children.map(C=>C.text());let ae=j._mechs.map(({name:ce})=>ce).filter(ce=>te.includes(ce))[0];"function"==typeof M?yield M(ce=>O(j,q,ae,ce,U),ae):(!M.username&&!M.password&&(ae="ANONYMOUS"),yield O(j,q,ae,M,U)),yield q.restart()});return function(U){return k.apply(this,arguments)}}()),{use:(...k)=>j.use(...k)}}},6044:(D,A,m)=>{"use strict";const v=m(1721);D.exports=class extends v{constructor(...g){super(...g),this.name="SASLError"}}},794:(D,A,m)=>{"use strict";var v=m(1325).default;const T=m(998),w="urn:ietf:params:xml:ns:xmpp-session";D.exports=function({iqCaller:g,streamFeatures:y}){y.use("session",w,function(){var I=v(function*(B,V,O){return O.getChild("optional")||(yield g.set(T("session",w))),V()});return function(B,V,O){return I.apply(this,arguments)}}())}},5331:(D,A,m)=>{"use strict";const v=m(2018);D.exports=function({middleware:T}){return T.use(v()),{use:function(g,y,I){return T.use((B,V)=>{const{stanza:O}=B;if(!O.is("features","http://etherx.jabber.org/streams"))return V();const R=O.getChild(g,y);return R?I(B,V,R):V()})}}}},2018:(D,A,m)=>{"use strict";var v=m(1325).default;D.exports=function(){return function(){var w=v(function*({stanza:g,entity:y},I){if(!g.is("features","http://etherx.jabber.org/streams"))return I();yield I(),y.jid&&y._status("online",y.jid)});return function(g,y){return w.apply(this,arguments)}}()}},412:(D,A,m)=>{"use strict";const v=m(6918);D.exports=function({entity:w}){w.transports.push(v)}},6918:(D,A,m)=>{"use strict";const v=m(1210),T=m(7611),w=m(998),g=m(1060),y="urn:ietf:params:xml:ns:xmpp-framing";class I extends T{send(V,...O){return!V.attrs.xmlns&&super.isStanza(V)&&(V.attrs.xmlns="jabber:client"),super.send(V,...O)}footerElement(){return new w.Element("close",{xmlns:y})}headerElement(){const V=super.headerElement();return V.name="open",V.attrs.xmlns=y,V}socketParameters(V){return V.match(/^wss?:\/\//)?V:void 0}}I.prototype.Socket=v,I.prototype.NS="jabber:client",I.prototype.Parser=g,D.exports=I},1060:(D,A,m)=>{"use strict";const{Parser:v,Element:T,XMLError:w}=m(998);D.exports=class extends v{onStartElement(y,I){const B=new T(y,I),{cursor:V}=this;V&&V.append(B),this.cursor=B}onEndElement(y){const{cursor:I}=this;y===I.name?I.parent?this.cursor=I.parent:(I.is("open","urn:ietf:params:xml:ns:xmpp-framing")?this.emit("start",I):I.is("close","urn:ietf:params:xml:ns:xmpp-framing")?this.emit("end",I):this.emit("element",I),this.cursor=null):this.emit("error",new w(`${I.name} must be closed.`))}}},1210:(D,A,m)=>{"use strict";const v=m(2993),T=global.WebSocket||v,w=m(3105),g="ECONNERROR";D.exports=class extends w{constructor(){super(),this.listeners=Object.create(null)}connect(B){this.url=B,this._attachSocket(new T(B,["xmpp"]))}_attachSocket(B){const V=this.socket=B,{listeners:O}=this;O.open=()=>{this.emit("connect")},O.message=({data:R})=>this.emit("data",R),O.error=R=>{let{error:x}=R;x||(x=new Error(`WebSocket ${g} ${this.url}`),x.errno=g,x.code=g),x.event=R,x.url=this.url,this.emit("error",x)},O.close=R=>{this._detachSocket(),this.emit("close",!R.wasClean,R)},V.addEventListener("open",O.open),V.addEventListener("message",O.message),V.addEventListener("error",O.error),V.addEventListener("close",O.close)}_detachSocket(){delete this.url;const{socket:B,listeners:V}=this;Object.getOwnPropertyNames(V).forEach(O=>{B.removeEventListener(O,V[O]),delete V[O]}),delete this.socket}end(){this.socket.close()}write(B,V){T===v?this.socket.send(B,V):(this.socket.send(B),V())}}},998:(D,A,m)=>{"use strict";const v=m(3634),T=m(8254),w=m(8982),{escapeXML:g,unescapeXML:y,escapeXMLText:I,unescapeXMLText:B}=m(6597),V=m(2877);A=D.exports=function(...R){return v(...R)},Object.assign(A,{x:v,Element:T,Parser:w,escapeXML:g,unescapeXML:y,escapeXMLText:I,unescapeXMLText:B,XMLError:V})},8254:(D,A,m)=>{"use strict";const v=m(1504);D.exports=class extends v{setAttrs(g){"string"==typeof g?this.attrs.xmlns=g:g&&Object.keys(g).forEach(function(y){if("__source"===y||"__self"===y)return;const I=g[y];null!=I&&(this.attrs[y.toString()]=I.toString())},this)}append(g){return(g=Array.isArray(g)?g:[g]).forEach(y=>{this.children.push(y),"object"==typeof y&&(y.parent=this)}),this}prepend(g){return(g=Array.isArray(g)?g:[g]).forEach(y=>{this.children.unshift(y),"object"==typeof y&&(y.parent=this)}),this}}},8982:(D,A,m)=>{"use strict";const v=m(6188),T=m(8254),w=m(3105),g=m(2877);D.exports=(()=>{class I extends w{constructor(){super();const V=new v;this.root=null,this.cursor=null,V.on("startElement",this.onStartElement.bind(this)),V.on("endElement",this.onEndElement.bind(this)),V.on("text",this.onText.bind(this)),this.parser=V}onStartElement(V,O){const R=new T(V,O),{root:x,cursor:C}=this;x?C!==x&&C.append(R):(this.root=R,this.emit("start",R)),this.cursor=R}onEndElement(V){const{root:O,cursor:R}=this;if(V===R.name){if(R!==O)return R.parent?void(this.cursor=R.parent):(R.parent=O,this.emit("element",R),void(this.cursor=O));this.emit("end",O)}else this.emit("error",new g(`${R.name} must be closed.`))}onText(V){const{cursor:O}=this;O?O.t(V):this.emit("error",new g(`${V} must be a child.`))}write(V){this.parser.write(V)}end(V){V&&this.parser.write(V)}}return I.XMLError=g,I})()},2877:D=>{"use strict";D.exports=class extends Error{constructor(...m){super(...m),this.name="XMLError"}}},4971:(D,A,m)=>{"use strict";const v=m(8982);D.exports=function(w){const g=new v;let y=null,I=null;if(g.on("start",B=>{y=B}),g.on("element",B=>{y.append(B)}),g.on("error",B=>{I=B}),g.write(w),g.end(),I)throw I;return y}},3634:(D,A,m)=>{"use strict";const v=m(8254);function T(g,y){!1===y||null==y||(y instanceof v?g.append(y):Array.isArray(y)?y.forEach(I=>T(g,I)):g.append(String(y)))}D.exports=function(g,y,...I){const B=new v(g,y);for(let V=0;V<I.length;V++)T(B,I[V]);return B}},3105:D=>{"use strict";var v,A="object"==typeof Reflect?Reflect:null,m=A&&"function"==typeof A.apply?A.apply:function(U,q,te){return Function.prototype.apply.call(U,q,te)};v=A&&"function"==typeof A.ownKeys?A.ownKeys:Object.getOwnPropertySymbols?function(U){return Object.getOwnPropertyNames(U).concat(Object.getOwnPropertySymbols(U))}:function(U){return Object.getOwnPropertyNames(U)};var w=Number.isNaN||function(U){return U!=U};function g(){g.init.call(this)}D.exports=g,g.EventEmitter=g,g.prototype._events=void 0,g.prototype._eventsCount=0,g.prototype._maxListeners=void 0;var y=10;function I(k){return void 0===k._maxListeners?g.defaultMaxListeners:k._maxListeners}function B(k,U,q,te){var oe,Te,ae;if("function"!=typeof q)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof q);if(void 0===(Te=k._events)?(Te=k._events=Object.create(null),k._eventsCount=0):(void 0!==Te.newListener&&(k.emit("newListener",U,q.listener?q.listener:q),Te=k._events),ae=Te[U]),void 0===ae)ae=Te[U]=q,++k._eventsCount;else if("function"==typeof ae?ae=Te[U]=te?[q,ae]:[ae,q]:te?ae.unshift(q):ae.push(q),(oe=I(k))>0&&ae.length>oe&&!ae.warned){ae.warned=!0;var ce=new Error("Possible EventEmitter memory leak detected. "+ae.length+" "+String(U)+" listeners added. Use emitter.setMaxListeners() to increase limit");ce.name="MaxListenersExceededWarning",ce.emitter=k,ce.type=U,ce.count=ae.length,function(k){console&&console.warn&&console.warn(k)}(ce)}return k}function V(){for(var k=[],U=0;U<arguments.length;U++)k.push(arguments[U]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,m(this.listener,this.target,k))}function O(k,U,q){var te={fired:!1,wrapFn:void 0,target:k,type:U,listener:q},oe=V.bind(te);return oe.listener=q,te.wrapFn=oe,oe}function R(k,U,q){var te=k._events;if(void 0===te)return[];var oe=te[U];return void 0===oe?[]:"function"==typeof oe?q?[oe.listener||oe]:[oe]:q?function(k){for(var U=new Array(k.length),q=0;q<U.length;++q)U[q]=k[q].listener||k[q];return U}(oe):C(oe,oe.length)}function x(k){var U=this._events;if(void 0!==U){var q=U[k];if("function"==typeof q)return 1;if(void 0!==q)return q.length}return 0}function C(k,U){for(var q=new Array(U),te=0;te<U;++te)q[te]=k[te];return q}Object.defineProperty(g,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(k){if("number"!=typeof k||k<0||w(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");y=k}}),g.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},g.prototype.setMaxListeners=function(U){if("number"!=typeof U||U<0||w(U))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+U+".");return this._maxListeners=U,this},g.prototype.getMaxListeners=function(){return I(this)},g.prototype.emit=function(U){for(var q=[],te=1;te<arguments.length;te++)q.push(arguments[te]);var oe="error"===U,Te=this._events;if(void 0!==Te)oe=oe&&void 0===Te.error;else if(!oe)return!1;if(oe){var ae;if(q.length>0&&(ae=q[0]),ae instanceof Error)throw ae;var ce=new Error("Unhandled error."+(ae?" ("+ae.message+")":""));throw ce.context=ae,ce}var tn=Te[U];if(void 0===tn)return!1;if("function"==typeof tn)m(tn,this,q);else{var us=tn.length,ze=C(tn,us);for(te=0;te<us;++te)m(ze[te],this,q)}return!0},g.prototype.on=g.prototype.addListener=function(U,q){return B(this,U,q,!1)},g.prototype.prependListener=function(U,q){return B(this,U,q,!0)},g.prototype.once=function(U,q){if("function"!=typeof q)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof q);return this.on(U,O(this,U,q)),this},g.prototype.prependOnceListener=function(U,q){if("function"!=typeof q)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof q);return this.prependListener(U,O(this,U,q)),this},g.prototype.off=g.prototype.removeListener=function(U,q){var te,oe,Te,ae,ce;if("function"!=typeof q)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof q);if(void 0===(oe=this._events))return this;if(void 0===(te=oe[U]))return this;if(te===q||te.listener===q)0==--this._eventsCount?this._events=Object.create(null):(delete oe[U],oe.removeListener&&this.emit("removeListener",U,te.listener||q));else if("function"!=typeof te){for(Te=-1,ae=te.length-1;ae>=0;ae--)if(te[ae]===q||te[ae].listener===q){ce=te[ae].listener,Te=ae;break}if(Te<0)return this;0===Te?te.shift():function(k,U){for(;U+1<k.length;U++)k[U]=k[U+1];k.pop()}(te,Te),1===te.length&&(oe[U]=te[0]),void 0!==oe.removeListener&&this.emit("removeListener",U,ce||q)}return this},g.prototype.removeAllListeners=function(U){var q,te,oe;if(void 0===(te=this._events))return this;if(void 0===te.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==te[U]&&(0==--this._eventsCount?this._events=Object.create(null):delete te[U]),this;if(0===arguments.length){var ae,Te=Object.keys(te);for(oe=0;oe<Te.length;++oe)"removeListener"!==(ae=Te[oe])&&this.removeAllListeners(ae);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(q=te[U]))this.removeListener(U,q);else if(void 0!==q)for(oe=q.length-1;oe>=0;oe--)this.removeListener(U,q[oe]);return this},g.prototype.listeners=function(U){return R(this,U,!0)},g.prototype.rawListeners=function(U){return R(this,U,!1)},g.listenerCount=function(k,U){return"function"==typeof k.listenerCount?k.listenerCount(U):x.call(k,U)},g.prototype.listenerCount=x,g.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]}},7367:D=>{"use strict";D.exports=function(m){if(!Array.isArray(m))throw new TypeError("Middleware stack must be an array!");for(const v of m)if("function"!=typeof v)throw new TypeError("Middleware must be composed of functions!");return function(v,T){let w=-1;return function g(y){if(y<=w)return Promise.reject(new Error("next() called multiple times"));w=y;let I=m[y];if(y===m.length&&(I=T),!I)return Promise.resolve();try{return Promise.resolve(I(v,g.bind(null,y+1)))}catch(B){return Promise.reject(B)}}(0)}}},4115:(D,A,m)=>{"use strict";var v=m(3338),T=m(4009),w=m(6597),g=m(1504),y=m(1564),I=m(7413),B=m(8064),V=m(1640),O=m(5672),R=m(3555),x=m(205);(A=D.exports=function(){return B.apply(null,arguments)}).Element=g,A.equal=y.equal,A.nameEqual=y.name,A.attrsEqual=y.attrs,A.childrenEqual=y.children,A.isNode=O.isNode,A.isElement=O.isElement,A.isText=O.isText,A.clone=R,A.createElement=I,A.escapeXML=w.escapeXML,A.unescapeXML=w.unescapeXML,A.escapeXMLText=w.escapeXMLText,A.unescapeXMLText=w.unescapeXMLText,A.Parser=T,A.parse=v,A.tag=B,A.tagString=V,A.stringify=x},1504:(D,A,m)=>{"use strict";var v=m(6597),T=v.escapeXML,w=v.escapeXMLText,g=m(1564),y=g.equal,I=g.name,B=g.attrs,V=g.children,O=m(3555);function R(x,C){this.name=x,this.parent=null,this.children=[],this.attrs={},this.setAttrs(C)}R.prototype.is=function(x,C){return this.getName()===x&&(!C||this.getNS()===C)},R.prototype.getName=function(){return this.name.indexOf(":")>=0?this.name.substr(this.name.indexOf(":")+1):this.name},R.prototype.getNS=function(){if(this.name.indexOf(":")>=0){var x=this.name.substr(0,this.name.indexOf(":"));return this.findNS(x)}return this.findNS()},R.prototype.findNS=function(x){if(x){var C="xmlns:"+x;if(this.attrs[C])return this.attrs[C];if(this.parent)return this.parent.findNS(x)}else{if(this.attrs.xmlns)return this.attrs.xmlns;if(this.parent)return this.parent.findNS()}},R.prototype.getXmlns=function(){var x={};for(var C in this.parent&&(x=this.parent.getXmlns()),this.attrs){var M=C.match("xmlns:?(.*)");this.attrs.hasOwnProperty(C)&&M&&(x[this.attrs[C]]=M[1])}return x},R.prototype.setAttrs=function(x){"string"==typeof x?this.attrs.xmlns=x:x&&Object.keys(x).forEach(function(C){this.attrs[C]=x[C]},this)},R.prototype.getAttr=function(x,C){if(!C)return this.attrs[x];var M=this.getXmlns();return M[C]?this.attrs[[M[C],x].join(":")]:null},R.prototype.getChild=function(x,C){return this.getChildren(x,C)[0]},R.prototype.getChildren=function(x,C){for(var M=[],j=0;j<this.children.length;j++){var k=this.children[j];k.getName&&k.getName()===x&&(!C||k.getNS()===C)&&M.push(k)}return M},R.prototype.getChildByAttr=function(x,C,M,j){return this.getChildrenByAttr(x,C,M,j)[0]},R.prototype.getChildrenByAttr=function(x,C,M,j){for(var k=[],U=0;U<this.children.length;U++){var q=this.children[U];q.attrs&&q.attrs[x]===C&&(!M||q.getNS()===M)&&k.push(q),j&&q.getChildrenByAttr&&k.push(q.getChildrenByAttr(x,C,M,!0))}return j&&(k=[].concat.apply([],k)),k},R.prototype.getChildrenByFilter=function(x,C){for(var M=[],j=0;j<this.children.length;j++){var k=this.children[j];x(k)&&M.push(k),C&&k.getChildrenByFilter&&M.push(k.getChildrenByFilter(x,!0))}return C&&(M=[].concat.apply([],M)),M},R.prototype.getText=function(){for(var x="",C=0;C<this.children.length;C++){var M=this.children[C];("string"==typeof M||"number"==typeof M)&&(x+=M)}return x},R.prototype.getChildText=function(x,C){var M=this.getChild(x,C);return M?M.getText():null},R.prototype.getChildElements=function(){return this.getChildrenByFilter(function(x){return x instanceof R})},R.prototype.tree=R.prototype.root=function(){return this.parent?this.parent.root():this},R.prototype.up=function(){return this.parent?this.parent:this},R.prototype.c=function(x,C){return this.cnode(new R(x,C))},R.prototype.cnode=function(x){return this.children.push(x),"object"==typeof x&&(x.parent=this),x},R.prototype.t=function(x){return this.children.push(x),this},R.prototype.remove=function(x,C){return this.children=this.children.filter("string"==typeof x?function(j){return!(j.is&&j.is(x,C))}:function(j){return j!==x}),this},R.prototype.clone=function(){return O(this)},R.prototype.text=function(x){return x&&1===this.children.length?(this.children[0]=x,this):this.getText()},R.prototype.attr=function(x,C){return void 0!==C||null===C?(this.attrs||(this.attrs={}),this.attrs[x]=C,this):this.attrs[x]},R.prototype.toString=function(){var x="";return this.write(function(C){x+=C}),x},R.prototype.toJSON=function(){return{name:this.name,attrs:this.attrs,children:this.children.map(function(x){return x&&x.toJSON?x.toJSON():x})}},R.prototype._addChildren=function(x){x(">");for(var C=0;C<this.children.length;C++){var M=this.children[C];(M||0===M)&&(M.write?M.write(x):"string"==typeof M?x(w(M)):M.toString&&x(w(M.toString(10))))}x("</"),x(this.name),x(">")},R.prototype.write=function(x){for(var C in x("<"),x(this.name),this.attrs){var M=this.attrs[C];null!=M&&(x(" "),x(C),x('="'),"string"!=typeof M&&(M=M.toString()),x(T(M)),x('"'))}0===this.children.length?x("/>"):this._addChildren(x)},R.prototype.nameEquals=function(x){return I(this,x)},R.prototype.attrsEquals=function(x){return B(this,x)},R.prototype.childrenEquals=function(x){return V(this,x)},R.prototype.equals=function(x){return y(this,x)},D.exports=R},4009:(D,A,m)=>{"use strict";var v=m(3105).EventEmitter,T=m(158),w=m(1504),g=m(6188),y=function(I){v.call(this);var B=this.Parser=I&&I.Parser||this.DefaultParser,V=this.Element=I&&I.Element||this.DefaultElement;this.parser=new B;var O,R=this;this.parser.on("startElement",function(x,C){var M=new V(x,C);O=O?O.cnode(M):M}),this.parser.on("endElement",function(x){O&&x===O.name&&(O.parent?O=O.parent:R.tree||(R.tree=O,O=void 0))}),this.parser.on("text",function(x){O&&O.t(x)}),this.parser.on("error",function(x){R.error=x,R.emit("error",x)})};T(y,v),y.prototype.DefaultParser=g,y.prototype.DefaultElement=w,y.prototype.write=function(I){this.parser.write(I)},y.prototype.end=function(I){this.parser.end(I),this.error||(this.tree?this.emit("tree",this.tree):this.emit("error",new Error("Incomplete document")))},D.exports=y},3555:D=>{"use strict";D.exports=function(m){for(var v=new m.constructor(m.name,m.attrs),T=0;T<m.children.length;T++){var w=m.children[T];v.cnode(w.clone?w.clone():w)}return v}},7413:(D,A,m)=>{"use strict";var v=m(1504);D.exports=function(w,g){for(var y=new v(w,g),I=2;I<arguments.length;I++){var B=arguments[I];B&&y.cnode(B)}return y}},1564:D=>{"use strict";function A(w,g){return w.name===g.name}function m(w,g){var y=w.attrs,I=Object.keys(y),B=I.length;if(B!==Object.keys(g.attrs).length)return!1;for(var V=0,O=B;V<O;V++){var R=I[V],x=y[R];if(null==x||null==g.attrs[R]){if(x!==g.attrs[R])return!1}else if(x.toString()!==g.attrs[R].toString())return!1}return!0}function v(w,g){var y=w.children,I=y.length;if(I!==g.children.length)return!1;for(var B=0,V=I;B<V;B++){var O=y[B];if("string"==typeof O){if(O!==g.children[B])return!1}else if(!O.equals(g.children[B]))return!1}return!0}D.exports.name=A,D.exports.attrs=m,D.exports.children=v,D.exports.equal=function(w,g){return!(!A(w,g)||!m(w,g)||!v(w,g))}},6597:(D,A)=>{"use strict";var m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};function v(g){return m[g]}var T={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"};function w(g){if("#"===g[1]){var y;if(9===(y="x"===g[2]?parseInt(g.slice(3),16):parseInt(g.slice(2),10))||10===y||13===y||y>=32&&y<=55295||y>=57344&&y<=65533||y>=65536&&y<=1114111)return String.fromCodePoint(y);throw new Error("Illegal XML character 0x"+y.toString(16))}if(T[g])return T[g]||g;throw new Error("Illegal XML entity "+g)}A.escapeXML=function(y){return y.replace(/&|<|>|"|'/g,v)},A.unescapeXML=function(y){for(var I="",B=-1,V=-1,O=0;-1!==(B=y.indexOf("&",O))&&-1!==(V=y.indexOf(";",B+1));)I=I+y.substring(O,B)+w(y.substring(B,V+1)),O=V+1;return 0===O?y:I+=y.substring(O)},A.escapeXMLText=function(y){return y.replace(/&|<|>/g,v)},A.unescapeXMLText=function(y){return y.replace(/&(amp|#38|lt|#60|gt|#62);/g,w)}},5672:(D,A,m)=>{"use strict";var v=m(1504);D.exports.isNode=function(w){return w instanceof v||"string"==typeof w},D.exports.isElement=function(w){return w instanceof v},D.exports.isText=function(w){return"string"==typeof w}},3338:(D,A,m)=>{"use strict";var v=m(4009);D.exports=function(w,g){var y;y="function"==typeof g?new g:new v(g);var I=null,B=null;if(y.on("tree",function(V){I=V}),y.on("error",function(V){B=V}),y.write(w),y.end(),B)throw B;return I}},6188:(D,A,m)=>{"use strict";var v=m(158),T=m(3105).EventEmitter,w=m(6597).unescapeXML,k=D.exports=function(){T.call(this);var te,oe,Te,ae,ce,tn,us,mn,q=0,ze=0;this._handleTagOpening=function(et,se,nn){et?this.emit("endElement",se):(this.emit("startElement",se,nn),ce&&this.emit("endElement",se))},this.write=function(et){"string"!=typeof et&&(et=et.toString());var se=0;function nn(){if("number"==typeof ze){var Qc=et.substring(ze,se);return ze=void 0,Qc}}for(te&&(et=te+et,se+=te.length,te=null);se<et.length;se++){if(0===q){var rn=et.indexOf("<",se);-1!==rn&&se!==rn&&(se=rn)}else if(8===q){var pe=et.indexOf(us,se);-1!==pe&&(se=pe)}else if(1===q){var Ei=et.indexOf("--\x3e",se);-1!==Ei&&(se=Ei+2)}else if(10===q){var Si=et.indexOf("]]>",se);-1!==Si&&(se=Si+2)}var Je=et.charCodeAt(se);switch(q){case 0:if(60===Je){var Di=nn();Di&&this.emit("text",w(Di)),q=3,ze=se+1,Te={}}break;case 9:if(93===Je&&"]>"===et.substr(se+1,2)){var Mi=nn();Mi&&this.emit("text",Mi),q=0}break;case 3:47===Je&&ze===se?(ze=se+1,ae=!0):33===Je?"[CDATA["===et.substr(se+1,7)?(ze=se+8,q=9):(ze=void 0,q=1):63===Je?(ze=void 0,q=2):(Je<=32||47===Je||62===Je)&&(oe=nn(),se--,q=4);break;case 1:if(62===Je){var jr=et.charCodeAt(se-1),Ti=et.charCodeAt(se-2);(45===jr&&45===Ti||93===jr&&93===Ti)&&(q=0)}break;case 2:62===Je&&63===et.charCodeAt(se-1)&&(q=0);break;case 4:62===Je?(this._handleTagOpening(ae,oe,Te),oe=void 0,Te=void 0,ae=void 0,ce=void 0,q=0,ze=se+1):47===Je?ce=!0:Je>32&&(ze=se,q=5);break;case 5:(Je<=32||61===Je)&&(mn=nn(),se--,q=6);break;case 6:61===Je&&(q=7);break;case 7:(34===Je||39===Je)&&(tn=Je,us=34===Je?'"':"'",q=8,ze=se+1);break;case 8:if(Je===tn){var ca=w(nn());Te[mn]=ca,mn=void 0,q=4}}}"number"==typeof ze&&ze<=et.length&&(te=et.slice(ze),ze=0)}};v(k,T),k.prototype.end=function(U){U&&this.write(U),this.write=function(){}}},205:D=>{"use strict";D.exports=function A(m,v,T){"number"==typeof v&&(v=" ".repeat(v)),T||(T=1);var w="";return w+="<"+m.name,Object.keys(m.attrs).forEach(function(g){w+=" "+g+'="'+m.attrs[g]+'"'}),m.children.length?(w+=">",m.children.forEach(function(g,y){v&&(w+="\n"+v.repeat(T)),w+="string"==typeof g?g:A(g,v,T+1)}),v&&(w+="\n"+v.repeat(T-1)),w+="</"+m.name+">"):w+="/>",w}},8064:(D,A,m)=>{"use strict";var v=m(1640),T=m(3338);D.exports=function(){return T(v.apply(null,arguments))}},1640:(D,A,m)=>{"use strict";var v=m(6597).escapeXML;D.exports=function(){for(var w=arguments[0],g="",y=1;y<arguments.length;y++)g+=w[y-1],g+=v(arguments[y]);return g+w[w.length-1]}},158:D=>{D.exports="function"==typeof Object.create?function(m,v){v&&(m.super_=v,m.prototype=Object.create(v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}))}:function(m,v){if(v){m.super_=v;var T=function(){};T.prototype=v.prototype,m.prototype=new T,m.prototype.constructor=m}}},1553:function(D,A,m){!function(v,T){function w(){}w.prototype.name="ANONYMOUS",w.prototype.clientFirst=!0,w.prototype.response=function(g){return g.trace||""},w.prototype.challenge=function(g){},T.exports=w}(0,D=m.nmd(D))},7698:function(D,A,m){var T,w;T=D=m.nmd(D),w=m(1553),(T.exports=w).Mechanism=w},9099:function(D,A,m){!function(v,T){function w(){}w.prototype.name="PLAIN",w.prototype.clientFirst=!0,w.prototype.response=function(g){var y="";return y+=g.authzid||"",y+="\0",y+=g.username,(y+="\0")+g.password},w.prototype.challenge=function(g){return this},T.exports=w}(0,D=m.nmd(D))},2731:function(D,A,m){var T,w;T=D=m.nmd(D),w=m(9099),(T.exports=w).Mechanism=w},3380:function(D,A,m){!function(v,T){function w(){this._mechs=[]}w.prototype.use=function(g,y){return y||(g=(y=g).prototype.name),this._mechs.push({name:g,mech:y}),this},w.prototype.create=function(g){for(var y=0,I=this._mechs.length;y<I;y++)for(var B=0,V=g.length;B<V;B++){var O=this._mechs[y];if(O.name==g[B])return new O.mech}return null},T.exports=w}(0,D=m.nmd(D))},4615:function(D,A,m){var T,w;T=D=m.nmd(D),w=m(3380),(T.exports=w).Factory=w},776:(D,A,m)=>{"use strict";function v(n){return"function"==typeof n}let T=!1;const w={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else T&&console.log("RxJS: Back to a better error behavior. Thank you. <3");T=n},get useDeprecatedSynchronousErrorHandling(){return T}};function g(n){setTimeout(()=>{throw n},0)}const y={closed:!0,next(n){},error(n){if(w.useDeprecatedSynchronousErrorHandling)throw n;g(n)},complete(){}},I=Array.isArray||(n=>n&&"number"==typeof n.length);function B(n){return null!==n&&"object"==typeof n}const O=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,r)=>`${r+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class R{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:r,_unsubscribe:s,_subscriptions:i}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof R)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(v(s)){r&&(this._unsubscribe=void 0);try{s.call(this)}catch(o){e=o instanceof O?x(o.errors):[o]}}if(I(i)){let o=-1,a=i.length;for(;++o<a;){const c=i[o];if(B(c))try{c.unsubscribe()}catch(l){e=e||[],l instanceof O?e=e.concat(x(l.errors)):e.push(l)}}}if(e)throw new O(e)}add(e){let t=e;if(!e)return R.EMPTY;switch(typeof e){case"function":t=new R(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof R)){const i=t;t=new R,t._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=t;if(null===r)t._parentOrParents=this;else if(r instanceof R){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[t]:s.push(t),t}remove(e){const t=this._subscriptions;if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}}var n;function x(n){return n.reduce((e,t)=>e.concat(t instanceof O?t.errors:t),[])}R.EMPTY=((n=new R).closed=!0,n);const C="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class j extends R{constructor(e,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=y;break;case 1:if(!e){this.destination=y;break}if("object"==typeof e){e instanceof j?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new k(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new k(this,e,t,r)}}[C](){return this}static create(e,t,r){const s=new j(e,t,r);return s.syncErrorThrowable=!1,s}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class k extends j{constructor(e,t,r,s){super(),this._parentSubscriber=e;let i,o=this;v(t)?i=t:t&&(i=t.next,r=t.error,s=t.complete,t!==y&&(o=Object.create(t),v(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=r,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;w.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=w;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):g(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;g(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);w.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),w.useDeprecatedSynchronousErrorHandling)throw r;g(r)}}__tryOrSetError(e,t,r){if(!w.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(s){return w.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=s,e.syncErrorThrown=!0,!0):(g(s),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const te="function"==typeof Symbol&&Symbol.observable||"@@observable";function oe(n){return n}let ce=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,s){const{operator:i}=this,o=function(n,e,t){if(n){if(n instanceof j)return n;if(n[C])return n[C]()}return n||e||t?new j(n,e,t):new j(y)}(t,r,s);if(o.add(i?i.call(o,this.source):this.source||w.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),w.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){w.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),function(n){for(;n;){const{closed:e,destination:t,isStopped:r}=n;if(e||r)return!1;n=t&&t instanceof j?t:null}return!0}(t)?t.error(r):console.warn(r)}}forEach(t,r){return new(r=tn(r))((s,i)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(c){i(c),o&&o.unsubscribe()}},i,s)})}_subscribe(t){const{source:r}=this;return r&&r.subscribe(t)}[te](){return this}pipe(...t){return 0===t.length?this:function(n){return 0===n.length?oe:1===n.length?n[0]:function(t){return n.reduce((r,s)=>s(r),t)}}(t)(this)}toPromise(t){return new(t=tn(t))((r,s)=>{let i;this.subscribe(o=>i=o,o=>s(o),()=>r(i))})}}return n.create=e=>new n(e),n})();function tn(n){if(n||(n=w.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const ze=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class mn extends R{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}class et extends j{constructor(e){super(e),this.destination=e}}let se=(()=>{class n extends ce{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[C](){return new et(this)}lift(t){const r=new nn(this,this);return r.operator=t,r}next(t){if(this.closed)throw new ze;if(!this.isStopped){const{observers:r}=this,s=r.length,i=r.slice();for(let o=0;o<s;o++)i[o].next(t)}}error(t){if(this.closed)throw new ze;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:r}=this,s=r.length,i=r.slice();for(let o=0;o<s;o++)i[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new ze;this.isStopped=!0;const{observers:t}=this,r=t.length,s=t.slice();for(let i=0;i<r;i++)s[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new ze;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new ze;return this.hasError?(t.error(this.thrownError),R.EMPTY):this.isStopped?(t.complete(),R.EMPTY):(this.observers.push(t),new mn(this,t))}asObservable(){const t=new ce;return t.source=this,t}}return n.create=(e,t)=>new nn(e,t),n})();class nn extends se{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):R.EMPTY}}function rn(n){return n&&"function"==typeof n.schedule}function pe(n,e){return function(r){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Ei(n,e))}}class Ei{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new Si(e,this.project,this.thisArg))}}class Si extends j{constructor(e,t,r){super(e),this.project=t,this.count=0,this.thisArg=r||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Je=n=>e=>{for(let t=0,r=n.length;t<r&&!e.closed;t++)e.next(n[t]);e.complete()},jr="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Qc=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function oy(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Vd=n=>{if(n&&"function"==typeof n[te])return(n=>e=>{const t=n[te]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Qc(n))return Je(n);if(oy(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,g),e))(n);if(n&&"function"==typeof n[jr])return(n=>e=>{const t=n[jr]();for(;;){let r;try{r=t.next()}catch(s){return e.error(s),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${B(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function jd(n,e){return new ce(t=>{const r=new R;let s=0;return r.add(e.schedule(function(){s!==n.length?(t.next(n[s++]),t.closed||r.add(this.schedule())):t.complete()})),r})}function qt(n,e){return e?function(n,e){if(null!=n){if(function(n){return n&&"function"==typeof n[te]}(n))return function(n,e){return new ce(t=>{const r=new R;return r.add(e.schedule(()=>{const s=n[te]();r.add(s.subscribe({next(i){r.add(e.schedule(()=>t.next(i)))},error(i){r.add(e.schedule(()=>t.error(i)))},complete(){r.add(e.schedule(()=>t.complete()))}}))})),r})}(n,e);if(oy(n))return function(n,e){return new ce(t=>{const r=new R;return r.add(e.schedule(()=>n.then(s=>{r.add(e.schedule(()=>{t.next(s),r.add(e.schedule(()=>t.complete()))}))},s=>{r.add(e.schedule(()=>t.error(s)))}))),r})}(n,e);if(Qc(n))return jd(n,e);if(function(n){return n&&"function"==typeof n[jr]}(n)||"string"==typeof n)return function(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{const r=new R;let s;return r.add(()=>{s&&"function"==typeof s.return&&s.return()}),r.add(e.schedule(()=>{s=n[jr](),r.add(e.schedule(function(){if(t.closed)return;let i,o;try{const a=s.next();i=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(i),this.schedule())}))})),r})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof ce?n:new ce(Vd(n))}class xi extends j{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Ii extends j{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Ai(n,e){if(!e.closed)return n instanceof ce?n.subscribe(e):Vd(n)(e)}function Lt(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(Lt((s,i)=>qt(n(s,i)).pipe(pe((o,a)=>e(s,o,i,a))),t)):("number"==typeof e&&(t=e),r=>r.lift(new qT(n,t)))}class qT{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new GT(e,this.project,this.concurrent))}}class GT extends Ii{constructor(e,t,r=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(s){return void this.destination.error(s)}this.active++,this._innerSub(t)}_innerSub(e){const t=new xi(this),r=this.destination;r.add(t);const s=Ai(e,t);s!==t&&r.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function la(n=Number.POSITIVE_INFINITY){return Lt(oe,n)}function Bd(n,e){return e?jd(n,e):new ce(Je(n))}function $d(...n){let e=Number.POSITIVE_INFINITY,t=null,r=n[n.length-1];return rn(r)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof r&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof ce?n[0]:la(e)(Bd(n,t))}function Ud(){return function(e){return e.lift(new WT(e))}}class WT{constructor(e){this.connectable=e}call(e,t){const{connectable:r}=this;r._refCount++;const s=new zT(e,r),i=t.subscribe(s);return s.closed||(s.connection=r.connect()),i}}class zT extends j{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:r}=this,s=e._connection;this.connection=null,s&&(!r||s===r)&&s.unsubscribe()}}class ay extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new R,e.add(this.source.subscribe(new KT(this.getSubject(),this))),e.closed&&(this._connection=null,e=R.EMPTY)),e}refCount(){return Ud()(this)}}const QT=(()=>{const n=ay.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class KT extends et{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function XT(){return new se}function cy(){return n=>Ud()(function(n,e){return function(r){let s;s="function"==typeof n?n:function(){return n};const i=Object.create(r,QT);return i.source=r,i.subjectFactory=s,i}}(XT)(n))}function $e(n){for(let e in n)if(n[e]===$e)return e;throw Error("Could not find renamed property on target object.")}function Hd(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Re(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Re).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function qd(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ex=$e({__forward_ref__:$e});function tt(n){return n.__forward_ref__=tt,n.toString=function(){return Re(this())},n}function le(n){return ly(n)?n():n}function ly(n){return"function"==typeof n&&n.hasOwnProperty(ex)&&n.__forward_ref__===tt}class Hs extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function De(n){return"string"==typeof n?n:null==n?"":String(n)}function sn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():De(n)}function Kc(n,e){const t=e?` in ${e}`:"";throw new Hs("201",`No provider for ${sn(n)} found${t}`)}function Sn(n,e){null==n&&function(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function ie(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function wt(n){return{providers:n.providers||[],imports:n.imports||[]}}function $r(n){return uy(n,Jc)||uy(n,hy)}function uy(n,e){return n.hasOwnProperty(e)?n[e]:null}function dy(n){return n&&(n.hasOwnProperty(Wd)||n.hasOwnProperty(ax))?n[Wd]:null}const Jc=$e({\u0275prov:$e}),Wd=$e({\u0275inj:$e}),hy=$e({ngInjectableDef:$e}),ax=$e({ngInjectorDef:$e});var he=(()=>((he=he||{})[he.Default=0]="Default",he[he.Host=1]="Host",he[he.Self=2]="Self",he[he.SkipSelf=4]="SkipSelf",he[he.Optional=8]="Optional",he))();let zd;function ds(n){const e=zd;return zd=n,e}function fy(n,e,t){const r=$r(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&he.Optional?null:void 0!==e?e:void Kc(Re(n),"Injector")}function hs(n){return{toString:n}.toString()}var kn=(()=>((kn=kn||{})[kn.OnPush=0]="OnPush",kn[kn.Default=1]="Default",kn))(),Et=(()=>((Et=Et||{})[Et.Emulated=0]="Emulated",Et[Et.None=2]="None",Et[Et.ShadowDom=3]="ShadowDom",Et))();const lx="undefined"!=typeof globalThis&&globalThis,ux="undefined"!=typeof window&&window,dx="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ue=lx||"undefined"!=typeof global&&global||ux||dx,Ri={},Qe=[],Yc=$e({\u0275cmp:$e}),Qd=$e({\u0275dir:$e}),Kd=$e({\u0275pipe:$e}),py=$e({\u0275mod:$e}),hx=$e({\u0275loc:$e}),Ur=$e({\u0275fac:$e}),ua=$e({__NG_ELEMENT_ID__:$e});let fx=0;function ot(n){return hs(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===kn.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Qe,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Et.Emulated,id:"c",styles:n.styles||Qe,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.directives,i=n.features,o=n.pipes;return r.id+=fx++,r.inputs=_y(n.inputs,t),r.outputs=_y(n.outputs),i&&i.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(gy):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(my):null,r})}function gy(n){return on(n)||function(n){return n[Qd]||null}(n)}function my(n){return function(n){return n[Kd]||null}(n)}const yy={};function Vt(n){return hs(()=>{const e={type:n.type,bootstrap:n.bootstrap||Qe,declarations:n.declarations||Qe,imports:n.imports||Qe,exports:n.exports||Qe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(yy[n.id]=n.type),e})}function _y(n,e){if(null==n)return Ri;const t={};for(const r in n)if(n.hasOwnProperty(r)){let s=n[r],i=s;Array.isArray(s)&&(i=s[1],s=s[0]),t[s]=r,e&&(e[s]=i)}return t}const ue=ot;function yn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function on(n){return n[Yc]||null}function Fn(n,e){const t=n[py]||null;if(!t&&!0===e)throw new Error(`Type ${Re(n)} does not have '\u0275mod' property.`);return t}function vr(n){return Array.isArray(n)&&"object"==typeof n[1]}function er(n){return Array.isArray(n)&&!0===n[1]}function Zd(n){return 0!=(8&n.flags)}function tl(n){return 2==(2&n.flags)}function nl(n){return 1==(1&n.flags)}function tr(n){return null!==n.template}function Cx(n){return 0!=(512&n[2])}function Qs(n,e){return n.hasOwnProperty(Ur)?n[Ur]:null}class Cy{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function xt(){return by}function by(n){return n.type.prototype.ngOnChanges&&(n.setInput=Sx),Ex}function Ex(){const n=Ey(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Ri)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Sx(n,e,t,r){const s=Ey(n)||function(n,e){return n[wy]=e}(n,{previous:Ri,current:null}),i=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[t],c=o[a];i[a]=new Cy(c&&c.currentValue,e,o===Ri),n[r]=e}xt.ngInherit=!0;const wy="__ngSimpleChanges__";function Ey(n){return n[wy]||null}let th;function nh(){return void 0!==th?th:"undefined"!=typeof document?document:void 0}function ht(n){return!!n.listen}const My={createRenderer:(n,e)=>nh()};function St(n){for(;Array.isArray(n);)n=n[0];return n}function rl(n,e){return St(e[n])}function jn(n,e){return St(e[n.index])}function rh(n,e){return n.data[e]}function Fi(n,e){return n[e]}function Mn(n,e){const t=e[n];return vr(t)?t:t[0]}function Ty(n){return 4==(4&n[2])}function sh(n){return 128==(128&n[2])}function ps(n,e){return null==e?null:n[e]}function xy(n){n[18]=0}function ih(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const _e={lFrame:Fy(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Iy(){return _e.bindingsEnabled}function W(){return _e.lFrame.lView}function Ve(){return _e.lFrame.tView}function Pe(n){return _e.lFrame.contextLView=n,n[8]}function It(){let n=Ay();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ay(){return _e.lFrame.currentTNode}function Cr(n,e){const t=_e.lFrame;t.currentTNode=n,t.isParent=e}function oh(){return _e.lFrame.isParent}function ah(){_e.lFrame.isParent=!1}function sl(){return _e.isInCheckNoChangesMode}function il(n){_e.isInCheckNoChangesMode=n}function an(){const n=_e.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function br(){return _e.lFrame.bindingIndex}function Li(){return _e.lFrame.bindingIndex++}function Hr(n){const e=_e.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function jx(n,e){const t=_e.lFrame;t.bindingIndex=t.bindingRootIndex=n,ch(e)}function ch(n){_e.lFrame.currentDirectiveIndex=n}function Ny(){return _e.lFrame.currentQueryIndex}function uh(n){_e.lFrame.currentQueryIndex=n}function $x(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Oy(n,e,t){if(t&he.SkipSelf){let s=e,i=n;for(;!(s=s.parent,null!==s||t&he.Host||(s=$x(i),null===s||(i=i[15],10&s.type))););if(null===s)return!1;e=s,n=i}const r=_e.lFrame=ky();return r.currentTNode=e,r.lView=n,!0}function ol(n){const e=ky(),t=n[1];_e.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ky(){const n=_e.lFrame,e=null===n?null:n.child;return null===e?Fy(n):e}function Fy(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Ly(){const n=_e.lFrame;return _e.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Vy=Ly;function al(){const n=Ly();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function cn(){return _e.lFrame.selectedIndex}function gs(n){_e.lFrame.selectedIndex=n}function ft(){const n=_e.lFrame;return rh(n.tView,n.selectedIndex)}function cl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const i=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function ll(n,e,t){jy(n,e,3,t)}function ul(n,e,t,r){(3&n[2])===t&&jy(n,e,t,r)}function dh(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function jy(n,e,t,r){const i=null!=r?r:-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[18]+=65536),(a<i||-1==i)&&(Jx(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function Jx(n,e,t,r){const s=t[r]<0,i=t[r+1],a=n[s?-t[r]:t[r]];if(s){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{i.call(a)}finally{}}}else try{i.call(a)}finally{}}class ga{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function dl(n,e,t){const r=ht(n);let s=0;for(;s<t.length;){const i=t[s];if("number"==typeof i){if(0!==i)break;s++;const o=t[s++],a=t[s++],c=t[s++];r?n.setAttribute(e,a,c,o):e.setAttributeNS(o,a,c)}else{const o=i,a=t[++s];fh(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),s++}}return s}function By(n){return 3===n||4===n||6===n}function fh(n){return 64===n.charCodeAt(0)}function hl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const s=e[r];"number"==typeof s?t=s:0===t||$y(n,t,s,null,-1===t||2===t?e[++r]:null)}}return n}function $y(n,e,t,r,s){let i=0,o=n.length;if(-1===e)o=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==s&&(n[i+1]=s));if(r===n[i+1])return void(n[i+2]=s)}i++,null!==r&&i++,null!==s&&i++}-1!==o&&(n.splice(o,0,e),i=o+1),n.splice(i++,0,t),null!==r&&n.splice(i++,0,r),null!==s&&n.splice(i++,0,s)}function Uy(n){return-1!==n}function Vi(n){return 32767&n}function ji(n,e){let t=function(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let ph=!0;function fl(n){const e=ph;return ph=n,e}let nI=0;function ya(n,e){const t=mh(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,gh(r.data,n),gh(e,null),gh(r.blueprint,null));const s=pl(n,e),i=n.injectorIndex;if(Uy(s)){const o=Vi(s),a=ji(s,e),c=a[1].data;for(let l=0;l<8;l++)e[i+l]=a[o+l]|c[o+l]}return e[i+8]=s,i}function gh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function mh(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function pl(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,s=e;for(;null!==s;){const i=s[1],o=i.type;if(r=2===o?i.declTNode:1===o?s[6]:null,null===r)return-1;if(t++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function gl(n,e,t){!function(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ua)&&(r=t[ua]),null==r&&(r=t[ua]=nI++);const s=255&r;e.data[n+(s>>5)]|=1<<s}(n,e,t)}function Gy(n,e,t){if(t&he.Optional)return n;Kc(e,"NodeInjector")}function Wy(n,e,t,r){if(t&he.Optional&&void 0===r&&(r=null),0==(t&(he.Self|he.Host))){const s=n[9],i=ds(void 0);try{return s?s.get(e,r,t&he.Optional):fy(e,r,t&he.Optional)}finally{ds(i)}}return Gy(r,e,t)}function zy(n,e,t,r=he.Default,s){if(null!==n){const i=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ua)?n[ua]:void 0;return"number"==typeof e?e>=0?255&e:iI:e}(t);if("function"==typeof i){if(!Oy(e,n,r))return r&he.Host?Gy(s,t,r):Wy(e,t,r,s);try{const o=i(r);if(null!=o||r&he.Optional)return o;Kc(t)}finally{Vy()}}else if("number"==typeof i){let o=null,a=mh(n,e),c=-1,l=r&he.Host?e[16][6]:null;for((-1===a||r&he.SkipSelf)&&(c=-1===a?pl(n,e):e[a+8],-1!==c&&Jy(r,!1)?(o=e[1],a=Vi(c),e=ji(c,e)):a=-1);-1!==a;){const u=e[1];if(Ky(i,a,u.data)){const d=oI(a,e,t,o,r,l);if(d!==Qy)return d}c=e[a+8],-1!==c&&Jy(r,e[1].data[a+8]===l)&&Ky(i,a,e)?(o=u,a=Vi(c),e=ji(c,e)):a=-1}}}return Wy(e,t,r,s)}const Qy={};function iI(){return new Bi(It(),W())}function oI(n,e,t,r,s,i){const o=e[1],a=o.data[n+8],u=ml(a,o,t,null==r?tl(a)&&ph:r!=o&&0!=(3&a.type),s&he.Host&&i===a);return null!==u?_a(e,o,u,a):Qy}function ml(n,e,t,r,s){const i=n.providerIndexes,o=e.data,a=1048575&i,c=n.directiveStart,u=i>>20,h=s?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=o[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(s){const f=o[c];if(f&&tr(f)&&f.type===t)return c}return null}function _a(n,e,t,r){let s=n[t];const i=e.data;if(function(n){return n instanceof ga}(s)){const o=s;o.resolving&&function(n,e){throw new Hs("200",`Circular dependency in DI detected for ${n}`)}(sn(i[t]));const a=fl(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?ds(o.injectImpl):null;Oy(n,r,he.Default);try{s=n[t]=o.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&function(n,e,t){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=e.type.prototype;if(r){const o=by(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}s&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,s),i&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,i),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,i))}(t,i[t],e)}finally{null!==c&&ds(c),fl(a),o.resolving=!1,Vy()}}return s}function Ky(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Jy(n,e){return!(n&he.Self||n&he.Host&&e)}class Bi{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return zy(this._tNode,this._lView,e,void 0,t)}}function Bn(n){return hs(()=>{const e=n.prototype.constructor,t=e[Ur]||yh(e),r=Object.prototype;let s=Object.getPrototypeOf(n.prototype).constructor;for(;s&&s!==r;){const i=s[Ur]||yh(s);if(i&&i!==t)return i;s=Object.getPrototypeOf(s)}return i=>new i})}function yh(n){return ly(n)?()=>{const e=yh(le(n));return e&&e()}:Qs(n)}const Ui="__parameters__";function Ks(n,e,t){return hs(()=>{const r=function(n){return function(...t){if(n){const r=n(...t);for(const s in r)this[s]=r[s]}}}(e);function s(...i){if(this instanceof s)return r.apply(this,i),this;const o=new s(...i);return a.annotation=o,a;function a(c,l,u){const d=c.hasOwnProperty(Ui)?c[Ui]:Object.defineProperty(c,Ui,{value:[]})[Ui];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}class Ce{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ie({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const uI=new Ce("AnalyzeForEntryComponents"),yl=Function;function $n(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),$n(r,e)):e!==n&&e.push(r)}return e}function wr(n,e){n.forEach(t=>Array.isArray(t)?wr(t,e):e(t))}function vl(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Js(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ys(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Tn(n,e,t){let r=qi(n,e);return r>=0?n[1|r]=t:(r=~r,function(n,e,t,r){let s=n.length;if(s==e)n.push(t,r);else if(1===s)n.push(r,n[0]),n[0]=t;else{for(s--,n.push(n[s-1],n[s]);s>e;)n[s]=n[s-2],s--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function vh(n,e){const t=qi(n,e);if(t>=0)return n[1|t]}function qi(n,e){return function(n,e,t){let r=0,s=n.length>>t;for(;s!==r;){const i=r+(s-r>>1),o=n[i<<t];if(e===o)return i<<t;o>e?s=i:r=i+1}return~(s<<t)}(n,e,1)}const Ea={},bh="__NG_DI_FLAG__",Gi="ngTempTokenPath",CI=/\n/gm,wh="__source",Eh=$e({provide:String,useValue:$e});let Sa;function Wi(n){const e=Sa;return Sa=n,e}function wI(n,e=he.Default){if(void 0===Sa)throw new Error("inject() must be called from an injection context");return null===Sa?fy(n,void 0,e):Sa.get(n,e&he.Optional?null:void 0,e)}function z(n,e=he.Default){return(zd||wI)(le(n),e)}function Ys(n){const e=[];for(let t=0;t<n.length;t++){const r=le(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let s,i=he.Default;for(let o=0;o<r.length;o++){const a=r[o],c=EI(a);"number"==typeof c?-1===c?s=a.token:i|=c:s=a}e.push(z(s,i))}else e.push(z(r))}return e}function Da(n,e){return n[bh]=e,n.prototype[bh]=e,n}function EI(n){return n[bh]}function n_(n,e,t,r){const s=n[Gi];throw e[wh]&&s.unshift(e[wh]),n.message=function(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let s=Re(e);if(Array.isArray(e))s=e.map(Re).join(" -> ");else if("object"==typeof e){let i=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):Re(a)))}s=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${s}]: ${n.replace(CI,"\n  ")}`}("\n"+n.message,s,t,r),n.ngTokenPath=s,n[Gi]=null,n}const zi=Da(Ks("Inject",n=>({token:n})),-1),vn=Da(Ks("Optional"),8),_s=Da(Ks("SkipSelf"),4);let El,Sl;function Ki(n){var e;return(null===(e=function(){if(void 0===El&&(El=null,Ue.trustedTypes))try{El=Ue.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return El}())||void 0===e?void 0:e.createHTML(n))||n}function a_(n){var e;return(null===(e=function(){if(void 0===Sl&&(Sl=null,Ue.trustedTypes))try{Sl=Ue.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Sl}())||void 0===e?void 0:e.createHTML(n))||n}class Zs{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function xn(n){return n instanceof Zs?n.changingThisBreaksApplicationSecurity:n}function Er(n,e){const t=function(n){return n instanceof Zs&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class qI{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ki(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class GI{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Ki(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=Ki(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let s=t.length-1;0<s;s--){const o=t.item(s).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const zI=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,QI=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ta(n){return(n=String(n)).match(zI)||n.match(QI)?n:"unsafe:"+n}function h_(n){return(n=String(n)).split(",").map(e=>Ta(e.trim())).join(", ")}function Sr(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function xa(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const f_=Sr("area,br,col,hr,img,wbr"),p_=Sr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),g_=Sr("rp,rt"),Th=xa(f_,xa(p_,Sr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xa(g_,Sr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xa(g_,p_)),xh=Sr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ih=Sr("srcset"),m_=xa(xh,Ih,Sr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Sr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),KI=Sr("script,style,template");class JI{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=this.checkClobberedElement(t,t.nextSibling);if(s){t=s;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Th.hasOwnProperty(t))return this.sanitizedSomething=!0,!KI.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let s=0;s<r.length;s++){const i=r.item(s),o=i.name,a=o.toLowerCase();if(!m_.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=i.value;xh[a]&&(c=Ta(c)),Ih[a]&&(c=h_(c)),this.buf.push(" ",o,'="',y_(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Th.hasOwnProperty(t)&&!f_.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(y_(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const YI=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ZI=/([^\#-~ |!])/g;function y_(n){return n.replace(/&/g,"&amp;").replace(YI,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(ZI,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Dl;function __(n,e){let t=null;try{Dl=Dl||function(n){const e=new GI(n);return function(){try{return!!(new window.DOMParser).parseFromString(Ki(""),"text/html")}catch(n){return!1}}()?new qI(e):e}(n);let r=e?String(e):"";t=Dl.getInertBodyElement(r);let s=5,i=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=i,i=t.innerHTML,t=Dl.getInertBodyElement(r)}while(r!==i);return Ki((new JI).sanitizeChildren(Ah(t)||t))}finally{if(t){const r=Ah(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Ah(n){return"content"in n&&function(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ye=(()=>((Ye=Ye||{})[Ye.NONE=0]="NONE",Ye[Ye.HTML=1]="HTML",Ye[Ye.STYLE=2]="STYLE",Ye[Ye.SCRIPT=3]="SCRIPT",Ye[Ye.URL=4]="URL",Ye[Ye.RESOURCE_URL=5]="RESOURCE_URL",Ye))();function v_(n){const e=Aa();return e?a_(e.sanitize(Ye.HTML,n)||""):Er(n,"HTML")?a_(xn(n)):__(nh(),De(n))}function Ia(n){const e=Aa();return e?e.sanitize(Ye.URL,n)||"":Er(n,"URL")?xn(n):Ta(De(n))}function Aa(){const n=W();return n&&n[12]}const w_="__ngContext__";function zt(n,e){n[w_]=e}function Ph(n){const e=function(n){return n[w_]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Ml(n){return n.ngOriginalError}function gA(n,...e){n.error(...e)}class Xs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=this._findContext(e),s=function(n){return n&&n.ngErrorLogger||gA}(e);s(this._console,"ERROR",e),t&&s(this._console,"ORIGINAL ERROR",t),r&&s(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(n){return n.ngDebugContext}(e)||this._findContext(Ml(e)):null}_findOriginalError(e){let t=e&&Ml(e);for(;t&&Ml(t);)t=Ml(t);return t||null}}const R_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ue))();function Dr(n){return n instanceof Function?n():n}var In=(()=>((In=In||{})[In.Important=1]="Important",In[In.DashCase=2]="DashCase",In))();function kh(n,e){return undefined(n,e)}function Pa(n){const e=n[3];return er(e)?e[3]:e}function Fh(n){return F_(n[13])}function Lh(n){return F_(n[4])}function F_(n){for(;null!==n&&!er(n);)n=n[4];return n}function Yi(n,e,t,r,s){if(null!=r){let i,o=!1;er(r)?i=r:vr(r)&&(o=!0,r=r[0]);const a=St(r);0===n&&null!==t?null==s?U_(e,t,a):ei(e,t,a,s||null,!0):1===n&&null!==t?ei(e,t,a,s||null,!0):2===n?function(n,e,t){const r=xl(n,e);r&&function(n,e,t,r){ht(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=i&&function(n,e,t,r,s){const i=t[7];i!==St(t)&&Yi(e,n,r,i,s);for(let a=10;a<t.length;a++){const c=t[a];Na(c[1],c,n,e,r,i)}}(e,n,i,t,s)}}function jh(n,e,t){return ht(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function V_(n,e){const t=n[9],r=t.indexOf(e),s=e[3];1024&e[2]&&(e[2]&=-1025,ih(s,-1)),t.splice(r,1)}function Bh(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const s=r[17];null!==s&&s!==n&&V_(s,r),e>0&&(n[t-1][4]=r[4]);const i=Js(n,10+e);!function(n,e){Na(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=i[19];null!==o&&o.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function j_(n,e){if(!(256&e[2])){const t=e[11];ht(t)&&t.destroyNode&&Na(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return $h(n[1],n);for(;e;){let t=null;if(vr(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)vr(e)&&$h(e[1],e),e=e[3];null===e&&(e=n),vr(e)&&$h(e[1],e),t=e&&e[4]}e=t}}(e)}}function $h(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const s=e[t[r]];if(!(s instanceof ga)){const i=t[r+1];if(Array.isArray(i))for(let o=0;o<i.length;o+=2){const a=s[i[o]],c=i[o+1];try{c.call(a)}finally{}}else try{i.call(s)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,r=e[7];let s=-1;if(null!==t)for(let i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){const o=t[i+1],a="function"==typeof o?o(e):St(e[o]),c=r[s=t[i+2]],l=t[i+3];"boolean"==typeof l?a.removeEventListener(t[i],c,l):l>=0?r[s=l]():r[s=-l].unsubscribe(),i+=2}else{const o=r[s=t[i+1]];t[i].call(o)}if(null!==r){for(let i=s+1;i<r.length;i++)r[i]();e[7]=null}}(n,e),1===e[1].type&&ht(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&er(e[3])){t!==e[3]&&V_(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function B_(n,e,t){return function(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const s=n.data[r.directiveStart].encapsulation;if(s===Et.None||s===Et.Emulated)return null}return jn(r,t)}(n,e.parent,t)}function ei(n,e,t,r,s){ht(n)?n.insertBefore(e,t,r,s):e.insertBefore(t,r,s)}function U_(n,e,t){ht(n)?n.appendChild(e,t):e.appendChild(t)}function H_(n,e,t,r,s){null!==r?ei(n,e,t,r,s):U_(n,e,t)}function xl(n,e){return ht(n)?n.parentNode(e):e.parentNode}function q_(n,e,t){return W_(n,e,t)}let W_=function(n,e,t){return 40&n.type?jn(n,t):null};function Il(n,e,t,r){const s=B_(n,r,e),i=e[11],a=q_(r.parent||e[6],r,e);if(null!=s)if(Array.isArray(t))for(let c=0;c<t.length;c++)H_(i,s,t[c],a,!1);else H_(i,s,t,a,!1)}function Al(n,e){if(null!==e){const t=e.type;if(3&t)return jn(e,n);if(4&t)return Hh(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Al(n,r);{const s=n[e.index];return er(s)?Hh(-1,s):St(s)}}if(32&t)return kh(e,n)()||St(n[e.index]);{const r=Q_(n,e);return null!==r?Array.isArray(r)?r[0]:Al(Pa(n[16]),r):Al(n,e.next)}}return null}function Q_(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Hh(n,e){const t=10+n+1;if(t<e.length){const r=e[t],s=r[1].firstChild;if(null!==s)return Al(r,s)}return e[7]}function qh(n,e,t,r,s,i,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&zt(St(a),r),t.flags|=4),64!=(64&t.flags))if(8&c)qh(n,e,t.child,r,s,i,!1),Yi(e,n,s,a,i);else if(32&c){const l=kh(t,r);let u;for(;u=l();)Yi(e,n,s,u,i);Yi(e,n,s,a,i)}else 16&c?J_(n,e,r,t,s,i):Yi(e,n,s,a,i);t=o?t.projectionNext:t.next}}function Na(n,e,t,r,s,i){qh(t,r,n.firstChild,e,s,i,!1)}function J_(n,e,t,r,s,i){const o=t[16],c=o[6].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Yi(e,n,s,c[l],i);else qh(n,e,c,o[3],s,i,!0)}function Y_(n,e,t){ht(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Gh(n,e,t){ht(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Z_(n,e,t){let r=n.length;for(;;){const s=n.indexOf(e,t);if(-1===s)return s;if(0===s||n.charCodeAt(s-1)<=32){const i=e.length;if(s+i===r||n.charCodeAt(s+i)<=32)return s}t=s+1}}const X_="ng-template";function $A(n,e,t){let r=0;for(;r<n.length;){let s=n[r++];if(t&&"class"===s){if(s=n[r],-1!==Z_(s.toLowerCase(),e,0))return!0}else if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}}return!1}function ev(n){return 4===n.type&&n.value!==X_}function UA(n,e,t){return e===(4!==n.type||t?n.value:X_)}function HA(n,e,t){let r=4;const s=n.attrs||[],i=function(n){for(let e=0;e<n.length;e++)if(By(n[e]))return e;return n.length}(s);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!UA(n,c,t)||""===c&&1===e.length){if(nr(r))return!1;o=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!$A(n.attrs,l,t)){if(nr(r))return!1;o=!0}continue}const d=qA(8&r?"class":c,s,ev(n),t);if(-1===d){if(nr(r))return!1;o=!0;continue}if(""!==l){let h;h=d>i?"":s[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==Z_(f,l,0)||2&r&&l!==h){if(nr(r))return!1;o=!0}}}}else{if(!o&&!nr(r)&&!nr(c))return!1;if(o&&nr(c))continue;o=!1,r=c|1&r}}return nr(r)||o}function nr(n){return 0==(1&n)}function qA(n,e,t,r){if(null===e)return-1;let s=0;if(r||!t){let i=!1;for(;s<e.length;){const o=e[s];if(o===n)return s;if(3===o||6===o)i=!0;else{if(1===o||2===o){let a=e[++s];for(;"string"==typeof a;)a=e[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=i?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function tv(n,e,t=!1){for(let r=0;r<e.length;r++)if(HA(n,e[r],t))return!0;return!1}function QA(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let s=0;s<n.length;s++)if(n[s]!==r[s])continue e;return!0}}return!1}function nv(n,e){return n?":not("+e.trim()+")":e}function KA(n){let e=n[0],t=1,r=2,s="",i=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?s+="."+o:4&r&&(s+=" "+o);else""!==s&&!nr(o)&&(e+=nv(i,s),s=""),r=o,i=i||!nr(r);t++}return""!==s&&(e+=nv(i,s)),e}const be={};function L(n){rv(Ve(),W(),cn()+n,sl())}function rv(n,e,t,r){if(!r)if(3==(3&e[2])){const i=n.preOrderCheckHooks;null!==i&&ll(e,i,t)}else{const i=n.preOrderHooks;null!==i&&ul(e,i,0,t)}gs(t)}function Rl(n,e){return n<<17|e<<2}function rr(n){return n>>17&32767}function Wh(n){return 2|n}function qr(n){return(131068&n)>>2}function zh(n,e){return-131069&n|e<<2}function Qh(n){return 1|n}function fv(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r],i=t[r+1];if(-1!==i){const o=n.data[i];uh(s),o.contentQueries(2,e[i],i)}}}function Oa(n,e,t,r,s,i,o,a,c,l){const u=e.blueprint.slice();return u[0]=s,u[2]=140|r,xy(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=c||n&&n[12]||null,u[9]=l||n&&n[9]||null,u[6]=i,u[16]=2==e.type?n[16]:u,u}function Zi(n,e,t,r,s){let i=n.data[e];if(null===i)i=function(n,e,t,r,s){const i=Ay(),o=oh(),c=n.data[e]=function(n,e,t,r,s,i){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,t,e,r,s);return null===n.firstChild&&(n.firstChild=c),null!==i&&(o?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c)),c}(n,e,t,r,s),_e.lFrame.inI18n&&(i.flags|=64);else if(64&i.type){i.type=t,i.value=r,i.attrs=s;const o=function(){const n=_e.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();i.injectorIndex=null===o?-1:o.injectorIndex}return Cr(i,!0),i}function Xi(n,e,t,r){if(0===t)return-1;const s=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return s}function ka(n,e,t){ol(e);try{const r=n.viewQuery;null!==r&&df(1,r,t);const s=n.template;null!==s&&pv(n,e,s,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&fv(n,e),n.staticViewQueries&&df(2,n.viewQuery,t);const i=n.components;null!==i&&function(n,e){for(let t=0;t<e.length;t++)x1(n,e[t])}(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,al()}}function eo(n,e,t,r){const s=e[2];if(256==(256&s))return;ol(e);const i=sl();try{xy(e),function(n){_e.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&pv(n,e,t,2,r);const o=3==(3&s);if(!i)if(o){const l=n.preOrderCheckHooks;null!==l&&ll(e,l,null)}else{const l=n.preOrderHooks;null!==l&&ul(e,l,0,null),dh(e,0)}if(function(n){for(let e=Fh(n);null!==e;e=Lh(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const s=t[r],i=s[3];0==(1024&s[2])&&ih(i,1),s[2]|=1024}}}(e),function(n){for(let e=Fh(n);null!==e;e=Lh(e))for(let t=10;t<e.length;t++){const r=e[t],s=r[1];sh(r)&&eo(s,r,s.template,r[8])}}(e),null!==n.contentQueries&&fv(n,e),!i)if(o){const l=n.contentCheckHooks;null!==l&&ll(e,l)}else{const l=n.contentHooks;null!==l&&ul(e,l,1),dh(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)gs(~s);else{const i=s,o=t[++r],a=t[++r];jx(o,i),a(2,e[i])}}}finally{gs(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)T1(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&df(2,c,r),!i)if(o){const l=n.viewCheckHooks;null!==l&&ll(e,l)}else{const l=n.viewHooks;null!==l&&ul(e,l,2),dh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ih(e[3],-1))}finally{al()}}function c1(n,e,t,r){const s=e[10],i=!sl(),o=Ty(e);try{i&&!o&&s.begin&&s.begin(),o&&ka(n,e,r),eo(n,e,t,r)}finally{i&&!o&&s.end&&s.end()}}function pv(n,e,t,r,s){const i=cn(),o=2&r;try{gs(-1),o&&e.length>20&&rv(n,e,20,sl()),t(r,s)}finally{gs(i)}}function gv(n,e,t){if(Zd(e)){const s=e.directiveEnd;for(let i=e.directiveStart;i<s;i++){const o=n.data[i];o.contentQueries&&o.contentQueries(1,t[i],i)}}}function nf(n,e,t){!Iy()||(function(n,e,t,r){const s=t.directiveStart,i=t.directiveEnd;n.firstCreatePass||ya(t,e),zt(r,e);const o=t.initialInputs;for(let a=s;a<i;a++){const c=n.data[a],l=tr(c);l&&w1(e,t,c);const u=_a(e,n,a,t);zt(u,e),null!==o&&E1(0,a-s,u,c,0,o),l&&(Mn(t.index,e)[8]=u)}}(n,e,t,jn(t,e)),128==(128&t.flags)&&function(n,e,t){const r=t.directiveStart,s=t.directiveEnd,o=t.index,a=_e.lFrame.currentDirectiveIndex;try{gs(o);for(let c=r;c<s;c++){const l=n.data[c],u=e[c];ch(c),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Ev(l,u)}}finally{gs(-1),ch(a)}}(n,e,t))}function rf(n,e,t=jn){const r=e.localNames;if(null!==r){let s=e.index+1;for(let i=0;i<r.length;i+=2){const o=r[i+1],a=-1===o?t(e,n):n[o];n[s++]=a}}}function mv(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Ol(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Ol(n,e,t,r,s,i,o,a,c,l){const u=20+r,d=u+s,h=function(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:be);return t}(u,d),f="function"==typeof l?l():l;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function vv(n,e,t,r){const s=Iv(e);null===t?s.push(r):(s.push(t),n.firstCreatePass&&Av(n).push(r,s.length-1))}function Cv(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const s=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,s):t[r]=[e,s]}return t}function An(n,e,t,r,s,i,o,a){const c=jn(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(Nv(n,t,u,r,s),tl(e)&&function(n,e){const t=Mn(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),s=null!=o?o(s,e.value||"",r):s,ht(i)?i.setProperty(c,r,s):fh(r)||(c.setProperty?c.setProperty(r,s):c[r]=s))}function sf(n,e,t,r){let s=!1;if(Iy()){const i=function(n,e,t){const r=n.directiveRegistry;let s=null;if(r)for(let i=0;i<r.length;i++){const o=r[i];tv(t,o.selectors,!1)&&(s||(s=[]),gl(ya(t,e),n,o.type),tr(o)?(Sv(n,t),s.unshift(o)):s.push(o))}return s}(n,e,t),o=null===r?null:{"":-1};if(null!==i){s=!0,Dv(t,n.data.length,i.length);for(let u=0;u<i.length;u++){const d=i[u];d.providersResolver&&d.providersResolver(d)}let a=!1,c=!1,l=Xi(n,e,i.length,null);for(let u=0;u<i.length;u++){const d=i[u];t.mergedAttrs=hl(t.mergedAttrs,d.hostAttrs),Mv(n,t,e,l,d),b1(l,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),l++}!function(n,e){const r=e.directiveEnd,s=n.data,i=e.attrs,o=[];let a=null,c=null;for(let l=e.directiveStart;l<r;l++){const u=s[l],d=u.inputs,h=null===i||ev(e)?null:S1(d,i);o.push(h),a=Cv(d,l,a),c=Cv(u.outputs,l,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}(n,t)}o&&function(n,e,t){if(e){const r=n.localNames=[];for(let s=0;s<e.length;s+=2){const i=t[e[s+1]];if(null==i)throw new Hs("301",`Export of name '${e[s+1]}' not found!`);r.push(e[s],i)}}}(t,r,o)}return t.mergedAttrs=hl(t.mergedAttrs,t.attrs),s}function wv(n,e,t,r,s,i){const o=i.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(r,s,o)}}function Ev(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Sv(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function b1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;tr(e)&&(t[""]=n)}}function Dv(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Mv(n,e,t,r,s){n.data[r]=s;const i=s.factory||(s.factory=Qs(s.type)),o=new ga(i,tr(s),null);n.blueprint[r]=o,t[r]=o,wv(n,e,0,r,Xi(n,t,s.hostVars,be),s)}function w1(n,e,t){const r=jn(e,n),s=mv(t),i=n[10],o=kl(n,Oa(n,s,null,t.onPush?64:16,r,e,i,i.createRenderer(r,t),null,null));n[e.index]=o}function Mr(n,e,t,r,s,i){const o=jn(n,e);!function(n,e,t,r,s,i,o){if(null==i)ht(n)?n.removeAttribute(e,s,t):e.removeAttribute(s);else{const a=null==o?De(i):o(i,r||"",s);ht(n)?n.setAttribute(e,s,a,t):t?e.setAttributeNS(t,s,a):e.setAttribute(s,a)}}(e[11],o,i,n.value,t,r,s)}function E1(n,e,t,r,s,i){const o=i[e];if(null!==o){const a=r.setInput;for(let c=0;c<o.length;){const l=o[c++],u=o[c++],d=o[c++];null!==a?r.setInput(t,d,l,u):t[u]=d}}}function S1(n,e){let t=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;n.hasOwnProperty(s)&&(null===t&&(t=[]),t.push(s,n[s],e[r+1])),r+=2}else r+=2;else r+=4}return t}function Tv(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function T1(n,e){const t=Mn(e,n);if(sh(t)){const r=t[1];80&t[2]?eo(r,t,r.template,t[8]):t[5]>0&&af(t)}}function af(n){for(let r=Fh(n);null!==r;r=Lh(r))for(let s=10;s<r.length;s++){const i=r[s];if(1024&i[2]){const o=i[1];eo(o,i,o.template,i[8])}else i[5]>0&&af(i)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const s=Mn(t[r],n);sh(s)&&s[5]>0&&af(s)}}function x1(n,e){const t=Mn(e,n),r=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),ka(r,t,t[8])}function kl(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function cf(n){for(;n;){n[2]|=64;const e=Pa(n);if(Cx(n)&&!e)return n;n=e}return null}function uf(n,e,t){const r=e[10];r.begin&&r.begin();try{eo(n,e,n.template,t)}catch(s){throw Pv(e,s),s}finally{r.end&&r.end()}}function xv(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=Ph(t),s=r[1];c1(s,r,s.template,t)}}(n[8])}function df(n,e,t){uh(0),e(n,t)}const N1=(()=>Promise.resolve(null))();function Iv(n){return n[7]||(n[7]=[])}function Av(n){return n.cleanup||(n.cleanup=[])}function Pv(n,e){const t=n[9],r=t?t.get(Xs,null):null;r&&r.handleError(e)}function Nv(n,e,t,r,s){for(let i=0;i<t.length;){const o=t[i++],a=t[i++],c=e[o],l=n.data[o];null!==l.setInput?l.setInput(c,s,r,a):c[a]=s}}function Wr(n,e,t){const r=rl(e,n);!function(n,e,t){ht(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function Fl(n,e,t){let r=t?n.styles:null,s=t?n.classes:null,i=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?i=a:1==i?s=qd(s,a):2==i&&(r=qd(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=s:n.classesWithoutHost=s}const to=new Ce("INJECTOR",-1);class Ov{get(e,t=Ea){if(t===Ea){const r=new Error(`NullInjectorError: No provider for ${Re(e)}!`);throw r.name="NullInjectorError",r}return t}}const Fa=new Ce("Set Injector scope."),La={},F1={};let hf;function kv(){return void 0===hf&&(hf=new Ov),hf}function Fv(n,e=null,t=null,r){return new V1(n,t,e||kv(),r)}class V1{constructor(e,t,r,s=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&wr(t,a=>this.processProvider(a,e,t)),wr([e],a=>this.processInjectorType(a,[],i)),this.records.set(to,no(void 0,this));const o=this.records.get(Fa);this.scope=null!=o?o.value:null,this.source=s||("object"==typeof e?null:Re(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Ea,r=he.Default){this.assertNotDestroyed();const s=Wi(this),i=ds(void 0);try{if(!(r&he.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ce}(e)&&$r(e);a=c&&this.injectableDefInScope(c)?no(ff(e),La):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&he.Self?kv():this.parent).get(e,t=r&he.Optional&&t===Ea?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Gi]=o[Gi]||[]).unshift(Re(e)),s)throw o;return n_(o,e,"R3InjectorError",this.source)}throw o}finally{ds(i),Wi(s)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,s)=>e.push(Re(s))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,r){if(!(e=le(e)))return!1;let s=dy(e);const i=null==s&&e.ngModule||void 0,o=void 0===i?e:i,a=-1!==r.indexOf(o);if(void 0!==i&&(s=dy(i)),null==s)return!1;if(null!=s.imports&&!a){let u;r.push(o);try{wr(s.imports,d=>{this.processInjectorType(d,t,r)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];wr(f,p=>this.processProvider(p,h,f||Qe))}}this.injectorDefTypes.add(o);const c=Qs(o)||(()=>new o);this.records.set(o,no(c,La));const l=s.providers;if(null!=l&&!a){const u=e;wr(l,d=>this.processProvider(d,u,l))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,r){let s=ro(e=le(e))?e:le(e&&e.provide);const i=function(n,e,t){return Vv(n)?no(void 0,n.useValue):no(Lv(n),La)}(e);if(ro(e)||!0!==e.multi)this.records.get(s);else{let o=this.records.get(s);o||(o=no(void 0,La,!0),o.factory=()=>Ys(o.multi),this.records.set(s,o)),s=e,o.multi.push(e)}this.records.set(s,i)}hydrate(e,t){return t.value===La&&(t.value=F1,t.value=t.factory()),"object"==typeof t.value&&t.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=le(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function ff(n){const e=$r(n),t=null!==e?e.factory:Qs(n);if(null!==t)return t;if(n instanceof Ce)throw new Error(`Token ${Re(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const r=ys(e,"?");throw new Error(`Can't resolve all parameters for ${Re(n)}: (${r.join(", ")}).`)}const t=function(n){const e=n&&(n[Jc]||n[hy]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function Lv(n,e,t){let r;if(ro(n)){const s=le(n);return Qs(s)||ff(s)}if(Vv(n))r=()=>le(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ys(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))r=()=>z(le(n.useExisting));else{const s=le(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return Qs(s)||ff(s);r=()=>new s(...Ys(n.deps))}return r}function no(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Vv(n){return null!==n&&"object"==typeof n&&Eh in n}function ro(n){return"function"==typeof n}const jv=function(n,e,t){return function(n,e=null,t=null,r){const s=Fv(n,e,t,r);return s._resolveInjectorDefTypes(),s}({name:t},e,n,t)};let He=(()=>{class n{static create(t,r){return Array.isArray(t)?jv(t,r,""):jv(t.providers,t.parent,t.name||"")}}return n.THROW_IF_NOT_FOUND=Ea,n.NULL=new Ov,n.\u0275prov=ie({token:n,providedIn:"any",factory:()=>z(to)}),n.__NG_ELEMENT_ID__=-1,n})();function iR(n,e){cl(Ph(n)[1],It())}function it(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let s;if(tr(n))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");s=e.\u0275dir}if(s){if(t){r.push(s);const o=n;o.inputs=vf(n.inputs),o.declaredInputs=vf(n.declaredInputs),o.outputs=vf(n.outputs);const a=s.hostBindings;a&&lR(n,a);const c=s.viewQuery,l=s.contentQueries;if(c&&aR(n,c),l&&cR(n,l),Hd(n.inputs,s.inputs),Hd(n.declaredInputs,s.declaredInputs),Hd(n.outputs,s.outputs),tr(s)&&s.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(s.data.animation)}}const i=s.features;if(i)for(let o=0;o<i.length;o++){const a=i[o];a&&a.ngInherit&&a(n),a===it&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const s=n[r];s.hostVars=e+=s.hostVars,s.hostAttrs=hl(s.hostAttrs,t=hl(t,s.hostAttrs))}}(r)}function vf(n){return n===Ri?{}:n===Qe?[]:n}function aR(n,e){const t=n.viewQuery;n.viewQuery=t?(r,s)=>{e(r,s),t(r,s)}:e}function cR(n,e){const t=n.contentQueries;n.contentQueries=t?(r,s,i)=>{e(r,s,i),t(r,s,i)}:e}function lR(n,e){const t=n.hostBindings;n.hostBindings=t?(r,s)=>{e(r,s),t(r,s)}:e}let Ll=null;function so(){if(!Ll){const n=Ue.Symbol;if(n&&n.iterator)Ll=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ll=r)}}}return Ll}class ir{constructor(e){this.wrapped=e}static wrap(e){return new ir(e)}static unwrap(e){return ir.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof ir}}function ja(n){return!!Cf(n)&&(Array.isArray(n)||!(n instanceof Map)&&so()in n)}function Cf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Tr(n,e,t){return n[e]=t}function Qt(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ti(n,e,t,r){const s=Qt(n,e,t);return Qt(n,e+1,r)||s}function or(n,e,t,r){const s=W();return Qt(s,Li(),e)&&(Ve(),Mr(ft(),s,n,e,t,r)),or}function oo(n,e,t,r){return Qt(n,Li(),t)?e+De(t)+r:be}function re(n,e,t,r,s,i,o,a){const c=W(),l=Ve(),u=n+20,d=l.firstCreatePass?function(n,e,t,r,s,i,o,a,c){const l=e.consts,u=Zi(e,n,4,o||null,ps(l,a));sf(e,t,u,ps(l,c)),cl(e,u);const d=u.tViews=Ol(2,u,r,s,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,r,s,i,o):l.data[u];Cr(d,!1);const h=c[11].createComment("");Il(l,c,h,d),zt(h,c),kl(c,c[u]=Tv(h,c,h,d)),nl(d)&&nf(l,c,d),null!=o&&rf(c,d,a)}function jl(n){return Fi(_e.lFrame.contextLView,20+n)}function $(n,e=he.Default){const t=W();return null===t?z(n,e):zy(It(),t,le(n),e)}function H(n,e,t){const r=W();return Qt(r,Li(),e)&&An(Ve(),ft(),r,n,e,r[11],t,!1),H}function Df(n,e,t,r,s){const o=s?"class":"style";Nv(n,t,e.inputs[o],o,r)}function E(n,e,t,r){const s=W(),i=Ve(),o=20+n,a=s[11],c=s[o]=jh(a,e,_e.lFrame.currentNamespace),l=i.firstCreatePass?function(n,e,t,r,s,i,o){const a=e.consts,l=Zi(e,n,2,s,ps(a,i));return sf(e,t,l,ps(a,o)),null!==l.attrs&&Fl(l,l.attrs,!1),null!==l.mergedAttrs&&Fl(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,i,s,0,e,t,r):i.data[o];Cr(l,!0);const u=l.mergedAttrs;null!==u&&dl(a,c,u);const d=l.classes;null!==d&&Gh(a,c,d);const h=l.styles;null!==h&&Y_(a,c,h),64!=(64&l.flags)&&Il(i,s,c,l),0===_e.lFrame.elementDepthCount&&zt(c,s),_e.lFrame.elementDepthCount++,nl(l)&&(nf(i,s,l),gv(i,l,s)),null!==r&&rf(s,l)}function S(){let n=It();oh()?ah():(n=n.parent,Cr(n,!1));const e=n;_e.lFrame.elementDepthCount--;const t=Ve();t.firstCreatePass&&(cl(t,n),Zd(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&Df(t,e,W(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&Df(t,e,W(),e.stylesWithoutHost,!1)}function we(n,e,t,r){E(n,e,t,r),S()}function Rt(n,e,t){const r=W(),s=Ve(),i=n+20,o=s.firstCreatePass?function(n,e,t,r,s){const i=e.consts,o=ps(i,r),a=Zi(e,n,8,"ng-container",o);return null!==o&&Fl(a,o,!0),sf(e,t,a,ps(i,s)),null!==e.queries&&e.queries.elementStart(e,a),a}(i,s,r,e,t):s.data[i];Cr(o,!0);const a=r[i]=r[11].createComment("");Il(s,r,a,o),zt(a,r),nl(o)&&(nf(s,r,o),gv(s,o,r)),null!=t&&rf(r,o)}function Pt(){let n=It();const e=Ve();oh()?ah():(n=n.parent,Cr(n,!1)),e.firstCreatePass&&(cl(e,n),Zd(n)&&e.queries.elementEnd(n))}function vt(){return W()}function $a(n){return!!n&&"function"==typeof n.then}function EC(n){return!!n&&"function"==typeof n.subscribe}const $l=EC;function J(n,e,t,r){const s=W(),i=Ve(),o=It();return function(n,e,t,r,s,i,o,a){const c=nl(r),u=n.firstCreatePass&&Av(n),d=e[8],h=Iv(e);let f=!0;if(3&r.type||a){const _=jn(r,e),F=a?a(_):_,P=h.length,Q=a?Y=>a(St(Y[r.index])):r.index;if(ht(t)){let Y=null;if(!a&&c&&(Y=function(n,e,t,r){const s=n.cleanup;if(null!=s)for(let i=0;i<s.length-1;i+=2){const o=s[i];if(o===t&&s[i+1]===r){const a=e[7],c=s[i+2];return a.length>c?a[c]:null}"string"==typeof o&&(i+=2)}return null}(n,e,s,r.index)),null!==Y)(Y.__ngLastListenerFn__||Y).__ngNextListenerFn__=i,Y.__ngLastListenerFn__=i,f=!1;else{i=Mf(r,e,d,i,!1);const ye=t.listen(F,s,i);h.push(i,ye),u&&u.push(s,Q,P,P+1)}}else i=Mf(r,e,d,i,!0),F.addEventListener(s,i,o),h.push(i),u&&u.push(s,Q,P,o)}else i=Mf(r,e,d,i,!1);const p=r.outputs;let b;if(f&&null!==p&&(b=p[s])){const _=b.length;if(_)for(let F=0;F<_;F+=2){const Ge=e[b[F]][b[F+1]].subscribe(i),Ke=h.length;h.push(i,Ge),u&&u.push(s,r.index,Ke,-(Ke+1))}}}(i,s,s[11],o,n,e,!!t,r),J}function MC(n,e,t,r){try{return!1!==t(r)}catch(s){return Pv(n,s),!1}}function Mf(n,e,t,r,s){return function i(o){if(o===Function)return r;const a=2&n.flags?Mn(n.index,e):e;0==(32&e[2])&&cf(a);let c=MC(e,0,r,o),l=i.__ngNextListenerFn__;for(;l;)c=MC(e,0,l,o)&&c,l=l.__ngNextListenerFn__;return s&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Z(n=1){return function(n){return(_e.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,_e.lFrame.contextLView))[8]}(n)}function qR(n,e){let t=null;const r=function(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let s=0;s<e.length;s++){const i=e[s];if("*"!==i){if(null===r?tv(n,i,!0):QA(r,i))return s}else t=s}return t}function Ul(n){const e=W()[16][6];if(!e.projection){const r=e.projection=ys(n?n.length:1,null),s=r.slice();let i=e.child;for(;null!==i;){const o=n?qR(i,n):0;null!==o&&(s[o]?s[o].projectionNext=i:r[o]=i,s[o]=i),i=i.next}}}function Ua(n,e=0,t){const r=W(),s=Ve(),i=Zi(s,20+n,16,null,t||null);null===i.projection&&(i.projection=e),ah(),64!=(64&i.flags)&&function(n,e,t){J_(e[11],0,e,t,B_(n,t,e),q_(t.parent||e[6],t,e))}(s,r,i)}function Ha(n,e,t){return Tf(n,"",e,"",t),Ha}function Tf(n,e,t,r,s){const i=W(),o=oo(i,e,t,r);return o!==be&&An(Ve(),ft(),i,n,o,i[11],s,!1),Tf}function kC(n,e,t,r,s){const i=n[t+1],o=null===e;let a=r?rr(i):qr(i),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];zR(n[a],e)&&(c=!0,n[a+1]=r?Qh(u):Wh(u)),a=r?rr(u):qr(u)}c&&(n[t+1]=r?Wh(i):Qh(i))}function zR(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&qi(n,e)>=0}function Qr(n,e){return function(n,e,t,r){const s=W(),i=Ve(),o=Hr(2);i.firstUpdatePass&&function(n,e,t,r){const s=n.data;if(null===s[t+1]){const i=s[cn()],o=function(n,e){return e>=n.expandoStartIndex}(n,t);(function(n,e){return 0!=(n.flags&(e?16:32))})(i,r)&&null===e&&!o&&(e=!1),e=function(n,e,t,r){const s=function(n){const e=_e.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let i=r?e.residualClasses:e.residualStyles;if(null===s)0===(r?e.classBindings:e.styleBindings)&&(t=qa(t=xf(null,n,e,t,r),e.attrs,r),i=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==s)if(t=xf(s,n,e,t,r),null===i){let c=function(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==qr(r))return n[rr(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=xf(null,n,e,c[1],r),c=qa(c,e.attrs,r),function(n,e,t,r){n[rr(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else i=function(n,e,t){let r;const s=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<s;i++)r=qa(r,n[i].hostAttrs,t);return qa(r,e.attrs,t)}(n,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),t}(s,i,e,r),function(n,e,t,r,s,i){let o=i?e.classBindings:e.styleBindings,a=rr(o),c=qr(o);n[r]=t;let u,l=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||qi(d,u)>0)&&(l=!0)}else u=t;if(s)if(0!==c){const h=rr(n[a+1]);n[r+1]=Rl(h,a),0!==h&&(n[h+1]=zh(n[h+1],r)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Rl(a,0),0!==a&&(n[a+1]=zh(n[a+1],r)),a=r;else n[r+1]=Rl(c,0),0===a?a=r:n[c+1]=zh(n[c+1],r),c=r;l&&(n[r+1]=Wh(n[r+1])),kC(n,u,r,!0),kC(n,u,r,!1),function(n,e,t,r,s){const i=s?n.residualClasses:n.residualStyles;null!=i&&"string"==typeof e&&qi(i,e)>=0&&(t[r+1]=Qh(t[r+1]))}(e,u,n,r,i),o=Rl(a,c),i?e.classBindings=o:e.styleBindings=o}(s,i,e,t,o,r)}}(i,n,o,r),e!==be&&Qt(s,o,e)&&function(n,e,t,r,s,i,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1];Hl(function(n){return 1==(1&n)}(l)?zC(c,e,t,s,qr(l),o):void 0)||(Hl(i)||function(n){return 2==(2&n)}(l)&&(i=zC(c,null,t,s,a,o)),function(n,e,t,r,s){const i=ht(n);if(e)s?i?n.addClass(t,r):t.classList.add(r):i?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:In.DashCase;if(null==s)i?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof s&&s.endsWith("!important");a&&(s=s.slice(0,-10),o|=In.Important),i?n.setStyle(t,r,s,o):t.style.setProperty(r,s,a?"important":"")}}}(r,o,rl(cn(),t),s,i))}(i,i.data[cn()],s,s[11],n,s[o+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Re(xn(n)))),n}(e,t),r,o)}(n,e,null,!0),Qr}function xf(n,e,t,r,s){let i=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(i=e[a],r=qa(r,i.hostAttrs,s),i!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function qa(n,e,t){const r=t?1:2;let s=-1;if(null!==e)for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?s=o:s===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Tn(n,o,!!t||e[++i]))}return void 0===n?null:n}function zC(n,e,t,r,s,i){const o=null===e;let a;for(;s>0;){const c=n[s],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let h=t[s+1];h===be&&(h=d?Qe:void 0);let f=d?vh(h,r):u===r?h:void 0;if(l&&!Hl(f)&&(f=vh(c,r)),Hl(f)&&(a=f,o))return a;const p=n[s+1];s=o?rr(p):qr(p)}if(null!==e){let c=i?e.residualClasses:e.residualStyles;null!=c&&(a=vh(c,r))}return a}function Hl(n){return void 0!==n}function G(n,e=""){const t=W(),r=Ve(),s=n+20,i=r.firstCreatePass?Zi(r,s,1,e,null):r.data[s],o=t[s]=function(n,e){return ht(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Il(r,t,o,i),Cr(i,!1)}function pt(n){return We("",n,""),pt}function We(n,e,t){const r=W(),s=oo(r,n,e,t);return s!==be&&Wr(r,cn(),s),We}function If(n,e,t,r,s){const i=W(),o=function(n,e,t,r,s,i){const a=ti(n,br(),t,s);return Hr(2),a?e+De(t)+r+De(s)+i:be}(i,n,e,t,r,s);return o!==be&&Wr(i,cn(),o),If}function Af(n,e,t){const r=W();return Qt(r,Li(),e)&&An(Ve(),ft(),r,n,e,r[11],t,!0),Af}const ni=void 0;var xP=["en",[["a","p"],["AM","PM"],ni],[["AM","PM"],ni,ni],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ni,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ni,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ni,"{1} 'at' {0}",ni],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===t?1:5}];let yo={};function un(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=fb(e);if(t)return t;const r=e.split("-")[0];if(t=fb(r),t)return t;if("en"===r)return xP;throw new Error(`Missing locale data for the locale "${n}".`)}function fb(n){return n in yo||(yo[n]=Ue.ng&&Ue.ng.common&&Ue.ng.common.locales&&Ue.ng.common.locales[n]),yo[n]}var ee=(()=>((ee=ee||{})[ee.LocaleId=0]="LocaleId",ee[ee.DayPeriodsFormat=1]="DayPeriodsFormat",ee[ee.DayPeriodsStandalone=2]="DayPeriodsStandalone",ee[ee.DaysFormat=3]="DaysFormat",ee[ee.DaysStandalone=4]="DaysStandalone",ee[ee.MonthsFormat=5]="MonthsFormat",ee[ee.MonthsStandalone=6]="MonthsStandalone",ee[ee.Eras=7]="Eras",ee[ee.FirstDayOfWeek=8]="FirstDayOfWeek",ee[ee.WeekendRange=9]="WeekendRange",ee[ee.DateFormat=10]="DateFormat",ee[ee.TimeFormat=11]="TimeFormat",ee[ee.DateTimeFormat=12]="DateTimeFormat",ee[ee.NumberSymbols=13]="NumberSymbols",ee[ee.NumberFormats=14]="NumberFormats",ee[ee.CurrencyCode=15]="CurrencyCode",ee[ee.CurrencySymbol=16]="CurrencySymbol",ee[ee.CurrencyName=17]="CurrencyName",ee[ee.Currencies=18]="Currencies",ee[ee.Directionality=19]="Directionality",ee[ee.PluralCase=20]="PluralCase",ee[ee.ExtraData=21]="ExtraData",ee))();const ql="en-US";let pb=ql;function Rf(n){Sn(n,"Expected localeId to be defined"),"string"==typeof n&&(pb=n.toLowerCase().replace(/_/g,"-"))}function Of(n,e,t,r,s){if(n=le(n),Array.isArray(n))for(let i=0;i<n.length;i++)Of(n[i],e,t,r,s);else{const i=Ve(),o=W();let a=ro(n)?n:le(n.provide),c=Lv(n);const l=It(),u=1048575&l.providerIndexes,d=l.directiveStart,h=l.providerIndexes>>20;if(ro(n)||!n.multi){const f=new ga(c,s,$),p=Ff(a,e,s?u:u+h,d);-1===p?(gl(ya(l,o),i,a),kf(i,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,s&&(l.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=Ff(a,e,u+h,d),p=Ff(a,e,u,u+h),b=f>=0&&t[f],_=p>=0&&t[p];if(s&&!_||!s&&!b){gl(ya(l,o),i,a);const F=function(n,e,t,r,s){const i=new ga(n,t,$);return i.multi=[],i.index=e,i.componentProviders=0,Vb(i,s,r&&!t),i}(s?DN:SN,t.length,s,r,c);!s&&_&&(t[p].providerFactory=F),kf(i,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,s&&(l.providerIndexes+=1048576),t.push(F),o.push(F)}else kf(i,n,f>-1?f:p,Vb(t[s?p:f],c,!s&&r));!s&&r&&_&&t[p].componentProviders++}}}function kf(n,e,t,r){const s=ro(e);if(s||function(n){return!!n.useClass}(e)){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const a=n.destroyHooks||(n.destroyHooks=[]);if(!s&&e.multi){const c=a.indexOf(t);-1===c?a.push(t,[r,o]):a[c+1].push(r,o)}else a.push(t,o)}}}function Vb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ff(n,e,t,r){for(let s=t;s<r;s++)if(e[s]===n)return s;return-1}function SN(n,e,t,r){return Lf(this.multi,[])}function DN(n,e,t,r){const s=this.multi;let i;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=_a(t,t[1],this.providerFactory.index,r);i=a.slice(0,o),Lf(s,i);for(let c=o;c<a.length;c++)i.push(a[c])}else i=[],Lf(s,i);return i}function Lf(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ct(n,e=[]){return t=>{t.providersResolver=(r,s)=>function(n,e,t){const r=Ve();if(r.firstCreatePass){const s=tr(n);Of(t,r.data,r.blueprint,s,!0),Of(e,r.data,r.blueprint,s,!1)}}(r,s?s(n):n,e)}}class jb{}const $b="ngComponent";class xN{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${Re(n)}. Did you add it to @NgModule.entryComponents?`);return e[$b]=n,e}(e)}}let bs=(()=>{class n{}return n.NULL=new xN,n})();function Kl(...n){}function vo(n,e){return new mt(jn(n,e))}const RN=function(){return vo(It(),W())};let mt=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=RN,n})();function Ub(n){return n instanceof mt?n.nativeElement:n}class ri{}let Kr=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>NN(),n})();const NN=function(){const n=W(),t=Mn(It().index,n);return function(n){return n[11]}(vr(t)?t:n)};let jf=(()=>{class n{}return n.\u0275prov=ie({token:n,providedIn:"root",factory:()=>null}),n})();class Ka{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Hb=new Ka("12.2.12");class qb{constructor(){}supports(e){return ja(e)}create(e){return new LN(e)}}const FN=(n,e)=>e;class LN{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||FN}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,s=0,i=null;for(;t||r;){const o=!r||t&&t.currentIndex<Wb(r,s,i)?t:r,a=Wb(o,s,i),c=o.currentIndex;if(o===r)s--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)s++;else{i||(i=[]);const l=a-s,u=c-s;if(l!=u){for(let h=0;h<l;h++){const f=h<i.length?i[h]:i[h]=0,p=f+h;u<=p&&p<l&&(i[h]=f+1)}i[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ja(e))throw new Error(`Error trying to diff '${Re(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let s,i,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],o=this._trackByFn(a,i),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,i,o,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)):(t=this._mismatch(t,i,o,a),r=!0),t=t._next}else s=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[so()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(s,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,s)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,s),r=!0),t=t._next,s++}),this.length=s;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,s){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,s)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,s))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,s)):e=this._addAfter(new VN(t,r),i,s),e}_verifyReinsertion(e,t,r,s){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,s):e.currentIndex!=s&&(e.currentIndex=s,this._addToMoves(e,s)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const s=e._prevRemoved,i=e._nextRemoved;return null===s?this._removalsHead=i:s._nextRemoved=i,null===i?this._removalsTail=s:i._prevRemoved=s,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const s=null===t?this._itHead:t._next;return e._next=s,e._prev=t,null===s?this._itTail=e:s._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Gb),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gb),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class VN{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jN{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Gb{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new jN,this.map.set(t,r)),r.add(e)}get(e,t){const s=this.map.get(e);return s?s.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wb(n,e,t){const r=n.previousIndex;if(null===r)return r;let s=0;return t&&r<t.length&&(s=t[r]),r+e+s}class zb{constructor(){}supports(e){return e instanceof Map||Cf(e)}create(){return new BN}}class BN{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Cf(e)))throw new Error(`Error trying to diff '${Re(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,s)=>{if(t&&t.key===s)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(s,r);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const s=this._records.get(e);this._maybeAddToChanges(s,t);const i=s._prev,o=s._next;return i&&(i._next=o),o&&(o._prev=i),s._next=null,s._prev=null,s}const r=new $N(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class $N{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Qb(){return new Ja([new qb])}let Ja=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const s=r.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Qb()),deps:[[n,new _s,new vn]]}}find(t){const r=this.factories.find(s=>s.supports(t));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=ie({token:n,providedIn:"root",factory:Qb}),n})();function Kb(){return new Co([new zb])}let Co=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const s=r.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Kb()),deps:[[n,new _s,new vn]]}}find(t){const r=this.factories.find(s=>s.supports(t));if(r)return r;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=ie({token:n,providedIn:"root",factory:Kb}),n})();function Jl(n,e,t,r,s=!1){for(;null!==t;){const i=e[t.index];if(null!==i&&r.push(St(i)),er(i))for(let a=10;a<i.length;a++){const c=i[a],l=c[1].firstChild;null!==l&&Jl(c[1],c,l,r)}const o=t.type;if(8&o)Jl(n,e,t.child,r);else if(32&o){const a=kh(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=Q_(e,t);if(Array.isArray(a))r.push(...a);else{const c=Pa(e[16]);Jl(c[1],c,a,r,!0)}}t=s?t.projectionNext:t.next}return r}class Ya{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Jl(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(er(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Bh(e,r),Js(t,r))}this._attachedToViewContainer=!1}j_(this._lView[1],this._lView)}onDestroy(e){vv(this._lView[1],this._lView,null,e)}markForCheck(){cf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){uf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){il(!0);try{uf(n,e,t)}finally{il(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,e){Na(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class HN extends Ya{constructor(e){super(e),this._view=e}detectChanges(){xv(this._view)}checkNoChanges(){!function(n){il(!0);try{xv(n)}finally{il(!1)}}(this._view)}get context(){return null}}const GN=function(n){return function(n,e,t){if(tl(n)&&!t){const r=Mn(n.index,e);return new Ya(r,r)}return 47&n.type?new Ya(e[16],e):null}(It(),W(),16==(16&n))};let Yl=(()=>{class n{}return n.__NG_ELEMENT_ID__=GN,n})();const QN=[new zb],JN=new Ja([new qb]),YN=new Co(QN),XN=function(){return Zl(It(),W())};let Jr=(()=>{class n{}return n.__NG_ELEMENT_ID__=XN,n})();const eO=Jr,tO=class extends eO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=Oa(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const i=this._declarationLView[19];return null!==i&&(r[19]=i.createEmbeddedView(t)),ka(t,r,e),new Ya(r)}};function Zl(n,e){return 4&n.type?new tO(e,n,vo(n,e)):null}class Ar{}class Jb{}const sO=function(){return Xb(It(),W())};let qn=(()=>{class n{}return n.__NG_ELEMENT_ID__=sO,n})();const oO=qn,Yb=class extends oO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return vo(this._hostTNode,this._hostLView)}get injector(){return new Bi(this._hostTNode,this._hostLView)}get parentInjector(){const e=pl(this._hostTNode,this._hostLView);if(Uy(e)){const t=ji(e,this._hostLView),r=Vi(e);return new Bi(t[1].data[r+8],t)}return new Bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Zb(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const s=e.createEmbeddedView(t||{});return this.insert(s,r),s}createComponent(e,t,r,s,i){const o=r||this.parentInjector;if(!i&&null==e.ngModule&&o){const c=o.get(Ar,null);c&&(i=c)}const a=e.create(o,s,void 0,i);return this.insert(a.hostView,t),a}insert(e,t){const r=e._lView,s=r[1];if(function(n){return er(n[3])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[3],h=new Yb(d,d[6],d[3]);h.detach(h.indexOf(e))}}const i=this._adjustIndex(t),o=this._lContainer;!function(n,e,t,r){const s=10+r,i=t.length;r>0&&(t[s-1][4]=e),r<i-10?(e[4]=t[s],vl(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(s,r,o,i);const a=Hh(i,o),c=r[11],l=xl(c,o[7]);return null!==l&&function(n,e,t,r,s,i){r[0]=s,r[6]=e,Na(n,r,t,1,s,i)}(s,o[6],c,r,l,a),e.attachToViewContainerRef(),vl(Bf(o),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Zb(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Bh(this._lContainer,t);r&&(Js(Bf(this._lContainer),t),j_(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Bh(this._lContainer,t);return r&&null!=Js(Bf(this._lContainer),t)?new Ya(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function Zb(n){return n[8]}function Bf(n){return n[8]||(n[8]=[])}function Xb(n,e){let t;const r=e[n.index];if(er(r))t=r;else{let s;if(8&n.type)s=St(r);else{const i=e[11];s=i.createComment("");const o=jn(n,e);ei(i,xl(i,o),s,function(n,e){return ht(n)?n.nextSibling(e):e.nextSibling}(i,o),!1)}e[n.index]=t=Tv(r,e,s,n),kl(e,t)}return new Yb(t,n,e)}const So={};class vw extends bs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=on(e);return new bw(t,this.ngModule)}}function Cw(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const nk=new Ce("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>R_});class bw extends jb{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function(n){return n.map(KA).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Cw(this.componentDef.inputs)}get outputs(){return Cw(this.componentDef.outputs)}create(e,t,r,s){const i=(s=s||this.ngModule)?function(n,e){return{get:(t,r,s)=>{const i=n.get(t,So,s);return i!==So||r===So?i:e.get(t,r,s)}}}(e,s.injector):e,o=i.get(ri,My),a=i.get(jf,null),c=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=r?function(n,e,t){if(ht(n))return n.selectRootElement(e,t===Et.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(c,r,this.componentDef.encapsulation):jh(o.createRenderer(null,this.componentDef),l,function(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),d=this.componentDef.onPush?576:528,h=function(n,e){return{components:[],scheduler:n||R_,clean:N1,playerHandler:e||null,flags:0}}(),f=Ol(0,null,null,1,0,null,null,null,null,null),p=Oa(null,f,h,d,null,null,o,c,a,i);let b,_;ol(p);try{const F=function(n,e,t,r,s,i){const o=t[1];t[20]=n;const c=Zi(o,20,2,"#host",null),l=c.mergedAttrs=e.hostAttrs;null!==l&&(Fl(c,l,!0),null!==n&&(dl(s,n,l),null!==c.classes&&Gh(s,n,c.classes),null!==c.styles&&Y_(s,n,c.styles)));const u=r.createRenderer(n,e),d=Oa(t,mv(e),null,e.onPush?64:16,t[20],c,r,u,i||null,null);return o.firstCreatePass&&(gl(ya(c,t),o,e.type),Sv(o,c),Dv(c,t.length,1)),kl(t,d),t[20]=d}(u,this.componentDef,p,o,c);if(u)if(r)dl(c,u,["ng-version",Hb.full]);else{const{attrs:P,classes:Q}=function(n){const e=[],t=[];let r=1,s=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===s?""!==i&&e.push(i,n[++r]):8===s&&t.push(i);else{if(!nr(s))break;s=i}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);P&&dl(c,u,P),Q&&Q.length>0&&Gh(c,u,Q.join(" "))}if(_=rh(f,20),void 0!==t){const P=_.projection=[];for(let Q=0;Q<this.ngContentSelectors.length;Q++){const Y=t[Q];P.push(null!=Y?Array.from(Y):null)}}b=function(n,e,t,r,s){const i=t[1],o=function(n,e,t){const r=It();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Mv(n,r,e,Xi(n,e,1,null),t));const s=_a(e,n,r.directiveStart,r);zt(s,e);const i=jn(r,e);return i&&zt(i,e),s}(i,t,e);if(r.components.push(o),n[8]=o,s&&s.forEach(c=>c(o,e)),e.contentQueries){const c=It();e.contentQueries(1,o,c.directiveStart)}const a=It();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(gs(a.index),wv(t[1],a,0,a.directiveStart,a.directiveEnd,e),Ev(e,o)),o}(F,this.componentDef,p,h,[iR]),ka(f,p,null)}finally{al()}return new ik(this.componentType,b,vo(_,p),p,_)}}class ik extends class{}{constructor(e,t,r,s,i){super(),this.location=r,this._rootLView=s,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new HN(s),this.componentType=e}get injector(){return new Bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Do=new Map;class ck extends Ar{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vw(this);const r=Fn(e),s=function(n){return n[hx]||null}(e);s&&Rf(s),this._bootstrapComponents=Dr(r.bootstrap),this._r3Injector=Fv(e,t,[{provide:Ar,useValue:this},{provide:bs,useValue:this.componentFactoryResolver}],Re(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=He.THROW_IF_NOT_FOUND,r=he.Default){return e===He||e===Ar||e===to?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Xf extends Jb{constructor(e){super(),this.moduleType=e,null!==Fn(e)&&function(n){const e=new Set;!function t(r){const s=Fn(r,!0),i=s.id;null!==i&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${Re(e)} vs ${Re(e.name)}`)}(i,Do.get(i),r),Do.set(i,r));const o=Dr(s.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new ck(this.moduleType,e)}}function ep(n,e,t,r){return Sw(W(),an(),n,e,t,r)}function ic(n,e){const t=n[e];return t===be?void 0:t}function Sw(n,e,t,r,s,i){const o=e+t;return Qt(n,o,s)?Tr(n,o+1,i?r.call(i,s):r(s)):ic(n,o+1)}function Tw(n,e,t,r,s,i,o,a,c){const l=e+t;return function(n,e,t,r,s,i){const o=ti(n,e,t,r);return ti(n,e+2,s,i)||o}(n,l,s,i,o,a)?Tr(n,l+4,c?r.call(c,s,i,o,a):r(s,i,o,a)):ic(n,l+4)}function Me(n,e){const t=Ve();let r;const s=n+20;t.firstCreatePass?(r=function(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}throw new Hs("302",`The pipe '${n}' could not be found!`)}(e,t.pipeRegistry),t.data[s]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(s,r.onDestroy)):r=t.data[s];const i=r.factory||(r.factory=Qs(r.type)),o=ds($);try{const a=fl(!1),c=i();return fl(a),function(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,W(),s,c),c}finally{ds(o)}}function xe(n,e,t){const r=n+20,s=W(),i=Fi(s,r);return ac(s,oc(s,r)?Sw(s,an(),e,i.transform,t,i):i.transform(t))}function Iw(n,e,t,r){const s=n+20,i=W(),o=Fi(i,s);return ac(i,oc(i,s)?function(n,e,t,r,s,i,o){const a=e+t;return ti(n,a,s,i)?Tr(n,a+2,o?r.call(o,s,i):r(s,i)):ic(n,a+2)}(i,an(),e,o.transform,t,r,o):o.transform(t,r))}function oc(n,e){return n[1].data[e].pure}function ac(n,e){return ir.isWrapped(e)&&(e=ir.unwrap(e),n[br()]=be),e}function tp(n){return e=>{setTimeout(n,void 0,e)}}const Ze=class extends se{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var s,i,o;let a=e,c=t||(()=>null),l=r;if(e&&"object"==typeof e){const d=e;a=null===(s=d.next)||void 0===s?void 0:s.bind(d),c=null===(i=d.error)||void 0===i?void 0:i.bind(d),l=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(c=tp(c),a&&(a=tp(a)),l&&(l=tp(l)));const u=super.subscribe({next:a,error:c,complete:l});return e instanceof R&&e.add(u),u}};function wk(){return this._results[so()]()}class ru{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=so(),r=ru.prototype;r[t]||(r[t]=wk)}get changes(){return this._changes||(this._changes=new Ze)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const s=$n(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let s=n[r],i=e[r];if(t&&(s=t(s),i=t(i)),i!==s)return!1}return!0}(r._results,s,t))&&(r._results=s,r.length=s.length,r.last=s[this.length-1],r.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class np{constructor(e){this.queryList=e,this.matches=null}clone(){return new np(this.queryList)}setDirty(){this.queryList.setDirty()}}class rp{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,s=[];for(let i=0;i<r;i++){const o=t.getByIndex(i);s.push(this.queries[o.indexInDeclarationView].clone())}return new rp(s)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==kw(e,t).matches&&this.queries[t].setDirty()}}class Rw{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class sp{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const s=null!==t?t.length:0,i=this.getByIndex(r).embeddedTView(e,s);i&&(i.indexInDeclarationView=r,null!==t?t.push(i):t=[i])}return null!==t?new sp(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ip{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new ip(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){const i=r[s];this.matchTNodeWithReadOption(e,t,Dk(t,i)),this.matchTNodeWithReadOption(e,t,ml(t,e,i,!1,!1))}else r===Jr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ml(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const s=this.metadata.read;if(null!==s)if(s===mt||s===qn||s===Jr&&4&t.type)this.addMatch(t.index,-2);else{const i=ml(t,e,s,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Dk(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function Tk(n,e,t,r){return-1===t?function(n,e){return 11&n.type?vo(n,e):4&n.type?Zl(n,e):null}(e,n):-2===t?function(n,e,t){return t===mt?vo(e,n):t===Jr?Zl(e,n):t===qn?Xb(e,n):void 0}(n,e,r):_a(n,n[1],t,e)}function Pw(n,e,t,r){const s=e[19].queries[r];if(null===s.matches){const i=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:Tk(e,i[l],o[c+1],t.metadata.read))}s.matches=a}return s.matches}function op(n,e,t,r){const s=n.queries.getByIndex(t),i=s.matches;if(null!==i){const o=Pw(n,e,s,t);for(let a=0;a<i.length;a+=2){const c=i[a];if(c>0)r.push(o[a/2]);else{const l=i[a+1],u=e[-c];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&op(h[1],h,l,r)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];op(f[1],f,l,r)}}}}}return r}function Yr(n){const e=W(),t=Ve(),r=Ny();uh(r+1);const s=kw(t,r);if(n.dirty&&Ty(e)===(2==(2&s.metadata.flags))){if(null===s.matches)n.reset([]);else{const i=s.crossesNgTemplate?op(t,e,r,[]):Pw(t,e,s,r);n.reset(i,Ub),n.notifyOnChanges()}return!0}return!1}function oi(n,e,t){const r=Ve();r.firstCreatePass&&(function(n,e,t){null===n.queries&&(n.queries=new sp),n.queries.track(new ip(e,t))}(r,new Rw(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function(n,e,t){const r=new ru(4==(4&t));vv(n,e,r,r.destroy),null===e[19]&&(e[19]=new rp),e[19].queries.push(new np(r))}(r,W(),e)}function Zr(){return function(n,e){return n[19].queries[e].queryList}(W(),Ny())}function kw(n,e){return n.queries.getByIndex(e)}function cp(n,e){return Zl(n,e)}const lc=new Ce("Application Initializer");let To=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Kl,this.reject=Kl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,s)=>{this.resolve=r,this.reject=s})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const i=this.appInits[s]();if($a(i))t.push(i);else if($l(i)){const o=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(s=>{this.reject(s)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(z(lc,8))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const uc=new Ce("AppId"),rF={provide:uc,useFactory:function(){return`${pp()}${pp()}${pp()}`},deps:[]};function pp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Xw=new Ce("Platform Initializer"),xo=new Ce("Platform ID"),eE=new Ce("appBootstrapListener");let ou=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const Es=new Ce("LocaleId"),tE=new Ce("DefaultCurrencyCode");class iF{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const gp=function(n){return new Xf(n)},oF=gp,aF=function(n){return Promise.resolve(gp(n))},nE=function(n){const e=gp(n),r=Dr(Fn(n).declarations).reduce((s,i)=>{const o=on(i);return o&&s.push(new bw(o)),s},[]);return new iF(e,r)},cF=nE,lF=function(n){return Promise.resolve(nE(n))};let ai=(()=>{class n{constructor(){this.compileModuleSync=oF,this.compileModuleAsync=aF,this.compileModuleAndAllComponentsSync=cF,this.compileModuleAndAllComponentsAsync=lF}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const hF=(()=>Promise.resolve(0))();function mp(n){"undefined"==typeof Zone?hF.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Xe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ze(!1),this.onMicrotaskEmpty=new Ze(!1),this.onStable=new Ze(!1),this.onError=new Ze(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&t,s.shouldCoalesceRunChangeDetection=r,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function(){let n=Ue.requestAnimationFrame,e=Ue.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ue,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,_p(n),n.isCheckStableRunning=!0,yp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),_p(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,s,i,o,a)=>{try{return rE(n),t.invokeTask(s,i,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&e(),sE(n)}},onInvoke:(t,r,s,i,o,a,c)=>{try{return rE(n),t.invoke(s,i,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),sE(n)}},onHasTask:(t,r,s,i)=>{t.hasTask(s,i),r===s&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,_p(n),yp(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,s,i)=>(t.handleError(s,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(s)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xe.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xe.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,s){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+s,e,pF,Kl,Kl);try{return i.runTask(o,t,r)}finally{i.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const pF={};function yp(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function _p(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function rE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function sE(n){n._nesting--,yp(n)}class yF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ze,this.onMicrotaskEmpty=new Ze,this.onStable=new Ze,this.onError=new Ze}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,s){return e.apply(t,r)}}let vp=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xe.assertNotInAngularZone(),mp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mp(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,s){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==i),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:s})}whenStable(t,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,s){return[]}}return n.\u0275fac=function(t){return new(t||n)(z(Xe))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),iE=(()=>{class n{constructor(){this._applications=new Map,Cp.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Cp.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();class _F{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let Cp=new _F,oE=!0,aE=!1;let dr;const lE=new Ce("AllowMultipleToken");class bp{constructor(e,t){this.name=e,this.token=t}}function uE(n,e,t=[]){const r=`Platform: ${e}`,s=new Ce(r);return(i=[])=>{let o=dE();if(!o||o.injector.get(lE,!1))if(n)n(t.concat(i).concat({provide:s,useValue:!0}));else{const a=t.concat(i).concat({provide:s,useValue:!0},{provide:Fa,useValue:"platform"});!function(n){if(dr&&!dr.destroyed&&!dr.injector.get(lE,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");dr=n.get(hE);const e=n.get(Xw,null);e&&e.forEach(t=>t())}(He.create({providers:a,name:r}))}return function(n){const e=dE();if(!e)throw new Error("No platform exists!");if(!e.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(s)}}function dE(){return dr&&!dr.destroyed?dr:null}let hE=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function(n,e){let t;return t="noop"===n?new yF:("zone.js"===n?void 0:n)||new Xe({enableLongStackTrace:(aE=!0,oE),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),c=[{provide:Xe,useValue:a}];return a.run(()=>{const l=He.create({providers:c,parent:this.injector,name:t.moduleType.name}),u=t.create(l),d=u.injector.get(Xs,null);if(!d)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{wp(this._modules,u),h.unsubscribe()})}),function(n,e,t){try{const r=t();return $a(r)?r.catch(s=>{throw e.runOutsideAngular(()=>n.handleError(s)),s}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(d,a,()=>{const h=u.injector.get(To);return h.runInitializers(),h.donePromise.then(()=>(Rf(u.injector.get(Es,ql)||ql),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,r=[]){const s=fE({},r);return function(n,e,t){const r=new Xf(t);return Promise.resolve(r)}(0,0,t).then(i=>this.bootstrapModuleFactory(i,s))}_moduleDoBootstrap(t){const r=t.injector.get(Io);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${Re(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(z(He))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();function fE(n,e){return Array.isArray(e)?e.reduce(fE,n):Object.assign(Object.assign({},n),e)}let Io=(()=>{class n{constructor(t,r,s,i,o){this._zone=t,this._injector=r,this._exceptionHandler=s,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new ce(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),c=new ce(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Xe.assertNotInAngularZone(),mp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Xe.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=$d(a,c.pipe(cy()))}bootstrap(t,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let s;s=t instanceof jb?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(s.componentType);const i=function(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Ar),a=s.create(He.NULL,[],r||s.selector,i),c=a.location.nativeElement,l=a.injector.get(vp,null),u=l&&a.injector.get(iE);return l&&u&&u.registerApplication(c,l),a.onDestroy(()=>{this.detachView(a.hostView),wp(this.components,a),u&&u.unregisterApplication(c)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;wp(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(eE,[]).concat(this._bootstrapListeners).forEach(s=>s(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(z(Xe),z(He),z(Xs),z(bs),z(To))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();function wp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class cu{}class NF{}const OF={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let kF=(()=>{class n{constructor(t,r){this._compiler=t,this._config=r||OF}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[r,s]=t.split("#");return void 0===s&&(s="default"),m(8255)(r).then(i=>i[s]).then(i=>yE(i,r,s)).then(i=>this._compiler.compileModuleAsync(i))}loadFactory(t){let[r,s]=t.split("#"),i="NgFactory";return void 0===s&&(s="default",i=""),m(8255)(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(o=>o[s+i]).then(o=>yE(o,r,s))}}return n.\u0275fac=function(t){return new(t||n)(z(ai),z(NF,8))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();function yE(n,e,t){if(!n)throw new Error(`Cannot find '${t}' in '${e}'`);return n}const GF=uE(null,"core",[{provide:xo,useValue:"unknown"},{provide:hE,deps:[He]},{provide:iE,deps:[]},{provide:ou,deps:[]}]),JF=[{provide:Io,useClass:Io,deps:[Xe,He,Xs,bs,To]},{provide:nk,deps:[Xe],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:To,useClass:To,deps:[[new vn,lc]]},{provide:ai,useClass:ai,deps:[]},rF,{provide:Ja,useFactory:function(){return JN},deps:[]},{provide:Co,useFactory:function(){return YN},deps:[]},{provide:Es,useFactory:function(n){return Rf(n=n||"undefined"!=typeof $localize&&$localize.locale||ql),n},deps:[[new zi(Es),new vn,new _s]]},{provide:tE,useValue:"USD"}];let ZF=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(z(Io))},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({providers:JF}),n})(),_u=null;function Rr(){return _u}const Ct=new Ce("DocumentToken");let Ds=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({factory:YL,token:n,providedIn:"platform"}),n})();function YL(){return z($E)}const ZL=new Ce("Location Initialized");let $E=(()=>{class n extends Ds{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rr().getBaseHref(this._doc)}onPopState(t){const r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){UE()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){UE()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(z(Ct))},n.\u0275prov=ie({factory:XL,token:n,providedIn:"platform"}),n})();function UE(){return!!window.history.pushState}function XL(){return new $E(z(Ct))}function Lp(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function HE(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function es(n){return n&&"?"!==n[0]?"?"+n:n}let Po=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({factory:eV,token:n,providedIn:"root"}),n})();function eV(n){const e=z(Ct).location;return new qE(z(Ds),e&&e.origin||"")}const Vp=new Ce("appBaseHref");let qE=(()=>{class n extends Po{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Lp(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+es(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,i){const o=this.prepareExternalUrl(s+es(i));this._platformLocation.pushState(t,r,o)}replaceState(t,r,s,i){const o=this.prepareExternalUrl(s+es(i));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(z(Ds),z(Vp,8))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),tV=(()=>{class n extends Po{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Lp(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,i){let o=this.prepareExternalUrl(s+es(i));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,s,i){let o=this.prepareExternalUrl(s+es(i));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(z(Ds),z(Vp,8))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),vu=(()=>{class n{constructor(t,r){this._subject=new Ze,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=HE(GE(s)),this._platformStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+es(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,GE(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+es(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+es(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.\u0275fac=function(t){return new(t||n)(z(Po),z(Ds))},n.normalizeQueryParams=es,n.joinWithSlash=Lp,n.stripTrailingSlash=HE,n.\u0275prov=ie({factory:nV,token:n,providedIn:"root"}),n})();function nV(){return new vu(z(Po),z(Ds))}function GE(n){return n.replace(/\/index.html$/,"")}var Dt=(()=>((Dt=Dt||{})[Dt.Zero=0]="Zero",Dt[Dt.One=1]="One",Dt[Dt.Two=2]="Two",Dt[Dt.Few=3]="Few",Dt[Dt.Many=4]="Many",Dt[Dt.Other=5]="Other",Dt))(),bt=(()=>((bt=bt||{})[bt.Format=0]="Format",bt[bt.Standalone=1]="Standalone",bt))(),ke=(()=>((ke=ke||{})[ke.Narrow=0]="Narrow",ke[ke.Abbreviated=1]="Abbreviated",ke[ke.Wide=2]="Wide",ke[ke.Short=3]="Short",ke))(),dt=(()=>((dt=dt||{})[dt.Short=0]="Short",dt[dt.Medium=1]="Medium",dt[dt.Long=2]="Long",dt[dt.Full=3]="Full",dt))(),fe=(()=>((fe=fe||{})[fe.Decimal=0]="Decimal",fe[fe.Group=1]="Group",fe[fe.List=2]="List",fe[fe.PercentSign=3]="PercentSign",fe[fe.PlusSign=4]="PlusSign",fe[fe.MinusSign=5]="MinusSign",fe[fe.Exponential=6]="Exponential",fe[fe.SuperscriptingExponent=7]="SuperscriptingExponent",fe[fe.PerMille=8]="PerMille",fe[fe.Infinity=9]="Infinity",fe[fe.NaN=10]="NaN",fe[fe.TimeSeparator=11]="TimeSeparator",fe[fe.CurrencyDecimal=12]="CurrencyDecimal",fe[fe.CurrencyGroup=13]="CurrencyGroup",fe))();function Cu(n,e){return Qn(un(n)[ee.DateFormat],e)}function bu(n,e){return Qn(un(n)[ee.TimeFormat],e)}function wu(n,e){return Qn(un(n)[ee.DateTimeFormat],e)}function zn(n,e){const t=un(n),r=t[ee.NumberSymbols][e];if(void 0===r){if(e===fe.CurrencyDecimal)return t[ee.NumberSymbols][fe.Decimal];if(e===fe.CurrencyGroup)return t[ee.NumberSymbols][fe.Group]}return r}const uV=function(n){return un(n)[ee.PluralCase]};function zE(n){if(!n[ee.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ee.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Qn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Bp(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const mV=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,gc={},yV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ot=(()=>((Ot=Ot||{})[Ot.Short=0]="Short",Ot[Ot.ShortGMT=1]="ShortGMT",Ot[Ot.Long=2]="Long",Ot[Ot.Extended=3]="Extended",Ot))(),ge=(()=>((ge=ge||{})[ge.FullYear=0]="FullYear",ge[ge.Month=1]="Month",ge[ge.Date=2]="Date",ge[ge.Hours=3]="Hours",ge[ge.Minutes=4]="Minutes",ge[ge.Seconds=5]="Seconds",ge[ge.FractionalSeconds=6]="FractionalSeconds",ge[ge.Day=7]="Day",ge))(),Ae=(()=>((Ae=Ae||{})[Ae.DayPeriods=0]="DayPeriods",Ae[Ae.Days=1]="Days",Ae[Ae.Months=2]="Months",Ae[Ae.Eras=3]="Eras",Ae))();function _V(n,e,t,r){let s=function(n){if(JE(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[s,i=1,o=1]=n.split("-").map(a=>+a);return Eu(s,i-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(mV))return function(n){const e=new Date(0);let t=0,r=0;const s=n[8]?e.setUTCFullYear:e.setFullYear,i=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),s.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return i.call(e,o,a,c,l),e}(r)}const e=new Date(n);if(!JE(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=ts(t,e)||e;let a,o=[];for(;e;){if(a=yV.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let c=s.getTimezoneOffset();r&&(c=KE(r,c),s=function(n,e,t){const s=n.getTimezoneOffset();return function(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,-1*(KE(e,s)-s))}(s,r));let l="";return o.forEach(u=>{const d=function(n){if(Up[n])return Up[n];let e;switch(n){case"G":case"GG":case"GGG":e=rt(Ae.Eras,ke.Abbreviated);break;case"GGGG":e=rt(Ae.Eras,ke.Wide);break;case"GGGGG":e=rt(Ae.Eras,ke.Narrow);break;case"y":e=Mt(ge.FullYear,1,0,!1,!0);break;case"yy":e=Mt(ge.FullYear,2,0,!0,!0);break;case"yyy":e=Mt(ge.FullYear,3,0,!1,!0);break;case"yyyy":e=Mt(ge.FullYear,4,0,!1,!0);break;case"Y":e=Tu(1);break;case"YY":e=Tu(2,!0);break;case"YYY":e=Tu(3);break;case"YYYY":e=Tu(4);break;case"M":case"L":e=Mt(ge.Month,1,1);break;case"MM":case"LL":e=Mt(ge.Month,2,1);break;case"MMM":e=rt(Ae.Months,ke.Abbreviated);break;case"MMMM":e=rt(Ae.Months,ke.Wide);break;case"MMMMM":e=rt(Ae.Months,ke.Narrow);break;case"LLL":e=rt(Ae.Months,ke.Abbreviated,bt.Standalone);break;case"LLLL":e=rt(Ae.Months,ke.Wide,bt.Standalone);break;case"LLLLL":e=rt(Ae.Months,ke.Narrow,bt.Standalone);break;case"w":e=$p(1);break;case"ww":e=$p(2);break;case"W":e=$p(1,!0);break;case"d":e=Mt(ge.Date,1);break;case"dd":e=Mt(ge.Date,2);break;case"c":case"cc":e=Mt(ge.Day,1);break;case"ccc":e=rt(Ae.Days,ke.Abbreviated,bt.Standalone);break;case"cccc":e=rt(Ae.Days,ke.Wide,bt.Standalone);break;case"ccccc":e=rt(Ae.Days,ke.Narrow,bt.Standalone);break;case"cccccc":e=rt(Ae.Days,ke.Short,bt.Standalone);break;case"E":case"EE":case"EEE":e=rt(Ae.Days,ke.Abbreviated);break;case"EEEE":e=rt(Ae.Days,ke.Wide);break;case"EEEEE":e=rt(Ae.Days,ke.Narrow);break;case"EEEEEE":e=rt(Ae.Days,ke.Short);break;case"a":case"aa":case"aaa":e=rt(Ae.DayPeriods,ke.Abbreviated);break;case"aaaa":e=rt(Ae.DayPeriods,ke.Wide);break;case"aaaaa":e=rt(Ae.DayPeriods,ke.Narrow);break;case"b":case"bb":case"bbb":e=rt(Ae.DayPeriods,ke.Abbreviated,bt.Standalone,!0);break;case"bbbb":e=rt(Ae.DayPeriods,ke.Wide,bt.Standalone,!0);break;case"bbbbb":e=rt(Ae.DayPeriods,ke.Narrow,bt.Standalone,!0);break;case"B":case"BB":case"BBB":e=rt(Ae.DayPeriods,ke.Abbreviated,bt.Format,!0);break;case"BBBB":e=rt(Ae.DayPeriods,ke.Wide,bt.Format,!0);break;case"BBBBB":e=rt(Ae.DayPeriods,ke.Narrow,bt.Format,!0);break;case"h":e=Mt(ge.Hours,1,-12);break;case"hh":e=Mt(ge.Hours,2,-12);break;case"H":e=Mt(ge.Hours,1);break;case"HH":e=Mt(ge.Hours,2);break;case"m":e=Mt(ge.Minutes,1);break;case"mm":e=Mt(ge.Minutes,2);break;case"s":e=Mt(ge.Seconds,1);break;case"ss":e=Mt(ge.Seconds,2);break;case"S":e=Mt(ge.FractionalSeconds,1);break;case"SS":e=Mt(ge.FractionalSeconds,2);break;case"SSS":e=Mt(ge.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Du(Ot.Short);break;case"ZZZZZ":e=Du(Ot.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Du(Ot.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Du(Ot.Long);break;default:return null}return Up[n]=e,e}(u);l+=d?d(s,t,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Eu(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ts(n,e){const t=function(n){return un(n)[ee.LocaleId]}(n);if(gc[t]=gc[t]||{},gc[t][e])return gc[t][e];let r="";switch(e){case"shortDate":r=Cu(n,dt.Short);break;case"mediumDate":r=Cu(n,dt.Medium);break;case"longDate":r=Cu(n,dt.Long);break;case"fullDate":r=Cu(n,dt.Full);break;case"shortTime":r=bu(n,dt.Short);break;case"mediumTime":r=bu(n,dt.Medium);break;case"longTime":r=bu(n,dt.Long);break;case"fullTime":r=bu(n,dt.Full);break;case"short":const s=ts(n,"shortTime"),i=ts(n,"shortDate");r=Su(wu(n,dt.Short),[s,i]);break;case"medium":const o=ts(n,"mediumTime"),a=ts(n,"mediumDate");r=Su(wu(n,dt.Medium),[o,a]);break;case"long":const c=ts(n,"longTime"),l=ts(n,"longDate");r=Su(wu(n,dt.Long),[c,l]);break;case"full":const u=ts(n,"fullTime"),d=ts(n,"fullDate");r=Su(wu(n,dt.Full),[u,d])}return r&&(gc[t][e]=r),r}function Su(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function pr(n,e,t="-",r,s){let i="";(n<0||s&&n<=0)&&(s?n=1-n:(n=-n,i=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),i+o}function Mt(n,e,t=0,r=!1,s=!1){return function(i,o){let a=function(n,e){switch(n){case ge.FullYear:return e.getFullYear();case ge.Month:return e.getMonth();case ge.Date:return e.getDate();case ge.Hours:return e.getHours();case ge.Minutes:return e.getMinutes();case ge.Seconds:return e.getSeconds();case ge.FractionalSeconds:return e.getMilliseconds();case ge.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,i);if((t>0||a>-t)&&(a+=t),n===ge.Hours)0===a&&-12===t&&(a=12);else if(n===ge.FractionalSeconds)return function(n,e){return pr(n,3).substr(0,e)}(a,e);const c=zn(o,fe.MinusSign);return pr(a,e,c,r,s)}}function rt(n,e,t=bt.Format,r=!1){return function(s,i){return function(n,e,t,r,s,i){switch(t){case Ae.Months:return function(n,e,t){const r=un(n),i=Qn([r[ee.MonthsFormat],r[ee.MonthsStandalone]],e);return Qn(i,t)}(e,s,r)[n.getMonth()];case Ae.Days:return function(n,e,t){const r=un(n),i=Qn([r[ee.DaysFormat],r[ee.DaysStandalone]],e);return Qn(i,t)}(e,s,r)[n.getDay()];case Ae.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(i){const l=function(n){const e=un(n);return zE(e),(e[ee.ExtraData][2]||[]).map(r=>"string"==typeof r?Bp(r):[Bp(r[0]),Bp(r[1])])}(e),u=function(n,e,t){const r=un(n);zE(r);const i=Qn([r[ee.ExtraData][0],r[ee.ExtraData][1]],e)||[];return Qn(i,t)||[]}(e,s,r),d=l.findIndex(h=>{if(Array.isArray(h)){const[f,p]=h,b=o>=f.hours&&a>=f.minutes,_=o<p.hours||o===p.hours&&a<p.minutes;if(f.hours<p.hours){if(b&&_)return!0}else if(b||_)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function(n,e,t){const r=un(n),i=Qn([r[ee.DayPeriodsFormat],r[ee.DayPeriodsStandalone]],e);return Qn(i,t)}(e,s,r)[o<12?0:1];case Ae.Eras:return function(n,e){return Qn(un(n)[ee.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(s,i,n,e,t,r)}}function Du(n){return function(e,t,r){const s=-1*r,i=zn(t,fe.MinusSign),o=s>0?Math.floor(s/60):Math.ceil(s/60);switch(n){case Ot.Short:return(s>=0?"+":"")+pr(o,2,i)+pr(Math.abs(s%60),2,i);case Ot.ShortGMT:return"GMT"+(s>=0?"+":"")+pr(o,1,i);case Ot.Long:return"GMT"+(s>=0?"+":"")+pr(o,2,i)+":"+pr(Math.abs(s%60),2,i);case Ot.Extended:return 0===r?"Z":(s>=0?"+":"")+pr(o,2,i)+":"+pr(Math.abs(s%60),2,i);default:throw new Error(`Unknown zone width "${n}"`)}}}function QE(n){return Eu(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function $p(n,e=!1){return function(t,r){let s;if(e){const i=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();s=1+Math.floor((o+i)/7)}else{const i=QE(t),o=function(n){const e=Eu(n,0,1).getDay();return Eu(n,0,1+(e<=4?4:11)-e)}(i.getFullYear()),a=i.getTime()-o.getTime();s=1+Math.round(a/6048e5)}return pr(s,n,zn(r,fe.MinusSign))}}function Tu(n,e=!1){return function(t,r){return pr(QE(t).getFullYear(),n,zn(r,fe.MinusSign),e)}}const Up={};function KE(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function JE(n){return n instanceof Date&&!isNaN(n.valueOf())}class Iu{}let jV=(()=>{class n extends Iu{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(uV(r||this.locale)(t)){case Dt.Zero:return"zero";case Dt.One:return"one";case Dt.Two:return"two";case Dt.Few:return"few";case Dt.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(z(Es))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();function eS(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,i]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(i)}return null}let zp=(()=>{class n{constructor(t,r,s,i){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(ja(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Re(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)($(Ja),$(Co),$(mt),$(Kr))},n.\u0275dir=ue({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class $V{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let No=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((s,i,o)=>{if(null==s.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new $V(null,this._ngForOf,-1,-1),null===o?void 0:o),c=new tS(s,a);r.push(c)}else if(null==o)this._viewContainer.remove(null===i?void 0:i);else if(null!==i){const a=this._viewContainer.get(i);this._viewContainer.move(a,o);const c=new tS(s,a);r.push(c)}});for(let s=0;s<r.length;s++)this._perViewChange(r[s].view,r[s].record);for(let s=0,i=this._viewContainer.length;s<i;s++){const o=this._viewContainer.get(s);o.context.index=s,o.context.count=i,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{this._viewContainer.get(s.currentIndex).context.$implicit=s.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)($(qn),$(Jr),$(Ja))},n.\u0275dir=ue({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class tS{constructor(e,t){this.record=e,this.view=t}}let Pr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new HV,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nS("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nS("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)($(qn),$(Jr))},n.\u0275dir=ue({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class HV{constructor(){this.$implicit=null,this.ngIf=null}}function nS(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Re(e)}'.`)}class Qp{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Au=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ue({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),rS=(()=>{class n{constructor(t,r,s){this.ngSwitch=s,s._addCase(),this._view=new Qp(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)($(qn),$(Jr),$(Au,9))},n.\u0275dir=ue({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),iS=(()=>{class n{constructor(t,r,s){this._ngEl=t,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[s,i]=t.split(".");null!=(r=null!=r&&i?`${r}${i}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,s,r):this._renderer.removeStyle(this._ngEl.nativeElement,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)($(mt),$(Co),$(Kr))},n.\u0275dir=ue({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();function gr(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Re(n)}'`)}class zV{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class QV{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const KV=new QV,JV=new zV;let Ms=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if($a(t))return KV;if(EC(t))return JV;throw gr(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)($(Yl,16))},n.\u0275pipe=yn({name:"async",type:n,pure:!1}),n})(),Kp=(()=>{class n{constructor(t){this.locale=t}transform(t,r="mediumDate",s,i){if(null==t||""===t||t!=t)return null;try{return _V(t,r,i||this.locale,s)}catch(o){throw gr(n,o.message)}}}return n.\u0275fac=function(t){return new(t||n)($(Es,16))},n.\u0275pipe=yn({name:"date",type:n,pure:!0}),n})(),oS=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=yn({name:"json",type:n,pure:!1}),n})(),Jp=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=aS}transform(t,r=aS){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const s=this.differ.diff(t),i=r!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(o=>{this.keyValues.push(function(n,e){return{key:n,value:e}}(o.key,o.currentValue))})),(s||i)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}}return n.\u0275fac=function(t){return new(t||n)($(Co,16))},n.\u0275pipe=yn({name:"keyvalue",type:n,pure:!1}),n})();function aS(n,e){const t=n.key,r=e.key;if(t===r)return 0;if(void 0===t)return 1;if(void 0===r)return-1;if(null===t)return 1;if(null===r)return-1;if("string"==typeof t&&"string"==typeof r)return t<r?-1:1;if("number"==typeof t&&"number"==typeof r)return t-r;if("boolean"==typeof t&&"boolean"==typeof r)return t<r?-1:1;const s=String(t),i=String(r);return s==i?0:s<i?-1:1}let cS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({providers:[{provide:Iu,useClass:jV}]}),n})();const lS="browser";let uS=(()=>{class n{}return n.\u0275prov=ie({token:n,providedIn:"root",factory:()=>new f2(z(Ct),window)}),n})();class f2{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const i=s.shadowRoot;if(i){const o=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(o)return o}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],s-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=dS(this.window.history)||dS(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function dS(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class hS{}class Xp extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){_u||(_u=n)}(new Xp)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(yc=yc||document.querySelector("base"),yc?yc.getAttribute("href"):null);return null==t?null:function(n){Ru=Ru||document.createElement("a"),Ru.setAttribute("href",n);const e=Ru.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){yc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return eS(document.cookie,e)}}let Ru,yc=null;const fS=new Ce("TRANSITION_ID"),v2=[{provide:lc,useFactory:function(n,e,t){return()=>{t.get(To).donePromise.then(()=>{const r=Rr(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let i=0;i<s.length;i++)r.remove(s[i])})}},deps:[fS,Ct,He],multi:!0}];class eg{static init(){!function(n){Cp=n}(new eg)}addToWindow(e){Ue.getAngularTestability=(r,s=!0)=>{const i=e.findTestabilityInTree(r,s);if(null==i)throw new Error("Could not find testability for element.");return i},Ue.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ue.getAllAngularRootElements=()=>e.getAllRootElements(),Ue.frameworkStabilizers||(Ue.frameworkStabilizers=[]),Ue.frameworkStabilizers.push(r=>{const s=Ue.getAllAngularTestabilities();let i=s.length,o=!1;const a=function(c){o=o||c,i--,0==i&&r(o)};s.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?Rr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let C2=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const _c=new Ce("EventManagerPlugins");let Nu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let i=0;i<s.length;i++){const o=s[i];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(z(_c),z(Xe))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();class tg{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=Rr().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let gS=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),vc=(()=>{class n extends gS{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(i=>{const o=this._doc.createElement("style");o.textContent=i,s.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(mS),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(mS))}}return n.\u0275fac=function(t){return new(t||n)(z(Ct))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();function mS(n){Rr().remove(n)}const ng={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rg=/%COMP%/g;function Ou(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Ou(n,s,t):(s=s.replace(rg,n),t.push(s))}return t}function vS(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ku=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new sg(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Et.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new k2(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case Et.ShadowDom:return new F2(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Ou(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(z(Nu),z(vc),z(uc))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();class sg{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(ng[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const i=ng[s];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=ng[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(In.DashCase|In.Important)?e.style.setProperty(t,r,s&In.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&In.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,vS(r)):this.eventManager.addEventListener(e,t,vS(r))}}class k2 extends sg{constructor(e,t,r,s){super(e),this.component=r;const i=Ou(s+"-"+r.id,r.styles,[]);t.addStyles(i),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(rg,n)}(s+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(rg,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class F2 extends sg{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Ou(s.id,s.styles,[]);for(let o=0;o<i.length;o++){const a=document.createElement("style");a.textContent=i[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let L2=(()=>{class n extends tg{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(z(Ct))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const wS=["alt","control","meta","shift"],q2={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ES={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},G2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let W2=(()=>{class n extends tg{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const i=n.parseEventName(r),o=n.eventCallback(i.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rr().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const i=n._normalizeKey(r.pop());let o="";if(wS.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=i,0!=r.length||0===i.length)return null;const a={};return a.domEventName=s,a.fullKey=o,a}static getEventFullKey(t){let r="",s=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ES.hasOwnProperty(e)&&(e=ES[e]))}return q2[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),wS.forEach(i=>{i!=s&&G2[i](t)&&(r+=i+".")}),r+=s,r}static eventCallback(t,r,s){return i=>{n.getEventFullKey(i)===t&&s.runGuarded(()=>r(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(z(Ct))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const ej=uE(GF,"browser",[{provide:xo,useValue:lS},{provide:Xw,useValue:function(){Xp.makeCurrent(),eg.init()},multi:!0},{provide:Ct,useFactory:function(){return function(n){th=n}(document),document},deps:[]}]),tj=[[],{provide:Fa,useValue:"root"},{provide:Xs,useFactory:function(){return new Xs},deps:[]},{provide:_c,useClass:L2,multi:!0,deps:[Ct,Xe,xo]},{provide:_c,useClass:W2,multi:!0,deps:[Ct]},[],{provide:ku,useClass:ku,deps:[Nu,vc,uc]},{provide:ri,useExisting:ku},{provide:gS,useExisting:vc},{provide:vc,useClass:vc,deps:[Ct]},{provide:vp,useClass:vp,deps:[Xe]},{provide:Nu,useClass:Nu,deps:[_c,Xe]},{provide:hS,useClass:C2,deps:[]},[]];let cg=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:uc,useValue:t.appId},{provide:fS,useExisting:uc},v2]}}}return n.\u0275fac=function(t){return new(t||n)(z(n,12))},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({providers:tj,imports:[cS,ZF]}),n})();function Fu(n,e){return new ce(t=>{const r=n.length;if(0===r)return void t.complete();const s=new Array(r);let i=0,o=0;for(let a=0;a<r;a++){const c=qt(n[a]);let l=!1;t.add(c.subscribe({next:u=>{l||(l=!0,o++),s[a]=u},error:u=>t.error(u),complete:()=>{i++,(i===r||!l)&&(o===r&&t.next(e?e.reduce((u,d,h)=>(u[d]=s[h],u),{}):s),t.complete())}}))}})}"undefined"!=typeof window&&window;let DS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)($(Kr),$(mt))},n.\u0275dir=ue({type:n}),n})(),ui=(()=>{class n extends DS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Bn(n)))(r||n)}}(),n.\u0275dir=ue({type:n,features:[it]}),n})();const Nr=new Ce("NgValueAccessor"),uj={provide:Nr,useExisting:tt(()=>ug),multi:!0};let ug=(()=>{class n extends ui{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Bn(n)))(r||n)}}(),n.\u0275dir=ue({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&J("change",function(i){return r.onChange(i.target.checked)})("blur",function(){return r.onTouched()})},features:[ct([uj]),it]}),n})();const dj={provide:Nr,useExisting:tt(()=>xs),multi:!0},fj=new Ce("CompositionEventMode");let xs=(()=>{class n extends DS{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=Rr()?Rr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)($(Kr),$(mt),$(fj,8))},n.\u0275dir=ue({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&J("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[ct([dj]),it]}),n})();const Yt=new Ce("NgValidators"),As=new Ce("NgAsyncValidators");function kS(n){return null!=n}function FS(n){const e=$a(n)?qt(n):n;return $l(e),e}function LS(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function VS(n,e){return e.map(t=>t(n))}function jS(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function dg(n){return null!=n?function(n){if(!n)return null;const e=n.filter(kS);return 0==e.length?null:function(t){return LS(VS(t,e))}}(jS(n)):null}function hg(n){return null!=n?function(n){if(!n)return null;const e=n.filter(kS);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if(I(e))return Fu(e,null);if(B(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Fu(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Fu(n=1===n.length&&I(n[0])?n[0]:n,null).pipe(pe(t=>e(...t)))}return Fu(n,null)}(VS(t,e).map(FS)).pipe(pe(LS))}}(jS(n)):null}function US(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function fg(n){return n?Array.isArray(n)?n:[n]:[]}function Lu(n,e){return Array.isArray(n)?n.includes(e):n===e}function GS(n,e){const t=fg(e);return fg(n).forEach(s=>{Lu(t,s)||t.push(s)}),t}function WS(n,e){return fg(e).filter(t=>!Lu(n,t))}let zS=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=dg(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=hg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ue({type:n}),n})(),fn=(()=>{class n extends zS{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Bn(n)))(r||n)}}(),n.\u0275dir=ue({type:n,features:[it]}),n})();class Ps extends zS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class QS{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}let Oo=(()=>{class n extends QS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)($(Ps,2))},n.\u0275dir=ue({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Qr("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[it]}),n})(),KS=(()=>{class n extends QS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)($(fn,10))},n.\u0275dir=ue({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&Qr("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[it]}),n})();function Cc(n,e){mg(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&JS(n,e)})}(n,e),function(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&JS(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function $u(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mg(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(US(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(US(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();$u(e._rawValidators,s),$u(e._rawAsyncValidators,s)}function JS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Hu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const bc="VALID",qu="INVALID",ko="PENDING",wc="DISABLED";function vg(n){return(bg(n)?n.validators:n)||null}function XS(n){return Array.isArray(n)?dg(n):n||null}function Cg(n,e){return(bg(e)?e.asyncValidators:n)||null}function eD(n){return Array.isArray(n)?hg(n):n||null}function bg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class wg{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=XS(this._rawValidators),this._composedAsyncValidatorFn=eD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===bc}get invalid(){return this.status===qu}get pending(){return this.status==ko}get disabled(){return this.status===wc}get enabled(){return this.status!==wc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=XS(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=eD(e)}addValidators(e){this.setValidators(GS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(GS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(WS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(WS(e,this._rawAsyncValidators))}hasValidator(e){return Lu(this._rawValidators,e)}hasAsyncValidator(e){return Lu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ko,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=wc,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=bc,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bc||this.status===ko)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wc:bc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ko,this._hasOwnPendingAsyncValidator=!0;const t=FS(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=r instanceof Eg?r.controls.hasOwnProperty(s)?r.controls[s]:null:r instanceof Tj&&r.at(s)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?wc:this.errors?qu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ko)?ko:this._anyControlsHaveStatus(qu)?qu:bc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Gu extends wg{constructor(e=null,t,r){super(vg(t),Cg(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Hu(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Hu(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Eg extends wg{constructor(e,t,r){super(vg(t),Cg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Gu?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,i)=>{r=t(r,s,i)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Tj extends wg{constructor(e,t,r){super(vg(t),Cg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,s)=>{this._throwIfControlMissing(s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Gu?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const xj={provide:fn,useExisting:tt(()=>Wu)},Ec=(()=>Promise.resolve(null))();let Wu=(()=>{class n extends fn{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Ze,this.form=new Eg({},dg(t),hg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ec.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Cc(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ec.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),Hu(this._directives,t)})}addFormGroup(t){Ec.then(()=>{const r=this._findContainer(t.path),s=new Eg({});(function(n,e){mg(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ec.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ec.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)($(Yt,10),$(As,10))},n.\u0275dir=ue({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&J("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ct([xj]),it]}),n})();const Aj={provide:Ps,useExisting:tt(()=>di)},rD=(()=>Promise.resolve(null))();let di=(()=>{class n extends Ps{constructor(t,r,s,i){super(),this.control=new Gu,this._registered=!1,this.update=new Ze,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(i=>{i.constructor===xs?t=i:function(n){return Object.getPrototypeOf(n.constructor)===ui}(i)?r=i:s=i}),s||r||t||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Cc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){rD.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=""===r||r&&"false"!==r;rD.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)($(fn,9),$(Yt,10),$(As,10),$(Nr,10))},n.\u0275dir=ue({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ct([Aj]),it,xt]}),n})(),sD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ue({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),oD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({}),n})();const Qj={provide:Yt,useExisting:tt(()=>zu),multi:!0};let zu=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(n){return function(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ue({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&or("required",r.required?"":null)},inputs:{required:"required"},features:[ct([Qj])]}),n})(),ED=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({imports:[[oD]]}),n})(),SD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({imports:[ED]}),n})();class DD{}const ns="*";function Ag(n,e){return{type:7,name:n,definitions:e,options:{}}}function Fo(n,e=null){return{type:4,styles:e,timings:n}}function MD(n,e=null){return{type:2,steps:n,options:e}}function Ns(n){return{type:6,styles:n,offset:null}}function Lo(n,e,t){return{type:0,name:n,styles:e,options:t}}function Vo(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function TD(n){Promise.resolve(null).then(n)}class jo{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){TD(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class xD{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,s=0;const i=this.players.length;0==i?TD(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==i&&this._onFinish()}),o.onDestroy(()=>{++r==i&&this._onDestroy()}),o.onStart(()=>{++s==i&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const s=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(s)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function ID(){return"undefined"!=typeof window&&void 0!==window.document}function Pg(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Os(n){switch(n.length){case 0:return new jo;case 1:return n[0];default:return new xD(n)}}function AD(n,e,t,r,s={},i={}){const o=[],a=[];let c=-1,l=null;if(r.forEach(u=>{const d=u.offset,h=d==c,f=h&&l||{};Object.keys(u).forEach(p=>{let b=p,_=u[p];if("offset"!==p)switch(b=e.normalizePropertyName(b,o),_){case"!":_=s[p];break;case ns:_=i[p];break;default:_=e.normalizeStyleValue(p,b,_,o)}f[b]=_}),h||a.push(f),l=f,c=d}),o.length){const u="\n - ";throw new Error(`Unable to animate due to the following errors:${u}${o.join(u)}`)}return a}function Ng(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Og(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Og(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Og(t,"destroy",n)))}}function Og(n,e,t){const r=t.totalTime,i=kg(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),o=n._data;return null!=o&&(i._data=o),i}function kg(n,e,t,r,s="",i=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:i,disabled:!!o}}function Rn(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function RD(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Fg=(n,e)=>!1,Lg=(n,e)=>!1,PD=(n,e,t)=>[];const ND=Pg();(ND||"undefined"!=typeof Element)&&(Fg=ID()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),Lg=(()=>{if(ND||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):Lg}})(),PD=(n,e,t)=>{let r=[];if(t){const s=n.querySelectorAll(e);for(let i=0;i<s.length;i++)r.push(s[i])}else{const s=n.querySelector(e);s&&r.push(s)}return r});let hi=null,OD=!1;function Vg(n){hi||(hi=("undefined"!=typeof document?document.body:null)||{},OD=!!hi.style&&"WebkitAppearance"in hi.style);let e=!0;return hi.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in hi.style,!e&&OD&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in hi.style)),e}const jg=Lg,Bg=Fg,$g=PD;function kD(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let FD=(()=>{class n{validateStyleProperty(t){return Vg(t)}matchesElement(t,r){return jg(t,r)}containsElement(t,r){return Bg(t,r)}query(t,r,s){return $g(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,i,o,a=[],c){return new jo(s,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),Ug=(()=>{class n{}return n.NOOP=new FD,n})();const Hg="ng-enter",Qu="ng-leave",Ku="ng-trigger",Ju=".ng-trigger",VD="ng-animating",qg=".ng-animating";function fi(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Gg(parseFloat(e[1]),e[2])}function Gg(n,e){switch(e){case"s":return 1e3*n;default:return n}}function Yu(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let s,i=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};s=Gg(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(i=Gg(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else s=n;if(!t){let a=!1,c=e.length;s<0&&(e.push("Duration values below 0 are not allowed for this animation step."),a=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&e.splice(c,0,`The provided timing value "${n}" is invalid.`)}return{duration:s,delay:i,easing:o}}(n,e,t)}function Bo(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function ks(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Bo(n,t);return t}function BD(n,e,t){return t?e+":"+t+";":""}function $D(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=BD(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=BD(0,c3(t),n.style[t]));n.setAttribute("style",e)}function Or(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const s=zg(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[s]),n.style[s]=e[r]}),Pg()&&$D(n))}function pi(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=zg(t);n.style[r]=""}),Pg()&&$D(n))}function Sc(n){return Array.isArray(n)?1==n.length?n[0]:MD(n):n}const Wg=new RegExp("{{\\s*(.+?)\\s*}}","g");function UD(n){let e=[];if("string"==typeof n){let t;for(;t=Wg.exec(n);)e.push(t[1]);Wg.lastIndex=0}return e}function Zu(n,e,t){const r=n.toString(),s=r.replace(Wg,(i,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(`Please provide a value for the animation param ${o}`),a=""),a.toString()});return s==r?n:s}function Xu(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const a3=/-+([a-z0-9])/g;function zg(n){return n.replace(a3,(...e)=>e[1].toUpperCase())}function c3(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function HD(n,e){return 0===n||0===e}function qD(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let i=e[0],o=[];if(r.forEach(a=>{i.hasOwnProperty(a)||o.push(a),i[a]=t[a]}),o.length)for(var s=1;s<e.length;s++){let a=e[s];o.forEach(function(c){a[c]=Qg(n,c)})}}return e}function Pn(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Qg(n,e){return window.getComputedStyle(n)[e]}function l3(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,e,t){if(":"==n[0]){const c=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const s=r[1],i=r[2],o=r[3];e.push(GD(s,o));"<"==i[0]&&!("*"==s&&"*"==o)&&e.push(GD(o,s))}(r,t,e)):t.push(n),t}const td=new Set(["true","1"]),nd=new Set(["false","0"]);function GD(n,e){const t=td.has(n)||nd.has(n),r=td.has(e)||nd.has(e);return(s,i)=>{let o="*"==n||n==s,a="*"==e||e==i;return!o&&t&&"boolean"==typeof s&&(o=s?td.has(n):nd.has(n)),!a&&r&&"boolean"==typeof i&&(a=i?td.has(e):nd.has(e)),o&&a}}const h3=new RegExp("s*:selfs*,?","g");function Kg(n,e,t){return new f3(n).build(e,t)}class f3{constructor(e){this._driver=e}build(e,t){const r=new m3(t);return this._resetContextStyleTimingState(r),Pn(this,Sc(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const i=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,i.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,s+=c.depCount,o.push(c)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:o,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const i=new Set,o=s||{};if(r.styles.forEach(a=>{if(rd(a)){const c=a;Object.keys(c).forEach(l=>{UD(c[l]).forEach(u=>{o.hasOwnProperty(u)||i.add(u)})})}}),i.size){const a=Xu(i.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Pn(this,Sc(e.animation),t);return{type:1,matchers:l3(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:gi(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Pn(this,r,t)),options:gi(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const i=e.steps.map(o=>{t.currentTime=r;const a=Pn(this,o,t);return s=Math.max(s,t.currentTime),a});return t.currentTime=s,{type:3,steps:i,options:gi(e.options)}}visitAnimate(e,t){const r=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return Jg(Yu(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(i=>"{"==i.charAt(0)&&"{"==i.charAt(1))){const i=Jg(0,0,"");return i.dynamic=!0,i.strValue=r,i}return t=t||Yu(r,e),Jg(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,i=e.styles?e.styles:Ns({});if(5==i.type)s=this.visitKeyframes(i,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};r.easing&&(l.easing=r.easing),o=Ns(l)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,s=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==ns?r.push(o):t.errors.push(`The provided style string value ${o} is not allowed.`):r.push(o)}):r.push(e.styles);let s=!1,i=null;return r.forEach(o=>{if(rd(o)){const a=o,c=a.easing;if(c&&(i=c,delete a.easing),!s)for(let l in a)if(a[l].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:r,easing:i,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,i=t.currentTime;r&&i>0&&(i-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void t.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const c=t.collectedStyles[t.currentQuerySelector],l=c[a];let u=!0;l&&(i!=s&&i>=l.startTime&&s<=l.endTime&&(t.errors.push(`The CSS property "${a}" that exists between the times of "${l.startTime}ms" and "${l.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${s}ms"`),u=!1),i=l.startTime),u&&(c[a]={startTime:i,endTime:s}),t.options&&function(n,e,t){const r=e.params||{},s=UD(n);s.length&&s.forEach(i=>{r.hasOwnProperty(i)||t.push(`Unable to resolve the local animation param ${i} in the given list of values`)})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let i=0;const o=[];let a=!1,c=!1,l=0;const u=e.steps.map(F=>{const P=this._makeStyleAst(F,t);let Q=null!=P.offset?P.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(rd(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(rd(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(P.styles),Y=0;return null!=Q&&(i++,Y=P.offset=Q),c=c||Y<0||Y>1,a=a||Y<l,l=Y,o.push(Y),P});c&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&t.errors.push("Please ensure that all keyframe offsets are in order");const d=e.steps.length;let h=0;i>0&&i<d?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(d-1));const f=d-1,p=t.currentTime,b=t.currentAnimateTimings,_=b.duration;return u.forEach((F,P)=>{const Q=h>0?P==f?1:h*P:o[P],Y=Q*_;t.currentTime=p+b.delay+Y,b.duration=Y,this._validateStyleAst(F,t),F.offset=Q,r.styles.push(F)}),r}visitReference(e,t){return{type:8,animation:Pn(this,Sc(e.animation),t),options:gi(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:gi(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:gi(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[i,o]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(h3,"")),[n=n.replace(/@\*/g,Ju).replace(/@\w+/g,t=>Ju+"-"+t.substr(1)).replace(/:animating/g,qg),e]}(e.selector);t.currentQuerySelector=r.length?r+" "+i:i,Rn(t.collectedStyles,t.currentQuerySelector,{});const a=Pn(this,Sc(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:i,limit:s.limit||0,optional:!!s.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:gi(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Yu(e.timings,t.errors,!0);return{type:12,animation:Pn(this,Sc(e.animation),t),timings:r,options:null}}}class m3{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function rd(n){return!Array.isArray(n)&&"object"==typeof n}function gi(n){return n?(n=Bo(n)).params&&(n.params=function(n){return n?Bo(n):null}(n.params)):n={},n}function Jg(n,e,t){return{duration:n,delay:e,easing:t}}function Yg(n,e,t,r,s,i,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:i,totalTime:s+i,easing:o,subTimeline:a}}class sd{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const b3=new RegExp(":enter","g"),E3=new RegExp(":leave","g");function Zg(n,e,t,r,s,i={},o={},a,c,l=[]){return(new S3).buildKeyframes(n,e,t,r,s,i,o,a,c,l)}class S3{buildKeyframes(e,t,r,s,i,o,a,c,l,u=[]){l=l||new sd;const d=new Xg(e,t,l,s,i,u,[]);d.options=c,d.currentTimeline.setStyles([o],null,d.errors,c),Pn(this,r,d);const h=d.timelines.filter(f=>f.containsAnimation());if(h.length&&Object.keys(a).length){const f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([a],null,d.errors,c)}return h.length?h.map(f=>f.buildKeyframes()):[Yg(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.consume(t.element);if(r){const s=t.createSubContext(e.options),i=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,s,s.options);i!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let i=t.currentTimeline.currentTime;const o=null!=r.duration?fi(r.duration):null,a=null!=r.delay?fi(r.delay):null;return 0!==o&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,o,a);i=Math.max(i,l.duration+l.delay)}),i}visitReference(e,t){t.updateOptions(e.options,!0),Pn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const i=e.options;if(i&&(i.params||i.delay)&&(s=t.createSubContext(i),s.transformIntoNewTimeline(),null!=i.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=id);const o=fi(i.delay);s.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Pn(this,o,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?fi(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);i&&a.delayNextStep(i),Pn(this,o,a),s=Math.max(s,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Yu(t.params?Zu(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(r.duration),this.visitStyle(i,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.getCurrentStyleProperties().length&&r.forwardFrame();const i=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(i):r.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,i=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*i),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(s+i),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},i=s.delay?fi(s.delay):0;i&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=id);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,l);i&&d.delayNextStep(i),l===t.element&&(c=d.currentTimeline),Pn(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,i=e.timings,o=Math.abs(i.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const u=t.currentTimeline;c&&u.delayNextStep(c);const d=u.currentTime;Pn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-d+(s.startTime-r.currentTimeline.startTime)}}const id={};class Xg{constructor(e,t,r,s,i,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=i,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=id,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new od(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=fi(r.duration)),null!=r.delay&&(s.delay=fi(r.delay));const i=r.params;if(i){let o=s.params;o||(o=this.options.params={}),Object.keys(i).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Zu(i[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,i=new Xg(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=id,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},i=new D3(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(i),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,i,o){let a=[];if(s&&a.push(this.element),e.length>0){e=(e=e.replace(b3,"."+this._enterClassName)).replace(E3,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!i&&0==a.length&&o.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),a}}class od{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new od(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||ns,this._currentKeyframe[t]=ns}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&(this._previousKeyframe.easing=t);const i=s&&s.params||{},o=function(n,e){const t={};let r;return n.forEach(s=>{"*"===s?(r=r||Object.keys(e),r.forEach(i=>{t[i]=ns})):ks(s,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const c=Zu(o[a],i,r);this._pendingStyles[a]=c,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:ns),this._updateStyle(a,c)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],s=e._styleSummary[t];(!r||s.time>r.time)&&this._updateStyle(t,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((a,c)=>{const l=ks(a,!0);Object.keys(l).forEach(u=>{const d=l[u];"!"==d?e.add(u):d==ns&&t.add(u)}),r||(l.offset=c/this.duration),s.push(l)});const i=e.size?Xu(e.values()):[],o=t.size?Xu(t.values()):[];if(r){const a=s[0],c=Bo(a);a.offset=0,c.offset=1,s=[a,c]}return Yg(this.element,s,i,o,this.duration,this.startTime,this.easing,!1)}}class D3 extends od{constructor(e,t,r,s,i,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=i,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],o=r+t,a=t/o,c=ks(e[0],!1);c.offset=0,i.push(c);const l=ks(e[0],!1);l.offset=QD(a),i.push(l);const u=e.length-1;for(let d=1;d<=u;d++){let h=ks(e[d],!1);h.offset=QD((t+h.offset*r)/o),i.push(h)}r=o,t=0,s="",e=i}return Yg(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function QD(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class em{}class T3 extends em{normalizePropertyName(e,t){return zg(e)}normalizeStyleValue(e,t,r,s){let i="";const o=r.toString().trim();if(x3[t]&&0!==r&&"0"!==r)if("number"==typeof r)i="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&s.push(`Please provide a CSS unit value for ${e}:${r}`)}return o+i}}const x3=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function KD(n,e,t,r,s,i,o,a,c,l,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:i,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}const tm={};class JD{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function(n,e,t,r,s){return n.some(i=>i(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){const s=this._stateStyles["*"],i=this._stateStyles[e],o=s?s.buildStyles(t,r):{};return i?i.buildStyles(t,r):o}build(e,t,r,s,i,o,a,c,l,u){const d=[],h=this.ast.options&&this.ast.options.params||tm,p=this.buildStyles(r,a&&a.params||tm,d),b=c&&c.params||tm,_=this.buildStyles(s,b,d),F=new Set,P=new Map,Q=new Map,Y="void"===s,ye={params:Object.assign(Object.assign({},h),b)},Ge=u?[]:Zg(e,t,this.ast.animation,i,o,p,_,ye,l,d);let Ke=0;if(Ge.forEach(Xt=>{Ke=Math.max(Xt.duration+Xt.delay,Ke)}),d.length)return KD(t,this._triggerName,r,s,Y,p,_,[],[],P,Q,Ke,d);Ge.forEach(Xt=>{const en=Xt.element,cs=Rn(P,en,{});Xt.preStyleProps.forEach(_r=>cs[_r]=!0);const ls=Rn(Q,en,{});Xt.postStyleProps.forEach(_r=>ls[_r]=!0),en!==t&&F.add(en)});const gn=Xu(F.values());return KD(t,this._triggerName,r,s,Y,p,_,Ge,gn,P,Q,Ke)}}class R3{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},s=Bo(this.defaultParams);return Object.keys(e).forEach(i=>{const o=e[i];null!=o&&(s[i]=o)}),this.styles.styles.forEach(i=>{if("string"!=typeof i){const o=i;Object.keys(o).forEach(a=>{let c=o[a];c.length>1&&(c=Zu(c,s,t));const l=this.normalizer.normalizePropertyName(a,t);c=this.normalizer.normalizeStyleValue(a,l,c,t),r[l]=c})}}),r}}class N3{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(s=>{this.states[s.name]=new R3(s.style,s.options&&s.options.params||{},r)}),YD(this.states,"true","1"),YD(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new JD(e,s,this.states))}),this.fallbackTransition=function(n,e,t){return new JD(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(o=>o.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function YD(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const k3=new sd;class F3{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],s=Kg(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=s}_buildPlayer(e,t,r){const s=e.element,i=AD(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(s,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],i=this._animations[e];let o;const a=new Map;if(i?(o=Zg(this._driver,t,i,Hg,Qu,{},{},r,k3,s),o.forEach(u=>{const d=Rn(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(s.push("The requested animation doesn't exist or has already been destroyed"),o=[]),s.length)throw new Error(`Unable to create the animation due to the following errors: ${s.join("\n")}`);a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,ns)})});const l=Os(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=l,l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,s){const i=kg(t,"","","");return Ng(this._getPlayer(e),r,i,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const i=this._getPlayer(e);switch(r){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const ZD="ng-animate-queued",XD="ng-animate-disabled",e0=".ng-animate-disabled",B3=[],t0={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},$3={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Kn="__ng_removed";class nm{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function(n){return null!=n?n:null}(r?e.value:e),r){const i=Bo(e);delete i.value,this.options=i}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const Dc="void",rm=new nm(Dc);class U3{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Jn(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const i=Rn(this._elementListeners,e,[]),o={name:t,phase:r,callback:s};i.push(o);const a=Rn(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Jn(e,Ku),Jn(e,Ku+"-"+t),a[t]=rm),()=>{this._engine.afterFlush(()=>{const c=i.indexOf(o);c>=0&&i.splice(c,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,s=!0){const i=this._getTrigger(t),o=new sm(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Jn(e,Ku),Jn(e,Ku+"-"+t),this._engine.statesByElement.set(e,a={}));let c=a[t];const l=new nm(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a[t]=l,c||(c=rm),l.value!==Dc&&c.value===l.value){if(!function(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const i=t[s];if(!e.hasOwnProperty(i)||n[i]!==e[i])return!1}return!0}(c.params,l.params)){const b=[],_=i.matchStyles(c.value,c.params,b),F=i.matchStyles(l.value,l.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{pi(e,_),Or(e,F)})}return}const h=Rn(this._engine.playersByElement,e,[]);h.forEach(b=>{b.namespaceId==this.id&&b.triggerName==t&&b.queued&&b.destroy()});let f=i.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!s)return;f=i.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(Jn(e,ZD),o.onStart(()=>{$o(e,ZD)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);const _=this._engine.playersByElement.get(e);if(_){let F=_.indexOf(o);F>=0&&_.splice(F,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Ju,!0);r.forEach(s=>{if(s[Kn])return;const i=this._engine.fetchNamespacesByElement(s);i.size?i.forEach(o=>o.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const i=this._engine.statesByElement.get(e);if(i){const o=[];if(Object.keys(i).forEach(a=>{if(this._triggers[a]){const c=this.trigger(e,a,Dc,s);c&&o.push(c)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),r&&Os(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(i=>{const o=i.name;if(s.has(o))return;s.add(o);const c=this._triggers[o].fallbackTransition,l=r[o]||rm,u=new nm(Dc),d=new sm(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const i=r.players.length?r.playersByQueriedElement.get(e):[];if(i&&i.length)s=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const i=e[Kn];(!i||i===t0)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Jn(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const i=r.element,o=this._elementListeners.get(i);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=kg(i,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Ng(r.player,a.phase,c,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const i=r.transition.ast.depCount,o=s.transition.ast.depCount;return 0==i||0==o?i-o:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class H3{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,i)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new U3(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let s=!1;for(let i=r;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),s=!0;break}s||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const s=Object.keys(r);for(let i=0;i<s.length;i++){const o=r[s[i]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,r,s){if(ad(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!ad(t))return;const i=t[Kn];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Jn(e,XD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),$o(e,XD))}removeNode(e,t,r,s){if(ad(t)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,r,s){this.collectedLeaveElements.push(t),t[Kn]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1}}listen(e,t,r,s,i){return ad(t)?this._fetchNamespace(e).listen(t,r,s,i):()=>{}}_buildInstruction(e,t,r,s,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,Ju,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,qg,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Os(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Kn];if(t&&t.setForRemoval){if(e[Kn]=t0,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,e0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,e0,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Jn(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Os(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new sd,s=[],i=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(ne=>{u.add(ne);const de=this.driver.query(ne,".ng-animate-queued",!0);for(let Se=0;Se<de.length;Se++)u.add(de[Se])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=s0(h,this.collectedEnterElements),p=new Map;let b=0;f.forEach((ne,de)=>{const Se=Hg+b++;p.set(de,Se),ne.forEach(je=>Jn(je,Se))});const _=[],F=new Set,P=new Set;for(let ne=0;ne<this.collectedLeaveElements.length;ne++){const de=this.collectedLeaveElements[ne],Se=de[Kn];Se&&Se.setForRemoval&&(_.push(de),F.add(de),Se.hasAnimation?this.driver.query(de,".ng-star-inserted",!0).forEach(je=>F.add(je)):P.add(de))}const Q=new Map,Y=s0(h,Array.from(F));Y.forEach((ne,de)=>{const Se=Qu+b++;Q.set(de,Se),ne.forEach(je=>Jn(je,Se))}),e.push(()=>{f.forEach((ne,de)=>{const Se=p.get(de);ne.forEach(je=>$o(je,Se))}),Y.forEach((ne,de)=>{const Se=Q.get(de);ne.forEach(je=>$o(je,Se))}),_.forEach(ne=>{this.processLeaveNode(ne)})});const ye=[],Ge=[];for(let ne=this._namespaceList.length-1;ne>=0;ne--)this._namespaceList[ne].drainQueuedTransitions(t).forEach(Se=>{const je=Se.player,Ht=Se.element;if(ye.push(je),this.collectedEnterElements.length){const Vr=Ht[Kn];if(Vr&&Vr.setForMove)return void je.destroy()}const Lr=!d||!this.driver.containsElement(d,Ht),On=Q.get(Ht),Us=p.get(Ht),yt=this._buildInstruction(Se,r,Us,On,Lr);if(yt.errors&&yt.errors.length)Ge.push(yt);else{if(Lr)return je.onStart(()=>pi(Ht,yt.fromStyles)),je.onDestroy(()=>Or(Ht,yt.toStyles)),void s.push(je);if(Se.isFallbackTransition)return je.onStart(()=>pi(Ht,yt.fromStyles)),je.onDestroy(()=>Or(Ht,yt.toStyles)),void s.push(je);yt.timelines.forEach(Vr=>Vr.stretchStartingKeyframe=!0),r.append(Ht,yt.timelines),o.push({instruction:yt,player:je,element:Ht}),yt.queriedElements.forEach(Vr=>Rn(a,Vr,[]).push(je)),yt.preStyleProps.forEach((Vr,zc)=>{const Fd=Object.keys(Vr);if(Fd.length){let wi=c.get(zc);wi||c.set(zc,wi=new Set),Fd.forEach(iy=>wi.add(iy))}}),yt.postStyleProps.forEach((Vr,zc)=>{const Fd=Object.keys(Vr);let wi=l.get(zc);wi||l.set(zc,wi=new Set),Fd.forEach(iy=>wi.add(iy))})}});if(Ge.length){const ne=[];Ge.forEach(de=>{ne.push(`@${de.triggerName} has failed due to:\n`),de.errors.forEach(Se=>ne.push(`- ${Se}\n`))}),ye.forEach(de=>de.destroy()),this.reportError(ne)}const Ke=new Map,gn=new Map;o.forEach(ne=>{const de=ne.element;r.has(de)&&(gn.set(de,de),this._beforeAnimationBuild(ne.player.namespaceId,ne.instruction,Ke))}),s.forEach(ne=>{const de=ne.element;this._getPreviousPlayers(de,!1,ne.namespaceId,ne.triggerName,null).forEach(je=>{Rn(Ke,de,[]).push(je),je.destroy()})});const Xt=_.filter(ne=>o0(ne,c,l)),en=new Map;r0(en,this.driver,P,l,ns).forEach(ne=>{o0(ne,c,l)&&Xt.push(ne)});const ls=new Map;f.forEach((ne,de)=>{r0(ls,this.driver,new Set(ne),c,"!")}),Xt.forEach(ne=>{const de=en.get(ne),Se=ls.get(ne);en.set(ne,Object.assign(Object.assign({},de),Se))});const _r=[],ia=[],oa={};o.forEach(ne=>{const{element:de,player:Se,instruction:je}=ne;if(r.has(de)){if(u.has(de))return Se.onDestroy(()=>Or(de,je.toStyles)),Se.disabled=!0,Se.overrideTotalTime(je.totalTime),void s.push(Se);let Ht=oa;if(gn.size>1){let On=de;const Us=[];for(;On=On.parentNode;){const yt=gn.get(On);if(yt){Ht=yt;break}Us.push(On)}Us.forEach(yt=>gn.set(yt,Ht))}const Lr=this._buildAnimation(Se.namespaceId,je,Ke,i,ls,en);if(Se.setRealPlayer(Lr),Ht===oa)_r.push(Se);else{const On=this.playersByElement.get(Ht);On&&On.length&&(Se.parentPlayer=Os(On)),s.push(Se)}}else pi(de,je.fromStyles),Se.onDestroy(()=>Or(de,je.toStyles)),ia.push(Se),u.has(de)&&s.push(Se)}),ia.forEach(ne=>{const de=i.get(ne.element);if(de&&de.length){const Se=Os(de);ne.setRealPlayer(Se)}}),s.forEach(ne=>{ne.parentPlayer?ne.syncPlayerEvents(ne.parentPlayer):ne.destroy()});for(let ne=0;ne<_.length;ne++){const de=_[ne],Se=de[Kn];if($o(de,Qu),Se&&Se.hasAnimation)continue;let je=[];if(a.size){let Lr=a.get(de);Lr&&Lr.length&&je.push(...Lr);let On=this.driver.query(de,qg,!0);for(let Us=0;Us<On.length;Us++){let yt=a.get(On[Us]);yt&&yt.length&&je.push(...yt)}}const Ht=je.filter(Lr=>!Lr.destroyed);Ht.length?z3(this,de,Ht):this.processLeaveNode(de)}return _.length=0,_r.forEach(ne=>{this.players.push(ne),ne.onDone(()=>{ne.destroy();const de=this.players.indexOf(ne);this.players.splice(de,1)}),ne.play()}),_r}elementContainsData(e,t){let r=!1;const s=t[Kn];return s&&s.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,i){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!i||i==Dc;a.forEach(l=>{l.queued||!c&&l.triggerName!=s||o.push(l)})}}return(r||s)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||s&&s!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const i=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,u=l!==i,d=Rn(r,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}pi(i,t.fromStyles)}_buildAnimation(e,t,r,s,i,o){const a=t.triggerName,c=t.element,l=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const b=p.element;u.add(b);const _=b[Kn];if(_&&_.removedBeforeQueried)return new jo(p.duration,p.delay);const F=b!==c,P=function(n){const e=[];return i0(n,e),e}((r.get(b)||B3).map(Ke=>Ke.getRealPlayer())).filter(Ke=>!!Ke.element&&Ke.element===b),Q=i.get(b),Y=o.get(b),ye=AD(0,this._normalizer,0,p.keyframes,Q,Y),Ge=this._buildPlayer(p,ye,P);if(p.subTimeline&&s&&d.add(b),F){const Ke=new sm(e,a,b);Ke.setRealPlayer(Ge),l.push(Ke)}return Ge});l.forEach(p=>{Rn(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Jn(p,VD));const f=Os(h);return f.onDestroy(()=>{u.forEach(p=>$o(p,VD)),Or(c,t.toStyles)}),d.forEach(p=>{Rn(s,p,[]).push(f)}),f}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new jo(e.duration,e.delay)}}class sm{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new jo,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>Ng(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Rn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function ad(n){return n&&1===n.nodeType}function n0(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function r0(n,e,t,r,s){const i=[];t.forEach(c=>i.push(n0(c)));const o=[];r.forEach((c,l)=>{const u={};c.forEach(d=>{const h=u[d]=e.computeStyle(l,d,s);(!h||0==h.length)&&(l[Kn]=$3,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>n0(c,i[a++])),o}function s0(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const s=new Set(e),i=new Map;function o(a){if(!a)return 1;let c=i.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:s.has(l)?1:o(l),i.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}const cd="$$classes";function Jn(n,e){if(n.classList)n.classList.add(e);else{let t=n[cd];t||(t=n[cd]={}),t[e]=!0}}function $o(n,e){if(n.classList)n.classList.remove(e);else{let t=n[cd];t&&delete t[e]}}function z3(n,e,t){Os(t).onDone(()=>n.processLeaveNode(e))}function i0(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof xD?i0(r.players,e):e.push(r)}}function o0(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(i=>s.add(i)):e.set(n,r),t.delete(n),!0}class ld{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,i)=>{},this._transitionEngine=new H3(e,t,r),this._timelineEngine=new F3(e,t,r),this._transitionEngine.onRemovalComplete=(s,i)=>this.onRemovalComplete(s,i)}registerTrigger(e,t,r,s,i){const o=e+"-"+s;let a=this._triggerCache[o];if(!a){const c=[],l=Kg(this._driver,i,c);if(c.length)throw new Error(`The animation trigger "${s}" has failed to build due to the following errors:\n - ${c.join("\n - ")}`);a=function(n,e,t){return new N3(n,e,t)}(s,l,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,s,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r,s){this._transitionEngine.removeNode(e,t,s||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[i,o]=RD(r);this._timelineEngine.command(i,t,o,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,i){if("@"==r.charAt(0)){const[o,a]=RD(r);return this._timelineEngine.listen(o,t,a,i)}return this._transitionEngine.listen(e,t,r,s,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function a0(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=im(e[0]),e.length>1&&(r=im(e[e.length-1]))):e&&(t=im(e)),t||r?new J3(n,t,r):null}let J3=(()=>{class n{constructor(t,r,s){this._element=t,this._startStyles=r,this._endStyles=s,this._state=0;let i=n.initialStylesByElement.get(t);i||n.initialStylesByElement.set(t,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Or(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Or(this._element,this._initialStyles),this._endStyles&&(Or(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(pi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(pi(this._element,this._endStyles),this._endStyles=null),Or(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function im(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const s=t[r];Y3(s)&&(e=e||{},e[s]=n[s])}return e}function Y3(n){return"display"===n||"position"===n}const c0="animation",l0="animationend";class eB{constructor(e,t,r,s,i,o,a){this._element=e,this._name=t,this._duration=r,this._delay=s,this._easing=i,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=c=>this._handleCallback(c)}apply(){(function(n,e){const t=am(n,"").trim();let r=0;t.length&&(function(n,e){let t=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&t++;return t}(t)+1,e=`${t}, ${e}`),ud(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),h0(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){u0(this._element,this._name,"paused")}resume(){u0(this._element,this._name,"running")}setPosition(e){const t=d0(this._element,this._name);this._position=e*this._duration,ud(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),h0(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const r=am(n,"").split(","),s=om(r,e);s>=0&&(r.splice(s,1),ud(n,"",r.join(",")))}(this._element,this._name))}}function u0(n,e,t){ud(n,"PlayState",t,d0(n,e))}function d0(n,e){const t=am(n,"");return t.indexOf(",")>0?om(t.split(","),e):om([t],e)}function om(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function h0(n,e,t){t?n.removeEventListener(l0,e):n.addEventListener(l0,e)}function ud(n,e,t,r){const s=c0+e;if(null!=r){const i=n.style[s];if(i.length){const o=i.split(",");o[r]=t,t=o.join(",")}}n.style[s]=t}function am(n,e){return n.style[c0+e]||""}class f0{constructor(e,t,r,s,i,o,a,c){this.element=e,this.keyframes=t,this.animationName=r,this._duration=s,this._delay=i,this._finalStyles=a,this._specialStyles=c,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=s+i,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new eB(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:Qg(this.element,r))})}this.currentSnapshot=e}}class oB extends jo{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=kD(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class g0{constructor(){this._count=0}validateStyleProperty(e){return Vg(e)}matchesElement(e,t){return jg(e,t)}containsElement(e,t){return Bg(e,t)}query(e,t,r){return $g(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(a=>kD(a));let s=`@keyframes ${t} {\n`,i="";r.forEach(a=>{i=" ";const c=parseFloat(a.offset);s+=`${i}${100*c}% {\n`,i+=" ",Object.keys(a).forEach(l=>{const u=a[l];switch(l){case"offset":return;case"easing":return void(u&&(s+=`${i}animation-timing-function: ${u};\n`));default:return void(s+=`${i}${l}: ${u};\n`)}}),s+=`${i}}\n`}),s+="}\n";const o=document.createElement("style");return o.textContent=s,o}animate(e,t,r,s,i,o=[],a){const c=o.filter(_=>_ instanceof f0),l={};HD(r,s)&&c.forEach(_=>{let F=_.currentSnapshot;Object.keys(F).forEach(P=>l[P]=F[P])});const u=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(s=>{"offset"==s||"easing"==s||(e[s]=r[s])})}),e}(t=qD(e,t,l));if(0==r)return new oB(e,u);const d="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,d,t);(function(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(h);const p=a0(e,t),b=new f0(e,t,d,r,s,i,u,p);return b.onDestroy(()=>function(n){n.parentNode.removeChild(n)}(h)),b}}class y0{constructor(e,t,r,s){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:Qg(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class dB{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(_0().toString()),this._cssKeyframesDriver=new g0}validateStyleProperty(e){return Vg(e)}matchesElement(e,t){return jg(e,t)}containsElement(e,t){return Bg(e,t)}query(e,t,r){return $g(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,s,i,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,s,i,o);const u={duration:r,delay:s,fill:0==s?"both":"forwards"};i&&(u.easing=i);const d={},h=o.filter(p=>p instanceof y0);HD(r,s)&&h.forEach(p=>{let b=p.currentSnapshot;Object.keys(b).forEach(_=>d[_]=b[_])});const f=a0(e,t=qD(e,t=t.map(p=>ks(p,!1)),d));return new y0(e,t,u,f)}}function _0(){return ID()&&Element.prototype.animate||{}}let fB=(()=>{class n extends DD{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Et.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?MD(t):t;return v0(this._renderer,null,r,"register",[s]),new pB(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(z(ri),z(Ct))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();class pB extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new gB(this._id,e,t||{},this._renderer)}}class gB{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return v0(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function v0(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const C0="@.disabled";let mB=(()=>{class n{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(i,o)=>{o&&o.parentNode(i)&&o.removeChild(i.parentNode,i)}}createRenderer(t,r){const i=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let u=this._rendererCache.get(i);return u||(u=new b0("",i,this.engine),this._rendererCache.set(i,u)),u}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=u=>{Array.isArray(u)?u.forEach(c):this.engine.registerTrigger(o,a,t,u.name,u)};return r.data.animation.forEach(c),new yB(this,a,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(i=>{const[o,a]=i;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(z(ri),z(ld),z(Xe))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();class b0{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==C0?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class yB extends b0{constructor(e,t,r,s){super(t,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==C0?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let i=t.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,s,i,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let CB=(()=>{class n extends ld{constructor(t,r,s){super(t.body,r,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(z(Ct),z(Ug),z(em))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const w0=new Ce("AnimationModuleType"),E0=[{provide:DD,useClass:fB},{provide:em,useFactory:function(){return new T3}},{provide:ld,useClass:CB},{provide:ri,useFactory:function(n,e,t){return new mB(n,e,t)},deps:[ku,ld,Xe]}],S0=[{provide:Ug,useFactory:function(){return"function"==typeof _0()?new dB:new g0}},{provide:w0,useValue:"BrowserAnimations"},...E0],D0=[{provide:Ug,useClass:FD},{provide:w0,useValue:"NoopAnimations"},...E0];let SB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?D0:S0}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({providers:S0,imports:[cg]}),n})();function K(n,e,t,r){return new(t||(t=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):function(i){return i instanceof t?i:new t(function(o){o(i)})}(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}class Be extends se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ze;return this._value}next(e){super.next(this._value=e)}}class TB extends j{notifyNext(e,t,r,s,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class xB extends j{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function IB(n,e,t,r,s=new xB(n,t,r)){if(!s.closed)return e instanceof ce?e.subscribe(s):Vd(e)(s)}const I0={};function Mc(...n){let e,t;return rn(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&I(n[0])&&(n=n[0]),Bd(n,t).lift(new AB(e))}class AB{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new RB(e,this.resultSelector))}}class RB extends TB{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(I0),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(IB(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const s=this.values,o=this.toRespond?s[r]===I0?--this.toRespond:this.toRespond:0;s[r]=t,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function me(...n){let e=n[n.length-1];return rn(e)?(n.pop(),jd(n,e)):Bd(n)}function kt(n,e){return function(r){return r.lift(new PB(n,e))}}class PB{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new NB(e,this.predicate,this.thisArg))}}class NB extends j{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}class OB extends R{constructor(e,t){super()}schedule(e,t=0){return this}}let A0=(()=>{class n{constructor(t,r=n.now){this.SchedulerAction=t,this.now=r}schedule(t,r=0,s){return new this.SchedulerAction(this,t).schedule(s,r)}}return n.now=()=>Date.now(),n})();class Fs extends A0{constructor(e,t=A0.now){super(e,()=>Fs.delegate&&Fs.delegate!==this?Fs.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,r){return Fs.delegate&&Fs.delegate!==this?Fs.delegate.schedule(e,t,r):super.schedule(e,t,r)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Uo=new Fs(class extends OB{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(i){r=!0,s=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),s}_unsubscribe(){const e=this.id,t=this.scheduler,r=t.actions,s=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&r.splice(s,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}});function Ho(n,e=Uo){return t=>t.lift(new FB(n,e))}class FB{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new LB(e,this.dueTime,this.scheduler))}}class LB extends j{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(VB,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function VB(n){n.debouncedNext()}const fd=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})(),R0=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})(),mi=new ce(n=>n.complete());function pd(n){return n?function(n){return new ce(e=>n.schedule(()=>e.complete()))}(n):mi}function lm(n){return e=>0===n?pd():e.lift(new BB(n))}class BB{constructor(e){if(this.total=e,this.total<0)throw new R0}call(e,t){return t.subscribe(new $B(e,this.total))}}class $B extends j{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function P0(n=null){return e=>e.lift(new UB(n))}class UB{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new HB(e,this.defaultValue))}}class HB extends j{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function N0(n=WB){return e=>e.lift(new qB(n))}class qB{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new GB(e,this.errorFactory))}}class GB extends j{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function WB(){return new fd}function Yn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?kt((s,i)=>n(s,i,r)):oe,lm(1),t?P0(e):N0(()=>new fd))}function qo(n){return e=>e.lift(new zB(n))}class zB{constructor(e){this.notifier=e}call(e,t){const r=new QB(e),s=Ai(this.notifier,new xi(r));return s&&!r.seenValue?(r.add(s),t.subscribe(r)):r}}class QB extends Ii{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function O0(n){return n instanceof Date&&!isNaN(+n)}function k0(n,e){return new ce(e?t=>e.schedule(KB,0,{error:n,subscriber:t}):t=>t.error(n))}function KB({error:n,subscriber:e}){e.error(n)}class mr{constructor(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}}accept(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)}toObservable(){switch(this.kind){case"N":return me(this.value);case"E":return k0(this.error);case"C":return pd()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new mr("N",e):mr.undefinedValueNotification}static createError(e){return new mr("E",void 0,e)}static createComplete(){return mr.completeNotification}}mr.completeNotification=new mr("C"),mr.undefinedValueNotification=new mr("N",void 0);class YB{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new um(e,this.delay,this.scheduler))}}class um extends j{constructor(e,t,r){super(e),this.delay=t,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,r=t.queue,s=e.scheduler,i=e.destination;for(;r.length>0&&r[0].time-s.now()<=0;)r.shift().notification.observe(i);if(r.length>0){const o=Math.max(0,r[0].time-s.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(um.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,r=new ZB(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(mr.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(mr.createComplete()),this.unsubscribe()}}class ZB{constructor(e,t){this.time=e,this.notification=t}}function F0(n,e){return t=>t.lift(new XB(n,e))}class XB{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new e$(e,this.compare,this.keySelector))}}class e$ extends j{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:s}=this;t=s?s(e):e}catch(s){return this.destination.error(s)}let r=!1;if(this.hasKey)try{const{compare:s}=this;r=s(this.key,t)}catch(s){return this.destination.error(s)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}const t$=(()=>{function n(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return n.prototype=Object.create(Error.prototype),n})();class r${constructor(e,t,r,s){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=s}call(e,t){return t.subscribe(new dm(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class dm extends Ii{constructor(e,t,r,s,i){super(e),this.absoluteTimeout=t,this.waitFor=r,this.withObservable=s,this.scheduler=i,this.scheduleTimeout()}static dispatchTimeout(e){const{withObservable:t}=e;e._unsubscribeAndRecycle(),e.add(Ai(t,new xi(e)))}scheduleTimeout(){const{action:e}=this;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(dm.dispatchTimeout,this.waitFor,this))}_next(e){this.absoluteTimeout||this.scheduleTimeout(),super._next(e)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}function Ls(n){return function(t){const r=new i$(n),s=t.lift(r);return r.caught=s}}class i${constructor(e){this.selector=e}call(e,t){return t.subscribe(new o$(e,this.selector,this.caught))}}class o$ extends Ii{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(i){return void super.error(i)}this._unsubscribeAndRecycle();const r=new xi(this);this.add(r);const s=Ai(t,r);s!==r&&this.add(s)}}}var N=m(6023);let hm;try{hm="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){hm=!1}let yr,fm=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function(n){return n===lS}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!hm)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(z(xo))},n.\u0275prov=ie({factory:function(){return new n(z(xo))},token:n,providedIn:"root"}),n})(),a$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({}),n})();function V0(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function B0(n,e,t,r){return v(t)&&(r=t,t=void 0),r?B0(n,e,t).pipe(pe(s=>I(s)?r(...s):r(s))):new ce(s=>{$0(n,e,function(o){s.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},s,t)})}function $0(n,e,t,r,s){let i;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,s),i=()=>o.removeEventListener(e,t,s)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),i=()=>o.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),i=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)$0(n[o],e,t,r,s)}r.add(i)}yr="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};class y${constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new _$(e,this.durationSelector))}}class _$ extends Ii{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:s}=this;t=s(e)}catch(s){return this.destination.error(s)}const r=Ai(t,new xi(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:e,hasValue:t,throttled:r}=this;r&&(this.remove(r),this.throttled=void 0,r.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function U0(n){return!I(n)&&n-parseFloat(n)+1>=0}function C$(n){const{index:e,period:t,subscriber:r}=n;if(r.next(e),!r.closed){if(-1===t)return r.complete();n.index=e+1,this.schedule(n,t)}}let E$=(()=>{class n{constructor(t,r,s,i){this._elementRef=t,this._platform=r,this._ngZone=s,this._destroyed=new se,this._enabled=!0,this._previousMinRows=-1,this._isViewInited=!1,this._handleFocusEvent=o=>{this._hasFocus="focus"===o.type},this._document=i,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(t){this._minRows=V0(t),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(t){this._maxRows=V0(t),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(t){t=function(n){return null!=n&&"false"!=`${n}`}(t),this._enabled!==t&&((this._enabled=t)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(t){this._cachedPlaceholderHeight=void 0,this._textareaElement.placeholder=t,this._cacheTextareaPlaceholderHeight()}_setMinHeight(){const t=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.minHeight=t)}_setMaxHeight(){const t=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.maxHeight=t)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{B0(this._getWindow(),"resize").pipe(function(n,e=Uo){return function(n){return function(t){return t.lift(new y$(n))}}(()=>function(n=0,e,t){let r=-1;return U0(e)?r=Number(e)<1?1:Number(e):rn(e)&&(t=e),rn(t)||(t=Uo),new ce(s=>{const i=U0(n)?n:+n-t.now();return t.schedule(C$,i,{index:0,period:r,subscriber:s})})}(n,e))}(16),qo(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0)),this._textareaElement.addEventListener("focus",this._handleFocusEvent),this._textareaElement.addEventListener("blur",this._handleFocusEvent)}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._textareaElement.removeEventListener("focus",this._handleFocusEvent),this._textareaElement.removeEventListener("blur",this._handleFocusEvent),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let t=this._textareaElement.cloneNode(!1);t.rows=1,t.style.position="absolute",t.style.visibility="hidden",t.style.border="none",t.style.padding="0",t.style.height="",t.style.minHeight="",t.style.maxHeight="",t.style.overflow="hidden",this._textareaElement.parentNode.appendChild(t),this._cachedLineHeight=t.clientHeight,this._textareaElement.parentNode.removeChild(t),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){const t=this._textareaElement,r=t.style.marginBottom||"",s=this._platform.FIREFOX,i=s&&this._hasFocus,o=s?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";i&&(t.style.marginBottom=`${t.clientHeight}px`),t.classList.add(o);const a=t.scrollHeight-4;return t.classList.remove(o),i&&(t.style.marginBottom=r),a}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||null!=this._cachedPlaceholderHeight)return;if(!this.placeholder)return void(this._cachedPlaceholderHeight=0);const t=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=t}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(t=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;const r=this._elementRef.nativeElement,s=r.value;if(!t&&this._minRows===this._previousMinRows&&s===this._previousValue)return;const i=this._measureScrollHeight(),o=Math.max(i,this._cachedPlaceholderHeight||0);r.style.height=`${o}px`,this._ngZone.runOutsideAngular(()=>{"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(()=>this._scrollToCaretPosition(r)):setTimeout(()=>this._scrollToCaretPosition(r))}),this._previousValue=s,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(t){const{selectionStart:r,selectionEnd:s}=t;!this._destroyed.isStopped&&this._hasFocus&&t.setSelectionRange(r,s)}}return n.\u0275fac=function(t){return new(t||n)($(mt),$(fm),$(Xe),$(Ct,8))},n.\u0275dir=ue({type:n,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(t,r){1&t&&J("input",function(){return r._noopInputHandler()})},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]}),n})(),S$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({imports:[[a$]]}),n})();function Wo(n,e){return Lt(n,e,1)}class q0{}class G0{}class rs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),i=s.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(s,i),this.headers.has(i)?this.headers.get(i).push(o):this.headers.set(i,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof rs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new rs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof rs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const i=e.value;if(i){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===i.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class D${encodeKey(e){return W0(e)}encodeValue(e){return W0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const T$=/%(\d[a-f0-9])/gi,x$={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function W0(n){return encodeURIComponent(n).replace(T$,(e,t)=>{var r;return null!==(r=x$[t])&&void 0!==r?r:e})}function z0(n){return`${n}`}class Vs{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new D$,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const i=s.indexOf("="),[o,a]=-1==i?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,i)),e.decodeValue(s.slice(i+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Vs({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(z0(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(z0(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class I${constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function Q0(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function K0(n){return"undefined"!=typeof Blob&&n instanceof Blob}function J0(n){return"undefined"!=typeof FormData&&n instanceof FormData}class xc{constructor(e,t,r,s){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,i=s):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new rs),this.context||(this.context=new I$),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Vs,this.urlWithParams=t}serializeBody(){return null===this.body?null:Q0(this.body)||K0(this.body)||J0(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Vs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||J0(this.body)?null:K0(this.body)?this.body.type||null:Q0(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,s=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,c=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,u=e.params||this.params;const d=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new xc(r,s,o,{params:u,headers:l,context:d,reportProgress:c,responseType:i,withCredentials:a})}}var Tt=(()=>((Tt=Tt||{})[Tt.Sent=0]="Sent",Tt[Tt.UploadProgress=1]="UploadProgress",Tt[Tt.ResponseHeader=2]="ResponseHeader",Tt[Tt.DownloadProgress=3]="DownloadProgress",Tt[Tt.Response=4]="Response",Tt[Tt.User=5]="User",Tt))();class gm{constructor(e,t=200,r="OK"){this.headers=e.headers||new rs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class mm extends gm{constructor(e={}){super(e),this.type=Tt.ResponseHeader}clone(e={}){return new mm({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class md extends gm{constructor(e={}){super(e),this.type=Tt.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new md({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Y0 extends gm{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ym(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let _m=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let i;if(t instanceof xc)i=t;else{let c,l;c=s.headers instanceof rs?s.headers:new rs(s.headers),s.params&&(l=s.params instanceof Vs?s.params:new Vs({fromObject:s.params})),i=new xc(t,r,void 0!==s.body?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const o=me(i).pipe(Wo(c=>this.handler.handle(c)));if(t instanceof xc||"events"===s.observe)return o;const a=o.pipe(kt(c=>c instanceof md));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(pe(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(pe(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(pe(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(pe(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Vs).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,ym(s,r))}post(t,r,s={}){return this.request("POST",t,ym(s,r))}put(t,r,s={}){return this.request("PUT",t,ym(s,r))}}return n.\u0275fac=function(t){return new(t||n)(z(q0))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();class Z0{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const X0=new Ce("HTTP_INTERCEPTORS");let P$=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const N$=/^\)\]\}',?\n/;let eM=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ce(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((f,p)=>s.setRequestHeader(f,p.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&s.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();s.responseType="json"!==f?f:"text"}const i=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=1223===s.status?204:s.status,p=s.statusText||"OK",b=new rs(s.getAllResponseHeaders()),_=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return o=new mm({headers:b,status:f,statusText:p,url:_}),o},c=()=>{let{headers:f,status:p,statusText:b,url:_}=a(),F=null;204!==p&&(F=void 0===s.response?s.responseText:s.response),0===p&&(p=F?200:0);let P=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof F){const Q=F;F=F.replace(N$,"");try{F=""!==F?JSON.parse(F):null}catch(Y){F=Q,P&&(P=!1,F={error:Y,text:F})}}P?(r.next(new md({body:F,headers:f,status:p,statusText:b,url:_||void 0})),r.complete()):r.error(new Y0({error:F,headers:f,status:p,statusText:b,url:_||void 0}))},l=f=>{const{url:p}=a(),b=new Y0({error:f,status:s.status||0,statusText:s.statusText||"Unknown Error",url:p||void 0});r.error(b)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let p={type:Tt.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===t.responseType&&!!s.responseText&&(p.partialText=s.responseText),r.next(p)},h=f=>{let p={type:Tt.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),r.next(p)};return s.addEventListener("load",c),s.addEventListener("error",l),s.addEventListener("timeout",l),s.addEventListener("abort",l),t.reportProgress&&(s.addEventListener("progress",d),null!==i&&s.upload&&s.upload.addEventListener("progress",h)),s.send(i),r.next({type:Tt.Sent}),()=>{s.removeEventListener("error",l),s.removeEventListener("abort",l),s.removeEventListener("load",c),s.removeEventListener("timeout",l),t.reportProgress&&(s.removeEventListener("progress",d),null!==i&&s.upload&&s.upload.removeEventListener("progress",h)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(z(hS))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const vm=new Ce("XSRF_COOKIE_NAME"),Cm=new Ce("XSRF_HEADER_NAME");class tM{}let k$=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=eS(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(z(Ct),z(xo),z(vm))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),bm=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const i=this.tokenService.getToken();return null!==i&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,i)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(z(tM),z(Cm))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),F$=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(X0,[]);this.chain=r.reduceRight((s,i)=>new Z0(s,i),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(z(G0),z(He))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),L$=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:bm,useClass:P$}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:vm,useValue:t.cookieName}:[],t.headerName?{provide:Cm,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({providers:[bm,{provide:X0,useExisting:bm,multi:!0},{provide:tM,useClass:k$},{provide:vm,useValue:"XSRF-TOKEN"},{provide:Cm,useValue:"X-XSRF-TOKEN"}]}),n})(),V$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({providers:[_m,{provide:q0,useClass:F$},eM,{provide:G0,useExisting:eM}],imports:[[L$.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();function wm(...n){return la(1)(me(...n))}function nM(n){return new ce(e=>{let t;try{t=n()}catch(s){return void e.error(s)}return(t?qt(t):pd()).subscribe(e)})}function js(n,e){return"function"==typeof e?t=>t.pipe(js((r,s)=>qt(n(r,s)).pipe(pe((i,o)=>e(r,i,s,o))))):t=>t.lift(new B$(n))}class B${constructor(e){this.project=e}call(e,t){return t.subscribe(new $$(e,this.project))}}class $$ extends Ii{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(s){return void this.destination.error(s)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new xi(this),s=this.destination;s.add(r),this.innerSubscription=Ai(e,r),this.innerSubscription!==r&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function rM(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(s){return s.lift(new H$(n,e,t))}}class H${constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new q$(e,this.accumulator,this.seed,this.hasSeed))}}class q$ extends j{constructor(e,t,r,s){super(e),this.accumulator=t,this._seed=r,this.hasSeed=s,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(s){this.destination.error(s)}this.seed=r,this.destination.next(r)}}function Em(n){return function(t){return 0===n?pd():t.lift(new G$(n))}}class G${constructor(e){if(this.total=e,this.total<0)throw new R0}call(e,t){return t.subscribe(new W$(e,this.total))}}class W$ extends j{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,s=this.count++;t.length<r?t.push(e):t[s%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,s=this.ring;for(let i=0;i<r;i++){const o=t++%r;e.next(s[o])}}e.complete()}}function Bs(){}function Nn(n,e,t){return function(s){return s.lift(new Q$(n,e,t))}}class Q${constructor(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}call(e,t){return t.subscribe(new K$(e,this.nextOrObserver,this.error,this.complete))}}class K$ extends j{constructor(e,t,r,s){super(e),this._tapNext=Bs,this._tapError=Bs,this._tapComplete=Bs,this._tapError=r||Bs,this._tapComplete=s||Bs,v(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Bs,this._tapError=t.error||Bs,this._tapComplete=t.complete||Bs)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class Y${constructor(e){this.callback=e}call(e,t){return t.subscribe(new Z$(e,this.callback))}}class Z$ extends j{constructor(e,t){super(e),this.add(new R(t))}}class ss{constructor(e,t){this.id=e,this.url=t}}class Sm extends ss{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ic extends ss{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sM extends ss{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class X$ extends ss{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eU extends ss{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tU extends ss{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nU extends ss{constructor(e,t,r,s,i){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rU extends ss{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sU extends ss{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iM{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oM{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class iU{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oU{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aU{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cU{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Oe="primary";class lU{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function zo(n){return new lU(n)}const cM="ngNavigationCancelingError";function Dm(n){const e=Error("NavigationCancelingError: "+n);return e[cM]=!0,e}function dU(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let i=0;i<r.length;i++){const o=r[i],a=n[i];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function kr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let i=0;i<t.length;i++)if(s=t[i],!lM(n[s],e[s]))return!1;return!0}function lM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,i)=>r[i]===s)}return n===e}function uM(n){return Array.prototype.concat.apply([],n)}function dM(n){return n.length>0?n[n.length-1]:null}function Gt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Fr(n){return $l(n)?n:$a(n)?qt(Promise.resolve(n)):me(n)}const pU={exact:function pM(n,e,t){if(!vi(n.segments,e.segments)||!yd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!pM(n.children[r],e.children[r],t))return!1;return!0},subset:gM},hM={exact:function(n,e){return kr(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lM(n[t],e[t]))},ignored:()=>!0};function fM(n,e,t){return pU[t.paths](n.root,e.root,t.matrixParams)&&hM[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function gM(n,e,t){return mM(n,e,e.segments,t)}function mM(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!vi(s,t)||e.hasChildren()||!yd(s,t,r))}if(n.segments.length===t.length){if(!vi(n.segments,t)||!yd(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!gM(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!!(vi(n.segments,s)&&yd(n.segments,s,r)&&n.children[Oe])&&mM(n.children[Oe],e,i,r)}}function yd(n,e,t){return e.every((r,s)=>hM[t](n[s].parameters,r.parameters))}class _i{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zo(this.queryParams)),this._queryParamMap}toString(){return vU.serialize(this)}}class Le{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Gt(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _d(this)}}class Ac{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=zo(this.parameters)),this._parameterMap}toString(){return CM(this)}}function vi(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Mm{}class yM{parse(e){const t=new xU(e);return new _i(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${`/${Rc(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${vd(t)}=${vd(s)}`).join("&"):`${vd(t)}=${vd(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(n){return encodeURI(n)}(e.fragment)}`:""}`}}const vU=new yM;function _d(n){return n.segments.map(e=>CM(e)).join("/")}function Rc(n,e){if(!n.hasChildren())return _d(n);if(e){const t=n.children[Oe]?Rc(n.children[Oe],!1):"",r=[];return Gt(n.children,(s,i)=>{i!==Oe&&r.push(`${i}:${Rc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Gt(n.children,(r,s)=>{s===Oe&&(t=t.concat(e(r,s)))}),Gt(n.children,(r,s)=>{s!==Oe&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Oe?[Rc(n.children[Oe],!1)]:[`${s}:${Rc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Oe]?`${_d(n)}/${t[0]}`:`${_d(n)}/(${t.join("//")})`}}function _M(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vd(n){return _M(n).replace(/%3B/gi,";")}function Tm(n){return _M(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cd(n){return decodeURIComponent(n)}function vM(n){return Cd(n.replace(/\+/g,"%20"))}function CM(n){return`${Tm(n.path)}${function(n){return Object.keys(n).map(e=>`;${Tm(e)}=${Tm(n[e])}`).join("")}(n.parameters)}`}const EU=/^[^\/()?;=#]+/;function bd(n){const e=n.match(EU);return e?e[0]:""}const SU=/^[^=?&#]+/,MU=/^[^?&#]+/;class xU{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Oe]=new Le(e,t)),r}parseSegment(){const e=bd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ac(Cd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=bd(this.remaining);s&&(r=s,this.capture(r))}e[Cd(t)]=Cd(r)}parseQueryParam(e){const t=function(n){const e=n.match(SU);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function(n){const e=n.match(MU);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const s=vM(t),i=vM(r);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(i)}else e[s]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=bd(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let i;r.indexOf(":")>-1?(i=r.substr(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Oe);const o=this.parseChildren();t[i]=1===Object.keys(o).length?o[Oe]:new Le([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class bM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=xm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Im(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Im(e,this._root).map(t=>t.value)}}function xm(n,e){if(n===e.value)return e;for(const t of e.children){const r=xm(n,t);if(r)return r}return null}function Im(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Im(n,t);if(r.length)return r.unshift(e),r}return[]}class is{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Pc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class wM extends bM{constructor(e,t){super(e),this.snapshot=t,Am(this,e)}toString(){return this.snapshot.toString()}}function EM(n,e){const t=function(n,e){const o=new wd([],{},{},"",{},Oe,e,null,n.root,-1,{});return new DM("",new is(o,[]))}(n,e),r=new Be([new Ac("",{})]),s=new Be({}),i=new Be({}),o=new Be({}),a=new Be(""),c=new Qo(r,s,o,a,i,Oe,e,t.root);return c.snapshot=t.root,new wM(new is(c,[]),t)}class Qo{constructor(e,t,r,s,i,o,a,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(pe(e=>zo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(pe(e=>zo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function SM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],i=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(i.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class wd{constructor(e,t,r,s,i,o,a,c,l,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class DM extends bM{constructor(e,t){super(t),this.url=e,Am(this,t)}toString(){return MM(this._root)}}function Am(n,e){e.value._routerState=n,e.children.forEach(t=>Am(n,t))}function MM(n){const e=n.children.length>0?` { ${n.children.map(MM).join(", ")} } `:"";return`${n.value}${e}`}function Rm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,kr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),kr(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!kr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),kr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Pm(n,e){return kr(n.params,e.params)&&function(n,e){return vi(n,e)&&n.every((t,r)=>kr(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||Pm(n.parent,e.parent))}function Ed(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Ed(n,r,s);return Ed(n,r)})}(n,e,t);return new is(r,s)}{if(n.shouldAttach(e.value)){const i=n.retrieve(e.value);if(null!==i){const o=i.route;return TM(e,o),o}}const r=function(n){return new Qo(new Be(n.url),new Be(n.params),new Be(n.queryParams),new Be(n.fragment),new Be(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(i=>Ed(n,i));return new is(r,s)}}function TM(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)TM(n.children[t],e.children[t])}function Sd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Nc(n){return"object"==typeof n&&null!=n&&n.outlets}function Nm(n,e,t,r,s){let i={};return r&&Gt(r,(o,a)=>{i[a]=Array.isArray(o)?o.map(c=>`${c}`):`${o}`}),new _i(t.root===n?e:xM(t.root,n,e),i,s)}function xM(n,e,t){const r={};return Gt(n.children,(s,i)=>{r[i]=s===e?t:xM(s,e,t)}),new Le(n.segments,r)}class IM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Sd(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(Nc);if(s&&s!==dM(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Om{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function AM(n,e,t){if(n||(n=new Le([],{})),0===n.segments.length&&n.hasChildren())return Dd(n,e,t);const r=function(n,e,t){let r=0,s=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return i;const o=n.segments[s],a=t[r];if(Nc(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(s>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!PM(c,l,o))return i;r+=2}else{if(!PM(c,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const i=new Le(n.segments.slice(0,r.pathIndex),{});return i.children[Oe]=new Le(n.segments.slice(r.pathIndex),n.children),Dd(i,0,s)}return r.match&&0===s.length?new Le(n.segments,{}):r.match&&!n.hasChildren()?km(n,e,t):r.match?Dd(n,0,s):km(n,e,t)}function Dd(n,e,t){if(0===t.length)return new Le(n.segments,{});{const r=function(n){return Nc(n[0])?n[0].outlets:{[Oe]:n}}(t),s={};return Gt(r,(i,o)=>{"string"==typeof i&&(i=[i]),null!==i&&(s[o]=AM(n.children[o],e,i))}),Gt(n.children,(i,o)=>{void 0===r[o]&&(s[o]=i)}),new Le(n.segments,s)}}function km(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const i=t[s];if(Nc(i)){const c=BU(i.outlets);return new Le(r,c)}if(0===s&&Sd(t[0])){r.push(new Ac(n.segments[e].path,RM(t[0]))),s++;continue}const o=Nc(i)?i.outlets[Oe]:`${i}`,a=s<t.length-1?t[s+1]:null;o&&a&&Sd(a)?(r.push(new Ac(o,RM(a))),s+=2):(r.push(new Ac(o,{})),s++)}return new Le(r,{})}function BU(n){const e={};return Gt(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=km(new Le([],{}),0,t))}),e}function RM(n){const e={};return Gt(n,(t,r)=>e[r]=`${t}`),e}function PM(n,e,t){return n==t.path&&kr(e,t.parameters)}class UU{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Pc(t);e.children.forEach(i=>{const o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Gt(s,(i,o)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){const s=e.value,i=t?t.value:null;if(s===i)if(s.component){const o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const s=r.outlet.detach(),i=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:i})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,i=Pc(e);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Pc(t);e.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new cU(i.value.snapshot))}),e.children.length&&this.forwardEvent(new oU(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,i=t?t.value:null;if(Rm(s),s===i)if(s.component){const o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),NM(a.route)}else{const a=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),c=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=s,o.resolver=c,o.outlet&&o.outlet.activateWith(s,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}function NM(n){Rm(n.value),n.children.forEach(NM)}class Fm{constructor(e,t){this.routes=e,this.module=t}}function $s(n){return"function"==typeof n}function Ci(n){return n instanceof _i}const Oc=Symbol("INITIAL_VALUE");function kc(){return js(n=>Mc(n.map(e=>e.pipe(lm(1),function(...n){const e=n[n.length-1];return rn(e)?(n.pop(),t=>wm(n,t,e)):t=>wm(n,t)}(Oc)))).pipe(rM((e,t)=>{let r=!1;return t.reduce((s,i,o)=>s!==Oc?s:(i===Oc&&(r=!0),r||!1!==i&&o!==t.length-1&&!Ci(i)?s:i),e)},Oc),kt(e=>e!==Oc),pe(e=>Ci(e)?e:!0===e),lm(1)))}let OM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ot({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&we(0,"router-outlet")},directives:function(){return[Um]},encapsulation:2}),n})();function kM(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];KU(r,JU(e,r))}}function KU(n,e){n.children&&kM(n.children,e)}function JU(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Lm(n){const e=n.children&&n.children.map(Lm),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Oe&&(t.component=OM),t}function Zn(n){return n.outlet||Oe}function FM(n,e){const t=n.filter(r=>Zn(r)===e);return t.push(...n.filter(r=>Zn(r)!==e)),t}const LM={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Md(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},LM):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||dU)(t,n,e);if(!i)return Object.assign({},LM);const o={};Gt(i.posParams,(c,l)=>{o[l]=c.path});const a=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Td(n,e,t,r,s="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>xd(n,e,r)&&Zn(r)!==Oe)}(n,t,r)){const o=new Le(e,function(n,e,t,r){const s={};s[Oe]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const i of t)if(""===i.path&&Zn(i)!==Oe){const o=new Le([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,s[Zn(i)]=o}return s}(n,e,r,new Le(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>xd(n,e,r))}(n,t,r)){const o=new Le(n.segments,function(n,e,t,r,s,i){const o={};for(const a of r)if(xd(n,t,a)&&!s[Zn(a)]){const c=new Le([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===i?n.segments.length:e.length,o[Zn(a)]=c}return Object.assign(Object.assign({},s),o)}(n,e,t,r,n.children,s));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new Le(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function xd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function VM(n,e,t,r){return!!(Zn(n)===r||r!==Oe&&xd(e,t,n))&&("**"===n.path||Md(e,n,t).matched)}function jM(n,e,t){return 0===e.length&&!n.children[t]}class Fc{constructor(e){this.segmentGroup=e||null}}class BM{constructor(e){this.urlTree=e}}function Id(n){return new ce(e=>e.error(new Fc(n)))}function $M(n){return new ce(e=>e.error(new BM(n)))}function tH(n){return new ce(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class sH{constructor(e,t,r,s,i){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(Ar)}apply(){const e=Td(this.urlTree.root,[],[],this.config).segmentGroup,t=new Le(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Oe).pipe(pe(i=>this.createUrlTree(Vm(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ls(i=>{if(i instanceof BM)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof Fc?this.noMatchError(i):i}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Oe).pipe(pe(s=>this.createUrlTree(Vm(s),e.queryParams,e.fragment))).pipe(Ls(s=>{throw s instanceof Fc?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new Le([],{[Oe]:e}):e;return new _i(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(pe(i=>new Le([],i))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const i of Object.keys(r.children))"primary"===i?s.unshift(i):s.push(i);return qt(s).pipe(Wo(i=>{const o=r.children[i],a=FM(t,i);return this.expandSegmentGroup(e,a,o,i).pipe(pe(c=>({segment:c,outlet:i})))}),rM((i,o)=>(i[o.outlet]=o.segment,i),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?kt((s,i)=>n(s,i,r)):oe,Em(1),t?P0(e):N0(()=>new fd))}())}expandSegment(e,t,r,s,i,o){return qt(r).pipe(Wo(a=>this.expandSegmentAgainstRoute(e,t,r,a,s,i,o).pipe(Ls(l=>{if(l instanceof Fc)return me(null);throw l}))),Yn(a=>!!a),Ls((a,c)=>{if(a instanceof fd||"EmptyError"===a.name){if(jM(t,s,i))return me(new Le([],{}));throw new Fc(t)}throw a}))}expandSegmentAgainstRoute(e,t,r,s,i,o,a){return VM(s,t,i,o)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,i,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,i,o):Id(t):Id(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,i,o){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$M(i):this.lineralizeSegments(r,i).pipe(Lt(o=>{const a=new Le(o,{});return this.expandSegment(e,a,t,o,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,i,o){const{matched:a,consumedSegments:c,lastChild:l,positionalParamSegments:u}=Md(t,s,i);if(!a)return Id(t);const d=this.applyRedirectCommands(c,s.redirectTo,u);return s.redirectTo.startsWith("/")?$M(d):this.lineralizeSegments(s,d).pipe(Lt(h=>this.expandSegment(e,t,r,h.concat(i.slice(l)),o,!1)))}matchSegmentAgainstRoute(e,t,r,s,i){if("**"===r.path)return r.loadChildren?(r._loadedConfig?me(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(pe(h=>(r._loadedConfig=h,new Le(s,{})))):me(new Le(s,{}));const{matched:o,consumedSegments:a,lastChild:c}=Md(t,r,s);if(!o)return Id(t);const l=s.slice(c);return this.getChildConfig(e,r,s).pipe(Lt(d=>{const h=d.module,f=d.routes,{segmentGroup:p,slicedSegments:b}=Td(t,a,l,f),_=new Le(p.segments,p.children);if(0===b.length&&_.hasChildren())return this.expandChildren(h,f,_).pipe(pe(Y=>new Le(a,Y)));if(0===f.length&&0===b.length)return me(new Le(a,{}));const F=Zn(r)===i;return this.expandSegment(h,_,f,b,F?Oe:i,!0).pipe(pe(Q=>new Le(a.concat(Q.segments),Q.children)))}))}getChildConfig(e,t,r){return t.children?me(new Fm(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?me(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(Lt(s=>s?this.configLoader.load(e.injector,t).pipe(pe(i=>(t._loadedConfig=i,i))):function(n){return new ce(e=>e.error(Dm(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):me(new Fm([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?me(s.map(o=>{const a=e.get(o);let c;if(function(n){return n&&$s(n.canLoad)}(a))c=a.canLoad(t,r);else{if(!$s(a))throw new Error("Invalid CanLoad guard");c=a(t,r)}return Fr(c)})).pipe(kc(),Nn(o=>{if(!Ci(o))return;const a=Dm(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),pe(o=>!0===o)):me(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return me(r);if(s.numberOfChildren>1||!s.children[Oe])return tH(e.redirectTo);s=s.children[Oe]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const i=this.createSegmentGroup(e,t.root,r,s);return new _i(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Gt(e,(s,i)=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,s){const i=this.createSegments(e,t.segments,r,s);let o={};return Gt(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,r,s)}),new Le(i,o)}createSegments(e,t,r,s){return t.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,s):this.findOrReturn(i,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function Vm(n){const e={};for(const r of Object.keys(n.children)){const i=Vm(n.children[r]);(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function(n){if(1===n.numberOfChildren&&n.children[Oe]){const e=n.children[Oe];return new Le(n.segments.concat(e.segments),e.children)}return n}(new Le(n.segments,e))}class UM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ad{constructor(e,t){this.component=e,this.route=t}}function aH(n,e,t){const r=n._root;return Lc(r,e?e._root:null,t,[r.value])}function Rd(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Lc(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=Pc(e);return n.children.forEach(o=>{(function(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){const c=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!vi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vi(n.url,e.url)||!kr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pm(n,e)||!kr(n.queryParams,e.queryParams);case"paramsChange":default:return!Pm(n,e)}}(o,i,i.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new UM(r)):(i.data=o.data,i._resolvedData=o._resolvedData),Lc(n,e,i.component?a?a.children:null:t,r,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Ad(a.outlet.component,o))}else o&&Vc(e,a,s),s.canActivateChecks.push(new UM(r)),Lc(n,null,i.component?a?a.children:null:t,r,s)})(o,i[o.value.outlet],t,r.concat([o.value]),s),delete i[o.value.outlet]}),Gt(i,(o,a)=>Vc(o,t.getContext(a),s)),s}function Vc(n,e,t){const r=Pc(n),s=n.value;Gt(r,(i,o)=>{Vc(i,s.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Ad(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class CH{}function HM(n){return new ce(e=>e.error(n))}class wH{constructor(e,t,r,s,i,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const e=Td(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Oe);if(null===t)return null;const r=new wd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Oe,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new is(r,t),i=new DM(this.url,s);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,r=SM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const i of Object.keys(t.children)){const o=t.children[i],a=FM(e,i),c=this.processSegmentGroup(a,o,i);if(null===c)return null;r.push(...c)}const s=qM(r);return function(n){n.sort((e,t)=>e.value.outlet===Oe?-1:t.value.outlet===Oe?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const i of e){const o=this.processSegmentAgainstRoute(i,t,r,s);if(null!==o)return o}return jM(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!VM(e,t,r,s))return null;let i,o=[],a=[];if("**"===e.path){const f=r.length>0?dM(r).parameters:{};i=new wd(r,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zM(e),Zn(e),e.component,e,GM(t),WM(t)+r.length,QM(e))}else{const f=Md(t,e,r);if(!f.matched)return null;o=f.consumedSegments,a=r.slice(f.lastChild),i=new wd(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zM(e),Zn(e),e.component,e,GM(t),WM(t)+o.length,QM(e))}const c=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:u}=Td(t,o,a,c.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const f=this.processChildren(c,l);return null===f?null:[new is(i,f)]}if(0===c.length&&0===u.length)return[new is(i,[])];const d=Zn(e)===s,h=this.processSegment(c,l,u,d?Oe:s);return null===h?null:[new is(i,h)]}}function DH(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function qM(n){const e=[],t=new Set;for(const r of n){if(!DH(r)){e.push(r);continue}const s=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=qM(r.children);e.push(new is(r.value,s))}return e.filter(r=>!t.has(r))}function GM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function WM(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function zM(n){return n.data||{}}function QM(n){return n.resolve||{}}function jm(n){return js(e=>{const t=n(e);return t?qt(t).pipe(pe(()=>e)):me(e)})}class NH extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Bm=new Ce("ROUTES");class KM{constructor(e,t,r,s){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe(pe(i=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=i.create(e);return new Fm(uM(o.injector.get(Bm,void 0,he.Self|he.Optional)).map(Lm),o)}),Ls(i=>{throw t._loader$=void 0,i}));return t._loader$=new ay(s,()=>new se).pipe(Ud()),t._loader$}loadModuleFactory(e){return"string"==typeof e?qt(this.loader.load(e)):Fr(e()).pipe(Lt(t=>t instanceof Jb?me(t):qt(this.compiler.compileModuleAsync(t))))}}class OH{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ko,this.attachRef=null}}class Ko{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new OH,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class FH{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function LH(n){throw n}function VH(n,e,t){return e.parse("/")}function JM(n,e){return me(null)}const jH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pn=(()=>{class n{constructor(t,r,s,i,o,a,c,l){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=i,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new se,this.errorHandler=LH,this.malformedUriErrorHandler=VH,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:JM,afterPreactivation:JM},this.urlHandlingStrategy=new FH,this.routeReuseStrategy=new NH,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Ar),this.console=o.get(ou);const h=o.get(Xe);this.isNgZoneEnabled=h instanceof Xe&&Xe.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=new _i(new Le([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new KM(a,c,f=>this.triggerEvent(new iM(f)),f=>this.triggerEvent(new oM(f))),this.routerState=EM(this.currentUrlTree,this.rootComponentType),this.transitions=new Be({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(kt(s=>0!==s.id),pe(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),js(s=>{let i=!1,o=!1;return me(s).pipe(Nn(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),js(a=>{const c=this.browserUrlTree.toString(),l=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Pd(a.source)&&(this.browserUrlTree=a.extractedUrl),me(a).pipe(js(d=>{const h=this.transitions.getValue();return r.next(new Sm(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?mi:Promise.resolve(d)}),function(n,e,t,r){return js(s=>function(n,e,t,r,s){return new sH(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe(pe(i=>Object.assign(Object.assign({},s),{urlAfterRedirects:i}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Nn(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function(n,e,t,r,s){return Lt(i=>function(n,e,t,r,s="emptyOnly",i="legacy"){try{const o=new wH(n,e,t,r,s,i).recognize();return null===o?HM(new CH):me(o)}catch(o){return HM(o)}}(n,e,i.urlAfterRedirects,t(i.urlAfterRedirects),r,s).pipe(pe(o=>Object.assign(Object.assign({},i),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Nn(d=>{"eager"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(d.urlAfterRedirects,d),this.browserUrlTree=d.urlAfterRedirects);const h=new eU(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:b,extras:_}=a,F=new Sm(h,this.serializeUrl(f),p,b);r.next(F);const P=EM(f,this.rootComponentType).snapshot;return me(Object.assign(Object.assign({},a),{targetSnapshot:P,urlAfterRedirects:f,extras:Object.assign(Object.assign({},_),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,this.browserUrlTree=a.urlAfterRedirects,a.resolve(null),mi}),jm(a=>{const{targetSnapshot:c,id:l,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(c,{navigationId:l,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Nn(a=>{const c=new tU(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),pe(a=>Object.assign(Object.assign({},a),{guards:aH(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function(n,e){return Lt(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=t;return 0===o.length&&0===i.length?me(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return qt(n).pipe(Lt(s=>function(n,e,t,r,s){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?me(i.map(a=>{const c=Rd(a,e,s);let l;if(function(n){return n&&$s(n.canDeactivate)}(c))l=Fr(c.canDeactivate(n,e,t,r));else{if(!$s(c))throw new Error("Invalid CanDeactivate guard");l=Fr(c(n,e,t,r))}return l.pipe(Yn())})).pipe(kc()):me(!0)}(s.component,s.route,t,e,r)),Yn(s=>!0!==s,!0))}(o,r,s,n).pipe(Lt(a=>a&&function(n){return"boolean"==typeof n}(a)?function(n,e,t,r){return qt(e).pipe(Wo(s=>wm(function(n,e){return null!==n&&e&&e(new iU(n)),me(!0)}(s.route.parent,r),function(n,e){return null!==n&&e&&e(new aU(n)),me(!0)}(s.route,r),function(n,e,t){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>nM(()=>me(o.guards.map(c=>{const l=Rd(c,o.node,t);let u;if(function(n){return n&&$s(n.canActivateChild)}(l))u=Fr(l.canActivateChild(r,n));else{if(!$s(l))throw new Error("Invalid CanActivateChild guard");u=Fr(l(r,n))}return u.pipe(Yn())})).pipe(kc())));return me(i).pipe(kc())}(n,s.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?me(r.map(i=>nM(()=>{const o=Rd(i,e,t);let a;if(function(n){return n&&$s(n.canActivate)}(o))a=Fr(o.canActivate(e,n));else{if(!$s(o))throw new Error("Invalid CanActivate guard");a=Fr(o(e,n))}return a.pipe(Yn())}))).pipe(kc()):me(!0)}(n,s.route,t))),Yn(s=>!0!==s,!0))}(r,i,n,e):me(a)),pe(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Nn(a=>{if(Ci(a.guardsResult)){const l=Dm(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw l.url=a.guardsResult,l}const c=new nU(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),kt(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),jm(a=>{if(a.guards.canActivateChecks.length)return me(a).pipe(Nn(c=>{const l=new rU(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}),js(c=>{let l=!1;return me(c).pipe(function(n,e){return Lt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return me(t);let i=0;return qt(s).pipe(Wo(o=>function(n,e,t,r){return function(n,e,t,r){const s=Object.keys(n);if(0===s.length)return me({});const i={};return qt(s).pipe(Lt(o=>function(n,e,t,r){const s=Rd(n,e,r);return Fr(s.resolve?s.resolve(e,t):s(e,t))}(n[o],e,t,r).pipe(Nn(a=>{i[o]=a}))),Em(1),Lt(()=>Object.keys(i).length===s.length?me(i):mi))}(n._resolve,n,e,r).pipe(pe(i=>(n._resolvedData=i,n.data=Object.assign(Object.assign({},n.data),SM(n,t).resolve),null)))}(o.route,r,n,e)),Nn(()=>i++),Em(1),Lt(o=>i===s.length?me(t):mi))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Nn({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(c),this.cancelNavigationTransition(c,"At least one route resolver didn't emit any value."))}}))}),Nn(c=>{const l=new sU(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}))}),jm(a=>{const{targetSnapshot:c,id:l,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(c,{navigationId:l,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),pe(a=>{const c=function(n,e,t){const r=Ed(n,e._root,t?t._root:void 0);return new wM(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:c})}),Nn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>pe(r=>(new UU(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Nn({next(){i=!0},complete(){i=!0}}),function(n){return e=>e.lift(new Y$(n))}(()=>{var a;if(!i&&!o){const c=`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(s),this.cancelNavigationTransition(s,c)):this.cancelNavigationTransition(s,c)}(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===s.id&&(this.currentNavigation=null)}),Ls(a=>{if(o=!0,function(n){return n&&n[cM]}(a)){const c=Ci(a.url);c||(this.navigated=!0,this.restoreHistory(s,!0));const l=new sM(s.id,this.serializeUrl(s.extractedUrl),a.message);r.next(l),c?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Pd(s.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const c=new X$(s.id,this.serializeUrl(s.extractedUrl),a);r.next(c);try{s.resolve(this.errorHandler(a))}catch(l){s.reject(l)}}return mi}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:s,state:i,urlTree:o}=r,a={replaceUrl:!0};if(i){const c=Object.assign({},i);delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(a.state=c)}this.scheduleNavigation(o,s,i,a)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const s=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!s||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){kM(t),this.config=t.map(Lm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:i,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=s||this.routerState.root,u=c?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=i||null}return null!==d&&(d=this.removeEmptyProps(d)),function(n,e,t,r,s){if(0===t.length)return Nm(e.root,e.root,e,r,s);const i=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new IM(!0,0,n);let e=0,t=!1;const r=n.reduce((s,i,o)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Gt(i.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return"string"!=typeof i?[...s,i]:0===o?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&s.push(a))}),s):[...s,i]},[]);return new IM(t,e,r)}(t);if(i.toRoot())return Nm(e.root,new Le([],{}),e,r,s);const o=function(n,e,t){if(n.isAbsolute)return new Om(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const i=t.snapshot._urlSegment;return new Om(i,i===e.root,0)}const r=Sd(n.commands[0])?0:1;return function(n,e,t){let r=n,s=e,i=t;for(;i>s;){if(i-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Om(r,!1,s-i)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(i,e,n),a=o.processChildren?Dd(o.segmentGroup,o.index,i.commands):AM(o.segmentGroup,o.index,i.commands);return Nm(o.segmentGroup,a,e,r,s)}(l,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Ci(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},jH):!1===r?Object.assign({},BH):r,Ci(t))return fM(this.currentUrlTree,t,s);const i=this.parseUrl(t);return fM(this.currentUrlTree,i,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const i=t[s];return null!=i&&(r[s]=i),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ic(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,i,o){var a,c;if(this.disposed)return Promise.resolve(!1);const l=this.getTransition(),u=Pd(r)&&l&&!Pd(l.source),f=(this.lastSuccessfulId===l.id||this.currentNavigation?l.rawUrl:l.urlAfterRedirects).toString()===t.toString();if(u&&f)return Promise.resolve(!0);let p,b,_;o?(p=o.resolve,b=o.reject,_=o.promise):_=new Promise((Q,Y)=>{p=Q,b=Y});const F=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),P=s&&s.\u0275routerPageId?s.\u0275routerPageId:i.replaceUrl||i.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):P=0,this.setTransition({id:F,targetPageId:P,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:p,reject:b,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(Q=>Promise.reject(Q))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),i=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",i):this.location.go(s,"",i)}restoreHistory(t,r=!1){var s,i;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===o?this.currentUrlTree===(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new sM(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(z(yl),z(Mm),z(Ko),z(vu),z(He),z(cu),z(ai),z(void 0))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();function Pd(n){return"imperative"!==n}let jc=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this.commands=[],this.onChanges=new se,this.subscription=t.events.subscribe(i=>{i instanceof Ic&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,i,o){if(0!==t||r||s||i||o||"string"==typeof this.target&&"_self"!=this.target)return!0;const a={skipLocationChange:Jo(this.skipLocationChange),replaceUrl:Jo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Jo(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)($(pn),$(Qo),$(Po))},n.\u0275dir=ue({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&J("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&t&&(Af("href",r.href,Ia),or("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[xt]}),n})();function Jo(n){return""===n||!!n}let Um=(()=>{class n{constructor(t,r,s,i,o){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ze,this.deactivateEvents=new Ze,this.name=i||Oe,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,c=new qH(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,c),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)($(Ko),$(qn),$(bs),function(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let s=0;for(;s<r;){const i=t[s];if(By(i))break;if(0===i)s+=2;else if("number"==typeof i)for(s++;s<r&&"string"==typeof t[s];)s++;else{if(i===e)return t[s+1];s+=2}}}return null}(It(),n)}("name"),$(Yl))},n.\u0275dir=ue({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class qH{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Qo?this.route:e===Ko?this.childContexts:this.parent.get(e,t)}}class YM{}class ZM{preload(e,t){return me(null)}}let XM=(()=>{class n{constructor(t,r,s,i,o){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=new KM(r,s,l=>t.triggerEvent(new iM(l)),l=>t.triggerEvent(new oM(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(kt(t=>t instanceof Ic),Wo(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Ar);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const i of r)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const o=i._loadedConfig;s.push(this.processRoutes(o.module,o.routes))}else i.loadChildren&&!i.canLoad?s.push(this.preloadConfig(t,i)):i.children&&s.push(this.processRoutes(t,i.children));return qt(s).pipe(la(),pe(i=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?me(r._loadedConfig):this.loader.load(t.injector,r)).pipe(Lt(i=>(r._loadedConfig=i,this.processRoutes(i.module,i.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(z(pn),z(cu),z(ai),z(He),z(YM))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),Hm=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Sm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ic&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof aM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new aM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(z(pn),z(uS),z(void 0))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const bi=new Ce("ROUTER_CONFIGURATION"),eT=new Ce("ROUTER_FORROOT_GUARD"),WH=[vu,{provide:Mm,useClass:yM},{provide:pn,useFactory:function(n,e,t,r,s,i,o,a={},c,l){const u=new pn(null,n,e,t,r,s,i,uM(o));return c&&(u.urlHandlingStrategy=c),l&&(u.routeReuseStrategy=l),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(a,u),a.enableTracing&&u.events.subscribe(d=>{var h,f;null===(h=console.group)||void 0===h||h.call(console,`Router Event: ${d.constructor.name}`),console.log(d.toString()),console.log(d),null===(f=console.groupEnd)||void 0===f||f.call(console)}),u},deps:[Mm,Ko,vu,He,cu,ai,Bm,bi,[class{},new vn],[class{},new vn]]},Ko,{provide:Qo,useFactory:function(n){return n.routerState.root},deps:[pn]},{provide:cu,useClass:kF},XM,ZM,class{preload(e,t){return t().pipe(Ls(()=>me(null)))}},{provide:bi,useValue:{enableTracing:!1}}];function zH(){return new bp("Router",pn)}let tT=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[WH,nT(t),{provide:eT,useFactory:JH,deps:[[pn,new vn,new _s]]},{provide:bi,useValue:r||{}},{provide:Po,useFactory:KH,deps:[Ds,[new zi(Vp),new vn],bi]},{provide:Hm,useFactory:QH,deps:[pn,uS,bi]},{provide:YM,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:ZM},{provide:bp,multi:!0,useFactory:zH},[qm,{provide:lc,multi:!0,useFactory:e4,deps:[qm]},{provide:rT,useFactory:t4,deps:[qm]},{provide:eE,multi:!0,useExisting:rT}]]}}static forChild(t){return{ngModule:n,providers:[nT(t)]}}}return n.\u0275fac=function(t){return new(t||n)(z(eT,8),z(pn,8))},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({}),n})();function QH(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Hm(n,e,t)}function KH(n,e,t={}){return t.useHash?new tV(n,e):new qE(n,e)}function JH(n){return"guarded"}function nT(n){return[{provide:uI,multi:!0,useValue:n},{provide:Bm,multi:!0,useValue:n}]}let qm=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new se}appInitializer(){return this.injector.get(ZL,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(a=>r=a),i=this.injector.get(pn),o=this.injector.get(bi);return"disabled"===o.initialNavigation?(i.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(i.hooks.afterPreactivation=()=>this.initNavigation?me(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),i.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(bi),s=this.injector.get(XM),i=this.injector.get(Hm),o=this.injector.get(pn),a=this.injector.get(Io);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),s.setUpPreloading(),i.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(z(He))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();function e4(n){return n.appInitializer.bind(n)}function t4(n){return n.bootstrapListener.bind(n)}const rT=new Ce("Router Initializer");m(8310);const sT=["*"],r4=["chatInput"],s4=["messageArea"];function i4(n,e){if(1&n&&we(0,"ngx-chat-message",9),2&n){const t=e.$implicit,r=Z(2);Qr("chat-message--in",t.direction===r.Direction.in)("chat-message--out",t.direction===r.Direction.out),H("id","message-"+t.id)("contact",r.getOrCreateContactWithFullJid(t))("nick",t.direction===r.Direction.in?r.getOrCreateContactWithFullJid(t).name:"")("avatar",r.getOrCreateContactWithFullJid(t).avatar)("message",t)("showAvatars",r.showAvatars)}}function o4(n,e){if(1&n&&(Rt(0),E(1,"div",7),G(2),Me(3,"date"),S(),re(4,i4,1,10,"ngx-chat-message",8),Pt()),2&n){const t=e.$implicit,r=Z();L(2),pt(function(n,e,t,r,s,i){const o=n+20,a=W(),c=Fi(a,o);return ac(a,oc(a,o)?Tw(a,an(),e,c.transform,t,r,s,i,c):c.transform(t,r,s,i))}(3,2,t.date,r.chatService.translations.dateFormat,void 0,r.chatService.translations.locale)),L(2),H("ngForOf",t.messages)}}function a4(n,e){if(1&n&&(E(0,"div",10),G(1),S()),2&n){const t=Z();L(1),We(" ",t.chatService.translations.noMessages," ")}}function c4(n,e){if(1&n&&(E(0,"span",16),G(1),S()),2&n){const t=Z(2);L(1),pt(t.chatService.translations.acceptSubscriptionRequest)}}function l4(n,e){if(1&n){const t=vt();E(0,"a",17),J("click",function(s){return Pe(t),Z(2).acceptSubscriptionRequest(s)}),G(1),S()}if(2&n){const t=Z(2);L(1),pt(t.chatService.translations.acceptSubscriptionRequest)}}function u4(n,e){if(1&n&&(E(0,"span",16),G(1),S()),2&n){const t=Z(2);L(1),pt(t.chatService.translations.denySubscriptionRequest)}}function d4(n,e){if(1&n){const t=vt();E(0,"a",17),J("click",function(s){return Pe(t),Z(2).denySubscriptionRequest(s)}),G(1),S()}if(2&n){const t=Z(2);L(1),pt(t.chatService.translations.denySubscriptionRequest)}}function h4(n,e){if(1&n){const t=vt();E(0,"li"),E(1,"a",17),J("click",function(s){return Pe(t),Z(3).blockContactAndReport(s)}),G(2),S(),S()}if(2&n){const t=Z(3);L(2),pt(t.chatService.translations.blockAndReport)}}function f4(n,e){if(1&n){const t=vt();E(0,"ul",18),E(1,"li"),E(2,"a",17),J("click",function(s){return Pe(t),Z(2).blockContact(s)}),G(3),S(),S(),re(4,h4,3,1,"li",19),E(5,"li"),E(6,"a",17),J("click",function(s){return Pe(t),Z(2).dismissBlockOptions(s)}),G(7),S(),S(),S()}if(2&n){const t=Z(2);L(3),pt(t.chatService.translations.block),L(1),H("ngIf",t.reportUserService),L(3),pt(t.chatService.translations.dismiss)}}function p4(n,e){if(1&n&&(E(0,"ngx-chat-message-simple",11),E(1,"span"),G(2),S(),E(3,"ul",12),E(4,"li"),re(5,c4,2,1,"span",13),re(6,l4,2,1,"a",14),S(),E(7,"li"),re(8,u4,2,1,"span",13),re(9,d4,2,1,"a",14),S(),S(),re(10,f4,8,3,"ul",15),Me(11,"async"),S()),2&n){const t=Z();H("direction",t.Direction.in)("avatar",t.showAvatars?t.recipient.avatar:void 0)("footerHidden",!0),L(2),We(" ",t.chatService.translations.subscriptionRequestMessage," "),L(3),H("ngIf",t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS),L(1),H("ngIf",t.subscriptionAction===t.SubscriptionAction.PENDING_REQUEST),L(2),H("ngIf",t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS),L(1),H("ngIf",t.subscriptionAction===t.SubscriptionAction.PENDING_REQUEST),L(1),H("ngIf",!0===xe(11,9,t.blockPlugin.supportsBlock$)&&t.subscriptionAction===t.SubscriptionAction.SHOW_BLOCK_ACTIONS)}}function g4(n,e){if(1&n){const t=vt();E(0,"div",6),E(1,"ngx-chat-avatar",7),J("click",function(){return Pe(t),Z().avatarClickHandler.emit()}),S(),S()}if(2&n){const t=Z();L(1),Qr("has-click-handler",t.avatarInteractive),H("imageUrl",t.avatar)}}function m4(n,e){if(1&n){const t=vt();E(0,"div",8),E(1,"img",9),J("load",function(){return Pe(t),Z().showImagePlaceholder=!1}),S(),S()}if(2&n){const t=Z();Qr("chat-message-image-wrapper--placeholder",t.showImagePlaceholder),L(1),H("src",t.imageLink,Ia)}}function y4(n,e){1&n&&(Rt(0),G(1,"\u2713"),Pt())}function _4(n,e){1&n&&(Rt(0),G(1,"\u2713\u2713"),Pt())}function v4(n,e){1&n&&(Rt(0),E(1,"span",16),G(2,"\u2713\u2713"),S(),Pt())}function C4(n,e){if(1&n&&(Rt(0,14),re(1,y4,2,0,"ng-container",15),re(2,_4,2,0,"ng-container",15),re(3,v4,3,0,"ng-container",15),Pt()),2&n){const t=Z(2);H("ngSwitch",t.messageState),L(1),H("ngSwitchCase",t.MessageState.SENT),L(1),H("ngSwitchCase",t.MessageState.RECIPIENT_RECEIVED),L(1),H("ngSwitchCase",t.MessageState.RECIPIENT_SEEN)}}function b4(n,e){if(1&n&&(E(0,"div",10),E(1,"small",11),G(2),re(3,C4,4,4,"ng-container",12),S(),E(4,"small",13),G(5),S(),S()),2&n){const t=Z();L(1),Ha("title",t.nick),L(1),We(" ",t.nick," "),L(1),H("ngIf","out"===t.direction),L(2),pt(t.formattedDate)}}function w4(n,e){if(1&n&&(E(0,"div",9),E(1,"span",10),G(2),Me(3,"async"),S(),S()),2&n){const t=Z();L(2),We(" ",t.chatService.translations.presence[xe(3,1,t.chatWindowState.recipient.presence$)]," ")}}function E4(n,e){if(1&n){const t=vt();E(0,"div",17),J("click",function(){const i=Pe(t).$implicit;return Z(2).onActionClick(i)}),S()}if(2&n){const t=e.$implicit;H("ngClass",t.cssClass)("innerHTML",t.html,v_)}}function S4(n,e){if(1&n){const t=vt();E(0,"ngx-chat-filedrop",11),J("fileUpload",function(s){return Pe(t),Z().uploadFile(s)}),E(1,"div",12),J("click",function(){return Pe(t),Z().onFocus()}),we(2,"ngx-chat-message-list",13),E(3,"div",14),E(4,"ngx-chat-message-input",15),J("messageSent",function(){return Pe(t),Z().afterSendMessage()}),S(),re(5,E4,1,2,"div",16),S(),S(),S()}if(2&n){const t=Z();H("enabled",t.httpFileUploadPlugin.fileUploadSupported)("dropMessage",t.chatService.translations.dropMessage),L(2),H("recipient",t.chatWindowState.recipient)("showAvatars",!1),L(2),H("recipient",t.chatWindowState.recipient),L(1),H("ngForOf",t.chatService.chatActions)}}const D4=function(n){return{"has-click-handler":n}};function M4(n,e){1&n&&we(0,"ngx-chat-window-list",2),2&n&&H("rosterState",Z().rosterState)}function T4(n,e){if(1&n){const t=vt();E(0,"ngx-chat-roster-list",3),J("rosterStateChanged",function(s){return Pe(t),Z().onRosterStateChanged(s)}),S()}if(2&n){const t=Z();H("rosterState",t.rosterState)("contacts",t.contacts)("contactRequestsReceived$",t.contactRequestsReceived$)("contactRequestsSent$",t.contactRequestsSent$)("contactsUnaffiliated$",t.contactsUnaffiliated$)}}const x4=function(n){return{backgroundImage:n}},I4=["video"];function A4(n,e){if(1&n){const t=vt();E(0,"div",3),J("click",function(){return Pe(t),Z().closeClick.emit()}),G(1," \xd7 "),S()}}const R4=[[["",8,"window-header-content"]],[["",8,"window-content"]]],P4=[".window-header-content",".window-content"];function N4(n,e){1&n&&we(0,"ngx-chat-video-window",3),2&n&&H("track",e.$implicit)}function O4(n,e){1&n&&we(0,"ngx-chat-window",4),2&n&&H("chatWindowState",e.$implicit)}function k4(n,e){1&n&&(E(0,"div",6),G(1,"\xbb"),S())}function F4(n,e){1&n&&(E(0,"div",6),G(1,"\xab"),S())}function L4(n,e){if(1&n){const t=vt();E(0,"ngx-chat-roster-recipient",10),J("click",function(){const i=Pe(t).$implicit;return Z(3).onClickRecipient(i)}),S()}2&n&&H("recipient",e.$implicit)}function V4(n,e){if(1&n&&(Rt(0),E(1,"div",7),G(2),S(),E(3,"div",8),re(4,L4,1,1,"ngx-chat-roster-recipient",9),S(),Pt()),2&n){const t=Z().ngIf,r=Z();L(2),pt(r.chatService.translations.rooms),L(2),H("ngForOf",t)}}function j4(n,e){if(1&n&&(Rt(0),re(1,V4,5,2,"ng-container",4),Pt()),2&n){const t=e.ngIf;L(1),H("ngIf",t.length>0)}}function B4(n,e){if(1&n){const t=vt();E(0,"ngx-chat-roster-recipient",10),J("click",function(){const i=Pe(t).$implicit;return Z(2).onClickRecipient(i)}),S()}2&n&&H("recipient",e.$implicit)}function $4(n,e){if(1&n&&(Rt(0),E(1,"div",7),G(2),S(),E(3,"div",8),re(4,B4,1,1,"ngx-chat-roster-recipient",9),Me(5,"async"),S(),Pt()),2&n){const t=Z();L(2),pt(t.chatService.translations.contacts),L(2),H("ngForOf",xe(5,2,t.contacts))}}function U4(n,e){if(1&n){const t=vt();E(0,"ngx-chat-roster-recipient",10),J("click",function(){const i=Pe(t).$implicit;return Z(2).onClickRecipient(i)}),S()}2&n&&H("recipient",e.$implicit)}function H4(n,e){if(1&n&&(Rt(0),E(1,"div",7),G(2),S(),E(3,"div",8),re(4,U4,1,1,"ngx-chat-roster-recipient",9),Me(5,"async"),S(),Pt()),2&n){const t=Z();L(2),pt(t.chatService.translations.contactRequestIn),L(2),H("ngForOf",xe(5,2,t.contactRequestsReceived$))}}function q4(n,e){if(1&n){const t=vt();E(0,"ngx-chat-roster-recipient",10),J("click",function(){const i=Pe(t).$implicit;return Z(2).onClickRecipient(i)}),S()}2&n&&H("recipient",e.$implicit)}function G4(n,e){if(1&n&&(Rt(0),E(1,"div",7),G(2),S(),E(3,"div",8),re(4,q4,1,1,"ngx-chat-roster-recipient",9),Me(5,"async"),S(),Pt()),2&n){const t=Z();L(2),pt(t.chatService.translations.contactRequestOut),L(2),H("ngForOf",xe(5,2,t.contactRequestsSent$))}}function W4(n,e){if(1&n){const t=vt();E(0,"ngx-chat-roster-recipient",10),J("click",function(){Pe(t);const s=Z().$implicit;return Z(2).onClickRecipient(s)}),S()}2&n&&H("recipient",Z().$implicit)}function z4(n,e){if(1&n&&(Rt(0),re(1,W4,1,1,"ngx-chat-roster-recipient",12),Pt()),2&n){const t=e.$implicit;L(1),H("ngIf",t.messages.length>0)}}function Q4(n,e){if(1&n&&(Rt(0),E(1,"div",7),G(2),S(),E(3,"div",8),re(4,z4,2,1,"ng-container",11),Me(5,"async"),S(),Pt()),2&n){const t=Z();L(2),pt(t.chatService.translations.contactsUnaffiliated),L(2),H("ngForOf",xe(5,2,t.contactsUnaffiliated$))}}function K4(n,e){if(1&n&&(E(0,"div",13),G(1),S()),2&n){const t=Z();L(1),We(" ",t.chatService.translations.noContacts," ")}}function J4(n,e){if(1&n&&(E(0,"div",20),G(1),S()),2&n){const t=e.$implicit;L(1),We(" ",t.name," ")}}function Y4(n,e){if(1&n&&(E(0,"div",21),G(1),S()),2&n){const t=e.$implicit;L(1),We(" ",t.name," ")}}function Z4(n,e){if(1&n&&(E(0,"p",22),E(1,"em"),G(2),S(),we(3,"br"),G(4),Me(5,"async"),we(6,"br"),G(7),Me(8,"async"),we(9,"br"),G(10),Me(11,"async"),we(12,"br"),G(13),Me(14,"async"),S()),2&n){const t=e.$implicit;L(2),We("",t.name,":"),L(2),We(" subscription=",xe(5,5,t.subscription$),""),L(3),We(" presence=",xe(8,7,t.presence$),""),L(3),We(" pendingIn=",xe(11,9,t.pendingIn$),""),L(3),We(" pendingOut=",xe(14,11,t.pendingOut$)," ")}}function X4(n,e){if(1&n&&(Rt(0),we(1,"hr"),E(2,"div",14),G(3," debug contact requests in: "),re(4,J4,2,1,"div",15),Me(5,"async"),S(),we(6,"hr"),E(7,"div",16),G(8," debug contact requests out: "),re(9,Y4,2,1,"div",17),Me(10,"async"),S(),we(11,"hr"),E(12,"p"),G(13),Me(14,"async"),we(15,"br"),S(),re(16,Z4,15,13,"p",18),Me(17,"async"),E(18,"p",19),G(19),Me(20,"async"),S(),Pt()),2&n){const t=Z();L(4),H("ngForOf",xe(5,5,t.chatService.contactRequestsReceived$)),L(5),H("ngForOf",xe(10,7,t.chatService.contactRequestsSent$)),L(4),We(" debug contacts (count: ",xe(14,9,t.chatService.contacts$).length,")"),L(3),H("ngForOf",xe(17,11,t.chatService.contacts$)),L(3),We("state: ",xe(20,13,t.chatService.state$),"")}}function e8(n,e){if(1&n&&(E(0,"div",7),G(1),Me(2,"async"),S()),2&n){const t=Z();L(1),pt(xe(2,1,t.unreadCount$))}}function t8(n,e){1&n&&(E(0,"div",9),G(1,"\u25cf "),S()),2&n&&H("ngClass","roster-presence--"+Z().ngIf)}function n8(n,e){if(1&n&&(Rt(0),re(1,t8,2,1,"div",8),Pt()),2&n){const t=e.ngIf,r=Z();L(1),H("ngIf",t!==r.Presence.unavailable)}}let r8=(()=>{class n{constructor(){this.fileUpload=new Ze,this.enabled=!0,this.isDropTarget=!1}onDragOver(t){this.enabled&&(t.preventDefault(),t.stopPropagation(),this.isDropTarget=!0)}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDropTarget=!1}onDrop(t){return K(this,void 0,void 0,function*(){if(this.enabled){t.preventDefault(),t.stopPropagation(),this.isDropTarget=!1;for(let r=0;r<t.dataTransfer.items.length;r++){const s=t.dataTransfer.items[r];"file"===s.kind&&this.fileUpload.emit(s.getAsFile())}}})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-filedrop"]],hostBindings:function(t,r){1&t&&J("dragover",function(i){return r.onDragOver(i)})("dragenter",function(i){return r.onDragOver(i)})("dragleave",function(i){return r.onDragLeave(i)})("dragexit",function(i){return r.onDragLeave(i)})("drop",function(i){return r.onDrop(i)})},inputs:{enabled:"enabled",dropMessage:"dropMessage"},outputs:{fileUpload:"fileUpload"},ngContentSelectors:sT,decls:5,vars:3,consts:[[1,"drop-message"]],template:function(t,r){1&t&&(Ul(),E(0,"div"),E(1,"div",0),G(2),S(),E(3,"div"),Ua(4),S(),S()),2&t&&(L(1),Qr("drop-message--visible",r.isDropTarget),L(1),We(" ",r.dropMessage," "))},styles:[".drop-message[_ngcontent-%COMP%]{pointer-events:none;display:none}.drop-message--visible[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;justify-content:center;align-content:center;flex-direction:column;text-align:center;font-size:1.5em;z-index:999;background-color:#fff9;padding:1em}"]}),n})();const bn=new Ce("ngxChatService");let Nd=(()=>{class n{constructor(t){this.chatService=t,this.messageSent=new Ze,this.message=""}ngOnInit(){}onSendMessage(t){t&&t.preventDefault(),this.chatService.sendMessage(this.recipient,this.message),this.message="",this.messageSent.emit()}focus(){this.chatInput.nativeElement.focus()}}return n.\u0275fac=function(t){return new(t||n)($(bn))},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-message-input"]],viewQuery:function(t,r){if(1&t&&oi(r4,5),2&t){let s;Yr(s=Zr())&&(r.chatInput=s.first)}},inputs:{recipient:"recipient"},outputs:{messageSent:"messageSent"},decls:2,vars:2,consts:[["cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",1,"chat-input",3,"ngModel","placeholder","ngModelChange","keydown.enter"],["chatInput",""]],template:function(t,r){1&t&&(E(0,"textarea",0,1),J("ngModelChange",function(i){return r.message=i})("keydown.enter",function(i){return r.onSendMessage(i)}),S()),2&t&&(Ha("placeholder",r.chatService.translations.placeholder),H("ngModel",r.message))},directives:[E$,xs,Oo,di],styles:['@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.chat-input[_ngcontent-%COMP%]{border:none;width:100%;font-size:1em;padding:0;display:block;resize:none;overflow-x:hidden;outline:none}']}),n})();var Zt=(()=>(function(n){n.SENDING="sending",n.SENT="sent",n.RECIPIENT_RECEIVED="recipientReceived",n.RECIPIENT_SEEN="recipientSeen"}(Zt||(Zt={})),Zt))(),Fe=(()=>(function(n){n.in="in",n.out="out"}(Fe||(Fe={})),Fe))();class Ut{onBeforeOnline(){return Promise.resolve()}onOffline(){}afterSendMessage(e,t){}beforeSendMessage(e,t){}handleStanza(e){return!1}afterReceiveMessage(e,t,r){}}class iT extends Ut{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.supportsBlock$=new Be("unknown")}onBeforeOnline(){return K(this,void 0,void 0,function*(){const e=yield this.determineSupportForBlock();this.supportsBlock$.next(e),e&&(yield this.requestBlockedJids())})}determineSupportForBlock(){return K(this,void 0,void 0,function*(){try{return yield this.serviceDiscoveryPlugin.supportsFeature(this.xmppChatAdapter.chatConnectionService.userJid.domain,"urn:xmpp:blocking")}catch(e){return!1}})}onOffline(){this.supportsBlock$.next("unknown"),this.xmppChatAdapter.blockedContactIds$.next(new Set)}blockJid(e){return this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("block",{xmlns:"urn:xmpp:blocking"},(0,N.Ls)("item",{jid:e}))))}unblockJid(e){return this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("unblock",{xmlns:"urn:xmpp:blocking"},(0,N.Ls)("item",{jid:e}))))}requestBlockedJids(){return K(this,void 0,void 0,function*(){const t=(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get"},(0,N.Ls)("blocklist",{xmlns:"urn:xmpp:blocking"})))).getChild("blocklist").getChildren("item").map(r=>r.attrs.jid);this.xmppChatAdapter.blockedContactIds$.next(new Set(t))})}handleStanza(e){var t;const{from:r}=e.attrs;if(r&&r===(null===(t=this.xmppChatAdapter.chatConnectionService.userJid)||void 0===t?void 0:t.bare().toString())){const s=e.getChild("block","urn:xmpp:blocking"),i=e.getChild("unblock","urn:xmpp:blocking"),o=this.xmppChatAdapter.blockedContactIds$.getValue();if(s)return s.getChildren("item").map(a=>a.attrs.jid).forEach(a=>o.add(a)),this.xmppChatAdapter.blockedContactIds$.next(o),!0;if(i){const a=i.getChildren("item").map(c=>c.attrs.jid);return 0===a.length?o.clear():a.forEach(c=>o.delete(c)),this.xmppChatAdapter.blockedContactIds$.next(o),!0}}return!1}}class Yo{}let oT=(()=>{class n extends Error{constructor(t){super(n.extractErrorTextFromErrorResponse(t,n.extractErrorDataFromErrorResponse(t))),this.errorStanza=t;const{code:r,type:s,condition:i}=n.extractErrorDataFromErrorResponse(t);this.errorCode=r,this.errorType=s,this.errorCondition=i}static extractErrorDataFromErrorResponse(t){var r;const s=t.getChild("error");return{code:Number(null==s?void 0:s.attrs.code)||void 0,type:null==s?void 0:s.attrs.type,condition:null===(r=null==s?void 0:s.children.filter(c=>"text"!==c.getName()&&c.attrs.xmlns===n.ERROR_ELEMENT_NS)[0])||void 0===r?void 0:r.getName()}}static extractErrorTextFromErrorResponse(t,{code:r,type:s,condition:i}){var o;const a=[`errorCode: ${null!=r?r:"[unknown]"}`,`errorType: ${null!=s?s:"[unknown]"}`,`errorCondition: ${null!=i?i:"[unknown]"}`].join(", ");return`IqResponseError: ${(null===(o=t.getChild("error"))||void 0===o?void 0:o.getChildText("text",n.ERROR_ELEMENT_NS))||"Unknown error"}${a?` (${a})`:""}`}}return n.ERROR_ELEMENT_NS="urn:ietf:params:xml:ns:xmpp-stanzas",n})();const aT="http://jabber.org/protocol/pubsub#event";class cT extends Yo{constructor(e){super(),this.publishOptions={persistItems:!1},e&&(this.publishOptions=Object.assign(Object.assign({},this.publishOptions),e))}toStanza(){const{node:e,id:t,persistItems:r}=this.publishOptions,s=this.publishOptions.data||(0,N.Ls)("data");return(0,N.Ls)("iq",{type:"set"},(0,N.Ls)("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"},(0,N.Ls)("publish",{node:e},(0,N.Ls)("item",{id:t},s)),(0,N.Ls)("publish-options",{},(0,N.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,N.Ls)("field",{var:"FORM_TYPE",type:"hidden"},(0,N.Ls)("value",{},"http://jabber.org/protocol/pubsub#publish-options")),(0,N.Ls)("field",{var:"pubsub#persist_items"},(0,N.Ls)("value",{},r?1:0)),(0,N.Ls)("field",{var:"pubsub#access_model"},(0,N.Ls)("value",{},"whitelist"))))))}}class s8 extends Yo{constructor(e){super(),this.node=e}toStanza(){return(0,N.Ls)("iq",{type:"get"},(0,N.Ls)("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"},(0,N.Ls)("items",{node:this.node})))}}class i8 extends Ut{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.publish$=new se,this.supportsPrivatePublish=new Be("unknown")}onBeforeOnline(){return this.determineSupportForPrivatePublish()}onOffline(){this.supportsPrivatePublish.next("unknown")}storePrivatePayloadPersistent(e,t,r){return new Promise((s,i)=>{this.supportsPrivatePublish.pipe(kt(o=>"unknown"!==o)).subscribe(o=>{o?s(this.xmppChatAdapter.chatConnectionService.sendIq(new cT({node:e,id:t,data:r,persistItems:!0}).toStanza())):i(new Error("does not support private publish subscribe"))})})}privateNotify(e,t,r){return new Promise((s,i)=>{this.supportsPrivatePublish.pipe(kt(o=>"unknown"!==o)).subscribe(o=>{o?s(this.xmppChatAdapter.chatConnectionService.sendIq(new cT({node:e,id:r,data:t,persistItems:!1}).toStanza())):i(new Error("does not support private publish subscribe"))})})}handleStanza(e){const t=e.getChild("event",aT);return!(!e.is("message")||!t||(this.publish$.next(t),0))}retrieveNodeItems(e){return K(this,void 0,void 0,function*(){try{return(yield this.xmppChatAdapter.chatConnectionService.sendIq(new s8(e).toStanza())).getChild("pubsub").getChild("items").getChildren("item")}catch(t){if(t instanceof oT&&("item-not-found"===t.errorCondition||404===t.errorCode))return[];throw t}})}determineSupportForPrivatePublish(){return K(this,void 0,void 0,function*(){let e;try{e=(yield this.serviceDiscoveryPlugin.findService("pubsub","pep")).features.includes("http://jabber.org/protocol/pubsub#publish-options")}catch(t){e=!1}this.supportsPrivatePublish.next(e)})}}const Bc="urn:xmpp:mucsub:0";var Zo=(()=>(function(n){n.presence="urn:xmpp:mucsub:nodes:presence",n.messages="urn:xmpp:mucsub:nodes:messages",n.affiliations="urn:xmpp:mucsub:nodes:affiliations",n.subscribers="urn:xmpp:mucsub:nodes:subscribers",n.config="urn:xmpp:mucsub:nodes:config",n.subject="urn:xmpp:mucsub:nodes:subject",n.system="urn:xmpp:mucsub:nodes:system"}(Zo||(Zo={})),Zo))();class lT extends Ut{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.supportsMucSub$=new Be("unknown")}onBeforeOnline(){return this.determineSupportForMucSub()}determineSupportForMucSub(){return K(this,void 0,void 0,function*(){let e;try{e=(yield this.serviceDiscoveryPlugin.findService("conference","text")).features.includes(Bc)}catch(t){e=!1}this.supportsMucSub$.next(e)})}onOffline(){this.supportsMucSub$.next("unknown")}subscribeRoom(e,t=[]){return K(this,void 0,void 0,function*(){const r=this.xmppChatAdapter.chatConnectionService.userJid.local;yield this.xmppChatAdapter.chatConnectionService.sendIq(function(n,e,t){return(0,N.Ls)("iq",{type:"set",to:n},(0,N.Ls)("subscribe",{xmlns:Bc,nick:e},t.map(r=>(0,N.Ls)("event",{node:r}))))}(e,r,t))})}unsubscribeRoom(e){return K(this,void 0,void 0,function*(){yield this.xmppChatAdapter.chatConnectionService.sendIq(function(n){return(0,N.Ls)("iq",{type:"set",to:n},(0,N.Ls)("unsubscribe",{xmlns:Bc}))}(e))})}unsubscribeJidFromRoom(e,t){this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set",to:e},(0,N.Ls)("unsubscribe",{xmlns:"urn:xmpp:mucsub:0",jid:t})))}getSubscribedRooms(){return K(this,void 0,void 0,function*(){const{local:e,domain:t}=this.xmppChatAdapter.chatConnectionService.userJid,r=`${e}@${t}`;return(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get",from:r,to:"muc."+t},(0,N.Ls)("subscriptions",{xmlns:"urn:xmpp:mucsub:0"})))).getChildren("subscription").map(i=>i.getAttr("jid"))})}getSubscribers(e){this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get",to:e},(0,N.Ls)("subscriptions",{xmlns:"urn:xmpp:mucsub:0"})))}retrieveSubscriptions(){var e,t;return K(this,void 0,void 0,function*(){const r=yield this.serviceDiscoveryPlugin.findService("conference","text"),i=null===(t=null===(e=(yield this.xmppChatAdapter.chatConnectionService.sendIq(function(n){return(0,N.Ls)("iq",{type:"get",to:n},(0,N.Ls)("subscriptions",{xmlns:Bc}))}(r.jid))).getChild("subscriptions",Bc))||void 0===e?void 0:e.getChildren("subscription"))||void 0===t?void 0:t.map(o=>{var a,c;const l=null!==(c=null===(a=o.getChildren("event"))||void 0===a?void 0:a.map(u=>u.attrs.node))&&void 0!==c?c:[];return[o.attrs.jid,l]});return new Map(i)})}}class Gm extends Ut{constructor(e,t,r,s,i){super(),this.chatService=e,this.serviceDiscoveryPlugin=t,this.multiUserChatPlugin=r,this.logService=s,this.messagePlugin=i,this.mamMessageReceived$=new se,this.chatService.state$.pipe(kt(o=>"online"===o)).subscribe(()=>K(this,void 0,void 0,function*(){(yield this.supportsMessageArchiveManagement())&&(yield this.requestNewestMessages())})),this.mamMessageReceived$.pipe(Ho(10)).subscribe(()=>this.chatService.contacts$.next(this.chatService.contacts$.getValue()))}requestNewestMessages(){return K(this,void 0,void 0,function*(){yield this.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,N.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,N.Ls)("max",{},250),(0,N.Ls)("before")))))})}loadMostRecentUnloadedMessages(e){return K(this,void 0,void 0,function*(){const t="room"===e.recipientType?e.roomJid.toString():void 0,r=(0,N.Ls)("iq",{type:"set",to:t},(0,N.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,N.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,N.Ls)("field",{var:"FORM_TYPE",type:"hidden"},(0,N.Ls)("value",{},"urn:xmpp:mam:2")),"contact"===e.recipientType?(0,N.Ls)("field",{var:"with"},(0,N.Ls)("value",{},e.jidBare)):void 0,e.oldestMessage?(0,N.Ls)("field",{var:"end"},(0,N.Ls)("value",{},e.oldestMessage.datetime.toISOString())):void 0),(0,N.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,N.Ls)("max",{},100),(0,N.Ls)("before"))));yield this.chatService.chatConnectionService.sendIq(r)})}loadAllMessages(){return K(this,void 0,void 0,function*(){if(!(yield this.supportsMessageArchiveManagement()))throw new Error("message archive management not suppported");let e=yield this.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"urn:xmpp:mam:2"})));for(;"true"!==e.getChild("fin").attrs.complete;){const t=e.getChild("fin").getChild("set").getChildText("last");e=yield this.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"urn:xmpp:mam:2"},(0,N.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,N.Ls)("max",{},250),(0,N.Ls)("after",{},t)))))}})}supportsMessageArchiveManagement(){return K(this,void 0,void 0,function*(){const e=yield this.serviceDiscoveryPlugin.supportsFeature(this.chatService.chatConnectionService.userJid.bare().toString(),"urn:xmpp:mam:2");return e||this.logService.info("server doesnt support MAM"),e})}handleStanza(e){return!!this.isMamMessageStanza(e)&&(this.handleMamMessageStanza(e),!0)}isMamMessageStanza(e){const t=e.getChild("result");return"message"===e.name&&"urn:xmpp:mam:2"===(null==t?void 0:t.attrs.xmlns)}handleMamMessageStanza(e){const t=e.getChild("result").getChild("forwarded"),r=t.getChild("message"),s=t.getChild("delay"),i=r.getChild("event",aT);null==r.getAttr("type")&&null!=i?this.handlePubSubEvent(i,s):this.handleArchivedMessage(r,s)}handleArchivedMessage(e,t){const r=e.getAttr("type");if("chat"===r)this.messagePlugin.handleStanza(e,t)&&this.mamMessageReceived$.next();else{if("groupchat"!==r)throw new Error(`unknown archived message type: ${r}`);this.multiUserChatPlugin.handleStanza(e,t)}}handlePubSubEvent(e,t){const r=e.getChild("items");(null==r?void 0:r.attrs.node)===Zo.messages?r.getChildren("item").forEach(o=>this.handleArchivedMessage(o.getChild("message"),t)):this.logService.warn(`Handling of MUC/Sub message types other than ${Zo.messages} isn't implemented yet!`)}}class l8{constructor(e,t){this.recipient=e,this.isCollapsed=t}}let Xo=(()=>{class n{constructor(t){this.chatService=t,this.openChats$=new Be([]),this.openTracks$=new Be([]),this.chatService.state$.pipe(kt(r=>"disconnected"===r)).subscribe(()=>{this.openChats$.next([])}),this.chatService.contactRequestsReceived$.subscribe(r=>{for(const s of r)this.openChat(s)})}openChatCollapsed(t){if(!this.isChatWithRecipientOpen(t)){const r=this.openChats$.getValue(),i=[new l8(t,!0)].concat(r);this.openChats$.next(i)}}openChat(t){this.openChatCollapsed(t),this.findChatWindowStateByRecipient(t).isCollapsed=!1}closeChat(t){const r=this.openChats$.getValue(),s=this.findChatWindowStateIndexByRecipient(t);if(s>=0){const i=r.slice();i.splice(s,1),this.openChats$.next(i)}}openTrack(t){this.openTracks$.next(this.openTracks$.getValue().concat([t]))}closeTrack(t){this.openTracks$.next(this.openTracks$.getValue().filter(r=>r!==t))}isChatWithRecipientOpen(t){return void 0!==this.findChatWindowStateByRecipient(t)}findChatWindowStateIndexByRecipient(t){return this.openChats$.getValue().findIndex(r=>r.recipient.equalsBareJid(t))}findChatWindowStateByRecipient(t){return this.openChats$.getValue().find(r=>r.recipient.equalsBareJid(t))}}return n.\u0275fac=function(t){return new(t||n)(z(bn))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),Wm=(()=>{class n{constructor(){this.openChats$=new Be(new Set),this.chatOpened$=new se,this.recipientToOpenMessageListCount=new Map}isChatOpen(t){return this.getOrDefault(t,0)>0}incrementOpenWindowCount(t){const r=this.isChatOpen(t);this.recipientToOpenMessageListCount.set(t,this.getOrDefault(t,0)+1);const s=this.openChats$.getValue();s.add(t),this.openChats$.next(s),r||this.chatOpened$.next(t)}decrementOpenWindowCount(t){const r=this.getOrDefault(t,0)-1;if(r<=0){this.recipientToOpenMessageListCount.set(t,0);const s=this.openChats$.getValue();s.delete(t),this.openChats$.next(s)}else this.recipientToOpenMessageListCount.set(t,r)}getOrDefault(t,r){return this.recipientToOpenMessageListCount.get(t)||r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const zm="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDYwMCA2MDAiPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwLV8xIj4KICAgICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgogIDxnIGlkPSJfMSIgZGF0YS1uYW1lPSIxIiBjbGlwLXBhdGg9InVybCgjY2xpcC1fMSkiPgogICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9IiNmZmYiLz4KICAgIDxnIGlkPSJHcnVwcGVfNzcxNyIgZGF0YS1uYW1lPSJHcnVwcGUgNzcxNyI+CiAgICAgIDxyZWN0IGlkPSJSZWNodGVja18xMzk3IiBkYXRhLW5hbWU9IlJlY2h0ZWNrIDEzOTciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIiBmaWxsPSIjZTVlNmU4Ii8+CiAgICAgIDxlbGxpcHNlIGlkPSJFbGxpcHNlXzI4MyIgZGF0YS1uYW1lPSJFbGxpcHNlIDI4MyIgY3g9IjExNi4yMzEiIGN5PSIxMjUuNjcxIiByeD0iMTE2LjIzMSIgcnk9IjEyNS42NzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4NS4yMzEgMTExLjQ4NSkiIGZpbGw9IiNhZmI0YjgiLz4KICAgICAgPHBhdGggaWQ9IlBmYWRfMjQ5NjIiIGRhdGEtbmFtZT0iUGZhZCAyNDk2MiIgZD0iTTU0Ni4zNTksNTk1LjI3NnMwLTIxNy41NjMtMjQ0LjkwOS0yMTcuNTYzaC0xLjQ1N2MtMjQ0LjkwOSwwLTI0NC45MDksMjE3LjU2My0yNDQuOTA5LDIxNy41NjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgNC43MjQpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K",Qm=n=>n.toString();function uT(n,e,t=Qm){e.splice(Km(t(n),e,t),0,n)}function Km(n,e,t=Qm){let r=0,s=e.length;for(;r!==s;){const i=Math.floor(r+(s-r)/2);n<t(e[i])?s=i:r=i+1}return r}function dT(n,e){return n[function(n,e){for(let t=n.length-1;t>=0;t--)if(e(n[t]))return t;return-1}(n,e)]}function Jm(n){const e=n.toISOString();return e.slice(0,e.indexOf("T"))}class hT{constructor(e){this.logService=e,this.messages=[],this.dateMessageGroups=[],this.messageIdToMessage=new Map,this.messages$=new se}addMessage(e){return e.id&&this.messageIdToMessage.has(e.id)?(this.logService&&this.logService.warn(`message with id ${e.id} already exists`),!1):(uT(e,this.messages,t=>t.datetime),this.addToDateMessageGroups(e),this.messageIdToMessage.set(e.id,e),this.messages$.next(e),!0)}get oldestMessage(){return this.messages[0]}get mostRecentMessage(){return this.messages[this.messages.length-1]}get mostRecentMessageReceived(){return dT(this.messages,e=>e.direction===Fe.in)}get mostRecentMessageSent(){return dT(this.messages,e=>e.direction===Fe.out)}addToDateMessageGroups(e){const t=Jm(e.datetime),r=function(n,e,t=Qm){let r=0,s=e.length;for(;r!==s;){const i=Math.floor(r+(s-r)/2),o=t(e[i]);if(n<o)s=i;else{if(!(n>o))return i;r=i+1}}return-1}(t,this.dateMessageGroups,s=>Jm(s.date));if(-1!==r)uT(e,this.dateMessageGroups[r].messages,s=>s.datetime);else{const s={date:e.datetime,messages:[e]},i=Km(t,this.dateMessageGroups,o=>Jm(o.date));this.dateMessageGroups.splice(i,0,s)}}}var Ft=(()=>(function(n){n.present="present",n.unavailable="unavailable",n.away="away"}(Ft||(Ft={})),Ft))();function fT(n){return!!n.bare}var lt=(()=>(function(n){n.to="to",n.from="from",n.both="both",n.none="none"}(lt||(lt={})),lt))();class $c{constructor(e,t,r,s){this.name=t,this.recipientType="contact",this.avatar=zm,this.metadata={},this.presence$=new Be(Ft.unavailable),this.subscription$=new Be(lt.none),this.pendingOut$=new Be(!1),this.pendingIn$=new Be(!1),this.resources$=new Be(new Map),s&&(this.avatar=s);const i=(0,N.kO)(e);this.jidFull=i,this.jidBare=i.bare(),this.messageStore=new hT(r)}get messages$(){return this.messageStore.messages$}get messages(){return this.messageStore.messages}get dateMessagesGroups(){return this.messageStore.dateMessageGroups}get oldestMessage(){return this.messageStore.oldestMessage}get mostRecentMessage(){return this.messageStore.mostRecentMessage}get mostRecentMessageReceived(){return this.messageStore.mostRecentMessageReceived}get mostRecentMessageSent(){return this.messageStore.mostRecentMessageSent}addMessage(e){this.messageStore.addMessage(e)}equalsBareJid(e){if(e instanceof $c||fT(e)){const t=e instanceof $c?e.jidBare:e.bare();return this.jidBare.equals(t)}return!1}isSubscribed(){const e=this.subscription$.getValue();return e===lt.both||e===lt.to}isUnaffiliated(){return!this.isSubscribed()&&!this.pendingIn$.getValue()&&!this.pendingOut$.getValue()}updateResourcePresence(e,t){const r=this.resources$.getValue();r.set(e,t),this.presence$.next(this.determineOverallPresence(r)),this.resources$.next(r)}getMessageById(e){return this.messageStore.messageIdToMessage.get(e)}determineOverallPresence(e){let t=Ft.unavailable;return[...e.values()].some(r=>r===Ft.present?(t=r,!0):(r===Ft.away&&(t=Ft.away),!1)),t}}var os=(()=>(function(n){n[n.Disabled=0]="Disabled",n[n.Error=1]="Error",n[n.Warn=2]="Warn",n[n.Info=3]="Info",n[n.Debug=4]="Debug"}(os||(os={})),os))();let ea=(()=>{class n{constructor(){this.logLevel=os.Info,this.writer=console,this.messagePrefix=()=>"ChatService:"}error(...t){this.logLevel>=os.Error&&this.writer.error(this.messagePrefix(),...t)}warn(...t){this.logLevel>=os.Warn&&this.writer.warn(this.messagePrefix(),...t)}info(...t){this.logLevel>=os.Info&&this.writer.info(this.messagePrefix(),...t)}debug(...t){this.logLevel>=os.Debug&&this.writer.debug(this.messagePrefix(),...t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),Uc=(()=>{class n{constructor(t){this.logService=t}createContact(t,r,s){return r||(r=t),new $c(t,r,this.logService,s)}}return n.\u0275fac=function(t){return new(t||n)(z(ea))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const p8=new Ce("ngxChatReportUserService"),g8=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;function pT(n){return n.match(g8)||[]}class Hc extends Ut{static extractIdFromStanza(e){const t=e.getChild("origin-id"),r=e.getChild("stanza-id");return e.attrs.id||t&&t.attrs.id||r&&r.attrs.id}beforeSendMessage(e,t){const r=function(){let n;for(;!n;)n=Math.random().toString(36).substr(2,12);return n}();e.children.push((0,N.Ls)("origin-id",{xmlns:"urn:xmpp:sid:0",id:r})),t&&(t.id=r)}afterSendMessage(e,t){e.id=Hc.extractIdFromStanza(t)}afterReceiveMessage(e,t){e.id=Hc.extractIdFromStanza(t)}}const ta="ngxchat:contactmessagestates",gT="entries",mT="contact-message-state";class yT extends Ut{constructor(e,t,r,s,i){super(),this.publishSubscribePlugin=e,this.xmppChatAdapter=t,this.chatMessageListRegistry=r,this.logService=s,this.entityTimePlugin=i,this.jidToMessageStateDate=Object.create(null),this.chatMessageListRegistry.openChats$.pipe(kt(()=>"online"===t.state$.getValue())).subscribe(o=>{o.forEach(a=>K(this,void 0,void 0,function*(){a.mostRecentMessageReceived&&(yield this.sendMessageStateNotification(a.jidBare,a.mostRecentMessageReceived.id,Zt.RECIPIENT_SEEN))}))}),this.publishSubscribePlugin.publish$.subscribe(o=>this.handlePubSubEvent(o))}onBeforeOnline(){return K(this,void 0,void 0,function*(){this.parseContactMessageStates().catch(e=>this.logService.error("error parsing contact message states",e))})}parseContactMessageStates(){return K(this,void 0,void 0,function*(){const e=yield this.publishSubscribePlugin.retrieveNodeItems(ta);this.processPubSub(e)})}processPubSub(e){let t=[];1===e.length&&(t=e[0].getChild(gT).getChildren(mT).map(r=>{const{lastRecipientReceived:s,lastRecipientSeen:i,lastSent:o,jid:a}=r.attrs;return[a,{lastRecipientSeen:new Date(+i||0),lastRecipientReceived:new Date(+s||0),lastSent:new Date(+o||0)}]})),this.jidToMessageStateDate=new Map(t)}persistContactMessageStates(){return K(this,void 0,void 0,function*(){const e=[...this.jidToMessageStateDate.entries()].map(([t,r])=>(0,N.Ls)(mT,{jid:t,lastRecipientReceived:String(r.lastRecipientReceived.getTime()),lastRecipientSeen:String(r.lastRecipientSeen.getTime()),lastSent:String(r.lastSent.getTime())}));yield this.publishSubscribePlugin.storePrivatePayloadPersistent(ta,"current",(0,N.Ls)(gT,{},e))})}onOffline(){this.jidToMessageStateDate.clear()}beforeSendMessage(e,t){const{type:r}=e.attrs;"chat"===r&&t&&(t.state=Zt.SENDING)}afterSendMessage(e,t){return K(this,void 0,void 0,function*(){const{type:r,to:s}=t.attrs;"chat"===r&&(this.updateContactMessageState((0,N.kO)(s).bare().toString(),Zt.SENT,new Date(yield this.entityTimePlugin.getNow())),delete e.state)})}afterReceiveMessage(e,t,r){t.getChild("message-state",ta)?r.discard=!0:e.direction===Fe.in&&!e.fromArchive&&"groupchat"!==t.attrs.type&&this.acknowledgeReceivedMessage(t)}acknowledgeReceivedMessage(e){const{from:t}=e.attrs,s=this.chatMessageListRegistry.isChatOpen(this.xmppChatAdapter.getOrCreateContactById(t))?Zt.RECIPIENT_SEEN:Zt.RECIPIENT_RECEIVED,i=Hc.extractIdFromStanza(e);this.sendMessageStateNotification((0,N.kO)(t),i,s).catch(o=>this.logService.error("error sending state notification",o))}sendMessageStateNotification(e,t,r){return K(this,void 0,void 0,function*(){const s=(0,N.Ls)("message",{to:e.bare().toString(),from:this.xmppChatAdapter.chatConnectionService.userJid.toString(),type:"chat"},(0,N.Ls)("message-state",{xmlns:ta,messageId:t,date:new Date(yield this.entityTimePlugin.getNow()).toISOString(),state:r}));yield this.xmppChatAdapter.chatConnectionService.send(s)})}handleStanza(e){const{type:t,from:r}=e.attrs,s=e.getChild("message-state",ta);return!("chat"!==t||!s||(this.handleStateNotificationStanza(s,r),0))}handleStateNotificationStanza(e,t){const{state:r,date:s}=e.attrs,i=this.xmppChatAdapter.getOrCreateContactById(t),o=new Date(s);this.updateContactMessageState(i.jidBare.toString(),r,o)}updateContactMessageState(e,t,r){const s=this.getContactMessageState(e);let i=!1;t===Zt.RECIPIENT_RECEIVED&&s.lastRecipientReceived<r?(s.lastRecipientReceived=r,i=!0):t===Zt.RECIPIENT_SEEN&&s.lastRecipientSeen<r?(s.lastRecipientReceived=r,s.lastRecipientSeen=r,i=!0):t===Zt.SENT&&s.lastSent<r&&(s.lastSent=r,i=!0),i&&this.persistContactMessageStates().catch(o=>this.logService.error("error persisting contact message states",o))}getContactMessageState(e){return this.jidToMessageStateDate.has(e)||this.jidToMessageStateDate.set(e,{lastRecipientReceived:new Date(0),lastRecipientSeen:new Date(0),lastSent:new Date(0)}),this.jidToMessageStateDate.get(e)}handlePubSubEvent(e){const t=e.getChild("items"),r=null==t?void 0:t.attrs.node,s=null==t?void 0:t.getChildren("item");r===ta&&s&&this.processPubSub(s)}}function _T(){return{acceptSubscriptionRequest:"Accept",block:"Block",blockAndReport:"Block & report",chat:"Chat",contactRequestIn:"Incoming contact requests",contactRequestOut:"Outgoing contact requests",contacts:"Contacts",contactsUnaffiliated:"Unknown",dateFormat:"EEEE, MM/dd/yyyy",denySubscriptionRequest:"Deny",dismiss:"Dismiss",dropMessage:"Drop your file to send it",locale:void 0,noContacts:"No contacts yet.",noMessages:"No messages yet.",placeholder:"Enter your message!",presence:{[Ft.away]:"Away",[Ft.present]:"Online",[Ft.unavailable]:"Offline"},rooms:"Rooms",subscriptionRequestMessage:"I want to add you as a contact.",timeFormat:"shortTime"}}class Ym{constructor(){this.discard=!1}}class vT extends Ut{constructor(e,t){super(),this.xmppChatAdapter=e,this.logService=t}handleStanza(e,t){return!!this.isMessageStanza(e)&&(this.handleMessageStanza(e,t),!0)}isMessageStanza(e){var t;return"message"===e.name&&"groupchat"!==e.attrs.type&&"error"!==e.attrs.type&&!!(null===(t=e.getChildText("body"))||void 0===t?void 0:t.trim())}handleMessageStanza(e,t){const r=this.xmppChatAdapter.chatConnectionService.userJid.bare().equals((0,N.kO)(e.attrs.to).bare()),s=r?Fe.in:Fe.out,i=null!=t,o=null!=t?t:e.getChild("delay"),a=(null==o?void 0:o.attrs.stamp)?new Date(o.attrs.stamp):new Date;s===Fe.in&&!i&&this.logService.debug("message received <=",e.getChildText("body"));const c={body:e.getChildText("body").trim(),direction:s,datetime:a,delayed:!!o,fromArchive:i},l=new Ym;if(this.xmppChatAdapter.plugins.forEach(h=>h.afterReceiveMessage(c,e,l)),l.discard)return;const d=this.xmppChatAdapter.getOrCreateContactById(r?e.attrs.from:e.attrs.to);d.addMessage(c),s===Fe.in&&!i&&this.xmppChatAdapter.message$.next(d)}sendMessage(e,t){const r=(0,N.Ls)("message",{to:e.jidBare.toString(),from:this.xmppChatAdapter.chatConnectionService.userJid.toString(),type:"chat"},(0,N.Ls)("body",{},t)),s={direction:Fe.out,body:t,datetime:new Date,delayed:!1,fromArchive:!1};this.xmppChatAdapter.plugins.forEach(i=>i.beforeSendMessage(r,s)),e.addMessage(s),this.xmppChatAdapter.chatConnectionService.send(r).then(()=>{this.xmppChatAdapter.plugins.forEach(i=>i.afterSendMessage(s,r))},i=>{this.logService.error("rejected message "+s.id,i)})}}class qc{static buildRoomMessage(e,t,r=[]){return(0,N.Ls)("message",{from:e,to:t,type:"groupchat"},...r)}static buildRoomMessageWithBody(e,t,r,s=[]){return qc.buildRoomMessage(e,t,[(0,N.Ls)("body",{},r),...s])}static buildRoomMessageWithThread(e,t,r,s){return qc.buildRoomMessageWithBody(e,t,r,[(0,N.Ls)("thread",{},s)])}}class CT extends Yo{constructor(e,t){super(),this.xmlns=e,this.to=t}toStanza(){return(0,N.Ls)("iq",Object.assign({type:"get"},this.to?{to:this.to}:{}),(0,N.Ls)("query",{xmlns:this.xmlns}))}}let Gc=(()=>{class n extends Ut{constructor(t){super(),this.chatAdapter=t,this.servicesInitialized$=new Be(!1),this.hostedServices=[],this.resourceCache=new Map}onBeforeOnline(){return K(this,void 0,void 0,function*(){yield this.discoverServices(this.chatAdapter.chatConnectionService.userJid.domain),this.servicesInitialized$.next(!0)})}onOffline(){this.servicesInitialized$.next(!1),this.hostedServices=[],this.resourceCache.clear()}supportsFeature(t,r){return new Promise((s,i)=>{this.servicesInitialized$.pipe(Yn(o=>!!o)).subscribe(()=>K(this,void 0,void 0,function*(){try{const o=this.resourceCache.get(t)||(yield this.discoverServiceInformation(t));o||i(new Error("no service found for jid "+t)),s(o.features.includes(r))}catch(o){i(o)}}))})}findService(t,r){return new Promise((s,i)=>{this.servicesInitialized$.pipe(Yn(o=>!!o)).subscribe(()=>{const o=this.hostedServices.filter(a=>a.identities.filter(c=>c.category===t&&c.type===r).length>0);if(0===o.length)i(new Error(`no service matching category ${t} and type ${r} found!`));else{if(!(o.length>1))return s(o[0]);i(new Error(`multiple services matching category ${t} and type ${r} found! ${JSON.stringify(o)}`))}})})}discoverServices(t){return K(this,void 0,void 0,function*(){const r=yield this.chatAdapter.chatConnectionService.sendIq(new CT(n.DISCO_ITEMS,this.chatAdapter.chatConnectionService.userJid.domain).toStanza()),s=new Set(r.getChild("query").getChildren("item").map(o=>o.attrs.jid));s.add(t);const i=yield Promise.all([...s.keys()].map(o=>this.discoverServiceInformation(o)));this.hostedServices.push(...i)})}discoverServiceInformation(t){return K(this,void 0,void 0,function*(){const r=yield this.chatAdapter.chatConnectionService.sendIq(new CT(n.DISCO_INFO,t).toStanza()),s=r.getChild("query"),i=s.getChildren("feature").map(a=>a.attrs.var),o={identities:s.getChildren("identity").map(a=>a.attrs),features:i,jid:r.attrs.from};return this.resourceCache.set(r.attrs.from,o),o})}}return n.DISCO_INFO="http://jabber.org/protocol/disco#info",n.DISCO_ITEMS="http://jabber.org/protocol/disco#items",n})();class na{constructor(e,t,r){this.recipientType="room",this.avatar="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDYwMCA2MDAiPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwLV8zIj4KICAgICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgogIDxnIGlkPSJfMyIgZGF0YS1uYW1lPSIzIiBjbGlwLXBhdGg9InVybCgjY2xpcC1fMykiPgogICAgPHJlY3Qgd2lkdGg9IjYwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9IiNmZmYiLz4KICAgIDxnIGlkPSJHcnVwcGVfNzcxOCIgZGF0YS1uYW1lPSJHcnVwcGUgNzcxOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTc4MC42OTcgODgxLjUpIj4KICAgICAgPHJlY3QgaWQ9IlJlY2h0ZWNrXzEzOTgiIGRhdGEtbmFtZT0iUmVjaHRlY2sgMTM5OCIgd2lkdGg9IjYwMCIgaGVpZ2h0PSI1OTkuOTk1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3ODAuNjk3IC04ODEuNSkiIGZpbGw9IiNlNWU2ZTgiLz4KICAgICAgPGVsbGlwc2UgaWQ9IkVsbGlwc2VfMjg0IiBkYXRhLW5hbWU9IkVsbGlwc2UgMjg0IiBjeD0iMTE2LjIzMSIgY3k9IjEyNS42NzEiIHJ4PSIxMTYuMjMxIiByeT0iMTI1LjY3MSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTY1LjkyNiAtNzY5LjA5MykiIGZpbGw9IiNhZmI0YjgiLz4KICAgICAgPGVsbGlwc2UgaWQ9IkVsbGlwc2VfMjg1IiBkYXRhLW5hbWU9IkVsbGlwc2UgMjg1IiBjeD0iNjcuOTk4IiBjeT0iNzMuNTIxIiByeD0iNjcuOTk4IiByeT0iNzMuNTIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MTYuMjEgLTY2NS40OTYpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxlbGxpcHNlIGlkPSJFbGxpcHNlXzI4OSIgZGF0YS1uYW1lPSJFbGxpcHNlIDI4OSIgY3g9IjY3Ljk5OCIgY3k9IjczLjUyMSIgcng9IjY3Ljk5OCIgcnk9IjczLjUyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIxMi4xMDcgLTY2NS40OTYpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxwYXRoIGlkPSJQZmFkXzI0OTYzIiBkYXRhLW5hbWU9IlBmYWQgMjQ5NjMiIGQ9Ik0xMzI3LjA1Mi0yODYuMjI1czAtMjE3LjU2My0yNDQuOTA3LTIxNy41NjNoLTEuNDU3Yy0yNDQuOTA3LDAtMjQ0LjkwNywyMTcuNTYzLTI0NC45MDcsMjE3LjU2M1oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgNC43MjUpIiBmaWxsPSIjYWZiNGI4Ii8+CiAgICAgIDxwYXRoIGlkPSJQZmFkXzI0OTY0IiBkYXRhLW5hbWU9IlBmYWQgMjQ5NjQiIGQ9Ik05MzMuOTc3LTQ4My44Yy0xLjA1LjYtMi4xLDEuMjItMy4xNCwxLjg0LTMyLjM0LDE5LjM0LTU4LjI5LDQ2LjI3LTc3LjEyLDgwLjA1LTMxLjcsNTYuODgtMzQuMzU1LDExOC43MjgtMzQuMzU1LDEyMS4yNDhoLTQwLjkxTDc4MC43LTQ3MS4zMmMyMy4yOC0xOC44Miw1Ny4wNS0zMi40NywxMDYuMDQtMzIuNDdoLjk0YTIxNy43NTMsMjE3Ljc1MywwLDAsMSw0My44Myw0LjE4QTguNTQ5LDguNTQ5LDAsMCwxLDkzMy45NzctNDgzLjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAgLTAuNzI1KSIgZmlsbD0iI2FmYjRiOCIvPgogICAgICA8cGF0aCBpZD0iUGZhZF8yNDk2OCIgZGF0YS1uYW1lPSJQZmFkIDI0OTY4IiBkPSJNNzgyLjc5LTQ4My44YzEuMDUuNiwyLjEsMS4yMiwzLjE0LDEuODQsMzIuMzQsMTkuMzQsNTguMjksNDYuMjcsNzcuMTIsODAuMDUsMzEuNyw1Ni44OCwzNC4zNTUsMTE4LjcyOCwzNC4zNTUsMTIxLjI0OGg0MC45MUw5MzYuMDctNDcxLjMyYy0yMy4yOC0xOC44Mi01Ny4wNS0zMi40Ny0xMDYuMDQtMzIuNDdoLS45NGEyMTcuNzUzLDIxNy43NTMsMCwwLDAtNDMuODMsNC4xOEE4LjU0OSw4LjU0OSwwLDAsMCw3ODIuNzktNDgzLjhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NTcuNTQ3IC0wLjcyNikiIGZpbGw9IiNhZmI0YjgiLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=",this.metadata={},this.roomJid=e.bare(),this.name=null!=r?r:e.bare().toString(),this.occupantJid=e,this.messageStore=new hT(t)}get jidBare(){return this.roomJid}get messages$(){return this.messageStore.messages$}get messages(){return this.messageStore.messages}get dateMessagesGroups(){return this.messageStore.dateMessageGroups}get oldestMessage(){return this.messageStore.oldestMessage}get mostRecentMessage(){return this.messageStore.mostRecentMessage}get mostRecentMessageReceived(){return this.messageStore.mostRecentMessageReceived}get mostRecentMessageSent(){return this.messageStore.mostRecentMessageSent}addMessage(e){this.messageStore.addMessage(e)}equalsBareJid(e){if(e instanceof na||fT(e)){const t=e instanceof na?e.roomJid:e.bare();return this.roomJid.bare().equals(t)}return!1}}var as=(()=>(function(n){n[n.none=0]="none",n[n.member=1]="member",n[n.admin=2]="admin",n[n.owner=3]="owner",n[n.outcast=4]="outcast"}(as||(as={})),as))();class ra extends Yo{constructor(e,t){super(),this.roomJid=e,this.affiliation=t}static build(e,t){return new ra(e,t).toStanza()}toStanza(){return(0,N.Ls)("iq",{type:"get",to:this.roomJid},(0,N.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#admin"},(0,N.Ls)("item",{affiliation:this.affiliation})))}}class Zm extends Yo{constructor(e,t){super(),this.roomJid=e,this.modifications=t}static build(e,t){return new Zm(e,t).toStanza()}toStanza(){return(0,N.Ls)("iq",{to:this.roomJid,type:"set"},(0,N.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#admin"},...this.modifications.map(e=>this.buildItem(e))))}buildItem({nick:e,jid:t,affiliation:r}){const s=(0,N.Ls)("item",{jid:t,affiliation:as[r]});return e&&(s.attrs.nick=e),s}}class sa extends Ut{constructor(e,t,r){super(),this.xmppChatAdapter=e,this.logService=t,this.serviceDiscoveryPlugin=r,this.rooms$=new Be([]),this.message$=new se,this.roomJoinResponseHandlers=new Map}onOffline(){this.roomJoinResponseHandlers.clear(),this.rooms$.next([])}handleStanza(e,t){return this.isRoomPresenceStanza(e)?this.handleRoomPresenceStanza(e):!!this.isRoomMessageStanza(e)&&this.handleRoomMessageStanza(e,t)}isRoomPresenceStanza(e){return"presence"===e.name&&null!=(e.getChild("x","http://jabber.org/protocol/muc")||e.getChild("x","http://jabber.org/protocol/muc#user"))}handleRoomPresenceStanza(e){const t=this.roomJoinResponseHandlers.get(e.attrs.from);return!!t&&(this.roomJoinResponseHandlers.delete(e.attrs.from),t(e),!0)}createRoom(e){return K(this,void 0,void 0,function*(){const{roomId:t,nick:r,name:s}=e,i=yield this.serviceDiscoveryPlugin.findService("conference","text"),o=(0,N.kO)(t,i.jid,r),{presenceResponse:a,room:c}=yield this.joinRoomInternal(o,s);if("owner"!==a.getChild("x").getChild("item").attrs.affiliation)throw new Error("error creating room, user is not owner: "+a.toString());const d=(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get",to:c.roomJid.toString()},(0,N.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"})))).getChild("query").getChild("x");if(!d)throw new Error("room not configurable");const h=this.applyRoomCreationRequestOptions(this.extractDefaultConfiguration(d.getChildren("field")),e);try{return yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set",to:c.roomJid.toString()},(0,N.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"},(0,N.Ls)("x",{xmlns:"jabber:x:data",type:"submit"},(0,N.Ls)("field",{var:"FORM_TYPE"},(0,N.Ls)("value",{},"http://jabber.org/protocol/muc#roomconfig")),...this.configurationToElements(h))))),c}catch(f){throw this.logService.error("room configuration rejected",f),f}})}destroyRoom(e){return K(this,void 0,void 0,function*(){let t;try{t=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set",to:e.toString()},(0,N.Ls)("query",{xmlns:"http://jabber.org/protocol/muc#owner"},(0,N.Ls)("destroy"))))}catch(s){throw this.logService.error("error destroying room"),s}const r=this.rooms$.getValue().filter(s=>!s.roomJid.equals(e));return this.rooms$.next(r),t})}joinRoomInternal(e,t){return K(this,void 0,void 0,function*(){if(this.getRoomByJid(e.bare()))throw new Error("can not join room more than once: "+e.bare().toString());const r=this.xmppChatAdapter.chatConnectionService.userJid,s=(0,N.kO)(e.local,e.domain,e.resource||r.local),i=new Promise(c=>this.roomJoinResponseHandlers.set(s.toString(),c));try{yield this.xmppChatAdapter.chatConnectionService.send((0,N.Ls)("presence",{from:r.toString(),to:s.toString()},(0,N.Ls)("x",{xmlns:"http://jabber.org/protocol/muc"})))}catch(c){throw this.logService.error("error sending presence stanza to join a room",c),this.roomJoinResponseHandlers.delete(s.toString()),c}const o=yield i;if(o.getChild("error"))throw new Error("error joining room: "+o.toString());let a=this.getRoomByJid(e);return a||(a=new na(s,this.logService,t),this.rooms$.next([a].concat(this.rooms$.getValue()))),{presenceResponse:o,room:a}})}joinRoom(e){return K(this,void 0,void 0,function*(){return(yield this.joinRoomInternal(e)).room})}queryAllRooms(){return K(this,void 0,void 0,function*(){const e=yield this.serviceDiscoveryPlugin.findService("conference","text"),r=(e.jid.toString(),[]);let s=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get",to:e.jid.toString()},(0,N.Ls)("query",{xmlns:Gc.DISCO_ITEMS})));r.push(...this.extractRoomSummariesFromResponse(s));let i=this.extractResultSetFromResponse(s);for(;i&&i.getChild("last");){const o=i.getChildText("last");s=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get",to:e.jid.toString()},(0,N.Ls)("query",{xmlns:Gc.DISCO_ITEMS},(0,N.Ls)("set",{xmlns:"http://jabber.org/protocol/rsm"},(0,N.Ls)("max",{},250),(0,N.Ls)("after",{},o))))),r.push(...this.extractRoomSummariesFromResponse(s)),i=this.extractResultSetFromResponse(s)}return r})}extractRoomSummariesFromResponse(e){var t,r;return(null===(r=null===(t=e.getChild("query",Gc.DISCO_ITEMS))||void 0===t?void 0:t.getChildren("item"))||void 0===r?void 0:r.map(s=>s.attrs))||[]}extractResultSetFromResponse(e){var t;return null===(t=e.getChild("query",Gc.DISCO_ITEMS))||void 0===t?void 0:t.getChild("set","http://jabber.org/protocol/rsm")}queryMemberList(e){return K(this,void 0,void 0,function*(){const t=yield Promise.all([this.xmppChatAdapter.chatConnectionService.sendIq(ra.build(e,"admin")),this.xmppChatAdapter.chatConnectionService.sendIq(ra.build(e,"member")),this.xmppChatAdapter.chatConnectionService.sendIq(ra.build(e,"owner")),this.xmppChatAdapter.chatConnectionService.sendIq(ra.build(e,"outcast"))]);let r=[];for(const s of t){const i=s.getChild("query").getChildren("item").map(o=>({jid:o.attrs.jid,nick:o.attrs.nick,affiliation:this.reverseMapAffiliation(o.attrs.affiliation)}));r=r.concat(i)}return r})}reverseMapAffiliation(e){if(!e||"none"===e)return as.none;if("member"===e)return as.member;if("admin"===e)return as.admin;if("owner"===e)return as.owner;if("outcast"===e)return as.outcast;{const t="unexpected affilation: "+e;throw this.logService.error(t),new Error(t)}}modifyMemberList(e,t,r,s){return K(this,void 0,void 0,function*(){return yield this.xmppChatAdapter.chatConnectionService.sendIq(Zm.build(e,[{jid:t,affiliation:r,nick:s}]))})}sendMessage(e,t,r){return K(this,void 0,void 0,function*(){const s=this.xmppChatAdapter.chatConnectionService.userJid.toString(),i=e.roomJid.toString(),o=r?qc.buildRoomMessageWithThread(s,i,t,r):qc.buildRoomMessageWithBody(s,i,t);for(const a of this.xmppChatAdapter.plugins)a.beforeSendMessage(o);return yield this.xmppChatAdapter.chatConnectionService.send(o)})}configurationToElements(e){return[...e.entries()].map(([t,r])=>(0,N.Ls)("field",{var:t},...r.map(s=>(0,N.Ls)("value",{},s))))}extractDefaultConfiguration(e){const t=e.filter(r=>"hidden"!==r.attrs.type).map(r=>[r.attrs.var,r.getChildren("value").map(s=>s.getText())]);return new Map(t)}applyRoomCreationRequestOptions(e,t){const r=new Map(e);return r.set("muc#roomconfig_whois",[t.nonAnonymous?"anyone":"moderators"]).set("muc#roomconfig_publicroom",[t.public?"1":"0"]).set("muc#roomconfig_membersonly",[t.membersOnly?"1":"0"]).set("muc#roomconfig_persistentroom",[t.persistentRoom?"1":"0"]),void 0!==t.allowSubscription&&r.set("allow_subscription",[!0===t.allowSubscription?"1":"0"]),r}isRoomMessageStanza(e){var t;return"message"===e.name&&"groupchat"===e.attrs.type&&!!(null===(t=e.getChildText("body"))||void 0===t?void 0:t.trim())}handleRoomMessageStanza(e,t){const r=null!=t?t:e.getChild("delay"),s=(null==r?void 0:r.attrs.stamp)?new Date(r.attrs.stamp):new Date,i=(0,N.kO)(e.attrs.from),o=this.getRoomByJid(i.bare());if(!o)return this.logService.warn(`received stanza for unknown room: ${i.bare().toString()}`),!1;const a={body:e.getChildText("body").trim(),datetime:s,id:e.attrs.id,from:i,direction:i.equals(o.occupantJid)?Fe.out:Fe.in,delayed:!!r,fromArchive:null!=t},c=new Ym;for(const l of this.xmppChatAdapter.plugins)l.afterReceiveMessage(a,e,c);return c.discard||o.addMessage(a),a.delayed||this.message$.next(o),!0}getRoomByJid(e){return this.rooms$.getValue().find(t=>t.roomJid.equals(e))}ban(){throw new Error("moderation not implemented")}invite(){throw new Error("moderation not implemented")}join(){throw new Error("moderation not implemented")}kick(){throw new Error("moderation not implemented")}nick(){throw new Error("moderation not implemented")}part(){this.leave()}leave(){throw new Error("moderation not implemented")}topic(){throw new Error("moderation not implemented")}}class Od extends Ut{constructor(e,t){super(),this.chatService=e,this.logService=t}handleStanza(e){return!this.isCapabilitiesStanza(e)&&(this.isRosterPushStanza(e)?this.handleRosterPushStanza(e):!!this.isPresenceStanza(e)&&this.handlePresenceStanza(e))}isRosterPushStanza(e){return"iq"===e.name&&"set"===e.attrs.type&&e.getChild("query","jabber:iq:roster")}isPresenceStanza(e){return"presence"===e.name&&!e.getChild("x","http://jabber.org/protocol/muc#user")}isCapabilitiesStanza(e){return!!e.getChild("c","http://jabber.org/protocol/caps")}handleRosterPushStanza(e){const t=e.getChild("query").getChild("item"),r=this.chatService.getOrCreateContactById(t.attrs.jid,t.attrs.name||t.attrs.jid);r.pendingOut$.next("subscribe"===t.attrs.ask);const s=t.attrs.subscription||"none";this.chatService.chatConnectionService.sendIqAckResult(e.attrs.id);let i=!1;if("remove"===s?(r.pendingOut$.next(!1),r.subscription$.next(lt.none),i=!0):"none"===s?(r.subscription$.next(lt.none),i=!0):"to"===s?(r.subscription$.next(lt.to),i=!0):"from"===s?(r.subscription$.next(lt.from),i=!0):"both"===s&&(r.subscription$.next(lt.both),i=!0),i){const o=this.chatService.contacts$.getValue();this.chatService.contacts$.next(o)}return i}handlePresenceStanza(e){const t=this.chatService.getOrCreateContactById(e.attrs.from);if(this.chatService.chatConnectionService.userJid.bare().equals((0,N.kO)(e.attrs.to).bare())){if(!e.attrs.type){const s=e.getChildText("show"),o={chat:Ft.present,null:Ft.present,away:Ft.away,dnd:Ft.away,xa:Ft.away}[s];return o?t.updateResourcePresence(e.attrs.from,o):this.logService.error("illegal presence:",e.attrs.from,s),!0}if("unavailable"===e.attrs.type)return t.updateResourcePresence(e.attrs.from,Ft.unavailable),!0;if("subscribe"===e.attrs.type){if(t.isSubscribed()||t.pendingOut$.getValue())return t.pendingIn$.next(!1),this.sendAcceptPresenceSubscriptionRequest(e.attrs.from),t.subscription$.next(this.transitionSubscriptionRequestReceivedAccepted(t.subscription$.getValue())),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0;if(t)return t.pendingIn$.next(!0),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0}else if("subscribed"===e.attrs.type)return t.pendingOut$.next(!1),t.subscription$.next(this.transitionSubscriptionRequestSentAccepted(t.subscription$.getValue())),this.chatService.contacts$.next(this.chatService.contacts$.getValue()),!0}return!1}transitionSubscriptionRequestReceivedAccepted(e){switch(e){case lt.none:return lt.from;case lt.to:return lt.both;default:return e}}transitionSubscriptionRequestSentAccepted(e){switch(e){case lt.none:return lt.to;case lt.from:return lt.both;default:return e}}sendAcceptPresenceSubscriptionRequest(e){this.chatService.getOrCreateContactById(e).pendingIn$.next(!1),this.chatService.chatConnectionService.send((0,N.Ls)("presence",{to:e,type:"subscribed",id:this.chatService.chatConnectionService.getNextIqId()}))}onBeforeOnline(){return this.refreshRosterContacts()}getRosterContacts(){return new Promise(e=>this.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get"},(0,N.Ls)("query",{xmlns:"jabber:iq:roster"}))).then(t=>e(this.convertToContacts(t)),t=>{this.logService.error("error converting roster contact push",t.toString()),e([])}))}convertToContacts(e){return e.getChild("query").getChildElements().map(t=>{const r=this.chatService.getOrCreateContactById(t.attrs.jid,t.attrs.name||t.attrs.jid);return r.subscription$.next(this.parseSubscription(t.attrs.subscription)),r.pendingOut$.next("subscribe"===t.attrs.ask),r})}parseSubscription(e){switch(e){case"to":return lt.to;case"from":return lt.from;case"both":return lt.both;case"none":default:return lt.none}}addRosterContact(e){this.sendAcceptPresenceSubscriptionRequest(e),this.sendAddToRoster(e),this.sendSubscribeToPresence(e)}sendAddToRoster(e){return this.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"jabber:iq:roster"},(0,N.Ls)("item",{jid:e}))))}sendSubscribeToPresence(e){this.chatService.chatConnectionService.send((0,N.Ls)("presence",{id:this.chatService.chatConnectionService.getNextIqId(),to:e,type:"subscribe"}))}removeRosterContact(e){const t=this.chatService.getContactById(e);t&&(t.subscription$.next(lt.none),t.pendingOut$.next(!1),t.pendingIn$.next(!1),this.sendRemoveFromRoster(e),this.sendWithdrawPresenceSubscription(e))}sendRemoveFromRoster(e){this.chatService.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"jabber:iq:roster"},(0,N.Ls)("item",{jid:e,subscription:"remove"}))))}sendWithdrawPresenceSubscription(e){this.chatService.chatConnectionService.send((0,N.Ls)("presence",{id:this.chatService.chatConnectionService.getNextIqId(),to:e,type:"unsubscribed"}))}refreshRosterContacts(){return this.getRosterContacts()}}let bT=(()=>{class n{client(t){return(0,N.Lp)(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),Xm=(()=>{class n{constructor(t,r,s){this.logService=t,this.ngZone=r,this.xmppClientFactoryService=s,this.state$=new Be("disconnected"),this.stanzaUnknown$=new se,this.iqId=(new Date).getTime(),this.iqStanzaResponseHandlers=new Map}onOnline(t){this.logService.info("online =","online as",t.toString()),this.userJid=t,this.state$.next("online")}sendPresence(){return K(this,void 0,void 0,function*(){yield this.send((0,N.Ls)("presence"))})}send(t){return K(this,void 0,void 0,function*(){this.logService.debug(">>>",t),yield this.client.send(t)})}sendIq(t){return new Promise((r,s)=>{t.attrs=Object.assign({id:this.getNextIqId(),from:this.userJid.toString()},t.attrs);const{id:i}=t.attrs;if(!t.attrs.type){const o="iq stanza without type: "+t.toString();throw this.logService.error(o),new Error(o)}this.iqStanzaResponseHandlers.set(i,o=>{"result"===o.attrs.type?r(o):s(new oT(o))}),this.send(t).catch(o=>{this.logService.error("error sending iq",o),this.iqStanzaResponseHandlers.delete(i),s(o)})})}sendIqAckResult(t){return K(this,void 0,void 0,function*(){yield this.send((0,N.Ls)("iq",{from:this.userJid.toString(),id:t,type:"result"}))})}onStanzaReceived(t){let r=!1;if(this.isIqStanzaResponse(t)){const s=this.iqStanzaResponseHandlers.get(t.attrs.id);s&&(this.logService.debug("<<<",t.toString(),"handled by callback",s),this.iqStanzaResponseHandlers.delete(t.attrs.id),s(t),r=!0)}r||this.stanzaUnknown$.next(t)}isIqStanzaResponse(t){const r=t.attrs.type;return"iq"===t.name&&("result"===r||"error"===r)}logIn(t){return K(this,void 0,void 0,function*(){yield this.ngZone.runOutsideAngular(()=>K(this,void 0,void 0,function*(){t.username.indexOf("@")>=0&&this.logService.warn("username should not contain domain, only local part, this can lead to errors!"),this.client=this.xmppClientFactoryService.client(t),this.client.on("error",r=>{this.ngZone.run(()=>{this.logService.error("chat service error =>",r.toString(),r)})}),this.client.on("status",(r,s)=>{this.ngZone.run(()=>{this.logService.info("status update =",r,s?JSON.stringify(s):""),"offline"===r&&this.state$.next("disconnected")})}),this.client.on("online",r=>this.ngZone.run(()=>this.onOnline(r))),this.client.on("stanza",r=>{this.ngZone.run(()=>{this.onStanzaReceived(r)})}),this.client.on("disconnect",()=>{this.ngZone.run(()=>{this.state$.next("reconnecting")})}),yield this.client.start()}))})}logOut(){return K(this,void 0,void 0,function*(){if(this.logService.debug("logging out"),this.client){this.client.reconnect.stop();try{yield this.send((0,N.Ls)("presence",{type:"unavailable"}))}catch(t){this.logService.error("error sending presence unavailable")}finally{this.client.stop()}}})}getNextIqId(){return String(this.iqId++)}reconnectSilently(){this.logService.warn("hard reconnect..."),this.state$.next("disconnected")}}return n.\u0275fac=function(t){return new(t||n)(z(ea),z(Xe),z(bT))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),wT=(()=>{class n{constructor(t,r,s){this.chatConnectionService=t,this.logService=r,this.contactFactory=s,this.message$=new se,this.messageSent$=new se,this.contacts$=new Be([]),this.contactCreated$=new se,this.blockedContactIds$=new Be(new Set),this.blockedContacts$=Mc([this.contacts$,this.blockedContactIds$]).pipe(pe(([i,o])=>i.filter(a=>o.has(a.jidBare.toString())))),this.notBlockedContacts$=Mc([this.contacts$,this.blockedContactIds$]).pipe(pe(([i,o])=>i.filter(a=>!o.has(a.jidBare.toString())))),this.contactsSubscribed$=this.notBlockedContacts$.pipe(pe(i=>i.filter(o=>o.isSubscribed()))),this.contactRequestsReceived$=this.notBlockedContacts$.pipe(pe(i=>i.filter(o=>o.pendingIn$.getValue()))),this.contactRequestsSent$=this.notBlockedContacts$.pipe(pe(i=>i.filter(o=>o.pendingOut$.getValue()))),this.contactsUnaffiliated$=this.notBlockedContacts$.pipe(pe(i=>i.filter(o=>o.isUnaffiliated()&&o.messages.length>0))),this.state$=new Be("disconnected"),this.plugins=[],this.enableDebugging=!1,this.userAvatar$=new Be(zm),this.translations=_T(),this.chatActions=[{id:"sendMessage",cssClass:"chat-window-send",html:"&raquo;",onClick:i=>{i.chatWindow.sendMessage()}}],this.state$.subscribe(i=>this.logService.info("state changed to:",i)),t.state$.pipe(kt(i=>i!==this.state$.getValue())).subscribe(i=>{this.handleInternalStateChange(i)}),this.chatConnectionService.stanzaUnknown$.subscribe(i=>this.onUnknownStanza(i)),$d(this.messageSent$,this.message$).subscribe(()=>{this.contacts$.next(this.contacts$.getValue())})}handleInternalStateChange(t){"online"===t?(this.state$.next("connecting"),Promise.all(this.plugins.map(r=>r.onBeforeOnline())).then(()=>this.announceAvailability(),r=>{this.logService.error("error while connecting",r),this.announceAvailability()})):("online"===this.state$.getValue()&&this.onOffline(),this.state$.next("disconnected"))}onOffline(){this.contacts$.next([]),this.plugins.forEach(t=>{try{t.onOffline()}catch(r){this.logService.error("error while handling offline in ",t)}})}announceAvailability(){this.logService.info("announcing availability"),this.chatConnectionService.sendPresence(),this.state$.next("online")}addPlugins(t){t.forEach(r=>{this.plugins.push(r)})}reloadContacts(){this.getPlugin(Od).refreshRosterContacts()}getContactById(t){const r=(0,N.kO)(t).bare();return this.contacts$.getValue().find(s=>s.jidBare.equals(r))}getOrCreateContactById(t,r){let s=this.getContactById(t);return s||(s=this.contactFactory.createContact((0,N.kO)(t).bare().toString(),r),this.contacts$.next([s,...this.contacts$.getValue()]),this.contactCreated$.next(s)),s}addContact(t){this.getPlugin(Od).addRosterContact(t)}removeContact(t){this.getPlugin(Od).removeRosterContact(t)}logIn(t){return K(this,void 0,void 0,function*(){this.lastLogInRequest=t,"disconnected"===this.state$.getValue()&&(yield this.chatConnectionService.logIn(t))})}logOut(){return this.chatConnectionService.logOut()}sendMessage(t,r){var s;return K(this,void 0,void 0,function*(){const i=r.trim();if(0!==i.length)switch(t.recipientType){case"room":yield this.getPlugin(sa).sendMessage(t,i);break;case"contact":this.getPlugin(vT).sendMessage(t,i),this.messageSent$.next(t);break;default:throw new Error("invalid recipient type: "+(null===(s=t)||void 0===s?void 0:s.recipientType))}})}loadCompleteHistory(){return this.getPlugin(Gm).loadAllMessages()}getPlugin(t){for(const r of this.plugins)if(r.constructor===t)return r;throw new Error("plugin not found: "+t)}onUnknownStanza(t){let r=!1;for(const s of this.plugins)try{s.handleStanza(t)&&(this.logService.debug(s.constructor.name,"handled",t.toString()),r=!0)}catch(i){this.logService.error("error handling stanza in ",s.constructor.name,i)}r||this.logService.warn("unknown stanza <=",t.toString())}reconnectSilently(){this.chatConnectionService.reconnectSilently()}reconnect(){return this.logIn(this.lastLogInRequest)}}return n.\u0275fac=function(t){return new(t||n)(z(Xm),z(ea),z(Uc))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const ET=new Ce("ngxChatContactClickHandler");let ST=(()=>{class n{constructor(t,r,s){this.chatService=t,this.httpClient=r,this.contactClickHandler=s,this.showMessageReadState=!0,this.showImagePlaceholder=!0,this.Direction=Fe,this.messageStatePlugin=this.chatService.getPlugin(yT)}ngOnInit(){this.tryFindImageLink()}tryFindImageLink(){if(this.chatService instanceof wT){const t=pT(this.message.body);if(0===t.length)return void(this.showImagePlaceholder=!1);this.tryFindEmbedImageUrls(t)}}tryFindEmbedImageUrls(t){return K(this,void 0,void 0,function*(){for(const r of t)try{const s=yield this.httpClient.head(r,{observe:"response"}).toPromise(),i=s.headers.get("Content-Type"),o=i&&i.startsWith("image"),a=s.headers.get("Content-Length");if(o&&parseInt(a,10)<256e3){this.imageLink=r;break}}catch(s){}this.imageLink||(this.showImagePlaceholder=!1)})}getMessageState(){if(this.showMessageReadState){if(this.message.state)return this.message.state;if(this.messageStatePlugin&&this.contact){const t=this.message.datetime,r=this.messageStatePlugin.getContactMessageState(this.contact.jidBare.toString());return this.getStateForDate(t,r)}}}getStateForDate(t,r){return t<=r.lastRecipientSeen?Zt.RECIPIENT_SEEN:t<=r.lastRecipientReceived?Zt.RECIPIENT_RECEIVED:t<=r.lastSent?Zt.SENT:void 0}onContactClick(){this.contactClickHandler&&this.contactClickHandler.onClick(this.contact)}getAvatar(){if(this.showAvatars)return this.message.direction===Fe.in?this.avatar:this.chatService.userAvatar$.getValue()}}return n.\u0275fac=function(t){return new(t||n)($(bn),$(_m),$(ET,8))},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-message"]],inputs:{showMessageReadState:"showMessageReadState",showAvatars:"showAvatars",avatar:"avatar",message:"message",nick:"nick",contact:"contact"},decls:3,vars:12,consts:[[3,"imageLink","showImagePlaceholder","avatar","avatarInteractive","direction","messageState","formattedDate","nick","avatarClickHandler"],[3,"ngxChatLinks"]],template:function(t,r){1&t&&(E(0,"ngx-chat-message-simple",0),J("avatarClickHandler",function(){return r.onContactClick()}),Me(1,"date"),we(2,"span",1),S()),2&t&&(H("imageLink",r.imageLink)("showImagePlaceholder",r.showImagePlaceholder)("avatar",r.getAvatar())("avatarInteractive",r.message.direction===r.Direction.in)("direction",r.message.direction)("messageState",r.getMessageState())("formattedDate",Iw(1,9,r.message.datetime,r.chatService.translations.timeFormat))("nick",r.nick),L(2),H("ngxChatLinks",r.message.body))},directives:function(){return[ey,E8]},pipes:function(){return[Kp]},styles:[".chat-message--out[_nghost-%COMP%]{align-self:flex-end}.chat-message--in[_nghost-%COMP%]{align-self:flex-start}"]}),n})();var wn=(()=>(function(n){n[n.PENDING_REQUEST=0]="PENDING_REQUEST",n[n.SHOW_BLOCK_ACTIONS=1]="SHOW_BLOCK_ACTIONS",n[n.NO_PENDING_REQUEST=2]="NO_PENDING_REQUEST"}(wn||(wn={})),wn))();let Wc=(()=>{class n{constructor(t,r,s,i,o,a){this.chatListService=t,this.chatService=r,this.chatMessageListRegistry=s,this.reportUserService=i,this.changeDetectorRef=o,this.contactFactory=a,this.Direction=Fe,this.SubscriptionAction=wn,this.subscriptionAction=wn.NO_PENDING_REQUEST,this.onTop$=new se,this.ngDestroy=new se,this.isAtBottom=!0,this.bottomLeftAt=0,this.oldestVisibleMessageBeforeLoading=null,this.blockPlugin=this.chatService.getPlugin(iT)}ngOnInit(){return K(this,void 0,void 0,function*(){this.onTop$.pipe(kt(t=>t.isIntersecting),Ho(1e3)).subscribe(()=>this.loadOlderMessagesBeforeViewport()),"contact"===this.recipient.recipientType&&this.recipient.pendingIn$.pipe(kt(t=>!0===t),qo(this.ngDestroy)).subscribe(()=>{this.subscriptionAction=wn.PENDING_REQUEST,this.scheduleScrollToLastMessage()}),this.chatMessageListRegistry.incrementOpenWindowCount(this.recipient)})}ngAfterViewInit(){return K(this,void 0,void 0,function*(){this.chatMessageViewChildrenList.changes.subscribe(()=>{this.oldestVisibleMessageBeforeLoading&&this.scrollToMessage(this.oldestVisibleMessageBeforeLoading),this.oldestVisibleMessageBeforeLoading=null}),this.recipient.messages$.pipe(Ho(10),kt(()=>this.isNearBottom()),qo(this.ngDestroy)).subscribe(r=>this.scheduleScrollToLastMessage()),this.recipient.messages.length<10&&(yield this.loadMessages()),this.scheduleScrollToLastMessage()})}ngOnChanges(t){const r=t.contact;r&&r.previousValue&&r.currentValue&&(this.chatMessageListRegistry.decrementOpenWindowCount(r.previousValue),this.chatMessageListRegistry.incrementOpenWindowCount(r.currentValue)),r&&r.currentValue&&this.scheduleScrollToLastMessage()}ngOnDestroy(){this.ngDestroy.next(),this.chatMessageListRegistry.decrementOpenWindowCount(this.recipient)}acceptSubscriptionRequest(t){t.preventDefault(),this.subscriptionAction===wn.PENDING_REQUEST&&(this.chatService.addContact(this.recipient.jidBare.toString()),this.subscriptionAction=wn.NO_PENDING_REQUEST,this.scheduleScrollToLastMessage())}denySubscriptionRequest(t){t.preventDefault(),this.subscriptionAction===wn.PENDING_REQUEST&&(this.chatService.removeContact(this.recipient.jidBare.toString()),this.subscriptionAction=wn.SHOW_BLOCK_ACTIONS,this.scheduleScrollToLastMessage())}scheduleScrollToLastMessage(){setTimeout(()=>this.scrollToLastMessage(),0)}scrollToLastMessage(){this.chatMessageAreaElement&&(this.chatMessageAreaElement.nativeElement.scrollTop=this.chatMessageAreaElement.nativeElement.scrollHeight,this.isAtBottom=!0)}scrollToMessage(t){this.chatMessageAreaElement&&document.getElementById("message-"+t.id).scrollIntoView(!1)}blockContact(t){t.preventDefault(),this.blockPlugin.blockJid(this.recipient.jidBare.toString()),this.chatListService.closeChat(this.recipient),this.subscriptionAction=wn.NO_PENDING_REQUEST}blockContactAndReport(t){"contact"===this.recipient.recipientType&&(t.preventDefault(),this.reportUserService.reportUser(this.recipient),this.blockContact(t))}dismissBlockOptions(t){t.preventDefault(),this.subscriptionAction=wn.NO_PENDING_REQUEST}subscriptionActionShown(){return"contact"===this.recipient.recipientType&&(this.subscriptionAction===wn.PENDING_REQUEST||!0===this.blockPlugin.supportsBlock$.getValue()&&this.subscriptionAction===wn.SHOW_BLOCK_ACTIONS)}loadOlderMessagesBeforeViewport(){return K(this,void 0,void 0,function*(){if(!this.isLoadingHistory()&&!this.isNearBottom())try{this.oldestVisibleMessageBeforeLoading=this.recipient.oldestMessage,yield this.loadMessages()}catch(t){this.oldestVisibleMessageBeforeLoading=null}})}loadMessages(){return K(this,void 0,void 0,function*(){try{this.changeDetectorRef.detach(),yield this.chatService.getPlugin(Gm).loadMostRecentUnloadedMessages(this.recipient)}finally{this.changeDetectorRef.reattach()}})}onBottom(t){this.isAtBottom=t.isIntersecting,t.isIntersecting?this.isAtBottom=!0:(this.isAtBottom=!1,this.bottomLeftAt=Date.now())}isNearBottom(){return this.isAtBottom||Date.now()-this.bottomLeftAt<1e3}isLoadingHistory(){return!!this.oldestVisibleMessageBeforeLoading}getOrCreateContactWithFullJid(t){if("contact"===this.recipient.recipientType)return this.recipient;const r=t;let s=this.chatService.contacts$.getValue().find(i=>i.jidFull.equals(r.from));return s||(s=this.contactFactory.createContact(r.from.toString(),r.from.resource),this.chatService.contacts$.next([s].concat(this.chatService.contacts$.getValue()))),s}}return n.\u0275fac=function(t){return new(t||n)($(Xo),$(bn),$(Wm),$(p8,8),$(Yl),$(Uc))},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-message-list"]],viewQuery:function(t,r){if(1&t&&(oi(s4,5),oi(ST,5)),2&t){let s;Yr(s=Zr())&&(r.chatMessageAreaElement=s.first),Yr(s=Zr())&&(r.chatMessageViewChildrenList=s)}},inputs:{recipient:"recipient",showAvatars:"showAvatars"},features:[xt],decls:7,vars:3,consts:[[1,"chat-messages"],["messageArea",""],[1,"chat-messages-start",3,"ngxChatIntersectionObserver"],[4,"ngFor","ngForOf"],["class","chat-messages-empty",4,"ngIf"],[3,"direction","avatar","footerHidden",4,"ngIf"],[1,"chat-messages-end",3,"ngxChatIntersectionObserver"],[1,"chat-messages-date-group"],[3,"id","chat-message--in","chat-message--out","contact","nick","avatar","message","showAvatars",4,"ngFor","ngForOf"],[3,"id","contact","nick","avatar","message","showAvatars"],[1,"chat-messages-empty"],[3,"direction","avatar","footerHidden"],[1,"chat-presence-subscription-actions"],["class","action-disabled",4,"ngIf"],["href","#",3,"click",4,"ngIf"],["class","deny-actions",4,"ngIf"],[1,"action-disabled"],["href","#",3,"click"],[1,"deny-actions"],[4,"ngIf"]],template:function(t,r){1&t&&(E(0,"div",0,1),E(2,"div",2),J("ngxChatIntersectionObserver",function(i){return r.onTop$.next(i)}),S(),re(3,o4,5,7,"ng-container",3),re(4,a4,2,1,"div",4),re(5,p4,12,11,"ngx-chat-message-simple",5),E(6,"div",6),J("ngxChatIntersectionObserver",function(i){return r.onBottom(i)}),S(),S()),2&t&&(L(3),H("ngForOf",r.recipient.dateMessagesGroups),L(1),H("ngIf",0===r.recipient.messages.length),L(1),H("ngIf",r.subscriptionActionShown()))},directives:function(){return[I8,No,Pr,ST,ey]},pipes:function(){return[Kp,Ms]},styles:[".chat-message--out[_nghost-%COMP%]{align-self:flex-end}.chat-message--in[_nghost-%COMP%]{align-self:flex-start}.chat-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:10em;max-height:20em;overflow-y:scroll}.chat-messages-date-group[_ngcontent-%COMP%]{font-size:.7em;font-style:italic;margin:.5em 0;text-align:center}ngx-chat-message[_ngcontent-%COMP%], ngx-chat-message-simple[_ngcontent-%COMP%]{max-width:76%;align-self:flex-start;animation-duration:1.5s;animation-timing-function:cubic-bezier(.16,1,.3,1)}ngx-chat-message.chat-message--in[_ngcontent-%COMP%], ngx-chat-message-simple.chat-message--in[_ngcontent-%COMP%]{animation-name:ngx-chat-message-in}ngx-chat-message.chat-message--out[_ngcontent-%COMP%], ngx-chat-message-simple.chat-message--out[_ngcontent-%COMP%]{animation-name:ngx-chat-message-out}.chat-messages-empty[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;color:#999;margin-top:1em;margin-bottom:1em}.chat-presence-subscription-actions[_ngcontent-%COMP%], .deny-actions[_ngcontent-%COMP%]{list-style:none;padding:0;margin:1em 0 0}.chat-presence-subscription-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .deny-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .chat-presence-subscription-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited, .deny-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#198cff}.deny-actions[_ngcontent-%COMP%]{margin-top:1em}.action-disabled[_ngcontent-%COMP%]{color:#999}.chat-messages-start[_ngcontent-%COMP%]{min-height:5px;height:5px;margin-top:5px}.chat-messages-end[_ngcontent-%COMP%]{min-height:5px;height:5px;margin-bottom:5px}"]}),n})(),ey=(()=>{class n{constructor(){this.avatarClickHandler=new Ze,this.footerHidden=!1,this.MessageState=Zt}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-message-simple"]],inputs:{footerHidden:"footerHidden",avatar:"avatar",avatarInteractive:"avatarInteractive",direction:"direction",formattedDate:"formattedDate",imageLink:"imageLink",showImagePlaceholder:"showImagePlaceholder",messageState:"messageState",nick:"nick"},outputs:{avatarClickHandler:"avatarClickHandler"},ngContentSelectors:sT,decls:7,vars:7,consts:[[1,"chat-message"],[1,"chat-message-text-wrapper"],["class","chat-message-avatar",4,"ngIf"],[1,"chat-message-text"],["class","chat-message-image-wrapper",3,"chat-message-image-wrapper--placeholder",4,"ngIf"],["class","chat-message-footer",4,"ngIf"],[1,"chat-message-avatar"],[3,"imageUrl","click"],[1,"chat-message-image-wrapper"],[1,"chat-message-image",3,"src","load"],[1,"chat-message-footer"],[1,"chat-message-name",3,"title"],[3,"ngSwitch",4,"ngIf"],[1,"chat-message-datetime"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"state--seen"]],template:function(t,r){1&t&&(Ul(),E(0,"div",0),E(1,"div",1),re(2,g4,2,3,"div",2),E(3,"div",3),Ua(4),S(),S(),re(5,m4,2,3,"div",4),re(6,b4,6,4,"div",5),S()),2&t&&(Qr("chat-message--in","in"===r.direction)("chat-message--out","out"===r.direction),L(2),H("ngIf",r.avatar),L(3),H("ngIf",r.imageLink||r.showImagePlaceholder),L(1),H("ngIf",!r.footerHidden))},directives:function(){return[Pr,ty,Au,rS]},styles:[".chat-message-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:2em;height:2em;padding:.5em}.chat-message--in[_ngcontent-%COMP%]   .chat-message-avatar[_ngcontent-%COMP%]{padding-right:0}.chat-message--out[_ngcontent-%COMP%]   .chat-message-avatar[_ngcontent-%COMP%]{padding-left:0}.has-click-handler[_ngcontent-%COMP%]:hover{cursor:pointer}.chat-message-text[_ngcontent-%COMP%]{min-width:0;padding:.5em;word-break:break-word}.chat-message[_ngcontent-%COMP%]{border-radius:.5em;margin:calc(.5em / 2)}.chat-message--out[_ngcontent-%COMP%]{background-color:#e6ffd1}.chat-message--in[_ngcontent-%COMP%]{background-color:#dbedff}.chat-message-text-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}.chat-message--out[_ngcontent-%COMP%]   .chat-message-text-wrapper[_ngcontent-%COMP%]{flex-direction:row-reverse}.chat-message-image-wrapper[_ngcontent-%COMP%]{max-width:100%;max-height:150px;overflow:hidden;height:auto;margin:0 .5em;display:flex;justify-content:center}.chat-message-image-wrapper.chat-message-image-wrapper--placeholder[_ngcontent-%COMP%]{height:150px}.chat-message-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;min-width:0}.chat-message-footer[_ngcontent-%COMP%]{font-size:.75em;text-align:right;color:#999;padding:0 .5em .5em;clear:both}.chat-message-datetime[_ngcontent-%COMP%]{display:inline-block;vertical-align:bottom}.chat-message-name[_ngcontent-%COMP%]{display:inline-block;max-width:9em;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;vertical-align:bottom;margin-right:.5em}.state--seen[_ngcontent-%COMP%]{color:#00c5d2}"],changeDetection:0}),n})();class DT extends Ut{constructor(e,t,r,s){super(),this.httpClient=e,this.serviceDiscoveryPlugin=t,this.xmppChatAdapter=r,this.logService=s}onBeforeOnline(){return this.uploadService=this.serviceDiscoveryPlugin.findService("store","file"),this.uploadService.then(()=>{this.fileUploadSupported=!0},()=>{this.fileUploadSupported=!1,this.logService.info("http file upload not supported")}),Promise.resolve()}onOffline(){this.uploadService=null,this.fileUploadSupported=!1}upload(e){return K(this,void 0,void 0,function*(){yield this.uploadService;const{name:t,size:r,type:s}=e,i=yield this.requestSlot(t,r.toString(),s);return yield this.uploadToSlot(i,e)})}requestSlot(e,t,r){return K(this,void 0,void 0,function*(){const s=(yield this.uploadService).jid;return(yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{to:s,type:"get"},(0,N.Ls)("request",{xmlns:"urn:xmpp:http:upload:0",filename:e,size:t,"content-type":r})))).getChild("slot").getChild("put").attrs.url})}uploadToSlot(e,t){return K(this,void 0,void 0,function*(){return yield this.httpClient.put(e,t,{responseType:"blob"}).toPromise(),e})}}let _8=(()=>{class n{constructor(t,r,s){this.chatService=t,this.chatListService=r,this.contactClickHandler=s,this.ngDestroy=new se,this.httpFileUploadPlugin=this.chatService.getPlugin(DT)}ngOnInit(){this.chatWindowState.recipient.messages$.pipe(kt(r=>r.direction===Fe.in),qo(this.ngDestroy)).subscribe(()=>{this.chatWindowState.isCollapsed=!1})}ngOnDestroy(){this.ngDestroy.next(),this.ngDestroy.complete()}onClickHeader(){this.chatWindowState.isCollapsed=!this.chatWindowState.isCollapsed}onClickClose(){this.chatListService.closeChat(this.chatWindowState.recipient)}sendMessage(){this.messageInput.onSendMessage()}afterSendMessage(){this.contactMessageList.scheduleScrollToLastMessage()}uploadFile(t){return K(this,void 0,void 0,function*(){const r=yield this.httpFileUploadPlugin.upload(t);this.chatService.sendMessage(this.chatWindowState.recipient,r)})}onFocus(){this.messageInput.focus()}onActionClick(t){t.onClick({contact:this.chatWindowState.recipient.jidBare.toString(),chatWindow:this})}onContactClick(t){this.contactClickHandler&&!this.chatWindowState.isCollapsed&&(t.stopPropagation(),this.contactClickHandler.onClick(this.chatWindowState.recipient))}}return n.\u0275fac=function(t){return new(t||n)($(bn),$(Xo),$(ET,8))},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-window"]],viewQuery:function(t,r){if(1&t&&(oi(Nd,5),oi(Wc,5)),2&t){let s;Yr(s=Zr())&&(r.messageInput=s.first),Yr(s=Zr())&&(r.contactMessageList=s.first)}},inputs:{chatWindowState:"chatWindowState"},decls:10,vars:8,consts:[[3,"headerClick","closeClick"],[1,"window-header-content"],[1,"chat-contact-avatar-wrapper",3,"click"],[3,"imageUrl"],[1,"header-middle"],[1,"chat-contact-name-wrapper",3,"title"],[3,"ngClass","click"],["class","chat-contact-status-wrapper",4,"ngIf"],["class","window-content",3,"enabled","dropMessage","fileUpload",4,"ngIf"],[1,"chat-contact-status-wrapper"],[1,"chat-contact-status"],[1,"window-content",3,"enabled","dropMessage","fileUpload"],[3,"click"],[3,"recipient","showAvatars"],[1,"chat-input-container"],[3,"recipient","messageSent"],["class","chat-action",3,"ngClass","innerHTML","click",4,"ngFor","ngForOf"],[1,"chat-action",3,"ngClass","innerHTML","click"]],template:function(t,r){1&t&&(E(0,"ngx-chat-window-frame",0),J("headerClick",function(){return r.onClickHeader()})("closeClick",function(){return r.onClickClose()}),Rt(1,1),E(2,"div",2),J("click",function(i){return r.onContactClick(i)}),we(3,"ngx-chat-avatar",3),S(),E(4,"div",4),E(5,"div",5),E(6,"span",6),J("click",function(i){return r.onContactClick(i)}),G(7),S(),S(),re(8,w4,4,3,"div",7),S(),Pt(),re(9,S4,6,6,"ngx-chat-filedrop",8),S()),2&t&&(L(3),H("imageUrl",r.chatWindowState.recipient.avatar),L(2),H("title",r.chatWindowState.recipient.name),L(1),H("ngClass",ep(6,D4,!r.chatWindowState.isCollapsed&&!!r.contactClickHandler)),L(1),We(" ",r.chatWindowState.recipient.name," "),L(1),H("ngIf",!r.chatWindowState.isCollapsed&&"contact"===r.chatWindowState.recipient.recipientType),L(1),H("ngIf",!r.chatWindowState.isCollapsed))},directives:function(){return[TT,ty,zp,Pr,r8,Wc,Nd,No]},pipes:function(){return[Ms]},styles:['@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.chat-contact-avatar-wrapper[_ngcontent-%COMP%]{min-width:2em;width:2em;min-height:2em;height:2em}.header-middle[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:1;padding:0 .5em;white-space:nowrap;overflow:hidden;font-size:.8em;line-height:1.2;height:100%;display:flex;flex-direction:column;justify-content:space-around}.chat-contact-name-wrapper[_ngcontent-%COMP%], .chat-contact-status-wrapper[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:block}.has-click-handler[_ngcontent-%COMP%]:hover{text-decoration:underline}.chat-contact-status[_ngcontent-%COMP%]{color:#999}.window-content[_ngcontent-%COMP%]{text-align:left;padding:0;min-height:5em;display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto}.chat-input-container[_ngcontent-%COMP%]{display:flex;padding:.5em;border-top:1px solid #e1e1e1;background:#fff;cursor:text}.chat-action[_ngcontent-%COMP%]{cursor:pointer;align-self:center;text-align:center}.chat-window-send[_ngcontent-%COMP%]{background-color:#fff;border-color:#fff;color:#000;width:1.5em}.chat-window-send[_ngcontent-%COMP%]:active{border:none}ngx-chat-message-input[_ngcontent-%COMP%]{flex-grow:1}']}),n})(),v8=(()=>{class n{constructor(t){this.chatService=t,this.showChatComponent=!1}set translations(t){const r=_T();t&&(this.chatService.translations=Object.assign(Object.assign(Object.assign({},r),t),{presence:Object.assign(Object.assign({},r.presence),t.presence)}))}ngOnInit(){this.chatService.state$.subscribe(t=>this.onChatStateChange(t)),this.onRosterStateChanged(this.rosterState),this.userAvatar$&&this.userAvatar$.subscribe(t=>this.chatService.userAvatar$.next(t))}ngOnChanges(t){t.rosterState&&this.onRosterStateChanged(t.rosterState.currentValue)}onChatStateChange(t){this.showChatComponent="online"===t,this.updateBodyClass()}onRosterStateChanged(t){this.rosterState=t,this.updateBodyClass()}updateBodyClass(){const t="has-roster";this.showChatComponent&&"hidden"!==this.rosterState?document.body.classList.add(t):document.body.classList.remove(t)}}return n.\u0275fac=function(t){return new(t||n)($(bn))},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat"]],inputs:{translations:"translations",rosterState:"rosterState",contacts:"contacts",contactRequestsReceived$:"contactRequestsReceived$",contactRequestsSent$:"contactRequestsSent$",contactsUnaffiliated$:"contactsUnaffiliated$",userAvatar$:"userAvatar$"},features:[xt],decls:2,vars:2,consts:[[3,"rosterState",4,"ngIf"],[3,"rosterState","contacts","contactRequestsReceived$","contactRequestsSent$","contactsUnaffiliated$","rosterStateChanged",4,"ngIf"],[3,"rosterState"],[3,"rosterState","contacts","contactRequestsReceived$","contactRequestsSent$","contactsUnaffiliated$","rosterStateChanged"]],template:function(t,r){1&t&&(re(0,M4,1,1,"ngx-chat-window-list",0),re(1,T4,1,5,"ngx-chat-roster-list",1)),2&t&&(H("ngIf",r.showChatComponent),L(1),H("ngIf",r.showChatComponent))},directives:function(){return[Pr,D8,M8]},styles:[""]}),n})();function MT(n){return(n.split("://")[1]||n).split(":")[0].split("/")[0]}const C8=new Ce("ngxChatLinkOpener");let b8=(()=>{class n{constructor(t,r,s){this.router=t,this.platformLocation=r,this.linkOpener=s}onClick(t){if(this.linkOpener)t.preventDefault(),this.linkOpener.openLink(this.link);else if(this.isInApp()){t.preventDefault();const r=document.createElement("a");r.href=this.link,this.router.navigateByUrl(r.pathname)}}isInApp(){return this.link.startsWith(this.appUrl())}appUrl(){return window.location.protocol+"//"+window.location.host+this.platformLocation.getBaseHrefFromDOM()}}return n.\u0275fac=function(t){return new(t||n)($(pn),$(Ds),$(C8,8))},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-message-link"]],decls:2,vars:2,consts:[["target","_blank","rel","noopener",3,"href","click"]],template:function(t,r){1&t&&(E(0,"a",0),J("click",function(i){return r.onClick(i)}),G(1),S()),2&t&&(Ha("href",r.link,Ia),L(1),pt(r.text))},styles:["a[_ngcontent-%COMP%]{color:#198cff;cursor:pointer}a[_ngcontent-%COMP%]:visited{color:#9a46e8}"]}),n})(),w8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-message-text"]],inputs:{text:"text"},decls:1,vars:1,template:function(t,r){1&t&&G(0),2&t&&pt(r.text)},styles:["[_nghost-%COMP%] {\n                white-space: pre-wrap;\n            }"]}),n})(),E8=(()=>{class n{constructor(t,r){this.resolver=t,this.viewContainerRef=r}ngOnChanges(){this.transform()}transform(){const t=this.ngxChatLinks;if(!t)return;const r=pT(t),s=this.resolver.resolveComponentFactory(w8),i=this.resolver.resolveComponentFactory(b8);let o=0;for(const c of r){const l=t.indexOf(c,o),u=t.substring(o,l);u&&(this.viewContainerRef.createComponent(s).instance.text=u);const d=this.viewContainerRef.createComponent(i);d.instance.link=c,d.instance.text=this.shorten(c),o=l+c.length}const a=t.substring(o);a&&(this.viewContainerRef.createComponent(s).instance.text=a)}shorten(t){const r=document.createElement("a");r.href=t;let s=r.pathname;return s.length>17&&(s=s.substring(0,5)+"..."+s.substring(s.length-10)),r.protocol+"//"+r.host+s}}return n.\u0275fac=function(t){return new(t||n)($(bs),$(qn))},n.\u0275dir=ue({type:n,selectors:[["","ngxChatLinks",""]],inputs:{ngxChatLinks:"ngxChatLinks"},features:[xt]}),n})(),ty=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-avatar"]],inputs:{imageUrl:"imageUrl"},decls:1,vars:3,consts:[[1,"chat-avatar",3,"ngStyle"]],template:function(t,r){1&t&&we(0,"div",0),2&t&&H("ngStyle",ep(1,x4,"url("+r.imageUrl+")"))},directives:[iS],styles:[".chat-avatar[_ngcontent-%COMP%]{border-radius:50%;background-size:cover;background-position:50%;background-repeat:no-repeat;width:100%;height:100%}"]}),n})(),S8=(()=>{class n{constructor(){}ngAfterViewInit(){this.track.attach(this.video.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-video-window"]],viewQuery:function(t,r){if(1&t&&oi(I4,5),2&t){let s;Yr(s=Zr())&&(r.video=s.first)}},inputs:{track:"track"},decls:3,vars:0,consts:[["autoplay","1"],["video",""]],template:function(t,r){1&t&&(E(0,"ngx-chat-window-frame"),we(1,"video",0,1),S())},directives:function(){return[TT]},styles:["video[_ngcontent-%COMP%]{width:100%}"]}),n})(),TT=(()=>{class n{constructor(){this.closeClick=new Ze,this.headerClick=new Ze}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-window-frame"]],outputs:{closeClick:"closeClick",headerClick:"headerClick"},ngContentSelectors:P4,decls:5,vars:1,consts:[[1,"window"],[1,"window-header",3,"click"],["class","window-close",3,"click",4,"ngIf"],[1,"window-close",3,"click"]],template:function(t,r){1&t&&(Ul(R4),E(0,"div",0),E(1,"div",1),J("click",function(){return r.headerClick.emit()}),Ua(2),re(3,A4,2,0,"div",2),S(),Ua(4,1),S()),2&t&&(L(3),H("ngIf",r.closeClick.observers.length>0))},directives:[Pr],styles:['@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.window[_ngcontent-%COMP%]{border:1px solid #e1e1e1;border-bottom:none;background:#f5f5f5;margin-left:1em;width:17em;bottom:0;pointer-events:auto;position:relative}.window-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid #e1e1e1;cursor:pointer;height:2.5em;align-items:center;padding:.25em}.window-header[_ngcontent-%COMP%]:hover{background-color:#efefef}.window-close[_ngcontent-%COMP%]{padding:.5em;text-align:right;color:#777}.window-close[_ngcontent-%COMP%]:hover{color:#000}']}),n})(),D8=(()=>{class n{constructor(t){this.chatListService=t}}return n.\u0275fac=function(t){return new(t||n)($(Xo))},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-window-list"]],inputs:{rosterState:"rosterState"},decls:5,vars:7,consts:[[1,"chat-list"],[3,"track",4,"ngFor","ngForOf"],[3,"chatWindowState",4,"ngFor","ngForOf"],[3,"track"],[3,"chatWindowState"]],template:function(t,r){1&t&&(E(0,"div",0),re(1,N4,1,1,"ngx-chat-video-window",1),Me(2,"async"),re(3,O4,1,1,"ngx-chat-window",2),Me(4,"async"),S()),2&t&&(H("@rosterVisibility",r.rosterState),L(1),H("ngForOf",xe(2,3,r.chatListService.openTracks$)),L(2),H("ngForOf",xe(4,5,r.chatListService.openChats$)))},directives:[No,S8,_8],pipes:[Ms],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.chat-list[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:flex-end;position:fixed;bottom:0;right:16em;z-index:5;pointer-events:none}'],data:{animation:[Ag("rosterVisibility",[Lo("hidden",Ns({right:"1em"})),Lo("shown",Ns({right:"15em"})),Vo("hidden => shown",Fo("400ms ease")),Vo("shown => hidden",Fo("400ms ease"))])]}}),n})(),M8=(()=>{class n{constructor(t,r){this.chatService=t,this.chatListService=r,this.rosterStateChanged=new Ze,this.multiUserChatPlugin=this.chatService.getPlugin(sa)}ngOnInit(){this.contacts||(this.contacts=this.chatService.contactsSubscribed$),this.contactRequestsReceived$||(this.contactRequestsReceived$=this.chatService.contactRequestsReceived$),this.contactRequestsSent$||(this.contactRequestsSent$=this.chatService.contactRequestsSent$),this.contactsUnaffiliated$||(this.contactsUnaffiliated$=this.chatService.contactsUnaffiliated$),this.hasNoContacts$=Mc([this.contacts,this.contactRequestsReceived$,this.contactRequestsSent$,this.contactsUnaffiliated$]).pipe(pe(([t,r,s,i])=>t.length+r.length+s.length+i.length===0))}onClickRecipient(t){this.chatListService.openChat(t)}toggleVisibility(){this.rosterStateChanged.emit("shown"===this.rosterState?"hidden":"shown")}}return n.\u0275fac=function(t){return new(t||n)($(bn),$(Xo))},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-roster-list"]],inputs:{contacts:"contacts",contactRequestsReceived$:"contactRequestsReceived$",contactRequestsSent$:"contactRequestsSent$",contactsUnaffiliated$:"contactsUnaffiliated$",rosterState:"rosterState"},outputs:{rosterStateChanged:"rosterStateChanged"},decls:20,vars:27,consts:[[1,"roster-drawer",3,"click"],["class","roster-drawer__button",4,"ngIf"],[1,"roster-list"],[1,"roster-header"],[4,"ngIf"],["class","roster-list__empty",4,"ngIf"],[1,"roster-drawer__button"],[1,"roster-group-header"],[1,"contact-list-wrapper"],[3,"recipient","click",4,"ngFor","ngForOf"],[3,"recipient","click"],[4,"ngFor","ngForOf"],[3,"recipient","click",4,"ngIf"],[1,"roster-list__empty"],[1,"contact-pending-request-received-wrapper"],["class","contact-pending-request-received",4,"ngFor","ngForOf"],[1,"contact-pending-request-sent-wrapper"],["class","contact-pending-request-sent",4,"ngFor","ngForOf"],["style","margin-bottom: 1em",4,"ngFor","ngForOf"],[1,"roster-debug-state"],[1,"contact-pending-request-received"],[1,"contact-pending-request-sent"],[2,"margin-bottom","1em"]],template:function(t,r){1&t&&(E(0,"div",0),J("click",function(){return r.toggleVisibility()}),re(1,k4,2,0,"div",1),re(2,F4,2,0,"div",1),S(),E(3,"div",2),Me(4,"async"),E(5,"div",3),G(6),S(),re(7,j4,2,1,"ng-container",4),Me(8,"async"),re(9,$4,6,4,"ng-container",4),Me(10,"async"),re(11,H4,6,4,"ng-container",4),Me(12,"async"),re(13,G4,6,4,"ng-container",4),Me(14,"async"),re(15,Q4,6,4,"ng-container",4),Me(16,"async"),re(17,K4,2,1,"div",5),Me(18,"async"),re(19,X4,21,15,"ng-container",4),S()),2&t&&(H("@drawerVisibility",r.rosterState),L(1),H("ngIf","shown"===r.rosterState),L(1),H("ngIf","hidden"===r.rosterState),L(1),H("@rosterVisibility",r.rosterState),or("data-ngx-chat-state",xe(4,13,r.chatService.state$)),L(3),We(" ",r.chatService.translations.chat," "),L(1),H("ngIf",xe(8,15,r.multiUserChatPlugin.rooms$)),L(2),H("ngIf",xe(10,17,r.contacts).length>0),L(2),H("ngIf",xe(12,19,r.contactRequestsReceived$).length>0),L(2),H("ngIf",xe(14,21,r.contactRequestsSent$).length>0),L(2),H("ngIf",xe(16,23,r.contactsUnaffiliated$).length>0),L(2),H("ngIf",xe(18,25,r.hasNoContacts$)),L(2),H("ngIf",r.chatService.enableDebugging))},directives:function(){return[Pr,No,x8]},pipes:function(){return[Ms]},styles:['@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.roster-list[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;right:0;width:14em;overflow-y:auto;border-left:1px solid #e1e1e1;z-index:80;margin-left:10px;background-color:#f5f5f5;text-align:left;padding:.5em .5em 0;display:flex;flex-direction:column}.roster-list[_ngcontent-%COMP%]   .roster-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1em}.roster-list[_ngcontent-%COMP%]   .roster-group-header[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1;padding-bottom:.5em}.roster-list[_ngcontent-%COMP%]   .roster-footer[_ngcontent-%COMP%]{border-top:1px solid #e1e1e1;width:14em;padding-top:.5em}.roster-list[_ngcontent-%COMP%]   .contact-list-wrapper[_ngcontent-%COMP%]{margin-bottom:1em}.roster-list[_ngcontent-%COMP%]   ngx-chat-roster-recipient[_ngcontent-%COMP%]{display:block;padding:.5em}.roster-list[_ngcontent-%COMP%]   ngx-chat-roster-recipient[_ngcontent-%COMP%]:hover{background-color:#e8e8e8;cursor:pointer}.roster-list__empty[_ngcontent-%COMP%]{color:#999;text-align:center;margin-top:.5em;font-size:1.5em}.roster-drawer[_ngcontent-%COMP%]{top:0;bottom:0;right:14em;width:1em;position:fixed;z-index:80;cursor:pointer}.roster-drawer[_ngcontent-%COMP%]:hover{background-color:#1e1e1e33}.roster-drawer__button[_ngcontent-%COMP%]{top:50%;color:transparent;background-color:transparent;position:fixed;margin-left:.4rem}.roster-drawer[_ngcontent-%COMP%]:hover   .roster-drawer__button[_ngcontent-%COMP%]{color:#fff}'],data:{animation:[Ag("rosterVisibility",[Lo("hidden",Ns({right:"-14em"})),Lo("shown",Ns({right:"0em"})),Vo("hidden => shown",Fo("400ms ease")),Vo("shown => hidden",Fo("400ms ease"))]),Ag("drawerVisibility",[Lo("hidden",Ns({right:"0em"})),Lo("shown",Ns({right:"14em"})),Vo("hidden => shown",Fo("400ms ease")),Vo("shown => hidden",Fo("400ms ease"))])]}}),n})();const ny="ngxchat:unreadmessagedate",xT="entries",IT="last-read";class T8 extends Yo{constructor(){super(...arguments),this.lastReadNodes=[]}addLastReadNode(e,t){this.lastReadNodes.push((0,N.Ls)(IT,{jid:e,date:t}))}toStanza(){return(0,N.Ls)(xT,{},this.lastReadNodes)}}class ry extends Ut{constructor(e,t,r,s,i){super(),this.chatService=e,this.chatMessageListRegistry=t,this.publishSubscribePlugin=r,this.entityTimePlugin=s,this.multiUserChatPlugin=i,this.jidToUnreadCount$=new Be(new Map),this.jidToLastReadTimestamp=new Map,this.recipientIdToMessageSubscription=new Map,this.chatMessageListRegistry.chatOpened$.pipe(function(n,e=Uo){const r=O0(n)?+n-e.now():Math.abs(n);return s=>s.lift(new YB(r,e))}(0)).subscribe(o=>this.checkForUnreadCountChange(o)),$d(i.rooms$,this.chatService.contactCreated$.pipe(pe(o=>[o]))).subscribe(o=>{for(const a of o){const c=a.jidBare.toString();if(!this.recipientIdToMessageSubscription.has(c)){const u=a.messages$.pipe(Ho(20)).subscribe(()=>this.checkForUnreadCountChange(a));this.recipientIdToMessageSubscription.set(c,u)}}}),this.publishSubscribePlugin.publish$.subscribe(o=>this.handlePubSubEvent(o)),this.unreadMessageCountSum$=Mc([this.jidToUnreadCount$,this.chatService.blockedContactIds$]).pipe(Ho(20),pe(([o,a])=>{let c=0;for(const[l,u]of o)a.has(l)||(c+=u);return c}),F0(),cy())}checkForUnreadCountChange(e){return K(this,void 0,void 0,function*(){this.chatMessageListRegistry.isChatOpen(e)&&(this.jidToLastReadTimestamp.set(e.jidBare.toString(),yield this.entityTimePlugin.getNow()),yield this.persistLastSeenDates()),this.updateContactUnreadMessageState(e)})}onBeforeOnline(){return K(this,void 0,void 0,function*(){const e=yield this.fetchLastSeenDates();this.mergeJidToDates(e)})}onOffline(){for(const e of this.recipientIdToMessageSubscription.values())e.unsubscribe();this.recipientIdToMessageSubscription.clear(),this.jidToLastReadTimestamp.clear(),this.jidToUnreadCount$.next(new Map)}fetchLastSeenDates(){return K(this,void 0,void 0,function*(){const e=yield this.publishSubscribePlugin.retrieveNodeItems(ny);return this.parseLastSeenDates(e)})}parseLastSeenDates(e){const t=new Map;if(1===e.length){const[r]=e;for(const s of r.getChild(xT).getChildren(IT)){const{jid:i,date:o}=s.attrs;isNaN(o)||t.set(i,o)}}return t}updateContactUnreadMessageState(e){const t=e.jidBare.toString(),r=this.jidToLastReadTimestamp.get(t)||0,s=this.calculateUnreadMessageCount(e,r),i=this.jidToUnreadCount$.getValue();i.get(t)!==s&&this.jidToUnreadCount$.next(i.set(t,s))}calculateUnreadMessageCount(e,t){const r=Km(t,e.messages,s=>s.datetime.getTime());return e.messages.slice(r).filter(s=>s.direction===Fe.in).length}persistLastSeenDates(){return K(this,void 0,void 0,function*(){const e=new T8;for(const[t,r]of this.jidToLastReadTimestamp)e.addLastReadNode(t,r.toString());yield this.publishSubscribePlugin.storePrivatePayloadPersistent(ny,"current",e.toStanza())})}handlePubSubEvent(e){const t=e.getChild("items"),r=t&&t.attrs.node,s=t&&t.getChildren("item");if(r===ny&&s){const i=this.parseLastSeenDates(s);this.mergeJidToDates(i)}}mergeJidToDates(e){for(const[t,r]of e){const s=this.jidToLastReadTimestamp.get(t);(!s||s<r)&&this.jidToLastReadTimestamp.set(t,r)}}}let x8=(()=>{class n{constructor(t){this.chatService=t,this.Presence=Ft}ngOnInit(){this.unreadCount$=this.chatService.getPlugin(ry).jidToUnreadCount$.pipe(pe(t=>t.get(this.recipient.jidBare.toString())||0),F0(),Ho(20)),this.presence$="contact"===this.recipient.recipientType?this.recipient.presence$:me(Ft.unavailable)}}return n.\u0275fac=function(t){return new(t||n)($(bn))},n.\u0275cmp=ot({type:n,selectors:[["ngx-chat-roster-recipient"]],inputs:{recipient:"recipient"},decls:10,vars:9,consts:[[1,"roster-recipient",3,"title"],[1,"roster-recipient-avatar"],[3,"imageUrl"],[1,"roster-recipient-name"],[1,"roster-recipient-status"],["class","unread-message-badge",4,"ngIf"],[4,"ngIf"],[1,"unread-message-badge"],["class","roster-presence",3,"ngClass",4,"ngIf"],[1,"roster-presence",3,"ngClass"]],template:function(t,r){1&t&&(E(0,"div",0),E(1,"div",1),we(2,"ngx-chat-avatar",2),S(),E(3,"div",3),G(4),S(),E(5,"div",4),re(6,e8,3,3,"div",5),Me(7,"async"),re(8,n8,2,1,"ng-container",6),Me(9,"async"),S(),S()),2&t&&(H("title",r.recipient.name),L(2),H("imageUrl",r.recipient.avatar),L(2),We(" ",r.recipient.name," "),L(2),H("ngIf",xe(7,5,r.unreadCount$)>0),L(2),H("ngIf",xe(9,7,r.presence$)))},directives:[ty,Pr,zp],pipes:[Ms],styles:['@keyframes ngx-chat-message-in{0%{transform:translate(50px);opacity:0}to{transform:none;opacity:1}}@keyframes ngx-chat-message-out{0%{transform:translate(-50px);opacity:0}to{transform:none;opacity:1}}*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:"Helvetica","Arial",serif}.roster-recipient[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.roster-recipient-avatar[_ngcontent-%COMP%]{min-width:2em;width:2em;min-height:2em;height:2em}.roster-recipient-name[_ngcontent-%COMP%]{padding-left:.5em;padding-top:.5em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;flex-grow:1}.roster-recipient-status[_ngcontent-%COMP%]{white-space:nowrap}.roster-presence[_ngcontent-%COMP%]{display:inline-block;padding-top:.5em;margin-left:.3em}.roster-presence.roster-presence--present[_ngcontent-%COMP%]{color:#69ca48}.roster-presence.roster-presence--away[_ngcontent-%COMP%]{color:#ffbe00}.roster-presence.roster-presence--unavailable[_ngcontent-%COMP%]{color:transparent}.unread-message-badge[_ngcontent-%COMP%]{display:inline-block;padding-top:.2em;background-color:#ff5940;color:#fff;border-radius:50%;align-self:center;margin-top:.25em;width:1.5em;height:1.5em;text-align:center}']}),n})(),I8=(()=>{class n{constructor(t){this.el=t,this.ngxChatIntersectionObserver=new Ze,this.intersectionObserver=new IntersectionObserver(r=>{this.ngxChatIntersectionObserver.emit(r[0])},{rootMargin:"150px 0px 150px 0px"}),this.intersectionObserver.observe(t.nativeElement)}ngOnDestroy(){this.intersectionObserver.disconnect()}}return n.\u0275fac=function(t){return new(t||n)($(mt))},n.\u0275dir=ue({type:n,selectors:[["","ngxChatIntersectionObserver",""]],outputs:{ngxChatIntersectionObserver:"ngxChatIntersectionObserver"}}),n})();const kd="storage:bookmarks";class A8 extends Ut{constructor(e){super(),this.publishSubscribePlugin=e,this.pendingAddConference=null}onOffline(){this.pendingAddConference=null}retrieveMultiUserChatRooms(){return K(this,void 0,void 0,function*(){const e=yield this.publishSubscribePlugin.retrieveNodeItems(kd),t=e&&e[0]&&e[0].getChild("storage",kd),r=e&&t.getChildren("conference");return r?r.map(s=>this.convertElementToSavedConference(s)):[]})}convertElementToSavedConference(e){return{name:e.attrs.name,jid:e.attrs.jid,autojoin:"true"===e.attrs.autojoin}}saveConferences(e){const t=function(n,e=((t,r)=>t===r)){const t=[];for(const r of n){let s=!1;for(const i of t)if(e(r,i)){s=!0;break}s||t.push(r)}return t}(e,(r,s)=>r.jid===s.jid);return this.publishSubscribePlugin.storePrivatePayloadPersistent(kd,null,(0,N.Ls)("storage",{xmlns:kd},t.map(r=>this.convertSavedConferenceToElement(r))))}addConference(e){return K(this,void 0,void 0,function*(){for(;this.pendingAddConference;)try{yield this.pendingAddConference}catch(t){}this.pendingAddConference=this.addConferenceInternal(e);try{return yield this.pendingAddConference}finally{this.pendingAddConference=null}})}addConferenceInternal(e){return K(this,void 0,void 0,function*(){const r=[...yield this.retrieveMultiUserChatRooms(),e];return yield this.saveConferences(r)})}convertSavedConferenceToElement({name:e,autojoin:t,jid:r}){return(0,N.Ls)("conference",{name:e,jid:r,autojoin:t.toString()})}}class R8 extends Ut{constructor(e,t,r){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t,this.logService=r,this.serverSupportsTime$=new Be("unknown"),this.serverTime$=new Be(null)}onBeforeOnline(){return K(this,void 0,void 0,function*(){if(yield this.serviceDiscoveryPlugin.supportsFeature(this.xmppChatAdapter.chatConnectionService.userJid.domain,"urn:xmpp:time")){const t=yield this.requestTime(this.xmppChatAdapter.chatConnectionService.userJid.domain);this.serverTime$.next(t),this.serverSupportsTime$.next(!0)}else this.serverSupportsTime$.next(!1)})}onOffline(){this.serverSupportsTime$.next("unknown"),this.serverTime$.next(null)}getNow(){return K(this,void 0,void 0,function*(){const e=this.serverTime$.pipe(pe(t=>this.calculateNow(t)),Yn());return yield this.serverSupportsTime$.pipe(function(n,e=Uo){return function(n,e,t=Uo){return r=>{let s=O0(n),i=s?+n-t.now():Math.abs(n);return r.lift(new r$(i,s,e,t))}}(n,k0(new t$),e)}(5e3),Yn(t=>"unknown"!==t),Lt(t=>t?e:me(Date.now())),Ls(()=>me(Date.now()))).toPromise()})}calculateNow(e){return e.utcTimestamp+(performance.now()-e.localReference)}requestTime(e){var t;return K(this,void 0,void 0,function*(){const r=yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get",to:e},(0,N.Ls)("time",{xmlns:"urn:xmpp:time"}))),s=null===(t=r.getChild("time","urn:xmpp:time"))||void 0===t?void 0:t.getChildText("utc");if(!s){const i="invalid time response";throw this.logService.error(i,r.toString()),new Error(i)}return{utcTimestamp:Date.parse(s),localReference:performance.now()}})}}class P8 extends Ut{constructor(e){super(),this.xmppChatAdapter=e}onBeforeOnline(){return K(this,void 0,void 0,function*(){return yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("enable",{xmlns:"urn:xmpp:carbons:2"})))})}handleStanza(e){const t=e.getChildByAttr("xmlns","urn:xmpp:carbons:2"),r=t&&t.getChild("forwarded","urn:xmpp:forward:0"),s=r&&r.getChild("message","jabber:client"),i=e.attrs.from,o=this.xmppChatAdapter.chatConnectionService.userJid;return!!(e.is("message")&&t&&r&&s&&o&&o.bare().toString()===i)&&this.handleCarbonMessageStanza(s,t)}handleCarbonMessageStanza(e,t){const r=t.is("received")?Fe.in:Fe.out,s={body:e.getChildText("body").trim(),direction:r,datetime:new Date,delayed:!1,fromArchive:!1},i=new Ym;if(this.xmppChatAdapter.plugins.forEach(o=>o.afterReceiveMessage(s,e,i)),!i.discard){const{from:o,to:a}=e.attrs,l=this.xmppChatAdapter.getOrCreateContactById(r===Fe.in?o:a);l.addMessage(s),r===Fe.in&&this.xmppChatAdapter.message$.next(l)}return!0}}class N8 extends Error{constructor(e){super(e),this.name="TimeoutError"}}function AT(n,e){const t=function(n){let e;const t=new Promise(r=>{e=setTimeout(r,n)});return t.timeout=e,t}(e);return Promise.race([n.finally(function(){clearTimeout(t.timeout)}),t.then(()=>{throw new N8})])}class k8 extends Ut{constructor(e,t,r){super(),this.xmppChatAdapter=e,this.logService=t,this.ngZone=r,this.pingInterval=6e4,this.xmppChatAdapter.state$.pipe(kt(s=>"online"===s)).subscribe(()=>this.schedulePings()),this.xmppChatAdapter.state$.pipe(kt(s=>"disconnected"===s)).subscribe(()=>this.unschedulePings())}schedulePings(){this.unschedulePings(),this.ngZone.runOutsideAngular(()=>{this.timeoutHandle=window.setInterval(()=>this.ping(),this.pingInterval)})}ping(){return K(this,void 0,void 0,function*(){this.logService.debug("ping...");try{yield AT(this.sendPing(),1e4),this.logService.debug("... pong")}catch(e){"online"===this.xmppChatAdapter.state$.getValue()&&"online"===this.xmppChatAdapter.chatConnectionService.state$.getValue()&&this.logService.error("... pong errored,  connection should be online, waiting for browser websocket timeout")}})}sendPing(){return K(this,void 0,void 0,function*(){return yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"get"},(0,N.Ls)("ping",{xmlns:"urn:xmpp:ping"})))})}unschedulePings(){window.clearInterval(this.timeoutHandle)}}class F8 extends Ut{constructor(e,t){super(),this.xmppChatAdapter=e,this.serviceDiscoveryPlugin=t}register(e,t){return K(this,void 0,void 0,function*(){return t||(t=(yield this.getPushServiceComponent()).jid),yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("enable",{xmlns:"urn:xmpp:push:0",jid:t,node:e})))})}getPushServiceComponent(){return K(this,void 0,void 0,function*(){return yield this.serviceDiscoveryPlugin.findService("pubsub","push")})}unregister(e,t){return K(this,void 0,void 0,function*(){return t||(t=(yield this.getPushServiceComponent()).jid),yield this.xmppChatAdapter.chatConnectionService.sendIq((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("disable",{xmlns:"urn:xmpp:push:0",jid:t,node:e})))})}}class RT extends Ut{constructor(e,t){super(),this.logService=e,this.ngZone=t,this.registered$=new se,this.cleanUp=new se,this.loggedIn$=new se,this.registrationTimeout=5e3}register(e,t,r,s){return K(this,void 0,void 0,function*(){yield this.ngZone.runOutsideAngular(()=>K(this,void 0,void 0,function*(){try{yield AT((()=>K(this,void 0,void 0,function*(){s=s||MT(r),this.logService.debug("registration plugin","connecting..."),yield this.connect(e,t,r,s),this.logService.debug("registration plugin","connection established, starting registration"),yield this.client.iqCaller.request((0,N.Ls)("iq",{type:"get",to:s},(0,N.Ls)("query",{xmlns:"jabber:iq:register"}))),this.logService.debug("registration plugin","server acknowledged registration request, sending credentials"),yield this.client.iqCaller.request((0,N.Ls)("iq",{type:"set"},(0,N.Ls)("query",{xmlns:"jabber:iq:register"},(0,N.Ls)("username",{},e),(0,N.Ls)("password",{},t)))),this.registered$.next(),yield this.loggedIn$.pipe(qo(this.cleanUp),Yn()).toPromise(),this.logService.debug("registration plugin","registration successful")}))(),this.registrationTimeout)}catch(i){throw this.logService.warn("error registering",i),i}finally{this.cleanUp.next(),this.logService.debug("registration plugin","cleaning up"),yield this.client.stop()}}))})}connect(e,t,r,s){return new Promise(i=>(this.client=(0,N.Lp)({domain:s||MT(r),service:r,credentials:o=>K(this,void 0,void 0,function*(){i(),yield this.registered$.pipe(qo(this.cleanUp),Yn()).toPromise(),yield o({username:e,password:t})})}),this.client.reconnect.stop(),this.client.timeout=this.registrationTimeout,this.client.on("online",()=>{this.logService.debug("registration plugin","online event"),this.loggedIn$.next()}),this.client.on("error",o=>{this.logService.error("registration plugin",o)}),this.client.on("offline",()=>{this.logService.debug("registration plugin","offline event")}),this.client.start()))}}let PT=(()=>{class n{constructor(t){this.chatService=t,this.enabled=!1,t.message$.subscribe(r=>{this.receivedDirectMessage(r)}),t.getPlugin(sa).message$.subscribe(r=>K(this,void 0,void 0,function*(){yield this.receivedGroupMessage(r)}))}enable(){this.supportsNotification()&&(this.requestNotificationPermission(),this.enabled=!0)}disable(){this.enabled=!1}requestNotificationPermission(){Notification.requestPermission()}receivedDirectMessage(t){if(this.shouldDisplayNotification()){const r=new Notification(t.name,{body:t.mostRecentMessage.body,icon:t.avatar});r.addEventListener("click",()=>{window.focus(),r.close()})}}receivedGroupMessage(t){return K(this,void 0,void 0,function*(){if(this.shouldDisplayNotification()){const r=t.mostRecentMessage.body,s=t.mostRecentMessage.from,i=yield this.customizeGroupMessage(s,r),o=new Notification(t.name,i);o.addEventListener("click",()=>{window.focus(),o.close()})}})}customizeGroupMessage(t,r){return K(this,void 0,void 0,function*(){return{body:`${t}: ${r}`}})}shouldDisplayNotification(){const t=Notification;return this.enabled&&"hidden"===document.visibilityState&&this.supportsNotification()&&"granted"===t.permission}supportsNotification(){return"Notification"in window}}return n.\u0275fac=function(t){return new(t||n)(z(bn))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),L8=(()=>{class n{static forRoot(){return{ngModule:n,providers:[PT,Xo,Wm,Uc,ea,Xm,bT,{provide:bn,deps:[Xm,Wm,Uc,_m,ea,Xe],useFactory:n.xmppChatAdapter}]}}static xmppChatAdapter(t,r,s,i,o,a){const c=new wT(t,o,s),l=new Gc(c),u=new i8(c,l),d=new R8(c,l,o),h=new sa(c,o,l),f=new ry(c,r,u,d,h),p=new vT(c,o);return c.addPlugins([new A8(u),new Gm(c,l,h,o,p),p,new Hc,h,u,new Od(c,o),l,new F8(c,l),new k8(c,o,a),new RT(o,a),new P8(c),f,new DT(i,l,c,o),new yT(u,c,r,o,d),new lT(c,l),new iT(c,l),d]),c}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({imports:[[cS,SD,V$,S$]]}),n})();var sy=m(4115);let V8=(()=>{class n{constructor(t){this.chatService=t}sendIq(){return K(this,void 0,void 0,function*(){const t=(0,sy.parse)(this.iqRequest);if(t){const r=yield this.chatService.chatConnectionService.sendIq(t);this.iqResponse=(0,sy.stringify)(r,4,1)}})}}return n.\u0275fac=function(t){return new(t||n)($(bn))},n.\u0275cmp=ot({type:n,selectors:[["app-iq"]],decls:9,vars:2,consts:[["rows","10",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,r){1&t&&(E(0,"div"),E(1,"h2"),G(2,"Send custom IQ packets:"),S(),E(3,"textarea",0),J("ngModelChange",function(i){return r.iqRequest=i}),S(),E(4,"button",1),J("click",function(){return r.sendIq()}),G(5,"Send IQ"),S(),E(6,"pre"),E(7,"code"),G(8),S(),S(),S()),2&t&&(L(3),H("ngModel",r.iqRequest),L(5),pt(r.iqResponse))},directives:[xs,Oo,di],styles:[""]}),n})(),j8=(()=>{class n{constructor(t){this.chatService=t}sendStanza(){return K(this,void 0,void 0,function*(){const t=(0,sy.parse)(this.stanza);t&&(yield this.chatService.chatConnectionService.send(t))})}}return n.\u0275fac=function(t){return new(t||n)($(bn))},n.\u0275cmp=ot({type:n,selectors:[["app-send-stanza"]],decls:8,vars:1,consts:[["rows","10",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,r){1&t&&(E(0,"div"),E(1,"h2"),G(2,"Send custom stanza:"),S(),E(3,"textarea",0),J("ngModelChange",function(i){return r.stanza=i}),S(),E(4,"button",1),J("click",function(){return r.sendStanza()}),G(5,"Send stanza"),S(),E(6,"div"),G(7,"Note: responses will not be displayed!"),S(),S()),2&t&&(L(3),H("ngModel",r.stanza))},directives:[xs,Oo,di],styles:[""]}),n})();function B8(n,e){if(1&n){const t=vt();E(0,"div"),E(1,"button",5),J("click",function(){const i=Pe(t).$implicit;return Z(2).selectedRoom=i}),G(2),S(),S()}if(2&n){const t=e.$implicit;L(2),We(" ",t.roomJid.bare().toString()," ")}}function $8(n,e){if(1&n&&(Rt(0),we(1,"ngx-chat-message-list",8),we(2,"ngx-chat-message-input",8),Pt()),2&n){const t=Z(2);L(1),H("recipient",t.selectedRoom),L(1),H("recipient",t.selectedRoom)}}function U8(n,e){1&n&&(E(0,"span"),G(1,"(no room joined yet)"),S())}function H8(n,e){if(1&n&&(E(0,"li"),G(1),S()),2&n){const t=e.$implicit;L(1),We(" ",t," ")}}function q8(n,e){if(1&n&&(E(0,"li"),G(1),E(2,"ul"),re(3,H8,2,1,"li",2),S(),S()),2&n){const t=e.$implicit;L(1),We(" ",t.key,": "),L(2),H("ngForOf",t.value)}}function G8(n,e){if(1&n&&(E(0,"li"),G(1),S()),2&n){const t=e.$implicit;L(1),We(" ",t.jid," ")}}function W8(n,e){if(1&n){const t=vt();E(0,"div"),G(1),E(2,"button",5),J("click",function(){const i=Pe(t).$implicit;return Z(2).joinRoom(i.jid)}),G(3,"join"),S(),E(4,"button",5),J("click",function(){const i=Pe(t).$implicit;return Z(2).subscribeWithMucSub(i.jid)}),G(5,"subscribe with MUC/Sub"),S(),E(6,"button",5),J("click",function(){const i=Pe(t).$implicit;return Z(2).unsubscribeFromMucSub(i.jid)}),G(7,"unsubscribe from MUC/Sub"),S(),E(8,"button",5),J("click",function(){const i=Pe(t).$implicit;return Z(2).destroyRoom(i.jid)}),G(9,"destroy"),S(),S()}if(2&n){const t=e.$implicit;L(1),If(" ",t.name,": ",t.jid," ")}}function z8(n,e){if(1&n){const t=vt();E(0,"button",5),J("click",function(){return Pe(t),Z(2).createNewRoom()}),G(1,"Create new room"),S()}}function Q8(n,e){if(1&n){const t=vt();E(0,"form",9),J("submit",function(){return Pe(t),Z(2).createRoomOnServer()}),E(1,"div",10),E(2,"input",11,12),J("ngModelChange",function(s){return Pe(t),Z(2).newRoom.roomId=s}),S(),E(4,"div",13),G(5," Room id is required "),S(),S(),E(6,"label"),E(7,"input",14),J("ngModelChange",function(s){return Pe(t),Z(2).newRoom.membersOnly=s}),S(),G(8," members only "),S(),we(9,"br"),E(10,"label"),E(11,"input",15),J("ngModelChange",function(s){return Pe(t),Z(2).newRoom.nonAnonymous=s}),S(),G(12," non-anonymous "),S(),we(13,"br"),E(14,"label"),E(15,"input",16),J("ngModelChange",function(s){return Pe(t),Z(2).newRoom.persistentRoom=s}),S(),G(16," persistent "),S(),we(17,"br"),E(18,"label"),E(19,"input",17),J("ngModelChange",function(s){return Pe(t),Z(2).newRoom.public=s}),S(),G(20," public "),S(),we(21,"br"),E(22,"label"),E(23,"input",18),J("ngModelChange",function(s){return Pe(t),Z(2).newRoom.allowSubscription=s}),S(),G(24," allow subscription "),S(),we(25,"br"),E(26,"button",19),G(27,"Create room"),S(),E(28,"button",5),J("click",function(){return Pe(t),Z(2).cancelRoomCreation()}),G(29,"Cancel room creation"),S(),S()}if(2&n){const t=jl(3),r=Z(2);L(2),H("ngModel",r.newRoom.roomId),L(2),H("hidden",t.valid||t.pristine),L(3),H("ngModel",r.newRoom.membersOnly),L(4),H("ngModel",r.newRoom.nonAnonymous),L(4),H("ngModel",r.newRoom.persistentRoom),L(4),H("ngModel",r.newRoom.public),L(4),H("ngModel",r.newRoom.allowSubscription)}}function K8(n,e){if(1&n){const t=vt();E(0,"div"),re(1,B8,3,1,"div",2),Me(2,"async"),re(3,$8,3,2,"ng-container",3),re(4,U8,2,0,"span",3),Me(5,"async"),we(6,"hr"),E(7,"input",4),J("ngModelChange",function(s){return Pe(t),Z().roomJid=s}),S(),E(8,"button",5),J("click",function(){Pe(t);const s=Z();return s.joinRoom(s.roomJid)}),G(9,"Join room"),S(),E(10,"button",5),J("click",function(){Pe(t);const s=Z();return s.subscribeWithMucSub(s.roomJid)}),G(11,"subscribe with MUC/Sub"),S(),E(12,"button",5),J("click",function(){Pe(t);const s=Z();return s.unsubscribeFromMucSub(s.roomJid)}),G(13,"unsubscribe from MUC/Sub"),S(),E(14,"button",5),J("click",function(){return Pe(t),Z().getSubscriptions()}),G(15,"get MUC/Sub subscriptions"),S(),E(16,"div"),G(17),S(),E(18,"ul"),re(19,q8,4,2,"li",2),Me(20,"keyvalue"),S(),we(21,"br"),E(22,"div"),G(23),S(),E(24,"ul"),re(25,G8,2,1,"li",2),S(),we(26,"hr"),E(27,"button",5),J("click",function(){return Pe(t),Z().queryAllRooms()}),G(28,"List all rooms"),S(),re(29,W8,10,2,"div",2),we(30,"hr"),re(31,z8,2,0,"button",6),re(32,Q8,30,7,"form",7),S()}if(2&n){const t=Z();L(1),H("ngForOf",xe(2,11,t.multiUserChatPlugin.rooms$)),L(2),H("ngIf",t.selectedRoom),L(1),H("ngIf",0===xe(5,13,t.multiUserChatPlugin.rooms$).length),L(3),H("ngModel",t.roomJid),L(10),We("Current MUC subscriptions to room: ",t.roomJid,""),L(2),H("ngForOf",xe(20,15,t.mucSubSubscriptions)),L(4),We("Members of room: ",t.roomJid,""),L(2),H("ngForOf",t.roomMemberList),L(4),H("ngForOf",t.allRooms),L(2),H("ngIf",null==t.newRoom),L(1),H("ngIf",null!=t.newRoom)}}function J8(n,e){1&n&&(E(0,"span"),G(1,"You need to be online."),S())}function Y8(n,e){1&n&&(re(0,J8,2,0,"span",3),Me(1,"async")),2&n&&H("ngIf","online"!==xe(1,1,Z().chatService.state$))}let Z8=(()=>{class n{constructor(t){this.chatService=t,this.allRooms=[],this.roomMemberList=[],this.mucSubSubscriptions=new Map,this.multiUserChatPlugin=t.getPlugin(sa),this.mucSubPlugin=t.getPlugin(lT)}joinRoom(t){return K(this,void 0,void 0,function*(){const r=(0,N.kO)(t);this.selectedRoom=yield this.multiUserChatPlugin.joinRoom(r)})}subscribeWithMucSub(t){return K(this,void 0,void 0,function*(){yield this.mucSubPlugin.subscribeRoom(t,[Zo.messages])})}unsubscribeFromMucSub(t){return K(this,void 0,void 0,function*(){yield this.mucSubPlugin.unsubscribeRoom(t)})}getSubscriptions(){return K(this,void 0,void 0,function*(){this.mucSubSubscriptions=yield this.mucSubPlugin.retrieveSubscriptions()})}queryMemberList(t){return K(this,void 0,void 0,function*(){const r=new na((0,N.kO)(t),null).toString();this.roomMemberList=yield this.multiUserChatPlugin.queryMemberList(r)})}destroyRoom(t){return K(this,void 0,void 0,function*(){const r=(0,N.kO)(t);yield this.multiUserChatPlugin.destroyRoom(r),yield this.queryAllRooms()})}queryAllRooms(){return K(this,void 0,void 0,function*(){this.allRooms=yield this.multiUserChatPlugin.queryAllRooms()})}createNewRoom(){this.newRoom={roomId:"",membersOnly:!0,nonAnonymous:!1,persistentRoom:!0,public:!1,allowSubscription:!0}}cancelRoomCreation(){this.newRoom=null}createRoomOnServer(){var t;return K(this,void 0,void 0,function*(){!(null===(t=this.newRoom)||void 0===t?void 0:t.roomId)||""===this.newRoom.roomId||(yield this.multiUserChatPlugin.createRoom(this.newRoom),this.newRoom=void 0)})}}return n.\u0275fac=function(t){return new(t||n)($(bn))},n.\u0275cmp=ot({type:n,selectors:[["app-multi-user-chat"]],decls:8,vars:4,consts:[[4,"ngIf","ngIfElse"],["offline",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","text","placeholder","room",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[3,"click",4,"ngIf"],[3,"submit",4,"ngIf"],[3,"recipient"],[3,"submit"],[1,"form-group"],["name","roomId","type","text","placeholder","Room id","required","required",1,"form-control",3,"ngModel","ngModelChange"],["roomId","ngModel"],[1,"alert","alert-danger",3,"hidden"],["name","membersOnly","type","checkbox",3,"ngModel","ngModelChange"],["name","nonAnonymous","type","checkbox",3,"ngModel","ngModelChange"],["name","persistentRoom","type","checkbox",3,"ngModel","ngModelChange"],["name","public","type","checkbox",3,"ngModel","ngModelChange"],["name","allowSubscription","type","checkbox",3,"ngModel","ngModelChange"],["type","submit"]],template:function(t,r){if(1&t&&(E(0,"div"),E(1,"h2"),G(2,"Chat rooms:"),S(),re(3,K8,33,17,"div",0),Me(4,"async"),we(5,"hr"),re(6,Y8,2,3,"ng-template",null,1,cp),S()),2&t){const s=jl(7);L(3),H("ngIf","online"===xe(4,2,r.chatService.state$))("ngIfElse",s)}},directives:[Pr,No,xs,Oo,di,Wc,Nd,sD,KS,Wu,zu,ug],pipes:[Ms,Jp],styles:["ngx-chat-message-input[_ngcontent-%COMP%]{display:block;border:1px solid #dadada;width:100%;padding:.5em}"]}),n})();function X8(n,e){if(1&n&&(E(0,"div"),E(1,"p"),G(2),S(),S()),2&n){const t=Z();L(2),pt(t.registrationMessage)}}function e5(n,e){if(1&n&&(Rt(0),we(1,"ngx-chat-message-list",17),Me(2,"async"),we(3,"ngx-chat-message-input",18),Me(4,"async"),Pt()),2&n){const t=Z();L(1),H("recipient",xe(2,3,t.chatService.contactsSubscribed$)[0])("showAvatars",!0),L(2),H("recipient",xe(4,5,t.chatService.contactsSubscribed$)[0])}}function t5(n,e){1&n&&G(0,"You need to be logged in and have contacts to see this component")}let n5=(()=>{class n{constructor(t,r,s,i,o){this.chatService=t,this.contactFactory=r,this.logService=s,this.chatListStateService=i;const a=JSON.parse(localStorage.getItem("data"))||{};this.logService.logLevel=os.Debug,this.domain=a.domain,this.service=a.service,this.password=a.password,this.username=a.username,this.chatService.state$.subscribe(c=>this.stateChanged(c)),this.multiUserChatPlugin=this.chatService.getPlugin(sa),this.unreadMessageCountPlugin=this.chatService.getPlugin(ry),o.enable(),window.chatService=t}onLogin(){const t={domain:this.domain,service:this.service,password:this.password,username:this.username};localStorage.setItem("data",JSON.stringify(t)),this.chatService.logIn(t)}onLogout(){this.chatService.logOut()}onRegister(){return K(this,void 0,void 0,function*(){this.registrationMessage="registering ...";try{yield this.chatService.getPlugin(RT).register(this.username,this.password,this.service,this.domain),this.registrationMessage="registration successful"}catch(t){throw this.registrationMessage="registration failed: "+t.toString(),t}})}onAddContact(){this.chatService.addContact(this.otherJid)}onRemoveContact(){this.chatService.removeContact(this.otherJid)}onOpenChat(){this.chatListStateService.openChat(this.chatService.getOrCreateContactById(this.otherJid))}stateChanged(t){return K(this,void 0,void 0,function*(){console.log("state changed!",t)})}onReconnect(){this.chatService.reconnect()}}return n.\u0275fac=function(t){return new(t||n)($(bn),$(Uc),$(ea),$(Xo),$(PT))},n.\u0275cmp=ot({type:n,selectors:[["app-index"]],decls:80,vars:25,consts:[[1,"container"],[1,"form-group"],["name","domain","type","text","placeholder","jabber.example.com",1,"form-control",3,"ngModel","ngModelChange"],["name","service","type","text","placeholder","wss://jabber.example.com:5280/websocket",1,"form-control",3,"ngModel","ngModelChange"],["name","username","type","text","placeholder","test",1,"form-control",3,"ngModel","ngModelChange"],["name","password","type","password","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["name","login",3,"click"],["name","logout",3,"click"],["name","register",3,"click"],["name","reconnect",3,"click"],[4,"ngIf"],["type","text","placeholder","JID",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngIf","ngIfElse"],["messagesComponentInformation",""],["routerLink","/ui"],["rosterState","shown"],[3,"recipient","showAvatars"],[3,"recipient"]],template:function(t,r){if(1&t&&(E(0,"div",0),E(1,"div",1),E(2,"div"),G(3," XMPP domain "),E(4,"small"),G(5,"(e.g. jabber.example.com)"),S(),S(),E(6,"div"),E(7,"input",2),J("ngModelChange",function(i){return r.domain=i}),S(),S(),S(),E(8,"div",1),E(9,"div"),G(10," Host Websocket endpoint "),E(11,"small"),G(12,"(e.g. wss://jabber.example.com:5280/websocket)"),S(),S(),E(13,"div"),E(14,"input",3),J("ngModelChange",function(i){return r.service=i}),S(),S(),S(),E(15,"div",1),E(16,"div"),G(17," Username "),E(18,"small"),G(19,"(e.g. test if test@jabber.example.com is your full JID)"),S(),S(),E(20,"div"),E(21,"input",4),J("ngModelChange",function(i){return r.username=i}),S(),S(),S(),E(22,"div",1),E(23,"div"),G(24," Password "),S(),E(25,"div"),E(26,"input",5),J("ngModelChange",function(i){return r.password=i}),S(),S(),S(),E(27,"div"),E(28,"button",6),J("click",function(){return r.onLogin()}),G(29,"Log in"),S(),E(30,"button",7),J("click",function(){return r.onLogout()}),G(31,"Log out"),S(),E(32,"button",8),J("click",function(){return r.onRegister()}),G(33,"Register"),S(),E(34,"button",9),J("click",function(){return r.onReconnect()}),G(35,"Reconnect"),S(),S(),E(36,"div"),G(37),Me(38,"async"),S(),re(39,X8,3,1,"div",10),we(40,"hr"),E(41,"div",1),E(42,"div"),G(43," Contact Management "),S(),E(44,"div"),E(45,"input",11),J("ngModelChange",function(i){return r.otherJid=i}),S(),S(),S(),E(46,"button",12),J("click",function(){return r.onAddContact()}),G(47,"Add contact"),S(),E(48,"button",12),J("click",function(){return r.onRemoveContact()}),G(49,"Remove contact"),S(),E(50,"button",12),J("click",function(){return r.onOpenChat()}),G(51,"Open chat"),S(),we(52,"hr"),E(53,"button",12),J("click",function(){return r.chatService.enableDebugging=!r.chatService.enableDebugging}),G(54,"Enable debugging"),S(),E(55,"div"),E(56,"h2"),G(57,"Custom component for a chat session"),S(),re(58,e5,5,7,"ng-container",13),Me(59,"async"),Me(60,"async"),re(61,t5,1,0,"ng-template",null,14,cp),S(),we(63,"hr"),we(64,"app-iq"),we(65,"app-send-stanza"),we(66,"app-multi-user-chat"),E(67,"div"),E(68,"h2"),G(69,"Unread messages count:"),S(),G(70),Me(71,"async"),E(72,"pre"),G(73),Me(74,"json"),Me(75,"keyvalue"),Me(76,"async"),S(),S(),E(77,"a",15),G(78,"Show mock chats"),S(),S(),we(79,"ngx-chat",16)),2&t){const s=jl(62);L(7),H("ngModel",r.domain),L(7),H("ngModel",r.service),L(7),H("ngModel",r.username),L(5),H("ngModel",r.password),L(11),We("State: ",xe(38,11,r.chatService.state$),""),L(2),H("ngIf",r.registrationMessage),L(6),H("ngModel",r.otherJid),L(13),H("ngIf","online"===xe(59,13,r.chatService.state$)&&xe(60,15,r.chatService.contactsSubscribed$).length>0)("ngIfElse",s),L(12),We(" Sum unread messages: ",xe(71,17,r.unreadMessageCountPlugin.unreadMessageCountSum$)," "),L(3),pt(xe(74,19,xe(75,21,xe(76,23,r.unreadMessageCountPlugin.jidToUnreadCount$))))}},directives:[xs,Oo,di,Pr,V8,j8,Z8,jc,v8,Wc,Nd],pipes:[Ms,oS,Jp],styles:[""]}),n})(),r5=(()=>{class n{constructor(){this.Direction=Fe,this.MessageState=Zt,this.dummyAvatarContact=zm,this.myJid=(0,N.kO)("me@example.com"),this.otherContactJid=(0,N.kO)("other@example.com")}ngOnInit(){this.contact=new $c(this.otherContactJid.toString(),"chat partner name"),this.room=new na(this.myJid,null),this.add({body:"This is an incoming example message",datetime:new Date("2019-12-22T14:00:00"),direction:Fe.in}),this.add({body:"This is an incoming example message on another day",datetime:new Date("2019-12-24T14:00:00"),direction:Fe.in}),this.add({body:"This is an incoming example message with a really long link https://forum.golem.de/kommentare/wissenschaft/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/oneweb-ist-doch-bald-pleite/137396,5739317,5739317,read.html#msg-5739317 which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:Fe.in}),this.add({body:"This is an incoming example message with a really long link https://forum.golem.de/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/ which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:Fe.in}),this.add({body:"This is an outgoing example message with a really long link https://forum.golem.de/kommentare/wissenschaft/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/oneweb-ist-doch-bald-pleite/137396,5739317,5739317,read.html#msg-5739317 which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:Fe.out}),this.add({body:"This is an outgoing example message with a really long link https://forum.golem.de/satelliten-oneweb-macht-der-astronomie-mehr-sorgen-als-starlink/ which has content after the link",datetime:new Date("2019-12-24T14:00:00"),direction:Fe.out}),this.add({body:"This is an outgoing example message",datetime:new Date("2019-12-24T14:05:01"),direction:Fe.out}),this.add({body:"123",datetime:new Date("2019-12-24T14:05:01"),direction:Fe.out}),this.add({body:"This is an outgoing message with a link to an image https://dummyimage.com/600x400/000/fff and some text after the link",datetime:new Date("2019-12-24T14:05:01"),direction:Fe.out}),this.add({body:"This is an incoming message with a link to an image https://dummyimage.com/600x400/000/fff and some text after the link",datetime:new Date("2019-12-24T14:05:01"),direction:Fe.in}),this.add({body:"Really tall image https://dummyimage.com/600x4000/000/fff",datetime:new Date("2019-12-24T14:05:01"),direction:Fe.in}),this.add({body:"Really wide image https://dummyimage.com/6000x400/000/fff",datetime:new Date("2019-12-24T14:05:01"),direction:Fe.in}),this.add({body:"Rinderkennzeichnungs- und Rindfleischetikettierungs\xfcberwachungsaufgaben\xfcbertragungsgesetz",datetime:new Date("2019-12-24T14:05:01"),direction:Fe.in})}add(t){this.contact.addMessage(Object.assign(Object.assign({},t),{delayed:!1,fromArchive:!1,id:null})),this.room.addMessage(Object.assign(Object.assign({},t),{delayed:!1,fromArchive:!1,from:t.direction===Fe.in?this.otherContactJid:this.myJid}))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ot({type:n,selectors:[["app-ui"]],decls:34,vars:21,consts:[[1,"container"],["routerLink","/"],[1,"example"],[1,"chat-message-list-wrapper"],[3,"recipient","showAvatars"],[1,"chat-message-list-wrapper","simple-message-list"],["formattedDate","2020-06-04 18:35","nick","chat partner",1,"chat-message--out",3,"avatar","direction","messageState"],["formattedDate","2020-06-04 18:36","nick","chat partner",1,"chat-message--out",3,"avatar","direction","messageState"],["formattedDate","2020-06-04 18:37","imageLink","https://dummyimage.com/600x400/000/fff","nick","chat partner",1,"chat-message--out",3,"direction"],[3,"recipient"]],template:function(t,r){1&t&&(E(0,"div",0),E(1,"a",1),G(2,"Back to ngx-chat sample component"),S(),E(3,"div",2),E(4,"p"),G(5,"Default theme (avatars)"),S(),E(6,"div",3),we(7,"ngx-chat-message-list",4),S(),S(),E(8,"div",2),E(9,"p"),G(10,"Default theme (no avatars)"),S(),E(11,"div",3),we(12,"ngx-chat-message-list",4),S(),S(),E(13,"div",2),E(14,"p"),G(15,"Simple chat message component used directly"),S(),E(16,"div",5),E(17,"ngx-chat-message-simple",6),G(18," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),S(),E(19,"ngx-chat-message-simple",6),G(20," sending "),S(),E(21,"ngx-chat-message-simple",6),G(22," sent "),S(),E(23,"ngx-chat-message-simple",6),G(24," recipient received "),S(),E(25,"ngx-chat-message-simple",7),G(26," recipient seen "),S(),E(27,"ngx-chat-message-simple",8),G(28," content goes here "),S(),S(),S(),E(29,"div",2),E(30,"p"),G(31,"Mock for multi user chat room"),S(),E(32,"div",3),we(33,"ngx-chat-message-list",9),S(),S(),S()),2&t&&(L(7),H("recipient",r.contact)("showAvatars",!0),L(5),H("recipient",r.contact)("showAvatars",!1),L(5),H("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.SENDING),L(2),H("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.SENDING),L(2),H("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.SENT),L(2),H("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.RECIPIENT_RECEIVED),L(2),H("avatar",r.dummyAvatarContact)("direction",r.Direction.out)("messageState",r.MessageState.RECIPIENT_SEEN),L(2),H("direction",r.Direction.out),L(6),H("recipient",r.room))},directives:[jc,Wc,ey],styles:[".chat-message-list-wrapper[_ngcontent-%COMP%]{border:1px solid #e3e3e3}.example[_ngcontent-%COMP%]{margin-bottom:2em}.simple-message-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple[_ngcontent-%COMP%]{max-width:76%}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple.chat-message--in[_ngcontent-%COMP%]{align-self:flex-start}.simple-message-list[_ngcontent-%COMP%]   ngx-chat-message-simple.chat-message--out[_ngcontent-%COMP%]{align-self:flex-end}"]}),n})(),s5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n}),n.\u0275inj=wt({imports:[[tT.forRoot([{path:"",component:n5},{path:"ui",component:r5},{path:"**",redirectTo:"/"}],{relativeLinkResolution:"legacy"})],tT]}),n})(),i5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ot({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&we(0,"router-outlet")},directives:[Um],styles:[""]}),n})(),o5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vt({type:n,bootstrap:[i5]}),n.\u0275inj=wt({providers:[],imports:[[cg,SB,L8.forRoot(),SD,s5]]}),n})();(function(){if(aE)throw new Error("Cannot enable prod mode after platform setup.");oE=!1})(),ej().bootstrapModule(o5).catch(n=>console.log(n))},1325:D=>{function A(v,T,w,g,y,I,B){try{var V=v[I](B),O=V.value}catch(R){return void w(R)}V.done?T(O):Promise.resolve(O).then(g,y)}D.exports=function(v){return function(){var T=this,w=arguments;return new Promise(function(g,y){var I=v.apply(T,w);function B(O){A(I,g,y,B,V,"next",O)}function V(O){A(I,g,y,B,V,"throw",O)}B(void 0)})}},D.exports.default=D.exports,D.exports.__esModule=!0},2754:()=>{},6739:()=>{},2993:()=>{}},D=>{D(D.s=776)}]);